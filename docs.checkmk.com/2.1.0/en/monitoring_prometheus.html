<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Prometheus can be integrated into Checkmk to monitor fast-moving container environments.">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Integrating Prometheus">
<meta name="og:description" content="Prometheus can be integrated into Checkmk to monitor fast-moving container environments.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Integrating Prometheus</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.1.0/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.1.0/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.1.0/de/monitoring_prometheus.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.1.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.2.0/en/monitoring_prometheus.html">2.2.0</a><a class="dropdown-item" href="../../latest/en/monitoring_prometheus.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginner’s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and CentOS</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Host and service parameters</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Introduction to notifications</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMWare ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Performance data and graphing</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
<li>
<p><a href="managed.html">The Managed Services Edition</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Configuration via the Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
<li>
<p><a href="web_api.html">Configuration via HTTP-API</a></p>
</li>
<li>
<p><a href="web_api_references.html">Command reference for the HTTP-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_check_plugins.html">Writing your own check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Integrating Prometheus</h1>
<div class="details">
<span id="revdate">Last modified on 30-Dec-2021</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.1.0/en/monitoring_prometheus.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">This page was exported for offline usage on 2025-01-07 22:12:14 +0000. It may not reflect the current state of the Checkmk documentation. To view a daily updated version, visit <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a>.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="https://checkmk.com/integrations">Catalog of Check Plug-ins</a>
<a href="monitoring_kubernetes.html">Monitoring Kubernetes</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__introduction">
<span class="hidden-anchor sr-only" id="_introduction"></span>1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__background_and_motivation">
<span class="hidden-anchor sr-only" id="_background_and_motivation"></span>1.1. Background and motivation</h3>
<div class="paragraph"><p>You may be wondering why you should even integrate Prometheus into Checkmk at all — therefore we would like to make an important note at this point: Our integration of Prometheus is
aimed at all of our users who already use Prometheus. By integrating Prometheus
into Checkmk, we can close the gap that has opened up here so that you do not have to continuously check two monitoring systems.</p></div>
<div class="paragraph"><p>This enables you to correlate the data from the two systems, accelerate any error
analysis and, at the same time, facilitate communication between Checkmk
and Prometheus users.</p></div>
<div class="sect3">
<h4 id="heading__finally_context_again">
<span class="hidden-anchor sr-only" id="_finally_context_again"></span>Finally, context again</h4>
<div class="paragraph"><p>As a most pleasant side benefit of this integration, it is likely that your
metrics from Prometheus automatically receive a meaningful context thanks to Checkmk.
For example, while Prometheus correctly shows you the amount of main memory used,
you do not have to take any extra manual steps in Checkmk to find out how much of
the total available memory this is. As banal as this example may be, it shows at
which points Checkmk makes monitoring easier — even in some of the smallest details.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__exporter_or_promql">
<span class="hidden-anchor sr-only" id="_exporter_or_promql"></span>1.2. Exporter or PromQL</h3>
<div class="paragraph"><p>The integration of the most important exporters for Prometheus is provided via a
<a href="datasource_programs.html#specialagents">special agent</a>. The following
exporters for Prometheus are available:</p></div>
<div class="ulist"><ul>
<li><p><a href="https://checkmk.com/de/integrations?tags=cadvisor" target="_blank">cAdvisor (Container Advisor)</a></p></li>
<li><p><a href="https://github.com/prometheus/node_exporter/blob/master/README.md" target="_blank">node_exporter</a></p></li>
<li><p><a href="https://checkmk.com/check_mk-werks.php?werk_id=10859" target="_blank">kube-state-metrics</a></p></li>
</ul></div>
<div class="paragraph"><p>If we do not yet support the exporter you need, experienced
Prometheus users also have the option of sending self-defined queries to
Prometheus directly via Checkmk. This is performed using Prometheus’ own
<a href="#promQL">query language, PromQL</a>.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__setting_up_the_integration">
<span class="hidden-anchor sr-only" id="_setting_up_the_integration"></span>2. Setting up the integration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__creating_a_host">
<span class="hidden-anchor sr-only" id="_creating_a_host"></span>2.1. Creating a host</h3>
<div class="paragraph"><p>Since the concept of hosts in Prometheus simply doesn’t exist, first create a
place that gathers the desired metrics. This host forms the central point of
contact for the special agent, and this then later distributes the delivered data
to the correct hosts in Checkmk.
To do this, create a new host using the WATO module of the same name.</p></div>
<div class="imageblock"><div class="content"><img src="../images/prometheus_hostname.png" alt="prometheus hostname"></div></div>
<div class="paragraph"><p>If the specified host name does not correspond to an FQDN, enter the IP address
at which the Prometheus server can be reached.</p></div>
<div class="paragraph"><p>Make all other settings for your environment and confirm your selection
with <span class="guihint">Save &amp; go to folder</span>.</p></div>
</div>
<div class="sect2">
<h3 id="heading__create_a_rule_for_the_prometheus_datasource">
<span class="hidden-anchor sr-only" id="_create_a_rule_for_the_prometheus_datasource"></span>2.2. Create a rule for the Prometheus datasource</h3>
<div class="paragraph"><p>Before Checkmk can find metrics from Prometheus, you must first set up the
special agent using the <span class="guihint">Prometheus</span> rule set. You can find this in WATO
via <span class="guihint">Setup &gt; Agents &gt; VM, Cloud, Container &gt; Prometheus</span>.
There are several options for customizing the connection of your Prometheus server’s web frontend, regardless of which exporter you want to use. Please note, only the port option has been available prior to version <span class="new">2.0.0</span>.</p></div>
<div class="ulist"><ul>
<li><p><span class="guihint">Prometheus connection option</span>: Specify here how the Prometheus server should be contacted. Especially if the server is only accessible via HTTPS, the options <span class="guihint">Custom URL</span> or <span class="guihint">Host name</span> are important and useful, since the certificate rarely includes the IP address.</p></li>
<li><p><span class="guihint">Prometheus web port</span>: The port only needs to be changed if it differs from the Prometheus server default.</p></li>
<li><p><span class="guihint">Basic authentication</span>: If a login is required, specify it here.</p></li>
<li><p><span class="guihint">Protocol</span>: After installation the web frontend is provided via HTTP. If you have secured the access with HTTPS, change the protocol here accordingly.</p></li>
</ul></div>
<div class="paragraph"><p>You can see the default values in the following screenshot:</p></div>
<div class="imageblock"><div class="content"><img src="../images/prometheus_connection_details.png" alt="prometheus connection details"></div></div>
<div class="sect3">
<h4 id="heading_node_exporter">
<span class="hidden-anchor sr-only" id="node_exporter"></span>Integration using Node Exporter</h4>
<div class="paragraph"><p>If, for example, you now want to integrate the hardware components of a
so-called <em>Scrape Target</em> from Prometheus, use the so-called Node Exporter.
Select <span class="guihint">Add new Scrape Target</span>, and from the dropdown menu that opens,
select <span class="guihint">Node Exporter</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/prometheus_ruleset_exporter.png" alt="prometheus ruleset exporter"></div></div>
<div class="paragraph"><p>Furthermore, here you can select which hardware or which operating system instances are to be queried by the Node Exporter.
The services created in this way use the same check plug-ins as are used for other Linux hosts.
This means that their behavior is identical to those already familiar,
so without needing to adapt to something new you can quickly configure
thresholds, or work with graphs.</p></div>
<div class="paragraph"><p>Normally the agent will try to
automatically assign the data to the hosts in Checkmk, and likewise also for the host in Checkmk that fetches the data.
However, if in the data from the Prometheus server neither the IP address, the FQDN, nor localhost are present, use the <span class="guihint">Explicitly map Node Exporter host</span> option to specify which host from the Prometheus server data is to be assigned to the Prometheus host in Checkmk.</p></div>
</div>
<div class="sect3">
<h4 id="heading_cadvisor">
<span class="hidden-anchor sr-only" id="cadvisor"></span>Integration using cAdvisor</h4>
<div class="paragraph"><p>The cAdvisor exporter enables the monitoring of Docker environments, and returns
metrics on usage and performance data.</p></div>
<div class="paragraph"><p>Via the selection menu <span class="guihint">Entity level used to create Checkmk piggyback hosts</span>
you can determine whether and how the data from Prometheus should be collected in
an ready-aggregated form. You can choose from the following three options:</p></div>
<div class="ulist"><ul>
<li><p><span class="guihint">Both - Display the information for both pod and container levels</span></p></li>
<li><p><span class="guihint">Container - Display the information on container level</span></p></li>
<li><p><span class="guihint">Pod - Display the information for pod level</span></p></li>
</ul></div>
<div class="paragraph"><p>Select either <span class="guihint">Both</span> or <span class="guihint">Container</span>, and also define the name under which
hosts are created for your containers. The following three options are available
for the naming. The option <span class="guihint">Short</span> is the default:</p></div>
<div class="ulist"><ul>
<li><p><span class="guihint">Short - Use the first 12 characters of the docker container ID</span></p></li>
<li><p><span class="guihint">Long - Use the full docker container ID</span></p></li>
<li><p><span class="guihint">Name - Use the container’s name</span></p></li>
</ul></div>
<div class="imageblock"><div class="content"><img src="../images/prometheus_cadvisor_names.png" alt="prometheus cadvisor names"></div></div>
<div class="paragraph"><p>Please note that your selection here affects the automatic creation and deletion
of hosts according to your
<a href="#dcd_cadvisor">dynamic host configuration</a>.</p></div>
<div class="paragraph"><p>To be able to limit the number of monitored objects, with <span class="guihint">Monitor namespaces matching</span> you have the option of limiting the number of monitored objects.
All namespaces which are not covered by the regular expressions will accordingly be ignored.</p></div>
</div>
<div class="sect3">
<h4 id="heading_kube_state_metrics">
<span class="hidden-anchor sr-only" id="kube_state_metrics"></span>Integration using kube-state-metrics</h4>
<div class="paragraph"><p>Within a Kubernetes cluster, deployments, nodes and pods can be queried with
the kube-state-metrics exporter. The mechanics here are largely the same as for
the <a href="#node_exporter">Node Exporter</a>, or the
<a href="#cadvisor">cAdvisor</a> described above:
You select the metrics that you want to monitor.
Only by using the <span class="guihint">Cluster name</span> field can you determine the name of the host
under which the data for a cluster should be displayed.</p></div>
</div>
<div class="sect3">
<h4 id="heading_promQL">
<span class="hidden-anchor sr-only" id="promQL"></span>Integration via PromQL</h4>
<div class="paragraph"><p>As already mentioned, with the help of the special agent it is also possible to
send requests to your Prometheus servers via PromQL. Enter the port via which Prometheus can
be reached, and select <span class="guihint">Service creation using PromQL queries &gt; Add new Service</span>.
Use the Service Name field to determine what the new service should be called in Checkmk.</p></div>
<div class="paragraph"><p>Next, select <span class="guihint">Add new PromQL query</span> and use the <span class="guihint">Metric label</span> field to
specify the name of the metric to be imported into Checkmk.
Now enter your query in the field <span class="guihint">PromQL query</span>. It is important that this
query may only return a <strong>single</strong> value.</p></div>
<div class="imageblock"><div class="content"><img src="../images/prometheus_ruleset_promql.png" alt="prometheus ruleset promql"></div></div>
<div class="paragraph"><p>In this example, Prometheus is queried about the number of running and blocked
processes. In Checkmk these processes and the two metrics — <span class="guihint">Running</span> and
<span class="guihint">Blocked</span> — are then combined in a service called <span class="guihint">Processes</span>.</p></div>
<div class="paragraph"><p>From version <span class="new">2.0.0</span> you can also assign thresholds to these metrics.
To do this, activate <span class="guihint">Metric levels</span> and then
choose between <span class="guihint">Lower levels</span> or <span class="guihint">Upper levels</span>.
Note that these always specify floating point numbers,
but of course they also refer to metrics that return integers only.</p></div>
</div>
<div class="sect3">
<h4 id="heading__assigning_a_rule_to_the_prometheus_host">
<span class="hidden-anchor sr-only" id="_assigning_a_rule_to_the_prometheus_host"></span>Assigning a rule to the Prometheus host</h4>
<div class="paragraph"><p>Assign this rule explicitly to the host you just created,
and confirm your entries with <span class="guihint">Save</span>.</p></div>
<div class="imageblock"><div class="content"><img src="../images/prometheus_ruleset_explicit_host.png" alt="prometheus ruleset explicit host"></div></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__service_discovery">
<span class="hidden-anchor sr-only" id="_service_discovery"></span>2.3. Service Discovery</h3>
<div class="paragraph"><p>Now that you have configured the special agent, it is time to run a
<a href="hosts_setup.html#services">service discovery</a> on the Prometheus host.</p></div>
<div class="imageblock"><div class="content"><img src="../images/prometheus_discovery.png" alt="prometheus discovery"></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_dcd">
<span class="hidden-anchor sr-only" id="dcd"></span>3. Dynamic host configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__general_configuration">
<span class="hidden-anchor sr-only" id="_general_configuration"></span>3.1. General configuration</h3>
<div class="paragraph"><p>Monitoring Kubernetes clusters is probably one of the most common tasks that
Prometheus performs. In order to ensure the integration of the sometimes very
short-lived containers, which are orchestrated by Kubernetes and monitored with
Prometheus — also in Checkmk without great effort — it is advisable to set up a
<a href="dcd.html">dynamic host configuration</a>.
The data from the individual containers is forwarded as piggyback data to Checkmk.</p></div>
<div class="paragraph"><p>Simply create a new connection using <span class="guihint">WATO &gt; Hosts &gt; Dynamic config &gt; New connection</span>,
select <span class="guihint">Piggyback data</span> as the connector type, and use <span class="guihint">Add new element</span> to
define the conditions under which new hosts should be created dynamically.</p></div>
<div class="paragraph"><p>Please also note whether it is necessary for your environment to dynamically
delete hosts again when no more data arrives at Checkmk via the Piggyback mechanism.
Set the option <span class="guihint">Delete vanished hosts</span> accordingly.</p></div>
</div>
<div class="sect2">
<h3 id="heading_dcd_cadvisor">
<span class="hidden-anchor sr-only" id="dcd_cadvisor"></span>3.2. Special feature in interactions with cAdvisor</h3>
<div class="paragraph"><p>Containers usually receive a new ID when they are restarted.
In Checkmk the metrics from the host with the old ID are not automatically
transferred to the new ID. In most cases, that wouldn’t make any sense.
In the case of containers, however, this can be very useful, as seen in the
example above. If a container is only restarted, you probably do not want to
lose its history. To achieve this, do not create the containers under their ID,
but instead under their name (option <span class="guihint">Name - Use the container’s name</span> in the
<a href="#cadvisor">Prometheus rule</a>).
In this way, with the <span class="guihint">Delete vanished hosts</span> option in the dynamic host
configuration you can still delete containers that no longer exist,
without having to fear that their history will also be lost.
Instead, this will be continued — by the use of the identical container
name — even if it is actually a different container which uses the same name.</p></div>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li>
<a href="#_introduction">1. Introduction</a><ul class="sectlevel1">
<li>
<a href="#_background_and_motivation">1.1. Background and motivation</a><ul class="sectlevel2"><li><a href="#_finally_context_again">Finally, context again</a></li></ul>
</li>
<li><a href="#_exporter_or_promql">1.2. Exporter or PromQL</a></li>
</ul>
</li>
<li>
<a href="#_setting_up_the_integration">2. Setting up the integration</a><ul class="sectlevel1">
<li><a href="#_creating_a_host">2.1. Creating a host</a></li>
<li>
<a href="#_create_a_rule_for_the_prometheus_datasource">2.2. Create a rule for the Prometheus datasource</a><ul class="sectlevel2">
<li><a href="#node_exporter">Integration using Node Exporter</a></li>
<li><a href="#cadvisor">Integration using cAdvisor</a></li>
<li><a href="#kube_state_metrics">Integration using kube-state-metrics</a></li>
<li><a href="#promQL">Integration via PromQL</a></li>
<li><a href="#_assigning_a_rule_to_the_prometheus_host">Assigning a rule to the Prometheus host</a></li>
</ul>
</li>
<li><a href="#_service_discovery">2.3. Service Discovery</a></li>
</ul>
</li>
<li>
<a href="#dcd">3. Dynamic host configuration</a><ul class="sectlevel1">
<li><a href="#_general_configuration">3.1. General configuration</a></li>
<li><a href="#dcd_cadvisor">3.2. Special feature in interactions with cAdvisor</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
