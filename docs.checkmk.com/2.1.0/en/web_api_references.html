<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="This article describes all options to configure Checkmk via HTTP-API (or Web-API) and thus extends the introductory article on Web-API.">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Command reference for the HTTP-API">
<meta name="og:description" content="This article describes all options to configure Checkmk via HTTP-API (or Web-API) and thus extends the introductory article on Web-API.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Command reference for the HTTP-API</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.1.0/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.1.0/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.1.0/de/web_api_references.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.1.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.2.0/en/web_api_references.html">2.2.0</a><a class="dropdown-item" href="../../latest/en/web_api_references.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginner’s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and CentOS</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Host and service parameters</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Introduction to notifications</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMWare ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Performance data and graphing</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
<li>
<p><a href="managed.html">The Managed Services Edition</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Configuration via the Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
<li>
<p><a href="web_api.html">Configuration via HTTP-API</a></p>
</li>
<li>
<p><a href="web_api_references.html">Command reference for the HTTP-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_check_plugins.html">Writing your own check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Command reference for the HTTP-API</h1>
<div class="details">
<span id="revdate">draft</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.1.0/en/web_api_references.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">This page was exported for offline usage on 2025-01-07 22:12:14 +0000. It may not reflect the current state of the Checkmk documentation. To view a daily updated version, visit <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a>.</div>
<div class="sectionbody">
<div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="web_api.html">Configuration via HTTP-API</a>
<a href="cmk_commandline.html">Checkmk on the command line</a>
<a href="livestatus.html">Retrieving status data via Livestatus</a>
</div>
</div>
</div>
<div class="paragraph"><p><strong>Important:</strong> <em>The Web-API (also called HTTP-API) is deprecated and will be removed in the next Checkmk version <span class="new">2.2.0</span>. The Web-API will be replaced by the <a href="rest_api.html">REST API</a>. For more information, see the <a href="update_major.html#rest-api">update to version <span class="new">2.1.0</span></a> article.</em></p></div>
<div class="paragraph"><p>This article contains a description of every command available in the Web-API.
A general knowledge of the API’s syntax and other requirements as described in
the <a href="web_api.html">main article</a> will be assumed.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_activate_changes">
<span class="hidden-anchor sr-only" id="activate_changes"></span>1. Activating changes</h2>
<div class="sectionbody">
<div class="paragraph"><p>All changes made to the Checkmk-Server can be activated with the
<code>activate_changes</code> command. In the <code>request</code>-part you are allowed to add several options:</p></div>
<div class="ulist"><ul>
<li><p><code>mode</code>: With this option you can decide that only a list of sites should be activated. In this case you set <code>specific</code> as a value.</p></li>
<li><p><code>sites</code>: If you changed the <code>mode</code> to <code>specific</code>, here you need to specify which sites should be activated.</p></li>
<li><p><code>allow_foreign_changes</code>: It is sometimes the case that other users also added changes at the same time. With this option you can define explicitly indicate that you also want to activate them. Pass the value <code>1</code> for this. If you specify <code>0</code> here instead, the changes will only be activated if there are no changes made by other users. If there are changes by other users though, the activation will not be carried out.</p></li>
<li><p><code>comment</code>: Add a comment to your activation in the same way as in the web interface.</p></li>
</ul></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{"mode": "dirty",</span>
<span class="tok-go"> "sites": [ "central", "remote1", "remote2" ],</span>
<span class="tok-go"> "allow_foreign_changes": "0",</span>
<span class="tok-go"> "comment: "Änderungen aus der WebAPI."}</span></code></pre></div></div>
<div class="paragraph"><p>Such a command can look like this, for example:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?_secret=myautomationsecret&amp;_username=automation&amp;action=activate_changes"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"sites":["mysite"],"allow_foreign_changes":"0"}'</span>
<span class="tok-go">{"result": {"sites": {"mysite": {"_time_updated": 1507118620.897177, "_status_details": "Started at: 14:03:33. Finished at: 14:03:40.", "_phase": "done", "_status_text": "Success", "_pid": 10633, "_state": "success", "_time_ended": 1507118620.897177, "_expected_duration": 10.0, "_time_started": 1507118613.630956, "_site_id": "mysite", "_warnings": []}}}, "result_code": 0}</span></code></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_hosts">
<span class="hidden-anchor sr-only" id="hosts"></span>2. Host commands</h2>
<div class="sectionbody">
<div class="paragraph"><p>For hosts, the following commands can be executed in the API:</p></div>
<div class="ulist"><ul>
<li><p><code>get_host</code></p></li>
<li><p><code>add_host</code></p></li>
<li><p><code>edit_host</code></p></li>
<li><p><code>delete_host</code></p></li>
<li><p><code>delete_hosts</code></p></li>
<li><p><code>get_all_hosts</code></p></li>
<li><p><code>discover_services</code></p></li>
</ul></div>
<div class="sect2">
<h3 id="heading_get_host">
<span class="hidden-anchor sr-only" id="get_host"></span>2.1. get_host</h3>
<div class="paragraph"><p>This command can be used to call up an individual host’s configuration.
For this only the name of the host to be called up is needed. In the example
below the output is in a format conveniently readable for humans.
In practice the output will always be in a single line:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_host&amp;_username=automation&amp;_secret=myautomationsecret&amp;output_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myserver123"}'</span>
<span class="tok-go">{'result': {'attributes': {'alias': u'someAlias', 'tag_agent': 'cmk-agent', 'tag_criticality': 'prod', 'management_address': '192.168.1.42', 'contactgroups': {'use_for_services': False, 'recurse_perms': False, 'recurse_use': False, 'use': True, 'groups': ['ad_admins']}, 'management_protocol': 'snmp', 'ipaddress': '192.168.0.42', 'site': 'prod', 'tag_address_family': 'ip-v4-only', 'management_snmp_community': 'public'}, 'hostname': 'myserver123', 'path': ''}, 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>Structured readably, the output can look like this:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result':</span>
<span class="tok-go">    {'attributes': {</span>
<span class="tok-go">        'alias': u'My Server Alias',</span>
<span class="tok-go">                    'contactgroups': {'groups': ['ad_admins'],</span>
<span class="tok-go">                                      'recurse_perms': False,</span>
<span class="tok-go">                                      'recurse_use': False,</span>
<span class="tok-go">                                      'use': True,</span>
<span class="tok-go">                                      'use_for_services': False},</span>
<span class="tok-go">                    'ipaddress': '192.168.0.42',</span>
<span class="tok-go">                    'management_address': '192.168.1.42',</span>
<span class="tok-go">                    'management_protocol': 'snmp',</span>
<span class="tok-go">                    'management_snmp_community': 'public',</span>
<span class="tok-go">                    'site': 'prod',</span>
<span class="tok-go">                    'tag_address_family': 'ip-v4-only',</span>
<span class="tok-go">                    'tag_agent': 'cmk-agent',</span>
<span class="tok-go">                    'tag_criticality': 'prod'},</span>
<span class="tok-go">     'hostname': 'myserver123',</span>
<span class="tok-go">     'path': ''}</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>Note that in the response only the fields explicitly defined for the host in <a href="user_interface.html">Setup</a>
will be output. Values which include the defaults, or values inherited from a
directory will not be output here. A response containing only the explicitly defined
fields will therefore look like this:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result':</span>
<span class="tok-go">    {'attributes': {},</span>
<span class="tok-go">     'hostname': 'myserver123',</span>
<span class="tok-go">     'path': ''},</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph" id="effective_attributes"><p>This behaviour can be altered by passing the <code>effective_attributes</code>
parameter and setting it to ‘1’. The output will then include all attributes
– these are not listed again in the example:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_host&amp;_username=automation&amp;_secret=myautomationsecret&amp;effective_attributes=1&amp;output_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myserver123"}'</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_add_host">
<span class="hidden-anchor sr-only" id="add_host"></span>2.2. add_host</h3>
<div class="paragraph"><p>To add a host, the command must specify at least the host name and the directory.
Should the host be located in the home directory simply set two empty quotes (‘’).
Optionally the attributes – if available – can be set, nodes specified if a cluster
host is to be created, or the automatic creation of directories can be suppressed.
For the attributes you can use the output from the <code>get_host</code> as a reference,
so that the configuration can look like below, for example:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'hostname': 'myserver123',</span>
<span class="tok-go"> 'folder': 'munich/network',</span>
<span class="tok-go"> 'attributes': {'ipaddress': '192.168.0.42',</span>
<span class="tok-go">                'site': 'prod',</span>
<span class="tok-go">                'tag_agent': 'cmk-agent'},</span>
<span class="tok-go"> 'create_folders': '0'}</span></code></pre></div></div>
<div class="paragraph"><p>The command will then be processed as usual. In the example, with the
<code>create_folders</code> option, the creation of new directories will be suppressed.
If nothing is specified it will be assumed that the creation of currently
non-existent directories is allowed.
The attributes will be listed in braces ({}) (as <em>Dictionary</em>).
Host tags can also be set here. To access these take the tag-group’s ID and
specify a <code>tag_</code> as a prefix.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=add_host&amp;_username=automation&amp;_secret=myautomationsecret&amp;request_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myserver123","folder":"munich/network","attributes":{"ipaddress":"192.168.0.42","site":"prod","tag_agent":"cmk-agent"},"create_folders":"0"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_edit_host">
<span class="hidden-anchor sr-only" id="edit_host"></span>2.3. edit_host</h3>
<div class="paragraph"><p>With this command a host’s attributes can be customised, or reset to its
standard values with <code>unset_attributes</code>.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'hostname': 'myserver123',</span>
<span class="tok-go"> 'unset_attributes': [ 'site', 'alias' ],</span>
<span class="tok-go"> 'attributes': {'parents': [ 'myRouter1', 'myRouter2' ],</span>
<span class="tok-go">                'tag_agent': 'cmk-agent'}</span>
<span class="tok-go">}</span></code></pre></div></div>
<div class="paragraph"><p>Only the host name is obligatory here. Note that the attribute
to be reset should be specified in a list.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=edit_host&amp;_username=automation&amp;_secret=myautomationsecret&amp;request_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myserver123","unset_attributes":["site","alias"],"attributes":{"parents":["myRouter1","myRouter2"],"tag_agent":"cmk-agent"}}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_delete_host">
<span class="hidden-anchor sr-only" id="delete_host"></span>2.4. delete_host</h3>
<div class="paragraph"><p>To delete a host only the host’s name is required in the request-part
since it must always be explicit in Checkmk:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=delete_host&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myserver123"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_delete_hosts">
<span class="hidden-anchor sr-only" id="delete_hosts"></span>2.5. delete_hosts</h3>
<div class="paragraph"><p>From Version <span class="new">1.5.0</span> you can use this command to delete more than one host at a time. You should be careful to spell the command correctly. The hosts will be delivered as a list:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=delete_hosts&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostnames":["myserver123","myserver234"]}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_get_all_hosts">
<span class="hidden-anchor sr-only" id="get_all_hosts"></span>2.6. get_all_hosts</h3>
<div class="paragraph"><p>This command is the only one for the hosts which requires no additional data
to be entered. It simply outputs the info for all of the hosts in Checkmk.
Likewise as with <a href="#get_host"><code>get_host</code></a> — in this command it can
also be specified whether only the explicitly-coded, or
<a href="#effective_attributes">all attributes</a> should be output.
Note that under some circumstances a very comprehensive response can be produced.
For this reason the response’s output will be omitted from the example here.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_all_hosts&amp;_username=automation&amp;_secret=myautomationsecret&amp;output_format=pythyon"</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_discover_services">
<span class="hidden-anchor sr-only" id="discover_services"></span>2.7. discover_services</h3>
<div class="paragraph"><p>With this command all of a host’s services can be discovered and added.
The syntax of the <code>request</code> command is the same as for <code>get_host</code>,
however a summary of the results will be output with the response:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=discover_services&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myserver123"}'</span>
<span class="tok-go">{'result': 'Service discovery successful. Added 7, Removed 0, Kept 52, New Count 59', 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>Additionally – as in <span class="guihint">Setup</span> – using <code>mode</code> it can be specified how
to handle the newly-discovered and the already configured services.
The possible options are:</p></div>
<div class="ulist"><ul>
<li><p><code>new</code>: Only add new services. This is the default setting when no options are entered.</p></li>
<li><p><code>remove</code>: Removes only services that are no longer available.</p></li>
<li><p><code>fixall</code>: Removes services that are no longer available, and adds new ones.</p></li>
<li><p><code>refresh</code>: Removes all services, and then adds all services as new.</p></li>
</ul></div>
<div class="paragraph"><p>The parameter will then be additionally passed with the host names:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=discover_services&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myserver123","mode":"refresh"}'</span>
<span class="tok-go">{"result": "Service discovery successful. Added 6, Removed 5, Kept 48, New Count 54", "result_code": 0}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__directory_commands">
<span class="hidden-anchor sr-only" id="_directory_commands"></span>3. Directory commands</h2>
<div class="sectionbody">
<div class="paragraph"><p>From Version <span class="new">1.5.0</span> Checkmk provides the following commands
for managing the directories in <span class="guihint">Setup</span>:</p></div>
<div class="ulist"><ul>
<li><p><code>get_folder</code></p></li>
<li><p><code>add_folder</code></p></li>
<li><p><code>edit_folder</code></p></li>
<li><p><code>delete_folder</code></p></li>
<li><p><code>get_all_folders</code></p></li>
</ul></div>
<div class="sect2">
<h3 id="heading_get_folder">
<span class="hidden-anchor sr-only" id="get_folder"></span>3.1. get_folder</h3>
<div class="paragraph"><p>Querying the configuration of a directory is not much different from
that for a <a href="#get_host">host</a>. Enter the name of the directory, and
<a href="#effective_attributes">all attributes</a> where applicable will be output.
In the example the <code>output_format</code> will be converted to Python,
and all of the directory’s attributes will be output. Note that in the response
all tuples will be converted to lists if the output is formatted in JSON.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_folder&amp;_username=automation&amp;_secret=myautomationsecret&amp;output_format=python&amp;effective_attributes=1"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"folder":"munich/network"}'</span>
<span class="tok-go">{'result': {'attributes': {'network_scan': {'scan_interval': 86400, 'exclude_ranges': [], 'run_as': u'automation', 'ip_ranges': [], 'time_allowed': 0, 0), (24, 0}, 'tag_agent': 'cmk-agent', 'snmp_community': None, 'ipv6address': '', 'alias': '', 'management_protocol': None, 'site': 'heute', 'tag_room': 'weisses_haus', 'tag_criticality': 'prod', 'contactgroups': (True, []), 'network_scan_result': {'start': None, 'state': None, 'end': None, 'output': ''}, 'parents': ['heute'], 'tag_address_family': 'ip-v4-only', 'management_address': '', 'tag_networking': 'lan', 'ipaddress': '', 'management_snmp_community': None}, 'configuration_hash': '7001db7f20eee1cae51f9c696cddff42'}, 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>As can be seen in the example, a directory must always be specified relative
to the home directory since the path is always unique, but not the name.</p></div>
<div class="paragraph"><p>The (readable) response will then appear like this (since some of the information
delivered is not relevant here, the example shown has been abbreviated for clarity):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'attributes': {'alias': '',</span>
<span class="tok-go">                           'contactgroups': (True, []),</span>
<span class="tok-go">                           'network_scan': {'exclude_ranges': [],</span>
<span class="tok-go">                                            'ip_ranges': [],</span>
<span class="tok-go">                                            'run_as': u'automation',</span>
<span class="tok-go">                                            'scan_interval': 86400,</span>
<span class="tok-go">                                            'time_allowed': 0, 0),</span> <span class="tok-go">                                                             (24, 0},</span>
<span class="tok-go">                           'network_scan_result': {'end': None,</span>
<span class="tok-go">                                                   'output': '',</span>
<span class="tok-go">                                                   'start': None,</span>
<span class="tok-go">                                                   'state': None},</span>
<span class="tok-go">                           'parents': [],</span>
<span class="tok-go">                           'site': 'prod',</span>
<span class="tok-go">                           'snmp_community': None,</span>
<span class="tok-go">                           'tag_address_family': 'ip-v4-only',</span>
<span class="tok-go">                           'tag_agent': 'cmk-agent',</span>
<span class="tok-go">                           'tag_criticality': 'prod',</span>
<span class="tok-go">                           'tag_networking': 'lan'},</span>
<span class="tok-go">            'configuration_hash': '7001db7f20eee1cae51f9c696cddff42'}</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>The ‘alias’ attribute will always be empty in the output – since directories
are only created once and never internally renamed, via this attribute the
display name in <span class="guihint">Setup</span> can subsequently be customised. Note then that the name in
<span class="guihint">Setup</span> must not necessarily match the real name!</p></div>
<div class="paragraph"><p>The <code>configuration_hash</code> can be used if the directory must be <a href="#edit_folder">modified</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_add_folder">
<span class="hidden-anchor sr-only" id="add_folder"></span>3.2. add_folder</h3>
<div class="paragraph"><p>The insertion of directories also works in a similar way to that for
<a href="#get_host">hosts</a>. As a minimum the name and the attribute will be required.
The latter can also be blank as in the example below:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=add_folder&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"folder":"munich/network/router","attributes":{}}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
<div class="paragraph"><p>As can be seen, the path here is likewise always specified relative to the
home directory. If a parent directory is not present one will be created.
This action can be suppressed if – in a similar way to
<a href="#add_host"><code>add_host</code></a> – the <code>create_parent_folders</code>
option is added and set to ‘0’.</p></div>
</div>
<div class="sect2">
<h3 id="heading_edit_folder">
<span class="hidden-anchor sr-only" id="edit_folder"></span>3.3. edit_folder</h3>
<div class="paragraph"><p>To be able to edit a directory, as a minimum its name will be required.
Additionally, the attributes described in <a href="#get_folder"><code>get_folder</code></a>
can be customised. With the optional <code>configuration_hash</code> it can be ensured
that the directory’s configuration will in the interim not be altered.
If the hash is not identical Checkmk will not alter the directory.
In the example the result from <code>get_folder</code> can be used in order to
customise the configuration. Make sure to use Python as the <code>request_format</code>,
since tuples can be present in the settings for the network scan:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=add_folder&amp;_username=automation&amp;_secret=myautomationsecret&amp;request_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"folder":"munich/network","attributes":{"network_scan":{"time_allowed":"18,0),(24,0"}},"configuration_hash":"7001db7f20eee1cae51f9c696cddff42"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_delete_folder">
<span class="hidden-anchor sr-only" id="delete_folder"></span>3.4. delete_folder</h3>
<div class="paragraph"><p>Deleting a directory is very easy. Simply enter its name. As always for
directories that will be its relative path:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=delete_folder&amp;_username=automation&amp;_secret=myautomationsecret -d 'request={"</span>folder<span class="tok-s2">":"</span>munich/network<span class="tok-s2">"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_get_all_folders">
<span class="hidden-anchor sr-only" id="get_all_folders"></span>3.5. get_all_folders</h3>
<div class="paragraph"><p>Equally easy is the output of all directories. This is done in a similar way
to <a href="#get_all_hosts"><code>get_all_hosts</code></a>. Note that the output
format should be Python as with <a href="#get_folder"><code>get_folder</code></a>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_all_folders&amp;_username=automation&amp;_secret=myautomationsecret&amp;output_format=python"</span>
<span class="tok-go">{'result': {'': {}, 'munich/windows': {}, 'munich/network': {'network_scan': {'run_as': 'automation', 'exclude_ranges': [], 'ip_ranges': [('ip_network', ('192.168.20.0', 24))], 'scan_interval': 86400, 'time_allowed': 20, 0), (24, 0}, 'tag_agent': 'snmp-only'}, 'munich': {}, 'berlin': {'tag_networking': 'dmz'}, 'berlin/databases': {'tag_criticality': 'critical'}, 'essen': {'tag_networking': 'wan'}, 'essen/linux': {}}, 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>The output (in a readable form) looks like below. It differs from the query of
an individual directory only in detail. The top line with the empty name field
is the main directory.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'': {},</span>
<span class="tok-go">            'berlin': {'tag_networking': 'dmz'},</span>
<span class="tok-go">            'berlin/databases': {'tag_criticality': 'critical'},</span>
<span class="tok-go">            'essen': {'tag_networking': 'wan'},</span>
<span class="tok-go">            'essen/linux': {},</span>
<span class="tok-go">            'munich': {},</span>
<span class="tok-go">            'munich/network': {'network_scan': {'exclude_ranges': [],</span>
<span class="tok-go">                                                'ip_ranges': [('ip_network',</span>
<span class="tok-go">                                                               ('192.168.20.0',</span>
<span class="tok-go">                                                                24))],</span>
<span class="tok-go">                                                'run_as': 'automation',</span>
<span class="tok-go">                                                'scan_interval': 86400,</span>
<span class="tok-go">                                                'time_allowed': 20, 0),</span> <span class="tok-go">                                                                 (24, 0},</span>
<span class="tok-go">                               'tag_agent': 'snmp-only'},</span>
<span class="tok-go">            'munich/windows': {}},</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__group_commands">
<span class="hidden-anchor sr-only" id="_group_commands"></span>4. Group commands</h2>
<div class="sectionbody">
<div class="paragraph"><p>With the Web-API, contact, host and service groups can be created,
edited, deleted and of course also queried in Checkmk. The following commands are available
for these tasks:</p></div>
<div class="ulist"><ul>
<li><p><code>add_contactgroup</code></p></li>
<li><p><code>edit_contactgroup</code></p></li>
<li><p><code>delete_contactgroup</code></p></li>
<li><p><code>get_all_contactgroups</code></p></li>
<li><p><code>add_servicegroup</code></p></li>
<li><p><code>edit_servicegroup</code></p></li>
<li><p><code>delete_servicegroup</code></p></li>
<li><p><code>get_all_servicegroups</code></p></li>
<li><p><code>add_hostgroup</code></p></li>
<li><p><code>edit_hostgroup</code></p></li>
<li><p><code>delete_hostgroup</code></p></li>
<li><p><code>get_all_hostgroups</code></p></li>
</ul></div>
<div class="paragraph"><p>The command syntax is the same for the different types of groups.
Only the command will be matched as appropriate to each group.
For this reason each command type will only be explained once.
The examples can then be carried-over for both of the other types of group.
To make this clearer, different groups will be used in each of the examples.</p></div>
<div class="paragraph"><p><strong>Important</strong>: All commands must always include the group type.
If the subject is <code>add_group</code> and a host group is to be added,
the required command is <code>add_hostgroup</code>.</p></div>
<div class="sect2">
<h3 id="heading_get_all_groups">
<span class="hidden-anchor sr-only" id="get_all_groups"></span>4.1. get_all_groups</h3>
<div class="paragraph"><p>This command – like other similar commands – will be invoked without extra parameters.
The response will contain all groups with their names and aliases:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_all_contactgroups&amp;_username=automation&amp;_secret=myautomationsecret"</span>
<span class="tok-go">{"result": {"oracle": {"alias": "ORACLE Administrators"}, "windows": {"alias": "Windows Administrators"}, "all": {"alias": "Everything"}, "linux": {"alias": "Linux Administrators"}}, "result_code": 0}</span></code></pre></div></div>
<div class="paragraph"><p>In an easy to read format the response will look like this. As can be seen
the syntax is very simple:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'all': {'alias': 'Everything'},</span>
<span class="tok-go">            'linux': {'alias': 'Linux Administrators'},</span>
<span class="tok-go">            'oracle': {'alias': 'ORACLE Administrators'},</span>
<span class="tok-go">            'windows': {'alias': 'Windows Administrators'}},</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_add_group">
<span class="hidden-anchor sr-only" id="add_group"></span>4.2. add_group</h3>
<div class="paragraph"><p>In order to add a group the syntax <code>get_all_groups</code> can be used.
Only the group’s ID and its alias need to be given.
Note that when adding a new group, its ID with its <code>groupname</code> key will be given:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=add_hostgroup&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"groupname":"linux", "alias":"All Linux Servers"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_edit_group">
<span class="hidden-anchor sr-only" id="edit_group"></span>4.3. edit_group</h3>
<div class="paragraph"><p>Due to the low complexity of the invocation, editing a group functions in
a similar way to its creation. The group name (<code>groupname</code>) must
obviously already exist in order to be able to edit its alias.
In the example the service group ‘cpu_util’ does not exist yet and so the response
contains an error. In a successful action with the <code>curl</code>-invocation
the same response will be produced as with <code>add_group</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=add_servicegroup&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"groupname":"cpu_util", "alias":"CPU utilization of all servers"}'</span>
<span class="tok-go">{"result": "Check_MK exception: Unknown group: linux", "result_code": 1}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_delete_group">
<span class="hidden-anchor sr-only" id="delete_group"></span>4.4. delete_group</h3>
<div class="paragraph"><p>Deleting a group is also very easy. Only the group’s name needs to be entered.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=delete_hostgroup&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"groupname":"linux"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_users">
<span class="hidden-anchor sr-only" id="users"></span>5. User commands</h2>
<div class="sectionbody">
<div class="paragraph"><p>The following commands can be used for managing the users. Note however that
users synchronised over LDAP or Active Directory can be queried but not edited.</p></div>
<div class="ulist"><ul>
<li><p><code>add_users</code></p></li>
<li><p><code>edit_users</code></p></li>
<li><p><code>delete_users</code></p></li>
<li><p><code>get_all_users</code></p></li>
</ul></div>
<div class="sect2">
<h3 id="heading_add_users">
<span class="hidden-anchor sr-only" id="add_users"></span>5.1. add_users</h3>
<div class="paragraph"><p>To create a user, the minimum requirement is a user name (ID) and an alias.
So that the user can subsequently log in, a password will also need to be defined.
This password will be stored encrypted so that during a query the password
will not be transmitted as plain text. Only the password for the automated user
<code>automation_secret</code> will not be encrypted. All further attributes for a
user are optional. To get an overview of a few possible attributes, you can
view the response example from <a href="#get_all_users"><code>get_all_users</code></a>.</p></div>
<div class="paragraph"><p>The <code>request</code>-part will begin with <code>users</code>, so that multiple users
can be created with a single action. Each entry begins with the new user’s ID:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=add_users&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"users":{"hhirsch":{"alias":"Harry Hirsch","password":"myStrongPassword","pager":"+49176555999222"},"customAutomation":{"alias":"Custom Automation User","automation_secret":"mySuperStrongSecret"}}}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_edit_users">
<span class="hidden-anchor sr-only" id="edit_users"></span>5.2. edit_users</h3>
<div class="paragraph"><p>Editing a user functions in almost the same way as creating the user.
The user’s ID will be required, and the changes are specified with
<code>set_attributes</code>. With <code>unset_attributes</code> the attributes can
be reset to their default values. With these commands it is also possible to
edit multiple users in a single action.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=edit_users&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"users":{"hhirsch":{"set_attributes":{"email":"<a href="mailto:hhirsch@myCompany.org">hhirsch@myCompany.org</a>","contactgroups":["windows"]},"unset_attributes":["pager"]}}}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
<div class="paragraph"><p>To recap, here is the <code>request</code>-part in a readable form:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'users': {'hhirsch': {'set_attributes': {'contactgroups': ['windows'],</span>
<span class="tok-go">                                          'email': '<a href="mailto:hhirsch@myCompany.org">hhirsch@myCompany.org</a>'},</span>
<span class="tok-go">                       'unset_attributes': ['pager']}}}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_delete_users">
<span class="hidden-anchor sr-only" id="delete_users"></span>5.3. delete_users</h3>
<div class="paragraph"><p>To delete one or more users, simply enter the user’s ID(s) in <code>users</code>.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=delete_users&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"users":["customAutomation"]}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_get_all_users">
<span class="hidden-anchor sr-only" id="get_all_users"></span>5.4. get_all_users</h3>
<div class="paragraph"><p>No additional parameters are needed in the <code>request</code>-part to retrieve
the configurations of all users. The response will then contain all user-IDs and
their associated attributes. Note that some attributes will only be output if
they are explicitly specified.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_all_users&amp;_username=automation&amp;_secret=myautomationsecret</span></code></pre></div></div>
<div class="paragraph"><p>The output can be very comprehensive. For that reason only two examples of
outputs listing a user’s attributes, amongst other things, are presented here:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'automation': {'alias': u'Check_MK Automation - used for calling web services',</span>
<span class="tok-go">                'automation_secret': 'myautomationsecret',</span>
<span class="tok-go">                'contactgroups': [],</span>
<span class="tok-go">                'disable_notifications': {},</span>
<span class="tok-go">                'email': u'',</span>
<span class="tok-go">                'enforce_pw_change': False,</span>
<span class="tok-go">                'fallback_contact': False,</span>
<span class="tok-go">                'force_authuser': False,</span>
<span class="tok-go">                'force_authuser_webservice': False,</span>
<span class="tok-go">                'last_pw_change': 1504517726,</span>
<span class="tok-go">                'locked': False,</span>
<span class="tok-go">                'notifications_enabled': False,</span>
<span class="tok-go">                'num_failed_logins': 0,</span>
<span class="tok-go">                'pager': '',</span>
<span class="tok-go">                'password': '$1$508982$cA48GmuUHxRZn3w2GJUnK0',</span>
<span class="tok-go">                'roles': ['admin'],</span>
<span class="tok-go">                'serial': 2,</span>
<span class="tok-go">                'start_url': 'dashboard.py'},</span>
<span class="tok-go"> 'hhirsch': {'alias': u'Harry Hirsch',</span>
<span class="tok-go">             'connector': 'htpasswd',</span>
<span class="tok-go">             'contactgroups': ['windows'],</span>
<span class="tok-go">             'disable_notifications': {'disable': True},</span>
<span class="tok-go">             'email': u'<a href="mailto:hhirsch@myCompany.org">hhirsch@myCompany.org</a>',</span>
<span class="tok-go">             'enforce_pw_change': True,</span>
<span class="tok-go">             'fallback_contact': True,</span>
<span class="tok-go">             'force_authuser': False,</span>
<span class="tok-go">             'force_authuser_webservice': False,</span>
<span class="tok-go">             'idle_timeout': 600,</span>
<span class="tok-go">             'language': None,</span>
<span class="tok-go">             'last_pw_change': 1504713006,</span>
<span class="tok-go">             'locked': False,</span>
<span class="tok-go">             'num_failed_logins': 1,</span>
<span class="tok-go">             'pager': '+49176555999222',</span>
<span class="tok-go">             'password': '$1$238168$dGIr7ja6DVn3E8rMlp1aD.',</span>
<span class="tok-go">             'roles': ['admin', 'user'],</span>
<span class="tok-go">             'serial': 1,</span>
<span class="tok-go">             'start_url': 'dashboard.py'}}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__rule_set_commands">
<span class="hidden-anchor sr-only" id="_rule_set_commands"></span>6. Rule Set commands</h2>
<div class="sectionbody">
<div class="paragraph"><p>From Version <span class="new">1.5.0</span> Checkmk also provides the facility for
defining and retrieving rule sets via the Web-API. An in-depth knowledge of the
rules’ syntax is a requirement for working with the following commands, meaning
that they are really only recommended for advanced Checkmk users.</p></div>
<div class="ulist"><ul>
<li><p><code>get_ruleset</code></p></li>
<li><p><code>set_ruleset</code></p></li>
<li><p><code>get_ruleset_info</code></p></li>
</ul></div>
<div class="sect2">
<h3 id="heading_get_rulset">
<span class="hidden-anchor sr-only" id="get_rulset"></span>6.1. get_ruleset</h3>
<div class="paragraph"><p>Rules must already have been defined in a rule set in order for a rule set
to be retrievable. As input the rule set’s ID is required, and Python must be
defined as the <code>output_format</code> since many rule sets work with tuples.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_ruleset&amp;_username=automation&amp;_secret=myautomationsecret&amp;output_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"ruleset_name":"checkgroup_parameters:filesystem"}'</span>
<span class="tok-go">{'result': {'ruleset': {'': [{'conditions': {'host_specs': ['myserver123'], 'service_specs': [u'/media/customers$'], 'host_tags': []}, 'options': {}, 'value': {'levels': (90.0, 95.0)}}, {'conditions': {'host_specs': ['myserver123'], 'service_specs': [u'/media/meetings$'], 'host_tags': []}, 'options': {}, 'value': {'show_levels': 'onproblem', 'levels': (90.0, 95.0), 'trend_range': 24, 'trend_perfdata': True}}]}, 'configuration_hash': 'e069408225932bbfe2a485f22b9fc40e'}, 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>As can be seen in the following readably-formatted response,
only the elements used in the rule will be listed. In addition the rules
will be assigned as a list to a directory:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'ruleset': {'munich': [{'conditions': {'host_specs': ['myserver123'],</span>
<span class="tok-go">                                                   'host_tags': [],</span>
<span class="tok-go">                                                   'service_specs': [u'/media/customer$']},</span>
<span class="tok-go">                                    'options': {},</span>
<span class="tok-go">                                    'value': {'levels': (90.0, 95.0)}},</span>
<span class="tok-go">                                   {'conditions': {'host_specs': ['myserver123'],</span>
<span class="tok-go">                                                   'host_tags': [],</span>
<span class="tok-go">                                                   'service_specs': [u'/media/meeting$']},</span>
<span class="tok-go">                                    'options': {},</span>
<span class="tok-go">                                    'value': {'levels': (90.0, 95.0),</span>
<span class="tok-go">                                              'show_levels': 'onproblem',</span>
<span class="tok-go">                                              'trend_perfdata': True,</span>
<span class="tok-go">                                              'trend_range': 24}}]},</span>
<span class="tok-go">            'configuration_hash': 'e069408225932bbfe2a485f22b9fc40e'}</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>A query always requires the respective rule’s internal name.
The internal names (IDs) for all rules can be listed with the
<a href="#get_rulesets_info">get_rulesets_info</a> command, for example.
For each entry – among other info – the rule’s title as can be
found in <span class="guihint">Setup</span> will also be listed. Use such functions if a rule set’s ID
is unknown.</p></div>
</div>
<div class="sect2">
<h3 id="heading_set_ruleset">
<span class="hidden-anchor sr-only" id="set_ruleset"></span>6.2. set_ruleset</h3>
<div class="paragraph"><p>Rule sets can also only be set as complete packets with which one or more
rules are defined for a specified directory. These rules will be summarised
in a list. It is advisable to first call up the current content of a rule set,
and to then use it as the basis for customising a new version.
The <code>configuration_hash</code> parameter is also available here to be
able to understand interim changes. In the following example we will use the
response from above, and delete only one of the two rules — so that we
rewrite only one rule to this directory. Note that the <code>request_format</code>
is coded in Python – i.e., that the <code>request</code> element is enclosed in
double-quotes (“  ”):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=set_ruleset&amp;_username=automation&amp;_secret=myautomationsecret&amp;request_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s2">"request={'ruleset_name':'checkgroup_parameters:filesystem','ruleset': {'': [{'conditions': {'host_specs': ['myserver123'], 'service_specs': [u'/media/customers</span>$<span class="tok-s2">'], 'host_tags': []}, 'options': {}, 'value': {'levels': (90.0, 95.0)}}],'configuration_hash': 'e069408225932bbfe2a485f22b9fc40e'}}"</span>
<span class="tok-go">{'result': None, 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>The (readable) <code>request</code> part looks like the following:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">request={</span>
<span class="tok-go">    'ruleset_name':'checkgroup_parameters:filesystem',</span>
<span class="tok-go">    'ruleset': {</span>
<span class="tok-go">        '': [{</span>
<span class="tok-go">            'conditions': {</span>
<span class="tok-go">                'host_specs': ['myserver123'],</span>
<span class="tok-go">                'service_specs': [u'/media/customers$'],</span>
<span class="tok-go">                'host_tags': []</span>
<span class="tok-go">            },</span>
<span class="tok-go">            'options': {},</span>
<span class="tok-go">            'value': {'levels': (90.0, 95.0)}</span>
<span class="tok-go">            }],</span>
<span class="tok-go">        'configuration_hash': 'e069408225932bbfe2a485f22b9fc40e'</span>
<span class="tok-go">    }</span>
<span class="tok-go">}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_get_rulesets_info">
<span class="hidden-anchor sr-only" id="get_rulesets_info"></span>6.3. get_rulesets_info</h3>
<div class="paragraph"><p>If an overview of which rule sets are in Checkmk is desired, they can be
called up with this command. As can be seen Python is also recommended as the
output format here:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_rulesets_info&amp;_username=automation&amp;_secret=myautomationsecret&amp;output_format=python"</span></code></pre></div></div>
<div class="paragraph"><p>Since <strong>all</strong> available rule sets can be called up with this command,
its output will be omitted here. It is coded like the other commands.
Here are examples of two typical rule sets in an easily-readable format:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'cmc_service_rrd_config': {'help': 'This configures how many datapoints will be stored of the performance values of services. Please note, that these settings only apply for <em>new</em> services. Existing RRDs cannot be changed.',</span>
<span class="tok-go">                                       'number_of_rules': 1,</span>
<span class="tok-go">                                       'title': 'Configuration of RRD databases of services'},</span>
<span class="tok-go">            'static_checks:ipmi':     {'help': None,</span>
<span class="tok-go">                                       'number_of_rules': 0,</span>
<span class="tok-go">                                       'title': 'IPMI sensors'}},</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>This information is especially useful if the rule set’s title is known but not its ID,
and it will help when coding scripts for automation by being able to use the
normal titles, thus increasing the readability for maintenance or alterations.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__host_tag_commands">
<span class="hidden-anchor sr-only" id="_host_tag_commands"></span>7. Host tag commands</h2>
<div class="sectionbody">
<div class="paragraph"><p>From Version <span class="new">1.5.0</span> host tags can be set as well as read
with the following two commands:</p></div>
<div class="ulist"><ul>
<li><p><code>get_hosttags</code></p></li>
<li><p><code>set_hosttags</code></p></li>
</ul></div>
<div class="sect2">
<h3 id="heading_get_hosttags">
<span class="hidden-anchor sr-only" id="get_hosttags"></span>7.1. get_hosttags</h3>
<div class="paragraph"><p>All tags can be called up with this command. The <span class="guihint">Host tag groups</span> as well
as the <span class="guihint">Auxiliary tags</span> will be output.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_hosttags&amp;_username=automation&amp;_secret=myautomationsecret"</span>
<span class="tok-go">{"result": {"aux_tags": [{"id": "snmp", "title": "monitor via SNMP"}, {"id": "tcp", "title": "monitor via Check_MK Agent"}], "tag_groups": [{"tags": [{"aux_tags": [], "id": "prod", "title": "Productive system"}, {"aux_tags": [], "id": "critical", "title": "Business critical"}, {"aux_tags": [], "id": "test", "title": "Test system"}, {"aux_tags": [], "id": "offline", "title": "Do not monitor this host"}], "id": "criticality", "title": "Criticality"}, {"tags": [{"aux_tags": [], "id": "lan", "title": "Local network (low latency)"}, {"aux_tags": [], "id": "wan", "title": "WAN (high latency)"}, {"aux_tags": [], "id": "dmz", "title": "DMZ (low latency, secure access)"}], "id": "networking", "title": "Networking Segment"}], "configuration_hash": "4c2a236ffeabb0c52d4770ea03eff48e"}, "result_code": 0}</span></code></pre></div></div>
<div class="paragraph"><p>Formatted for readability the response is structured as below:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'aux_tags': [{'id': 'snmp', 'title': 'monitor via SNMP'},</span>
<span class="tok-go">                         {'id': 'tcp', 'title': 'monitor via Check_MK Agent'}],</span>
<span class="tok-go">            'tag_groups': [{'id': 'agent',</span>
<span class="tok-go">                            'tags': [{'aux_tags': ['tcp'],</span>
<span class="tok-go">                                      'id': 'cmk-agent',</span>
<span class="tok-go">                                      'title': 'Check_MK Agent (Server)'},</span>
<span class="tok-go">                                     {'aux_tags': ['snmp'],</span>
<span class="tok-go">                                      'id': 'snmp-only',</span>
<span class="tok-go">                                      'title': 'SNMP (Networking device, Appliance)'},</span>
<span class="tok-go">                                     {'aux_tags': ['snmp'],</span>
<span class="tok-go">                                      'id': 'snmp-v1',</span>
<span class="tok-go">                                      'title': 'Legacy SNMP device (using V1)'},</span>
<span class="tok-go">                                     {'aux_tags': ['snmp', 'tcp'],</span>
<span class="tok-go">                                      'id': 'snmp-tcp',</span>
<span class="tok-go">                                      'title': 'Dual: Check_MK Agent + SNMP'},</span>
<span class="tok-go">                                     {'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'ping',</span>
<span class="tok-go">                                      'title': 'No Agent'}],</span>
<span class="tok-go">                            'title': 'Agent type'},</span>
<span class="tok-go">                           {'id': 'criticality',</span>
<span class="tok-go">                            'tags': [{'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'prod',</span>
<span class="tok-go">                                      'title': 'Productive system'},</span>
<span class="tok-go">                                     {'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'critical',</span>
<span class="tok-go">                                      'title': 'Business critical'},</span>
<span class="tok-go">                                     {'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'test',</span>
<span class="tok-go">                                      'title': 'Test system'},</span>
<span class="tok-go">                                     {'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'offline',</span>
<span class="tok-go">                                      'title': 'Do not monitor this host'}],</span>
<span class="tok-go">                            'title': 'Criticality'},</span>
<span class="tok-go">                           {'id': 'networking',</span>
<span class="tok-go">                            'tags': [{'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'lan',</span>
<span class="tok-go">                                      'title': 'Local network (low latency)'},</span>
<span class="tok-go">                                     {'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'wan',</span>
<span class="tok-go">                                      'title': 'WAN (high latency)'},</span>
<span class="tok-go">                                     {'aux_tags': [],</span>
<span class="tok-go">                                      'id': 'dmz',</span>
<span class="tok-go">                                      'title': 'DMZ (low latency, secure access)'}],</span>
<span class="tok-go">                            'title': 'Networking Segment'}],</span>
<span class="tok-go">            'configuration_hash': '32deebf233cade1d42387c6a0639ceb1'},</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_set_hosttags">
<span class="hidden-anchor sr-only" id="set_hosttags"></span>7.2. set_hosttags</h3>
<div class="paragraph"><p>A configuration in the host tags will, for technical reasons, always be written
as a completely new version, even if only a single entry has been added or altered.
For this reason, here it is advisable to call up the configuration with the
aid of <code>get_hosttags</code> and then insert the alterations. The altered
configuration is then written back to Checkmk.</p></div>
<div class="paragraph"><p>At this point the <code>configuration_hash</code> is useful.
If when storing the configuration the hash on the Checkmk server does not
match the one being provided, the data will be rejected and an error produced.
In this way it can be ensured that the configuration has not been altered in
the interim, and that a change is not inadvertently overwritten or deleted.</p></div>
<div class="paragraph"><p>In the following example the configuration which we called up with the command
<a href="#get_hosttag_example">above</a> will be extended with the host tag
‘location’ and its selection options ‘munich’, ‘essen’ and ‘berlin’,
so that the new version of the configuration will look like this:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'aux_tags': [{'id': 'snmp', 'title': 'monitor via SNMP'},</span>
<span class="tok-go">              {'id': 'tcp', 'title': 'monitor via Check_MK Agent'}],</span>
<span class="tok-go"> 'tag_groups': [{'id': 'agent',</span>
<span class="tok-go">                 'tags': [{'aux_tags': ['tcp'],</span>
<span class="tok-go">                           'id': 'cmk-agent',</span>
<span class="tok-go">                           'title': 'Check_MK Agent (Server)'},</span>
<span class="tok-go">                          {'aux_tags': ['snmp'],</span>
<span class="tok-go">                           'id': 'snmp-only',</span>
<span class="tok-go">                           'title': 'SNMP (Networking device, Appliance)'},</span>
<span class="tok-go">                          {'aux_tags': ['snmp'],</span>
<span class="tok-go">                           'id': 'snmp-v1',</span>
<span class="tok-go">                           'title': 'Legacy SNMP device (using V1)'},</span>
<span class="tok-go">                          {'aux_tags': ['snmp', 'tcp'],</span>
<span class="tok-go">                           'id': 'snmp-tcp',</span>
<span class="tok-go">                           'title': 'Dual: Check_MK Agent + SNMP'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'ping',</span>
<span class="tok-go">                           'title': 'No Agent'}],</span>
<span class="tok-go">                 'title': 'Agent type'},</span>
<span class="tok-go">                {'id': 'criticality',</span>
<span class="tok-go">                 'tags': [{'aux_tags': [],</span>
<span class="tok-go">                           'id': 'prod',</span>
<span class="tok-go">                           'title': 'Productive system'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'critical',</span>
<span class="tok-go">                           'title': 'Business critical'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'test',</span>
<span class="tok-go">                           'title': 'Test system'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'offline',</span>
<span class="tok-go">                           'title': 'Do not monitor this host'}],</span>
<span class="tok-go">                 'title': 'Criticality'},</span>
<span class="tok-go">                {'id': 'networking',</span>
<span class="tok-go">                 'tags': [{'aux_tags': [],</span>
<span class="tok-go">                           'id': 'lan',</span>
<span class="tok-go">                           'title': 'Local network (low latency)'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'wan',</span>
<span class="tok-go">                           'title': 'WAN (high latency)'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'dmz',</span>
<span class="tok-go">                           'title': 'DMZ (low latency, secure access)'}],</span>
<span class="tok-go">                 'title': 'Networking Segment'},</span>
<span class="tok-go">                {'id': 'location',</span>
<span class="tok-go">                 'tags': [{'aux_tags': [],</span>
<span class="tok-go">                           'id': 'munich',</span>
<span class="tok-go">                           'title': 'Munich'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'essen',</span>
<span class="tok-go">                           'title': 'Essen'},</span>
<span class="tok-go">                          {'aux_tags': [],</span>
<span class="tok-go">                           'id': 'berlin',</span>
<span class="tok-go">                           'title': 'Berlin'}],</span>
<span class="tok-go">                 'title': 'Location'}],</span>
<span class="tok-go"> 'configuration_hash': '32deebf233cade1d42387c6a0639ceb1'},</span></code></pre></div></div>
<div class="paragraph"><p>This configuration can be included in the <code>curl</code> invocation and sent to the Checkmk server:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=set_hosttags&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"aux_tags":[{"id":"snmp","title":"monitor via SNMP"},{"id":"tcp","title":"monitor via Check_MK Agent"}],"tag_groups":[{"title":"Agent type","id":"agent","tags":[{"aux_tags":["tcp"],"id":"cmk-agent","title":"Check_MK Agent (Server)"},{"aux_tags":["snmp"],"id":"snmp-only","title":"SNMP (Networking device, Appliance)"},{"aux_tags":["snmp"],"id":"snmp-v1","title":"Legacy SNMP device (usingV1)"},{"aux_tags":["snmp","tcp"],"id":"snmp-tcp","title":"Dual: Check_MK Agent + SNMP"},{"aux_tags":[],"id":"ping","title":"No Agent"}]},{"title":"Criticality","id":"criticality","tags":[{"aux_tags":[],"id":"prod","title":"Productive system"},{"aux_tags":[],"id":"critical","title":"Business critical"},{"aux_tags":[],"id":"test","title":"Test system"},{"aux_tags":[],"id":"offline","title":"Do not monitor this host"}]},{"title":"Networking Segment","id":"networking","tags":[{"aux_tags":[],"id":"lan","title":"Local network (low latency)"},{"aux_tags":[],"id":"wan","title":"WAN (high latency)"},{"aux_tags":[],"id":"dmz","title":"DMZ (low latency, secure access)"}]},{"tags":[{"aux_tags":[],"id":"munich","title":"Munich"},{"aux_tags":[],"id":"essen","title":"Essen"},{"aux_tags":[],"id":"berlin","title":"Berlin"}],"id":"location","title":"Location"}],"configuration_hash":"32deebf233cade1d42387c6a0639ceb1"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__sites">
<span class="hidden-anchor sr-only" id="_sites"></span>8. Sites</h2>
<div class="sectionbody">
<div class="paragraph"><p>From Version <span class="new">1.5.0</span> the Distributed Monitoring can be used
to establish or delete links to other sites. In this way completely new
locations can be automatically integrated into Checkmk.
The following commands are available:</p></div>
<div class="ulist"><ul>
<li><p><code>get_site</code></p></li>
<li><p><code>set_site</code></p></li>
<li><p><code>delete_site</code></p></li>
<li><p><code>login_site</code></p></li>
<li><p><code>logout_site</code></p></li>
</ul></div>
<div class="sect2">
<h3 id="heading_get_site">
<span class="hidden-anchor sr-only" id="get_site"></span>8.1. get_site</h3>
<div class="paragraph"><p>Calling up a site works almost identically to other queries over the Web-API.
Enter the ID of the site to be called up in the <code>request</code>-part.
Note that this command requires Python for its <code>output_format</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_site&amp;_username=automation&amp;_secret=myautomationsecret&amp;output_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"site_id":"myRemote"}'</span>
<span class="tok-go">{'result': {'site_id': 'myRemote', 'site_config': {'url_prefix': 'http://myRemoteServer/myRemote/', 'user_sync': None, 'user_login': True, 'insecure': False, 'disabled': False, 'replication': 'slave', 'multisiteurl': 'http://myRemoteServer/myRemote/check_mk/', 'replicate_mkps': True, 'status_host': ('heute', 'myRemote'), 'socket': ('proxy', {'params': None, 'socket': ('myRemoteServer', 6557)}), 'disable_wato': True, 'alias': u'My Remote Check_MK', 'timeout': 10, 'persist': True, 'replicate_ec': True}, 'configuration_hash': '136bd84ff62dfa4e0a4325c6431e294b'}, 'result_code': 0}</span></code></pre></div></div>
<div class="paragraph"><p>In lesbarer Form sieht die Antwort so aus:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'site_id': 'myRemote',</span>
<span class="tok-go">            'site_config': {'alias': u'My Remote Check_MK',</span>
<span class="tok-go">                            'disable_wato': True,</span>
<span class="tok-go">                            'disabled': False,</span>
<span class="tok-go">                            'insecure': False,</span>
<span class="tok-go">                            'multisiteurl': 'http://myRemoteServer/myRemote/check_mk/',</span>
<span class="tok-go">                            'persist': True,</span>
<span class="tok-go">                            'replicate_ec': True,</span>
<span class="tok-go">                            'replicate_mkps': True,</span>
<span class="tok-go">                            'replication': 'slave',</span>
<span class="tok-go">                            'socket': ('proxy',</span>
<span class="tok-go">                                       {'params': None,</span>
<span class="tok-go">                                        'socket': ('myRemoteServer', 6557)}),</span>
<span class="tok-go">                            'status_host': ('mysite', 'myRemote'),</span>
<span class="tok-go">                            'timeout': 10,</span>
<span class="tok-go">                            'url_prefix': 'http://myRemoteServer/myRemote/',</span>
<span class="tok-go">                            'user_login': True,</span>
<span class="tok-go">                            'user_sync': None},</span>
<span class="tok-go">            'configuration_hash': '136bd84ff62dfa4e0a4325c6431e294b',},</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_set_site">
<span class="hidden-anchor sr-only" id="set_site"></span>8.2. set_site</h3>
<div class="paragraph"><p>Connections to sites can only be altered in their entirety – thus if a
customisation is to be performed over the Web-API any existing
connections must be recreated as completely new versions. Here again, if
performing a customisation it is advisable to first call up the current version
with <code>get_site</code>, to make the alterations in the response, and then
store this new version in Checkmk. Here also, as in
<a href="#get_folder"><code>get_folder</code></a>, the <code>configuration_hash</code>
can be used to ensure that in the interim no other alterations can be made
to the configuration.</p></div>
<div class="paragraph"><p>In the following example we take the configuration shown above, and alter only
the <span class="guihint">Alias</span> (<code>alias</code>) and the <span class="guihint">Persistent Connection</span>
(<code>persist</code>). The <code>request</code> format in this situation must be
in Python, and the <code>request</code>-part in double-quotes (“”):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=set_site&amp;_username=automation&amp;_secret=myautomationsecret&amp;request_format=python"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s2">"request={'site_id': 'myRemote', 'site_config': {'url_prefix': 'http://myRemoteServer/myRemote/', 'user_sync': None, 'user_login': True, 'insecure': False, 'disabled': False, 'replication': 'slave', 'multisiteurl': 'http://myRemoteServer/myRemote/check_mk/', 'replicate_mkps': True, 'status_host': ('heute', 'myRemote'), 'socket': ('proxy', {'params': None, 'socket': ('myRemoteServer', 6557)}), 'disable_wato': True, 'alias': u'My Remote', 'timeout': 10, 'persist': False, 'replicate_ec': True}, 'configuration_hash': '136bd84ff62dfa4e0a4325c6431e294b'}"</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_delete_site">
<span class="hidden-anchor sr-only" id="delete_site"></span>8.3. delete_site</h3>
<div class="paragraph"><p>Only the site’s ID is required to delete the connection to a site.
In this case the <code>configuration_hash</code> function can also be used.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=delete_site&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"site_id":"myRemote"}'</span><span class="tok-o">{</span><span class="tok-s2">"result"</span>:<span class="tok-w"> </span>null,<span class="tok-w"> </span><span class="tok-s2">"result_code"</span>:<span class="tok-w"> </span><span class="tok-m">0</span><span class="tok-o">}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_login_site">
<span class="hidden-anchor sr-only" id="login_site"></span>8.4. login_site &amp; logout_site</h3>
<div class="paragraph"><p>To be able to directly use a site connection established via Web-API,
a login to, and a logout from the site can be performed. For the login, in addition
to the site’s ID enter the user name and password.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=login_site&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"site_id":"myRemote","username":"cmkadmin","password":"cmk"}'</span>
<span class="tok-go">{"result": null, "result_code": 0}</span></code></pre></div></div>
<div class="paragraph"><p>Entering the site’s ID is sufficient for logging out</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=logout_site&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"site_id":"myRemote"}'</span><span class="tok-o">{</span><span class="tok-s2">"result"</span>:<span class="tok-w"> </span>null,<span class="tok-w"> </span><span class="tok-s2">"result_code"</span>:<span class="tok-w"> </span><span class="tok-m">0</span><span class="tok-o">}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_bake_agents">
<span class="hidden-anchor sr-only" id="bake_agents"></span>9. Agent Bakery commands</h2>
<div class="sectionbody">
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Automated agents can also be baked via the API.
In this way the automatically-created configurations can be fed directly
into the agents. Only the signing of the agents still needs to be performed
manually, so that the freshly-baked agent’s configuration can be verified
one final time, and that you retain full control over which agents will
actually be delivered to the hosts.</p></div>
<div class="paragraph"><p>Calling up is very easy and it uses the <code>bake_agents</code> command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=bake_agents&amp;_username=automation&amp;_secret=myautomationsecret"</span>
<span class="tok-go">{"result": "Successfully baked agents", "result_code": 0}</span></code></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__commands_for_status_data">
<span class="hidden-anchor sr-only" id="_commands_for_status_data"></span>10. Commands for status data</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_get_graph">
<span class="hidden-anchor sr-only" id="get_graph"></span>10.1. Metrics</h3>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Checkmk in fact provides the facility for integrating external metrics
data bases. In principle however, with the <code>get_graph</code> command Checkmk’s
metrics data can be accessed by any third-party software. In this way the user
is not bound to our standard-issue graphs and can utilise their own self-created
custom graphs. The data will then always be produced for a complete graph, even
when the graph includes multiple metrics.</p></div>
<div class="paragraph"><p>If you wish to call up one of our standard graphs,
the syntax for the <code>request</code>-part is as follows:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'specification': ['template',</span>
<span class="tok-go">                   {'graph_index': 0,</span>
<span class="tok-go">                    'host_name': 'myserver123',</span>
<span class="tok-go">                    'service_description': 'Memory',</span>
<span class="tok-go">                    'site': 'mysite'}],</span>
<span class="tok-go"> 'data_range': {'time_range': [1504623158, 1504626758]}}</span></code></pre></div></div>
<div class="paragraph"><p>Be sure to enter the time range in Unix Time. The <code>graph_index</code> command
specifies the graph to be retrieved.
In the example the first graph we have retrieved is from the <span class="guihint">Memory</span> service,
which under Linux is located in the Memory <span class="guihint">RAM + Swap overview</span> service.
If instead of this you want to retrieve the <span class="guihint">RAM used</span> graph, count through
the graphs, beginning with 0. A complete retrieval for a time range of 10 minutes
(600 Seconds) will look like this, for example:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_graph&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"specification":["template",{"service_description":"Memory","site":"heute","graph_index":4,"host_name":"heute"}],"data_range":{"time_range":[1504626158, 1504626758]}}'</span>
<span class="tok-go">{"result": {"step": 60, "start_time": 1504626180, "end_time": 1504626780, "curves": [{"color": "#80ff40", "rrddata": [3752390000.0, 3746380000.0, 3770930000.0, 3773230000.0, 3796020000.0, 3787010000.0, 3777880000.0, 3781040000.0, 3798920000.0, 3805910000.0], "line_type": "area", "title": "RAM used"}]}, "result_code": 0}</span></code></pre></div></div>
<div class="paragraph"><p>Querying a self-created graph is somewhat simpler since this is not
bound to a particular host or service or to a particular site.
Neverless, remember that an automated user, e.g. <code>automation</code>,
can only retrieve such a graph if it has been enabled for all users:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_graph&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"specification":["custom","all_disk_utilization"],"data_range":{"time_range":[1504709932, 1504710532]}}'</span>
<span class="tok-go">{"result": {"step": 60, "start_time": 1504709940, "end_time": 1504710540, "curves": [{"color": "#ea905d", "rrddata": [6.2217, 0.728733, 0.7748, 0.158085, 1.90726, 15.2222, 22.6851, 7.31163, 1.96834, 0.413633], "line_type": "stack", "title": "Disk utilization sdb"}, {"color": "#a05830", "rrddata": [1.45488, 0.101608, 0.0832167, 0.0342933, 0.235585, 0.166253, 14.9513, 25.112, 11.2032, 0.400437], "line_type": "stack", "title": "Disk utilization sda"}]}, "result_code": 0}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_get_sla">
<span class="hidden-anchor sr-only" id="get_sla"></span>10.2. SLAs</h3>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
From <span class="new">1.5.0</span> SLAs can be retrieved with the <code>get_sla</code> command. For such a query, the following time data can be used:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Time Range</th>
<th class="tableblock halign-left valign-top">ID in the query</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Today</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">d0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yesterday</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">d1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">This week</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">w0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last week</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">w1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">This month</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last month</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">This year</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">y0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last year</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">y1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The last…​</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">last:86400</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">range:1530271236:1530281236</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>The actual syntax for retrieving one or more SLAs is as follows:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'query': [[['my_sla_id1'],</span>
<span class="tok-go">           ['w1', w0],</span>
<span class="tok-go">           [['myhost123', 'CPU load'], ['myhost234', 'CPU load']]],</span>
<span class="tok-go">          [['my_sla_id2'],</span>
<span class="tok-go">           ['m0'],</span>
<span class="tok-go">           [['myhost123', 'CPU load']]]],</span>
<span class="tok-go">}</span></code></pre></div></div>
<div class="paragraph"><p>You can specify any number of values in each list, and for single
or multiple SLAs also include multiple host/service pairs and multiple timers.
So in the example shown the first list would return four results –
(2 time periods x 2 host/service pairs) – and the second list
a single result. In the following example call we will only retrieve the second list:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">curl "http://myserver/mysite/check_mk/webapi.py?action=get_sla&amp;_username=automation&amp;_secret=myautomationsecret" -d "request={'query':       [[['my_sla_id2'],['m0'],[['myhost123','CPU load']]]]}"</span></code></pre></div></div>
<div class="paragraph"><p>The output in readable form is then structured as follows:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': {'mysite':</span>
<span class="tok-go">                {'myhost123':</span>
<span class="tok-go">                    {'CPU load': {(</span>
<span class="tok-go">                        ('myhost123', 'CPU load'),</span>
<span class="tok-go">                        'my_sla_id2',</span>
<span class="tok-go">                        ('sla_period_range',</span>
<span class="tok-go">                        (0, 1)),</span>
<span class="tok-go">                        'weekly'):</span>
<span class="tok-go">                            {'plugin_results': [{</span>
<span class="tok-go">                                'plugin_id': 'service_state_percentage',</span>
<span class="tok-go">                                'timerange_sla_duration': 1000934.0,</span>
<span class="tok-go">                                'period_results': [{</span>
<span class="tok-go">                                    'duration': 604800.0,</span>
<span class="tok-go">                                    'sla_broken': False,</span>
<span class="tok-go">                                    'subresults': [{</span>
<span class="tok-go">                                        'sla_broken': False,</span>
<span class="tok-go">                                        'requirement': (0, 'min', 0.0),</span>
<span class="tok-go">                                        'error_instances': [],</span>
<span class="tok-go">                                        'deviation_info': {</span>
<span class="tok-go">                                            'deviation': 0.0,</span>
<span class="tok-go">                                            'limit': 0.0,</span>
<span class="tok-go">                                            'levels': (0, 0),</span>
<span class="tok-go">                                            'deviation_state': 2}}],</span>
<span class="tok-go">                                    'statistics': {</span>
<span class="tok-go">                                        'duration': {-1: 604800.0},</span>
<span class="tok-go">                                        'percentage': {-1: 100.0}},</span>
<span class="tok-go">                                        'timerange': (1529272800.0, 1529877600.0)},</span>
<span class="tok-go">                                {'duration': 396134.0,</span>
<span class="tok-go">                                'sla_broken': False,</span>
<span class="tok-go">                                'subresults': [{</span>
<span class="tok-go">                                    'sla_broken': False,</span>
<span class="tok-go">                                    'requirement': (0, 'min', 0.0),</span>
<span class="tok-go">                                    'error_instances': [],</span>
<span class="tok-go">                                    'deviation_info': {</span>
<span class="tok-go">                                        'deviation': 2.7202916184927326,</span>
<span class="tok-go">                                        'limit': 0.0,</span>
<span class="tok-go">                                        'levels': (0, 0),</span>
<span class="tok-go">                                        'deviation_state': 0}}],</span>
<span class="tok-go">                                'statistics': {</span>
<span class="tok-go">                                    'duration': {0: 10776, -1: 385358.0},</span>
<span class="tok-go">                                    'percentage': {0: 2.7202916184927326, -1: 97.27970838150726}},</span>
<span class="tok-go">                                'timerange': (1529877600.0, 1530273734)}]}],</span>
<span class="tok-go">                            'sla_id': 'sla_configuration_1',</span>
<span class="tok-go">                            'sla_period': 'weekly'}}}}},</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__commands_for_grafana">
<span class="hidden-anchor sr-only" id="_commands_for_grafana"></span>11. Commands for Grafana</h2>
<div class="sectionbody">
<div class="paragraph"><p>Special commands are needed in order to be able to use the Grafana plug-in — which Checkmk implements as a <em>Datasource</em>. Of course you can also use these commands independently of Grafana or the plug-in:</p></div>
<div class="ulist"><ul>
<li><p><code>get_user_sites</code></p></li>
<li><p><code>get_host_names</code></p></li>
<li><p><code>get_metrics_of_host</code></p></li>
<li><p><code>get_graph_recipes</code></p></li>
</ul></div>
<div class="sect2">
<h3 id="heading_get_user_sites">
<span class="hidden-anchor sr-only" id="get_user_sites"></span>11.1. get_user_sites</h3>
<div class="paragraph"><p>A user is not necessarily allowed to access all sites. The following command can be used to find out which sites are available to the automation user. It does not require any options:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_user_sites&amp;_username=automation&amp;_secret=myautomationsecret"</span></code></pre></div></div>
<div class="paragraph"><p>The output contains a list of the sites together with their alias:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result':</span>
<span class="tok-go">    [['mysite', 'My Site Alias'],</span>
<span class="tok-go">    ['myremote1', 'My Remote 1 Alias']]</span>
<span class="tok-go">}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_get_host_names">
<span class="hidden-anchor sr-only" id="get_host_names"></span>11.2. get_host_names</h3>
<div class="paragraph"><p>A typical Web-API command always targets a single specific Checkmk site.
With this command you can get a list of the host names for all connected sites.
It doesn’t matter whether there are remote sites that are configured via the one being retrieved,
or if there is only a reading connection. The Checkmk command only outputs the
names of the hosts that are known to the individual sites.
You can optionally limit the query to a single site:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_host_names&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"site_id":"mysite"}'</span></code></pre></div></div>
<div class="paragraph"><p>The output will contain a simple list of the host names:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result':</span>
<span class="tok-go">    ['myhost123', 'myhost234', 'myremotehost345']</span>
<span class="tok-go">}</span></code></pre></div></div>
<div class="paragraph"><p><strong>Important</strong>:
The response does not contain any information showing on which site the
host is running. Duplicate names can therefore no longer be assigned.</p></div>
</div>
<div class="sect2">
<h3 id="heading_get_metrics_of_host">
<span class="hidden-anchor sr-only" id="get_metrics_of_host"></span>11.3. get_metrics_of_host</h3>
<div class="paragraph"><p>You can use this command when you need information about what metrics a host uses. It is also very suitable as a basis for the already long-available command
<a href="#get_graph"><code>get_graph</code></a>. Here too you can optionally specify a particular site:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_metrics_of_host&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"hostname":"myremotehost345", "site_id":"myremote1"}'</span></code></pre></div></div>
<div class="paragraph"><p>Since the answer includes the metrics of <em>all</em> services for the host, here
is only a small excerpt as an example of what such an output could look like.
As you can see here, the output can also include services that do not have any metrics:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result':</span>
<span class="tok-go">    {'CPU utilization':</span>
<span class="tok-go">        {'check_command': 'check_mk-kernel.util',</span>
<span class="tok-go">         'metrics':</span>
<span class="tok-go">            {'system': {'index': 3, 'name': 'system', 'title': 'System'},</span>
<span class="tok-go">             'user': {'index': 2, 'name': 'user', 'title': 'User'},</span>
<span class="tok-go">             'util': {'index': 0, 'name': 'util', 'title': 'CPU utilization'},</span>
<span class="tok-go">             'wait': {'index': 1, 'name': 'io_wait', 'title': 'I/O-wait'}</span>
<span class="tok-go">            }</span>
<span class="tok-go">        }</span>
<span class="tok-go">    }</span>
<span class="tok-go">    {'Mount options of /':</span>
<span class="tok-go">        {'check_command': 'check_mk-mounts',</span>
<span class="tok-go">         'metrics': {}</span>
<span class="tok-go">        }</span>
<span class="tok-go">    }</span>
<span class="tok-go">}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_get_graph_recipes">
<span class="hidden-anchor sr-only" id="get_graph_recipes"></span>11.4. get_graph_recipes</h3>
<div class="paragraph"><p>With this command you get all of the necessary information for a concrete graph. Such a graph definition contains not only the metrics involved, but also their colours, units, titles, the resolution, etc. The <code>request</code> part of the command is very similar to that of the <code>get_graph</code> command. You do not need to specify a time period here, since it only applies to the general data. Here is an example for the <em>CPU load</em> service:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>curl<span class="tok-w"> </span><span class="tok-s2">"http://myserver/mysite/check_mk/webapi.py?action=get_graph_recipes&amp;_username=automation&amp;_secret=myautomationsecret"</span><span class="tok-w"> </span>-d<span class="tok-w"> </span><span class="tok-s1">'request={"specification":["template", {"service_description": "CPU load", "graph_index": 0, "host_name": "myhost123", "site": "mysite"}]}'</span></code></pre></div></div>
<div class="paragraph"><p>And the response to the query for this service could then look like this:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">{'result': [{'consolidation_function': 'max',</span>
<span class="tok-go">             'explicit_vertical_range': (None, None),</span>
<span class="tok-go">             'horizontal_rules': [(20.0, '20.0', '#ffff00', u'Warning'),</span>
<span class="tok-go">                                  (40.0, '40.0', '#ff0000', u'Critical')],</span>
<span class="tok-go">             'metrics': [{'color': '#00d1ff',</span>
<span class="tok-go">                          'expression': ('rrd',</span>
<span class="tok-go">                                         'heute',</span>
<span class="tok-go">                                         u'heute',</span>
<span class="tok-go">                                         u'CPU load',</span>
<span class="tok-go">                                         'load1',</span>
<span class="tok-go">                                         None,</span>
<span class="tok-go">                                         1.0),</span>
<span class="tok-go">                          'line_type': 'area',</span>
<span class="tok-go">                          'title': u'CPU load average of last minute',</span>
<span class="tok-go">                          'unit': ''},</span>
<span class="tok-go">                         {'color': '#428399',</span>
<span class="tok-go">                          'expression': ('rrd',</span>
<span class="tok-go">                                         'heute',</span>
<span class="tok-go">                                         u'heute',</span>
<span class="tok-go">                                         u'CPU load',</span>
<span class="tok-go">                                         'load5',</span>
<span class="tok-go">                                         None,</span>
<span class="tok-go">                                         1.0),</span>
<span class="tok-go">                          'line_type': 'line',</span>
<span class="tok-go">                          'title': u'CPU load average of last 5 minutes',</span>
<span class="tok-go">                          'unit': ''},</span>
<span class="tok-go">                         {'color': '#2c5766',</span>
<span class="tok-go">                          'expression': ('rrd',</span>
<span class="tok-go">                                         'heute',</span>
<span class="tok-go">                                         u'heute',</span>
<span class="tok-go">                                         u'CPU load',</span>
<span class="tok-go">                                         'load15',</span>
<span class="tok-go">                                         None,</span>
<span class="tok-go">                                         1.0),</span>
<span class="tok-go">                          'line_type': 'line',</span>
<span class="tok-go">                          'title': u'CPU load average of last 15 minutes',</span>
<span class="tok-go">                          'unit': ''}],</span>
<span class="tok-go">             'omit_zero_metrics': False,</span>
<span class="tok-go">             'specification': ('template',</span>
<span class="tok-go">                               {u'graph_index': 0,</span>
<span class="tok-go">                                u'host_name': u'heute',</span>
<span class="tok-go">                                u'service_description': u'CPU load',</span>
<span class="tok-go">                                u'site': u'heute'}),</span>
<span class="tok-go">             'title': u'CPU Load - 4.0  CPU Cores',</span>
<span class="tok-go">             'unit': ''}],</span>
<span class="tok-go"> 'result_code': 0}</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__retrieval_options_and_command_overview">
<span class="hidden-anchor sr-only" id="_retrieval_options_and_command_overview"></span>12. Retrieval options and command overview</h2>
<div class="sectionbody"><div class="sect2">
<h3 id="heading_list">
<span class="hidden-anchor sr-only" id="list"></span>12.1. Commands</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Command</th>
<th class="tableblock halign-left valign-top">request_format</th>
<th class="tableblock halign-left valign-top">output_format</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Optional</th>
</tr></thead>
<tbody>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Host commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">host name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">effective_attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">add_host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">host name, folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributes, nodes, create_folders</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">edit_host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">host name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unset_attributes, attributes, nodes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete_host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">host name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete_hosts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">host names</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_all_hosts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">effective_attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">discover_services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">host name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mode</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Directory commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">effective_attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">add_folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">folder, attributes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create_parent_folders</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">edit_folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributes, configuration_hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete_folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration_hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_all_folder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">effective_attributes</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Group commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">add_contactgroup, add_hostgroup, add_servicegroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">group name, alias, customer*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">nagvis_maps**</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">edit_contactgroup, edit_hostgroup, edit_servicegroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">group name, alias, customer*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">nagvis_maps**</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete_contactgroup, delete_hostgroup, delete_servicegroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">group name</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_all_contactgroups, get_all_hostgroups, get_all_servicegroups</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Group commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">add_users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">edit_users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete_users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_all_users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Ruleset commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_ruleset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ruleset_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">set_ruleset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ruleset_name, ruleset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration_hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_ruleset_info</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Host tag commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_hosttags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">set_hosttags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tag_groups, aux_tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration_hash</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Site commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">set_site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_config, site_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration_hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete_site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration_hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">login_site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_id, username, password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">logout_site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Grafana commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_user_sites</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_host_names</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_metrics_of_host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hostname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">site_id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_graph_recipes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr><td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><strong>Other commands</strong></p></td></tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activate_changes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mode, sites, allow_foreign_changes, comment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bake_agents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">get_graph</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">specification, data_range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>* Only used with the <span class="image-inline"><img src="../images/CME.svg" alt="CME" width="20" title="Checkmk Enterprise Managed Services Edition"></span> <strong>Checkmk Enterprise Managed Services Edition</strong></p></div>
<div class="paragraph"><p>** Only for contact group commands</p></div>
</div></div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#activate_changes">1. Activating changes</a></li>
<li>
<a href="#hosts">2. Host commands</a><ul class="sectlevel1">
<li><a href="#get_host">2.1. get_host</a></li>
<li><a href="#add_host">2.2. add_host</a></li>
<li><a href="#edit_host">2.3. edit_host</a></li>
<li><a href="#delete_host">2.4. delete_host</a></li>
<li><a href="#delete_hosts">2.5. delete_hosts</a></li>
<li><a href="#get_all_hosts">2.6. get_all_hosts</a></li>
<li><a href="#discover_services">2.7. discover_services</a></li>
</ul>
</li>
<li>
<a href="#_directory_commands">3. Directory commands</a><ul class="sectlevel1">
<li><a href="#get_folder">3.1. get_folder</a></li>
<li><a href="#add_folder">3.2. add_folder</a></li>
<li><a href="#edit_folder">3.3. edit_folder</a></li>
<li><a href="#delete_folder">3.4. delete_folder</a></li>
<li><a href="#get_all_folders">3.5. get_all_folders</a></li>
</ul>
</li>
<li>
<a href="#_group_commands">4. Group commands</a><ul class="sectlevel1">
<li><a href="#get_all_groups">4.1. get_all_groups</a></li>
<li><a href="#add_group">4.2. add_group</a></li>
<li><a href="#edit_group">4.3. edit_group</a></li>
<li><a href="#delete_group">4.4. delete_group</a></li>
</ul>
</li>
<li>
<a href="#users">5. User commands</a><ul class="sectlevel1">
<li><a href="#add_users">5.1. add_users</a></li>
<li><a href="#edit_users">5.2. edit_users</a></li>
<li><a href="#delete_users">5.3. delete_users</a></li>
<li><a href="#get_all_users">5.4. get_all_users</a></li>
</ul>
</li>
<li>
<a href="#_rule_set_commands">6. Rule Set commands</a><ul class="sectlevel1">
<li><a href="#get_rulset">6.1. get_ruleset</a></li>
<li><a href="#set_ruleset">6.2. set_ruleset</a></li>
<li><a href="#get_rulesets_info">6.3. get_rulesets_info</a></li>
</ul>
</li>
<li>
<a href="#_host_tag_commands">7. Host tag commands</a><ul class="sectlevel1">
<li><a href="#get_hosttags">7.1. get_hosttags</a></li>
<li><a href="#set_hosttags">7.2. set_hosttags</a></li>
</ul>
</li>
<li>
<a href="#_sites">8. Sites</a><ul class="sectlevel1">
<li><a href="#get_site">8.1. get_site</a></li>
<li><a href="#set_site">8.2. set_site</a></li>
<li><a href="#delete_site">8.3. delete_site</a></li>
<li><a href="#login_site">8.4. login_site &amp; logout_site</a></li>
</ul>
</li>
<li><a href="#bake_agents">9. Agent Bakery commands</a></li>
<li>
<a href="#_commands_for_status_data">10. Commands for status data</a><ul class="sectlevel1">
<li><a href="#get_graph">10.1. Metrics</a></li>
<li><a href="#get_sla">10.2. SLAs</a></li>
</ul>
</li>
<li>
<a href="#_commands_for_grafana">11. Commands for Grafana</a><ul class="sectlevel1">
<li><a href="#get_user_sites">11.1. get_user_sites</a></li>
<li><a href="#get_host_names">11.2. get_host_names</a></li>
<li><a href="#get_metrics_of_host">11.3. get_metrics_of_host</a></li>
<li><a href="#get_graph_recipes">11.4. get_graph_recipes</a></li>
</ul>
</li>
<li>
<a href="#_retrieval_options_and_command_overview">12. Retrieval options and command overview</a><ul class="sectlevel1"><li><a href="#list">12.1. Commands</a></li></ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
