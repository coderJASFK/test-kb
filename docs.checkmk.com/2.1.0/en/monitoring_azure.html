<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="The integration of Microsoft Azure into Checkmk enables seamless monitoring of cloud and on-premises in one interface and is described in detail here.">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Monitoring Microsoft Azure">
<meta name="og:description" content="The integration of Microsoft Azure into Checkmk enables seamless monitoring of cloud and on-premises in one interface and is described in detail here.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Monitoring Microsoft Azure</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.1.0/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.1.0/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.1.0/de/monitoring_azure.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.1.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.2.0/en/monitoring_azure.html">2.2.0</a><a class="dropdown-item" href="../../latest/en/monitoring_azure.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginnerâ€™s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and CentOS</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Host and service parameters</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Introduction to notifications</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMWare ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Performance data and graphing</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
<li>
<p><a href="managed.html">The Managed Services Edition</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Configuration via the Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
<li>
<p><a href="web_api.html">Configuration via HTTP-API</a></p>
</li>
<li>
<p><a href="web_api_references.html">Command reference for the HTTP-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_check_plugins.html">Writing your own check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Monitoring Microsoft Azure</h1>
<div class="details">
<span id="revdate">Last modified on 30-Dec-2021</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.1.0/en/monitoring_azure.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="heading__introduction">
<span class="hidden-anchor sr-only" id="_introduction"></span>1. Introduction</h2>
<div class="sectionbody">
<div class="imageblock inline-image"><div class="content"><img src="../images/azure_logo.png" alt="azure logo" width="140"></div></div>
<div class="paragraph"><p>Azure is Microsoftâ€™s answer to the cloud which allows users to
use the concepts of infrastructure as a service (IaaS), Platform as a
Service (PaaS) and Software as a Service (SaaS).</p></div>
<div class="paragraph"><p>Checkmk includes a extensive module for monitoring Microsoft Azure, consisting of a connector to Azure and a comprehensive collection of check plug-ins that retrieve and evaluate various metrics and statuses for you.</p></div>
<div class="paragraph"><p>In addition to general information about the costs that are incurred by your Azure environment and the current status of <a href="https://checkmk.com/integrations/azure_status" target="_blank">Azure in your region</a>, you can monitor the following Azure products with all editions of Checkmk:</p></div>
<div class="ulist"><ul>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_ad" target="_blank">AD Connect</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_vm" target="_blank">Azure Virtual Machines</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_load_balancer" target="_blank">Load Balancer</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_mysql" target="_blank">MySQL Database</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_postgresql" target="_blank">PostgreSQL Database</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_databases" target="_blank">SQL Databases</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_storageaccounts" target="_blank">Storage Accounts</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_traffic_manager" target="_blank">Traffic Manager</a></p></li>
<li><p><a href="https://checkmk.com/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=azure_virtual_network" target="_blank">Virtual Network Gateways</a></p></li>
<li><p><a href="https://checkmk.com/integrations/azure_sites" target="_blank">Webserver</a></p></li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__preparing_azure_for_checkmk">
<span class="hidden-anchor sr-only" id="_preparing_azure_for_checkmk"></span>2. Preparing Azure for Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__create_the_app">
<span class="hidden-anchor sr-only" id="_create_the_app"></span>2.1. Create the App</h3>
<div class="paragraph"><p>To monitor Azure with Checkmk, you will need your subscription ID
and your tenant ID (also known as the â€˜Directory IDâ€™).</p></div>
<div class="paragraph"><p>First, register Checkmk Monitoring as an app so that you can work with
the Azure API. The option for this can be found in the
<a href="https://portal.azure.com">Azure portal</a> at
<span class="guihint">Azure Active Directory &gt; App registrations &gt; New registration</span>:</p></div>
<div class="imageblock border"><div class="content"><img src="../images/azure_register_1.png" alt="azure register 1"></div></div>
<div class="paragraph"><p>Assign a name of your choice. In the example we use <code>my-check-mk-app</code>.
This is only for information. The reference to the app itself is actually made via a
UUID which you will see in a later step. You donâ€™t need to change anything
in the <span class="guihint">Supported accout types</span> section. Setting the <span class="guihint">Redirect URI</span> is optional.</p></div>
<div class="paragraph"><p>After the creation select the new app from the list of apps. If it does
not appear in the list, query Select <span class="guihint">My apps</span> on <span class="guihint">All apps</span>.
In the details for the app you will also find the <span class="guihint">Application (client) ID</span> that you will
need later. The <span class="guihint">Object-ID</span> is not required.</p></div>
<div class="imageblock border"><div class="content"><img src="../images/azure_register_2.png" alt="azure register 2"></div></div>
</div>
<div class="sect2">
<h3 id="heading__assigning_permissions_to_the_app">
<span class="hidden-anchor sr-only" id="_assigning_permissions_to_the_app"></span>2.2. Assigning permissions to the App</h3>
<div class="paragraph"><p>In order for your new app to have access rights to the monitoring data,
you must assign them here. On the left of the main navigation page select
the <span class="guihint">All resources</span> item, and then select the point <span class="guihint">Subscriptions</span>:</p></div>
<div class="imageblock border"><div class="content"><img src="../images/azure_subscriptions.png" alt="azure subscriptions"></div></div>
<div class="paragraph"><p>In this pageâ€™s navigation go to <span class="guihint">Access Control (IAM)</span> and select
<span class="guihint">Add</span>, and <span class="guihint">Add role assignment</span>:</p></div>
<div class="imageblock border"><div class="content"><img src="../images/azure_access_control.png" alt="azure access control"></div></div>
<div class="paragraph"><p>Now, under role enter <span class="guihint">Reader</span>, under <span class="guihint">Assign access to</span> select the value
<span class="guihint">Azure AD user, group, or service principal</span>, and enter your new appâ€™s name in the <span class="guihint">Select</span> option:</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_role_assignment.jpg" alt="azure role assignment" width="380"></div></div>
</div>
<div class="sect2">
<h3 id="heading__create_a_key_for_the_app">
<span class="hidden-anchor sr-only" id="_create_a_key_for_the_app"></span>2.3. Create a key for the app</h3>
<div class="paragraph"><p>Now you need a key (a secret) with which Checkmk can log in to the API.
You can create a key in the app settings under <span class="guihint">Certificates &amp; secrets</span>.
Simply click <span class="guihint">New client secret</span> in the <span class="guihint">Client secrets</span> section.</p></div>
<div class="imageblock border"><div class="content"><img src="../images/azure_register_5.png" alt="azure register 5"></div></div>
<div class="paragraph"><p>In the following window Microsoft would like you to enter a name of your choice in the <span class="guihint">Description</span> field. We have chosen <code>my-check-mk-key</code> here.
Donâ€™t forget to select the correct timeframe for your needs at the <span class="guihint">Expires</span> option.</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_register_6.png" alt="azure register 6" width="175"></div></div>
<div class="paragraph"><p>The setup under Azure is now complete, and you should now have the following four pieces of information:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Your Subscription-ID</p></li>
<li><p>Your Tenant-ID (also known as the â€˜Directory-IDâ€™).</p></li>
<li><p>The Application-ID (Client-ID) for the App <span class="guihint">my-check-mk-app</span></p></li>
<li><p>The secret for the key <span class="guihint">my-check-mk-key</span> for this app</p></li>
</ol></div>
<div class="paragraph"><p>If you do not have your tenant-ID at hand, find it by hovering over your
login name in the pop-up help under <span class="guihint">Directory: default directory â€¦â€‹.</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_register_tenant_id.png" alt="azure register tenant id" width="600"></div></div>
<div class="paragraph"><p>You can see the subscription IDâ€‰â€”â€‰for example on the
<span class="guihint">Cost Management + Billing</span> under <span class="guihint">My subscriptions</span>. <strong>Note</strong>: Nowadays
Microsoft does not display this ID as a hash, but instead as a human-readable
name. You can use this new-style name in the usual way.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__setting_up_monitoring_in_checkmk">
<span class="hidden-anchor sr-only" id="_setting_up_monitoring_in_checkmk"></span>3. Setting up monitoring in Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__the_azure_host">
<span class="hidden-anchor sr-only" id="_the_azure_host"></span>3.1. The Azure-Host</h3>
<div class="paragraph"><p>Even though you are not dealing with a <em>physical</em> host in Azure,
create a host for your Azure directory in Checkmk. The host name
you can define at will. Important: Because Azure is a service and therefore
does not have an IP address or DNS name (the special agent does the access itself),
you must set the <span class="guihint">IP Address Family</span> to <span class="guihint">No IP</span>.</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_wato_no_ip.png" alt="azure wato no ip"></div></div>
<div class="paragraph"><p>It is best to save with <span class="guihint">Save &amp; Finish</span> at this point, because of course the service detection cannot work yet.</p></div>
</div>
<div class="sect2">
<h3 id="heading__configuring_the_azure_agent">
<span class="hidden-anchor sr-only" id="_configuring_the_azure_agent"></span>3.2. Configuring the Azure-Agent</h3>
<div class="paragraph"><p>Since Azure cannot be queried through the regular Checkmk agent,
you now set up the Azure Special Agentâ€‰â€”â€‰which is also known as a
<a href="datasource_programs.html">data source program</a>. In this situation
Checkmk does not contact the destination host over TCP port 6556 as usual,
instead it calls a utility that communicates with the target system via
Azureâ€™s application-specific API.</p></div>
<div class="paragraph"><p>To do this, under <span class="guihint">Setup &gt; Agents &gt; VM, Cloud, Container &gt; Microsoft Azure</span>
create a rule whose <a href="wato_rules.html#conditions">conditions</a> apply exclusively to the
Azure host that has just been created.
There you will find the input fields for the IDs and the secret:</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_agent_rule.png" alt="azure agent rule"></div></div>
<div class="paragraph"><p>Here you can also select the resource groups or resources that you want to monitor.
If you <strong>have not</strong> checked <span class="guihint">explicitely specified groups</span>, all resource groups are automatically monitored.</p></div>
</div>
<div class="sect2">
<h3 id="heading__test">
<span class="hidden-anchor sr-only" id="_test"></span>3.3. Test</h3>
<div class="paragraph"><p>If you now perform a service discovery on the Azure host,
only a single service called <span class="guihint">Azure Agent Info</span> should be detected:</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_services_ok.png" alt="azure services ok"></div></div>
<div class="paragraph"><p>If access to the API does not work (because of a wrong ID or bad permissions, for example), an error message from the Azure API appears in the status text of
<span class="guihint">Azure Agent Info</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_services_fail.png" alt="azure services fail"></div></div>
</div>
<div class="sect2">
<h3 id="heading__make_resource_groups_available_as_hosts">
<span class="hidden-anchor sr-only" id="_make_resource_groups_available_as_hosts"></span>3.4. Make resource groups available as hosts</h3>
<div class="paragraph"><p>For clarity, Azure monitoring in Checkmk has been designed so that each Azure
resource group is represented by a logical (so to speak) host in Checkmk.
This is done with the help of a <a href="piggyback.html">piggyback procedure</a>.
This piggyback will take data from the Azure host using special agents,
and within Checkmk redirect it to these resource group hosts.</p></div>
<div class="paragraph"><p>The resource group hosts do not automatically appear in Checkmk.
Place these hosts either manually or optionally with the new <a href="dcd.html">Dynamic Configuration Daemon (DCD)</a>. Importantâ€‰â€”â€‰when doing so the names of the hosts must exactly match the names of the resource groupsâ€‰â€”â€‰and this is also case-sensitive! If you are uncertain about the exact spelling of the groupsâ€™ names, you can do this directly from the <span class="guihint">Azure Agent Info</span> service on the Azure host.</p></div>
<div class="paragraph"><p>By the wayâ€‰â€”â€‰with the auxiliary <code>find_piggy_orphans</code> script from the
Treasures Directory you will find all of the Piggyhosts for which there are data,
but which have not yet been created as a host in Checkmk:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>share/doc/check_mk/treasures/find_piggy_orphans
<span class="tok-go">Glastonbury</span>
<span class="tok-go">Woodstock</span></code></pre></div></div>
<div class="paragraph"><p>Configure the resource group hosts without an IP address (analogous to the
Azure host), and select <span class="guihint">No API integrations, no checkmk agent</span> as the agent and <span class="guihint">Always use and expect piggyback data</span> as piggyback.</p></div>
<div class="imageblock"><div class="content"><img src="../images/wato_host_no_agent.png" alt="wato host no agent"></div></div>
<div class="paragraph"><p>If you now perform a service discovery on one of these resource group hosts,
you will find there are additional services that specifically relate to this resource group:</p></div>
<div class="imageblock"><div class="content"><img src="../images/azure_services_piggy.png" alt="azure services piggy"></div></div>
<div class="sect3">
<h4 id="heading__choosing_different_names_for_the_resource_group_hosts">
<span class="hidden-anchor sr-only" id="_choosing_different_names_for_the_resource_group_hosts"></span>Choosing different names for the resource group hosts</h4>
<div class="paragraph"><p><strong>Tip</strong>: If you want to freely-choose the names of the resource group hosts,
with the
<span class="guihint">Setup &gt; Agents &gt; Access to Agents &gt; Hostname translation for piggybacked hosts</span> rule you can define a conversion of resource groups to hosts.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__virtual_machines_vms">
<span class="hidden-anchor sr-only" id="_virtual_machines_vms"></span>3.5. Virtual machines (VMs)</h3>
<div class="paragraph"><p>When you use Azure to monitor virtual machines which simultaneously serve as your normal host in Checkmkâ€‰â€”â€‰you can use the Azure services associated with those VMs instead
of the resource group hosts associated directly with the VM hosts in Checkmk.
To do this, in the Azure rule, under the <span class="guihint">Map data relating to VMs</span> option, select the <span class="guihint">Map data to the VM itself</span> setting. For this to work the VMâ€™s Checkmk host in monitoring
must have exactly the same name as the corresponding VM in Azure.</p></div>
</div>
<div class="sect2">
<h3 id="heading__rate_limit_for_api_queries">
<span class="hidden-anchor sr-only" id="_rate_limit_for_api_queries"></span>3.6. Rate limit for API queries</h3>
<div class="paragraph"><p>Currently the API queries that Checkmk needs for monitoring Azure (as opposed to <a href="monitoring_aws.html">AWS</a>) are freeâ€‰â€”â€‰however there is a limit to the number of queries
permitted per time period (the â€˜Rate Limitâ€™). Per Application ID the limit is 12,000 read requests per hour.</p></div>
<div class="paragraph"><p>Due to the structure of the API, Checkmk requires at least one or more queries per requested resource. Therefore the total number of queries scales linearly with the number of resources being monitored. If the query limit is reached or exceeded, the query fails with a HTTP code 429 (too many requests), and the <span class="guihint">Check_MK</span> service for the Azure host is flagged as critical.</p></div>
<div class="paragraph"><p>This rate limit results from Azureâ€™s so-called â€˜token bucketâ€™
algorithm. It all starts with you having a â€˜creditâ€™ of 12,000
remaining queriesâ€‰â€”â€‰each query consumes one of these. Simultaneously
3.33 queries per second are added to the credit. The output of the service
<span class="guihint">Azure Agent Info</span> lets you see how many queries are currently left.</p></div>
<div class="paragraph"><p>Specifically, this means that:</p></div>
<div class="ulist"><ul>
<li><p>If your query rate is sufficiently low, the available queries are always just under 12,000.</p></li>
<li><p>If your rate is too high, the credit will slowly go down to 0 and then errors will occur sporadically in the query.</p></li>
</ul></div>
<div class="paragraph"><p>In this case you can reduce the polling rate by querying fewer polling resource groups
or resources, or by reducing the check interval for the <span class="guihint">Check_MK</span> active check on the Azure host.
This is possible with the <span class="guihint">Monitoring Configuration &gt; Normal check interval for service checks</span> rule.</p></div>
<div class="paragraph"><p>So that you can react in time, the <span class="guihint">Azure Agent Info</span> service monitors the number of remaining queries and warns you in advance. By default, for the remaining queries the warning threshold is 50%, and the critical threshold is at 25%.</p></div>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li>
<a href="#_preparing_azure_for_checkmk">2. Preparing Azure for Checkmk</a><ul class="sectlevel1">
<li><a href="#_create_the_app">2.1. Create the App</a></li>
<li><a href="#_assigning_permissions_to_the_app">2.2. Assigning permissions to the App</a></li>
<li><a href="#_create_a_key_for_the_app">2.3. Create a key for the app</a></li>
</ul>
</li>
<li>
<a href="#_setting_up_monitoring_in_checkmk">3. Setting up monitoring in Checkmk</a><ul class="sectlevel1">
<li><a href="#_the_azure_host">3.1. The Azure-Host</a></li>
<li><a href="#_configuring_the_azure_agent">3.2. Configuring the Azure-Agent</a></li>
<li><a href="#_test">3.3. Test</a></li>
<li>
<a href="#_make_resource_groups_available_as_hosts">3.4. Make resource groups available as hosts</a><ul class="sectlevel2"><li><a href="#_choosing_different_names_for_the_resource_group_hosts">Choosing different names for the resource group hosts</a></li></ul>
</li>
<li><a href="#_virtual_machines_vms">3.5. Virtual machines (VMs)</a></li>
<li><a href="#_rate_limit_for_api_queries">3.6. Rate limit for API queries</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
