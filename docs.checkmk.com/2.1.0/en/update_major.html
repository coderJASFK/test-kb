<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="In this article you will learn what to consider when updating from Checkmk version 2.0.0 to 2.1.0.">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Update to version 2.1.0">
<meta name="og:description" content="In this article you will learn what to consider when updating from Checkmk version 2.0.0 to 2.1.0.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Update to version 2.1.0</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.1.0/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.1.0/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.1.0/de/update_major.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.1.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.2.0/en/update_major.html">2.2.0</a><a class="dropdown-item" href="../../latest/en/update_major.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginner’s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and CentOS</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Host and service parameters</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Introduction to notifications</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMWare ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Performance data and graphing</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
<li>
<p><a href="managed.html">The Managed Services Edition</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Configuration via the Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
<li>
<p><a href="web_api.html">Configuration via HTTP-API</a></p>
</li>
<li>
<p><a href="web_api_references.html">Command reference for the HTTP-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_check_plugins.html">Writing your own check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Update to version <span class="new">2.1.0</span>
</h1>
<div class="details">
<span id="revdate">Last modified on 28-Feb-2023</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.1.0/en/update_major.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">This page was exported for offline usage on 2025-01-07 22:12:14 +0000. It may not reflect the current state of the Checkmk documentation. To view a daily updated version, visit <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a>.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="update.html">Updates and Upgrades</a>
<a href="install_packages.html">Basic information on the installation of Checkmk</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_intro">
<span class="hidden-anchor sr-only" id="intro"></span>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>In this article you will find the most important topics relevant to an update of your Checkmk from version <span class="new">2.0.0</span> to version <span class="new">2.1.0</span>.</p></div>
<div class="paragraph"><p>We recommend that you read through the entire article before updating so that you know exactly what to expect: before, during and after the update.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_prep">
<span class="hidden-anchor sr-only" id="prep"></span>2. Preparations</h2>
<div class="sectionbody">
<div class="paragraph"><p>This chapter gives you an overview of the topics you should take into consideration before you perform the update.
Probably not every topic will be relevant for you:
For each topic, you can check the corresponding box for your own reference and immediately move on to the next topic.</p></div>
<div class="sect2">
<h3 id="heading_backup">
<span class="hidden-anchor sr-only" id="backup"></span>2.1. Backup</h3>
<div class="paragraph"><p>As with any update to production software, you should check that your backups are up to date before performing the update of Checkmk.</p></div>
<div class="paragraph"><p><strong>Does this apply to you?</strong> Yes.</p></div>
<div class="paragraph"><p><strong>What do you have to do?</strong> If you create your backups automatically via <span class="guihint">Setup &gt; Maintenance &gt; Backups</span>, check there that your backups are up to date and that the most recent backup jobs have completed without errors.</p></div>
<div class="paragraph"><p>For more information, see the articles on <a href="backup.html">Backups</a> and on <a href="omd_basics.html#omd_backup_restore">Backing up and restoring sites</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_linux_versions">
<span class="hidden-anchor sr-only" id="linux_versions"></span>2.2. Linux distribution versions</h3>
<div class="paragraph"><p>In Checkmk version <span class="new">2.1.0</span>, some obsolete versions of the Ubuntu distribution are no longer supported.
For users of Debian, SLES, and RHEL (as well as binary-compatible derivatives such as CentOS), there are no changes.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> This will affect you if your Checkmk server has one of the following Ubuntu versions installed that are still supported in <span class="new">2.0.0</span>:</p></div>
<div class="ulist"><ul>
<li><p>Ubuntu 20.10 <em>Groovy Gorilla</em>.</p></li>
<li><p>Ubuntu 21.04 <em>Hirsute Hippo</em></p></li>
</ul></div>
<div class="paragraph"><p>Still supported at release of <span class="new">2.1.0</span>, but not recommended:
For Ubuntu 21.10 (<em>Impish Indri</em>), support with security updates was discontinued by Canonical during the beta phase of <span class="new">2.1.0</span>.
Debian 9 (<em>Stretch</em>) will also no longer receive security updates shortly after the release of Checkmk <span class="new">2.1.0</span>.</p></div>
<div class="paragraph"><p>New additions are Debian 11 <em>Bullseye</em> and Ubuntu 22.04 <em>Yammy</em>.
For both distributions we also build installation packages of <span class="new">2.0.0</span> to simplify the recommended update path.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> Before updating Checkmk, first perform a version upgrade of the Linux distribution.
Make sure that the target version of the Linux distribution is supported by Checkmk <span class="new">2.0.0</span> <strong>and</strong> <span class="new">2.1.0</span>.</p></div>
<div class="paragraph"><p>To find out which Linux distribution versions Checkmk supports, see the <a href="update_matrix.html">update matrix for version <span class="new">2.1.0</span></a> and the <a href="https://checkmk.com/download" target="_blank">download page</a> after selecting the Checkmk version and your Linux distribution.</p></div>
<div class="paragraph"><p>If it is now necessary to perform a version upgrade of your Linux distribution before updating Checkmk, we recommend the following procedure:</p></div>
<div class="olist arabic"><ol class="arabic"><li>
<p>First, stop your Checkmk site:</p>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>stop<span class="tok-w"> </span>mysite</code></pre></div></div>
</li></ol></div>
<div class="olist arabic"><ol class="arabic" start="2"><li>
<p>Unmount the site’s <code>tmp</code> directory:</p>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>umount<span class="tok-w"> </span>/opt/omd/sites/mysite/tmp</code></pre></div></div>
</li></ol></div>
<div class="olist arabic"><ol class="arabic" start="3"><li>
<p>Move the entire <code>omd</code> directory so that no unwanted changes can occur to this in the next step.
A release upgrade usually removes all packages whose dependencies can no longer be satisfied.
One of these packages would be Checkmk.
To prevent data loss here, this step is necessary and can be performed using <code>mv</code>.</p>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>mv<span class="tok-w"> </span>/opt/omd<span class="tok-w"> </span>/opt/omd.bak</code></pre></div></div>
</li></ol></div>
<div class="olist arabic"><ol class="arabic" start="4">
<li><p>Perform the Linux version upgrade according to the distributor’s instructions.</p></li>
<li>
<p>After successfully upgrading your Linux distribution, you can now return the <code>omd</code> directory that was moved to safety back into its correct place:</p>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>mv<span class="tok-w"> </span>/opt/omd.bak<span class="tok-w"> </span>/opt/omd</code></pre></div></div>
</li>
</ol></div>
<div class="olist arabic"><ol class="arabic" start="6"><li>
<p>Now install the package from Checkmk that matches the new version of the distribution you are using.
<strong>Important:</strong> The Checkmk version number must be exactly the same as the one that was in use previously.
For example, if you were using Checkmk <span class="new">2.0.0</span>p23 before upgrading the distribution, now install the <span class="new">2.0.0</span>p23 that matches your new Linux distribution version.</p>
<div class="paragraph"><p>In the case of Ubuntu, the following command would suffice at this point:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>apt<span class="tok-w"> </span>install<span class="tok-w"> </span>/tmp/check-mk-enterprise-2.0.0p23_0.jammy_amd64.deb</code></pre></div></div>
<div class="paragraph"><p><strong>Note:</strong> During installation, specify the full file path to the DEB file via <code>apt install</code>.</p></div>
</li></ol></div>
<div class="paragraph"><p>When reinstalling Checkmk, follow the <a href="install_packages.html#distribution_instructions">detailed installation instructions</a> relevant for your distribution.</p></div>
</div>
<div class="sect2">
<h3 id="heading_agents">
<span class="hidden-anchor sr-only" id="agents"></span>2.3. The agents for Linux and Windows</h3>
<div class="paragraph"><p>With <span class="new">2.1.0</span> Checkmk is introducing two new components, the <em>Agent Controller</em> (on the host), and the <em>Agent Receiver</em> (on the server), for the Linux and Windows agents on x86/64, which allow TLS encrypted transmission of the agent output.
The Agent Controller will initially operate in a compatibility mode (<strong>legacy pull mode</strong>) that also allows access from <span class="new">2.0.0</span> sites.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> Yes.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> Identify those Windows hosts in the monitoring that use the Windows server operating systems 2008 R2 and client operating systems 7 or higher on x86_64.
The same applies for Linux hosts on x86_64 that use <code>systemd</code> version 220 or later for service management.
On these hosts, register with the monitoring server following the update to be able to use TLS encrypted transmission.
For more detailed information, see the instructions for <a href="agent_linux.html#registration">Linux</a> or <a href="agent_windows.html#registration">Windows</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_local_files">
<span class="hidden-anchor sr-only" id="local_files"></span>2.4. Local files</h3>
<div class="paragraph"><p>Local files allow you to customize and extend the functionality provided by Checkmk.
These files are located in the local part of the site’s directory structure, i.e. in <code>~/local</code>.
Local files can cause problems when updating, as they may not match the new Checkmk version.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> Since it is not possible for Checkmk to intercept and handle local customizations or any third-party extension during an update, you should check your Checkmk site before an update to see if any local files are used on your system, and if so, which ones.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> Get an overview of the local files on your Checkmk site by running the following command as the site user (where the <code>-L</code> option ensures that symbolic links are also followed):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>find<span class="tok-w"> </span>-L<span class="tok-w"> </span>~/local<span class="tok-w"> </span>-type<span class="tok-w"> </span>f</code></pre></div></div>
<div class="paragraph"><p>In a freshly-installed Checkmk, you should see only a file named <code>README.TXT</code> listed at this time.
Anything beyond that should be at the top of your list for troubleshooting, in case there are problems during the update.
Special attention should be paid to check plug-ins that still follow the old check API that was valid until version <span class="new">1.6.0</span>.
We will go into this in more detail in the next chapter.</p></div>
</div>
<div class="sect2">
<h3 id="heading_check-api">
<span class="hidden-anchor sr-only" id="check-api"></span>2.5. The Check API</h3>
<div class="paragraph"><p>A new Check API was introduced in Checkmk <span class="new">2.0.0</span> which restructured the Check plug-ins to unify and simplify their handling.
However, since there are a large number of checks that were programmed for the old Check API which was valid until version <span class="new">1.6.0</span>, migrating from the old to the new Check API may also be an issue for you in version <span class="new">2.1.0</span>.
The large number of existing checks is also the reason why the old Check API will continue to be supported for a transition period.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> The Check API issue <em>may</em> affect you if you have extended the checks shipped with Checkmk with your own, self-written checks and/or if you use plug-ins from other sources and have downloaded these, e.g. from the <a href="https://exchange.checkmk.com/" target="_blank">Checkmk Exchange</a>.
The issue will affect you if one, some or even all of these check plug-ins still follow the old check API.
The affected files can be found in your site’s <a href="#local_files">local files</a>.</p></div>
<div class="paragraph"><p><strong>What do you have to do?</strong> We try to make the change to the new Check API as easy and convenient as possible for you:</p></div>
<div class="paragraph"><p>Just as when updating to version <span class="new">2.0.0</span>, Checkmk tries to automatically migrate all local plug-ins from the directories <code>~/local/share/check_mk/checks</code> and <code>~/local/share/check_mk/inventory</code> to the new Check API when updating to version <span class="new">2.1.0</span>.
This 'automigration' happens at runtime; the plug-in files are not changed.
For information on how to view the results following the update, see chapter <a href="#automigration">Verify automigration to the Check API</a>.</p></div>
<div class="paragraph"><p>While chances are good that the automigration of your check plug-ins will work smoothly, the switch to Python 3, also implemented in version <span class="new">2.0.0</span>, may require some adaptations.
Due to the new Check API and the Python 3 code base, there are now two good reasons to revise your self-written check plug-ins.
We will provide you with detailed information on what you need to do in the <a href="https://checkmk.com/blog/migrating-check-plug-ins-to-checkmk-2-0" target="_blank">blog post on migrating check plug-ins.</a></p></div>
<div class="paragraph"><p>Last but not least, the new Check API scores with its improved documentation:
There is an introductory article on <a href="devel_check_plugins.html">programming your own check plug-ins</a> as well as the always up to date plug-in API reference documentation.
Both can be accessed from the Checkmk interface — in the <span class="guihint">Help</span> menu of the navigation bar under <span class="guihint">Developer resources.</span></p></div>
</div>
<div class="sect2">
<h3 id="heading_incompatible_mkps">
<span class="hidden-anchor sr-only" id="incompatible_mkps"></span>2.6. Incompatible and obsolete MKPs</h3>
<div class="paragraph"><p>Your monitoring system can be extended quite easily and conveniently via the <a href="glossar.html#mkp">Checkmk extension packages (MKPs)</a>.
On the one hand, it can be the case that such MKPs are no longer maintained and may then no longer be compatible with new versions of Checkmk.
On the other hand, we keep adding new plug-ins and functional extensions to Checkmk, which is why MKPs sometimes simply become obsolete, and their functionality will be provided by Checkmk itself.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> If you have MKPs installed, for this reason a check of these MKPs is strongly recommended — especially before a major update.
This will prevent incompatible packages from interfering with the update, or the creation of duplicate or at least very similar services following the update.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> To do this, check your installed MKPs against our <a href="https://checkmk.com/integrations" target="_blank">Catalog of Check Plug-ins</a> and remove packages which are now provided natively by Checkmk.
You can also use this opportunity to remove MKPs that may have only been installed for a test run.
A listing can be found via <span class="guihint">Setup &gt; Maintenance &gt; Extension packages</span>.</p></div>
<div class="paragraph"><p>On the command line, you can view installed extensions with the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list
<span class="tok-go">my_mkp_from_exchange</span>
<span class="tok-go">my_personal_mkp</span></code></pre></div></div>
<div class="paragraph"><p>Then for each listed MKP you can subsequently also display the files that belong to the package:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list<span class="tok-w"> </span>my_personal_mkp
<span class="tok-go">/omd/sites/mysite/local/lib/check_mk/base/plugins/agent_based/check_mk.py</span>
<span class="tok-go">/omd/sites/mysite/local/share/check_mk/web/plugins/metrics/custom_metrics.py</span></code></pre></div></div>
<div class="paragraph"><p>Should you not be able to assign all packages via the check of the installed MKPs and the comparison with our catalog, the <a href="#dry_run">test run of the update,</a> described hereafter is recommended to identify incompatibilities in the process and then before the update remove these from your production monitoring.</p></div>
<div class="sect3">
<h4 id="heading_mkp_backport">
<span class="hidden-anchor sr-only" id="mkp_backport"></span>MKP management from versions <span class="new">2.0.0</span>p33 and <span class="new">2.1.0</span>p21</h4>
<div class="admonitionblock important"><table><tr>
<td class="icon"><img src="../images/icons/important.png" alt="Important"></td>
<td class="content"><div class="paragraph"><p><strong>Risk of loss of settings!</strong>
When updating the major version, Checkmk deletes rules that are no longer required.
If you uninstall packages <em>before</em> the update in order to install a new version <em>after</em> the update, settings that are still required may be lost.
Instead, always install new and old packages in parallel as described in this section and only remove old packages after the update.</p></div></td>
</tr></table></div>
<div class="paragraph"><p>To facilitate updates, Checkmk <span class="new">2.0.0</span>p33 and <span class="new">2.1.0</span>p21 introduced the ability to maintain MKPs in different versions.
When updating, the package for Checkmk <span class="new">2.0.0</span> is then automatically deactivated and the one for Checkmk <span class="new">2.1.0</span> automatically activated.
When operating a distributed monitoring with a <a href="glossar.html#distributed_setup">centralized configuration</a>, you can use this feature to <a href="#dist_setup">distribute</a> packages in versions that can differ between the remote sites and the central site.</p></div>
<div class="paragraph"><p>This works even if the remote sites have a higher version than the central site, as is the case when updating in a distributed monitoring during a transitional period.</p></div>
<div class="paragraph"><p>Note that you can only use this feature if you use at least <span class="new">2.0.0</span>p33 as the initial version and upgrade to <span class="new">2.1.0</span>p21 or higher!
If these requirements are met, you can add additional packages for <span class="new">2.1.0</span> on the central site.</p></div>
<div class="paragraph"><p>When installing an MKP written for Checkmk <span class="new">2.1.0</span>, you will get a warning message when using Checkmk <span class="new">2.0.0</span>p33 and higher:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>install<span class="tok-w"> </span>/tmp/hello_world-0.2.1.mkp
<span class="tok-go">The package requires Check_MK version 2.1.0, but you have 2.0.0p33 installed.</span></code></pre></div></div>
<div class="paragraph"><p>This package is identified in the list of packages as being <span class="guihint">Enabled (inactive on this site)</span>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list
<span class="tok-go">Name        Version Title        Req. Version Until Version Files State</span>
<span class="tok-go">----------- ------- ------------ ------------ ------------- ----- -------------------------------</span>
<span class="tok-go">hello_world 0.2.1   Hello world! 2.1.0        2.1.999       6     Enabled (inactive on this site)</span>
<span class="tok-go">hello_world 0.2.0   Hello world! 2.0.0        2.0.999       6     Enabled (active on this site)</span></code></pre></div></div>
<div class="paragraph"><p>Details on the revised package management function can be found in the <a href="mkps.html">article on extension package (MKPs) management</a>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_incompatible">
<span class="hidden-anchor sr-only" id="incompatible"></span>2.7. Incompatible changes</h3>
<div class="paragraph"><p>As in every Checkmk version, there are alterations to the software in the current version <span class="new">2.1.0</span> that <em>may</em> have repercussions on your Checkmk installation.
A so-called <em>incompatible change</em> requires that you make manual modifications in order to allow existing functions to continue to run as usual and/or to be able to use new functions.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> In general, there will be incompatible changes that will also affect your Checkmk installation, it is however impossible to make a general statement.
In this article we have collected those issues that apply to all or most Checkmk installations.
In any case there may be additional changes that are relevant to you, for example in checks that you use in your installation.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> Once you have performed the <a href="#update">update</a>, the Checkmk interface will show you the number and content of any incompatible changes, and prompt you to review and take note of them.
So you will definitely be confronted with this issue — but only after you have performed the update.</p></div>
<div class="paragraph"><p>It is therefore a good idea to get an overview of the incompatible changes <strong>before</strong> the update:
Open the list of <a href="https://checkmk.com/werks?search=&amp;cmk_version[]=2.1&amp;compatible=0" target="_blank">Werks</a>.
(The software development of Checkmk is organized in so-called Werks).
In the description of a Werk, you will find instructions on what, if anything, needs to be done to make the change compatible.</p></div>
<div class="paragraph"><p>The frustrating news:
A version’s Werks list is very, very long — even if it contains only the incompatible changes.
The comforting news:
You will be able to see from the number of changes how much effort we put into improving Checkmk for you.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_update">
<span class="hidden-anchor sr-only" id="update"></span>3. Updates</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_dry_run">
<span class="hidden-anchor sr-only" id="dry_run"></span>3.1. Best practices when updating</h3>
<div class="paragraph"><p>In this section we describe the best practices that we follow even when updating large Checkmk environments.
These are certainly not mandatory in every environment, but they can make the process of updating easier for you.</p></div>
<div class="sect3">
<h4 id="heading__update_the_operating_system">
<span class="hidden-anchor sr-only" id="_update_the_operating_system"></span>Update the operating system</h4>
<div class="paragraph"><p>The operating system on a Checkmk server should in any case always be up to date.
However, before updating Checkmk, it certainly does not hurt to make sure of the operating system’s currency beforehand, by using <code>apt</code> (for Debian and Ubuntu), <code>yum</code> (for Red Hat Enterprise Linux (RHEL) based systems) or <code>zypper</code> (for SUSE Linux Enterprise Server).</p></div>
</div>
<div class="sect3">
<h4 id="heading__update_the_checkmk_version">
<span class="hidden-anchor sr-only" id="_update_the_checkmk_version"></span>Update the Checkmk version</h4>
<div class="paragraph"><p>Before updating to version <span class="new">2.1.0</span>, the Checkmk site must have version <span class="new">2.0.0</span> installed.</p></div>
<div class="paragraph"><p>We have previously advised against omitting an intermediate major version when performing a major update, as there are simply too many changes in between that will hinder a smooth update and almost certainly cause problems.
With <a href="https://checkmk.com/werk/13320" target="_blank">Werk #13320</a>, this recommendation has now been made into a requirement — and a lock introduced that prevents, for example, a direct update from version <span class="new">1.6.0</span> to <span class="new">2.1.0</span>.</p></div>
<div class="paragraph"><p>An update to version <span class="new">2.1.0</span> does not currently require a specific <span class="new">2.0.0</span> patch version.
However, again, there are good reasons to start the jump to <span class="new">2.1.0</span> only from the latest <span class="new">2.0.0</span> patch version, since, for example, a <span class="new">2.0.0</span> patch may contain fixes that make it easier to update to version <span class="new">2.1.0</span>.</p></div>
<div class="paragraph"><p>For this reason, we recommend updating Checkmk to the latest <span class="new">2.0.0</span> patch version first, and only then updating to the <span class="new">2.1.0</span>.</p></div>
</div>
<div class="sect3">
<h4 id="heading__perform_a_test_run_of_the_update">
<span class="hidden-anchor sr-only" id="_perform_a_test_run_of_the_update"></span>Perform a test run of the update</h4>
<div class="paragraph"><p>In large environments, where obviously even restoring a current backup of your Checkmk environment could take quite some time, it is recommended to perform a test with a cloned site before updating the production environment.
For this purpose, you can, for example, restore the last regular backup of your site under a different name.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>restore<span class="tok-w"> </span>newsite<span class="tok-w"> </span>/path/to/backup</code></pre></div></div>
<div class="paragraph"><p><strong>Alternatively</strong> you can also copy your site using <code>omd cp</code>.
For this, however, the site must be stopped for a short time:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>stop<span class="tok-w"> </span>mysite
<span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>cp<span class="tok-w"> </span>mysite<span class="tok-w"> </span>newsite</code></pre></div></div>
<div class="paragraph"><p>Then, perform the update first on this new cloned site, for example to check the above mentioned local changes in the new environment.</p></div>
</div>
<div class="sect3">
<h4 id="heading_automatic_agent_updates">
<span class="hidden-anchor sr-only" id="automatic_agent_updates"></span>Temporarily disable agent updates</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
If you are using the automatic agent updates, you should consider disabling them temporarily before updating Checkmk so as to be able to later switch to the new agents at the hosts in a controlled manner.
To do this, first select <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX</span> and on the following page select the menu item <span class="guihint">Agents &gt; Automatic updates.</span>
By clicking on the <span class="image-inline"><img src="../images/icons/icon_edit.png" alt="Icon to edit a list entry."></span> button in front of the <span class="guihint">Master switch</span> you can disable the agent update completely:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_major_automatic_agent_updates.png" alt=" Disabling agent update using the master switch."></div></div>
<div class="paragraph"><p>Following a successful update of Checkmk, you can reactivate the agent update in the same way.</p></div>
<div class="paragraph"><p>At this point, we recommend that you initially only reactivate the automatic agent update for individual hosts or host groups.
By doing so, the new agent will not be rolled out to all of your servers right away and you can familiarize yourself with the newly delivered data on a few systems.
Also, due to the significant increase in the number of check plug-ins supplied, you might find a whole new set of services that you can then set up properly on the test systems you choose.
You may also need new thresholds for new services.
If you tackle this on a small scale first, you will be able to minimize unnecessary false positives.</p></div>
<div class="paragraph"><p>To do this, you can simply enter a few hosts or host groups in the appropriate fields on the above page and then re-enable the <span class="guihint">Master switch</span>.</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_major_activate_update_on_selected_hosts.png" alt="Options when updating agents to activate on specific hosts."></div></div>
<div class="paragraph"><p><strong>Important:</strong> Remember to remove these restrictions on explicit hosts and host groups again once you are satisfied with the results.</p></div>
</div>
<div class="sect3">
<h4 id="heading_notifications">
<span class="hidden-anchor sr-only" id="notifications"></span>Temporarily disable notifications</h4>
<div class="paragraph"><p>You should also consider turning off <a href="glossar.html#notification">notifications</a> in the pre-update site — for similar reasons to the ones we explained in the previous section on automatic agent updates.
This way you avoid your colleagues from the monitoring team receiving <em>unnecessary</em> notifications.</p></div>
<div class="paragraph"><p>You can turn off notifications centrally with the main <span class="guihint">Notifications</span> switch in the <a href="user_interface.html#master_control">Master control</a> snapin.</p></div>
<div class="paragraph"><p>It may will happen that after the update one or another service is <span class="state2">CRIT</span> which had not been the case previously.
Take care of new problems after the update first.
You can also view any unhandled problems, e.g. in the <a href="user_interface.html#overview">Overview</a> snapin.</p></div>
<div class="paragraph"><p><strong>Important:</strong> Don’t forget to turn on the notifications again, e.g. when the number of unhandled problems after the update has leveled off to the level before the update.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_update_distributed_monitoring">
<span class="hidden-anchor sr-only" id="update_distributed_monitoring"></span>3.2. Updates in distributed monitoring</h3>
<div class="paragraph"><p>You have a number of procedures for performing the update of the sites involved in a <a href="distributed_monitoring.html">distributed monitoring</a>, i.e. the central site and the remote sites.</p></div>
<div class="paragraph"><p><strong>Important:</strong> Whichever approach you choose:
In this scenario, you should also create <a href="backup.html">backups</a> beforehand.</p></div>
<div class="paragraph"><p>The recommended, safe procedure is <em>update in one go</em>, where you perform the following steps:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Stop all sites .</p></li>
<li><p>Perform the update for all sites.</p></li>
<li><p>Restart the updated sites.</p></li>
</ol></div>
<div class="paragraph"><p>There is another variant: the <em>Update on the fly</em>.
This procedure is required, among other things, when you manage a large number of distributed sites that cannot be updated in one go for technical or organizational reasons.</p></div>
<div class="paragraph"><p>When updating on the fly, sites with different Checkmk versions must communicate with each other for a transition period — until the update of all sites involved is complete.
For this cooperation to work, the versions involved in such a mixed operation must be compatible.</p></div>
<div class="sect3">
<h4 id="heading_compat_chart">
<span class="hidden-anchor sr-only" id="compat_chart"></span>Compatibility table</h4>
<div class="paragraph"><p>With <a href="https://checkmk.com/werk/13313" target="_blank">Werk #13313</a>, version checks have been added to ensure that the sites involved are using compatible versions.
To summarize:
Sites must have the same Checkmk major version — with one exception: the Checkmk version of a remote site may be exactly one major version higher than that of the central site.
The following table shows the possible combinations when updating from <span class="new">2.0.0</span> to <span class="new">2.1.0</span>:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 40%;">
<col style="width: 20%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Central site</th>
<th class="tableblock halign-left valign-top">Remote site</th>
<th class="tableblock halign-left valign-top">Allowed?</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.0.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.0.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.0.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.1.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.1.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.0.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>No</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.1.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="new">2.1.0</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>For patch versions, the same applies in principle as mentioned above:
The central site must never use a higher version than the remote sites.
However, deviations greater than one <em>patch</em> version are often allowed.
For specific details on compatibility, see the <a href="https://checkmk.com/werks/" target="_blank">Werks</a>.</p></div>
<div class="paragraph"><p>It follows from these rules that when updating on the fly, the central site is updated last.
Note that the following also applies when updating in a distributed monitoring: major versions must not be omitted, so that, for example, a connection between a <span class="new">1.6.0</span> and a <span class="new">2.1.0</span> site is not supported.</p></div>
<div class="paragraph"><p><strong>Note:</strong> Since the feature set of different Checkmk versions differs, some features of Checkmk may not work in this mixed mode or may work only in a limited way.
In a mixed operation, problems can occur even with compatible versions, and smooth interaction is only ensured if all sites have the same major version.
You should therefore keep the period of a mixed operation with different versions as short as possible and update all sites quickly after starting the update.</p></div>
</div>
<div class="sect3">
<h4 id="heading_dist_setup">
<span class="hidden-anchor sr-only" id="dist_setup"></span>MKPs in a distributed setup</h4>
<div class="paragraph"><p>If you are running a distributed monitoring with a <a href="glossar.html#distributed_setup">central configuration</a> from which <a href="glossar.html#mkp">Checkmk extension packages (MKPs)</a> are also distributed to the remote sites, you have the option to keep packages for the remote sites in versions for <span class="new">2.0.0</span> and <span class="new">2.1.0</span> on the Checkmk <span class="new">2.0.0</span> central site.
The MKPs matching the remote sites will then be distributed automatically.</p></div>
<div class="paragraph"><p>To use this feature, you must first update the central site to patch version <span class="new">2.0.0</span>p33.
Once this has been done, you can start adding additional <a href="#mkp_backport">packages for <span class="new">2.1.0</span> on the central site</a>.
Now, when you upgrade remote sites to <span class="new">2.1.0</span>p21, they will automatically receive and activate the package matching the new version.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__performing_the_update">
<span class="hidden-anchor sr-only" id="_performing_the_update"></span>3.3. Performing the update</h3>
<div class="paragraph"><p>Nothing fundamental has changed with the actual update of the software in Checkmk <span class="new">2.1.0</span>, i.e. you install the new version, perform the update of the Checkmk site, rectify any possible conflicts and check and confirm the incompatible changes.</p></div>
<div class="paragraph"><p>Perform the update procedure as described in the <a href="update.html#detailed">article on updates and upgrades</a>.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_follow-up">
<span class="hidden-anchor sr-only" id="follow-up"></span>4. Follow-ups</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_gui">
<span class="hidden-anchor sr-only" id="gui"></span>4.1. Changes to the user interface</h3>
<div class="paragraph"><p>Checkmk’s user interface (GUI) was completely redesigned with version <span class="new">2.0.0</span>.
In the new version <span class="new">2.1.0</span>, on the other hand, it will look very familiar to you, since at first glance there have been very few visible changes made compared to <span class="new">2.0.0</span>.
However, menus, menu items, and other details have been modified to make new features available — and to improve existing ones.</p></div>
<div class="paragraph"><p>In the articles of this User guide we will present these changes, and in the <a href="intro_setup.html">Setting up Checkmk</a> you will find a detailed introduction to the most important elements of the <a href="intro_gui.html">user interface</a>.</p></div>
<div class="sect3">
<h4 id="heading__snapins_removed_from_the_sidebar">
<span class="hidden-anchor sr-only" id="_snapins_removed_from_the_sidebar"></span>Snapins removed from the sidebar</h4>
<div class="paragraph"><p>With <a href="https://checkmk.com/werk/13736" target="_blank">Werk #13736</a>, some obsolete and little-used <a href="glossar.html#snapin">snapins</a> for the sidebar have been removed.
There are replacements for almost all of these snapins, mostly via menu items in the <a href="glossar.html#navigation_bar">navigation bar.</a></p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_automigration">
<span class="hidden-anchor sr-only" id="automigration"></span>4.2. Verify automigration to the Check API</h3>
<div class="paragraph"><p>You can check if all local plug-ins in the <code>~/local/share/check_mk/checks</code> and <code>~/local/share/check_mk/inventory</code> directories can be automatically migrated to the new <a href="#check-api">Check API</a>.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> This check is useful if there are check plug-ins in your local files that were programmed conforming with the old Check API that was valid until version <span class="new">1.6.0</span>.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> Run the following command as a a site user:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>cmk<span class="tok-w"> </span>-R
<span class="tok-go">Failed to auto-migrate legacy plugin to check plugin: mssql_counters</span>
<span class="tok-go">Please refer to Werk 10601 for more information.</span></code></pre></div></div>
<div class="paragraph"><p>The message above shows that a plug-in could not be migrated automatically.
All of the plug-ins on the list will need to be migrated manually.
There are a number of reasons why automigration cannot be performed, which you can read about in the aforementioned <a href="https://checkmk.com/werk/10601" target="_blank">Werk #10601</a>.
You can read how to perform manual migration in the <a href="https://checkmk.com/blog/migrating-check-plug-ins-to-checkmk-2-0" target="_blank">blog post on migrating check plug-ins.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading_service_discovery">
<span class="hidden-anchor sr-only" id="service_discovery"></span>4.3. Updating services</h3>
<div class="paragraph"><p>As with every major version, Checkmk <span class="new">2.1.0</span> introduces a whole new set of check plug-ins.
If you do not use the <a href="wato_services.html#discovery_check">'discovery check'</a>, i.e. the automatic update of the service configuration via the periodic service discovery, you will have to search for services on quite a number of hosts.</p></div>
<div class="paragraph"><p>If your hosts are organized accordingly (e.g. in folders), you can generally use the <span class="guihint">Bulk discovery</span> function for this.
This function can be found under <span class="guihint">Setup &gt; Hosts &gt; Hosts</span> and then in the <span class="guihint">Hosts &gt; Discover services</span> menu.</p></div>
<div class="paragraph"><p>Below we list some areas with the most new features.</p></div>
<div class="sect3">
<h4 id="heading_service_check_mk_agent">
<span class="hidden-anchor sr-only" id="service_check_mk_agent"></span>The Check_MK and Check_MK Agent services</h4>
<div class="imageblock"><div class="content"><img src="../images/update_major_check_mk_services.png" alt="The two services 'Check_MK' and 'Check_MK Agent' in monitoring."></div></div>
<div class="paragraph"><p>The <span class="guihint">Check_MK</span> and <span class="guihint">Check_MK Agent</span> services still have the same names as in version <span class="new">2.0.0</span>, but these operate in a somewhat different way in <span class="new">2.1.0</span>:</p></div>
<div class="ulist"><ul>
<li><p>The <span class="guihint">Check_MK Agent</span> service is now always present and provides all information related to <em>agent deployment</em>, such as the version of the agent, the time of the last update, the number of agent plug-ins and local checks, or the restriction of IP addresses.
Previously, this service only took care of agent updates — and was only available when agent updates were set up.</p></li>
<li><p>Likewise, the <span class="guihint">Check_MK</span> service is now always present — previously it was only there when passive services were running on the host.
The service <span class="guihint">Check_MK</span> now exclusively takes care of the <em>operational state</em> of the agents.
This service reports on, for example, connection errors or missing data, and also shows the execution time.</p></li>
</ul></div>
</div>
<div class="sect3">
<h4 id="heading_cluster_services">
<span class="hidden-anchor sr-only" id="cluster_services"></span>Cluster services</h4>
<div class="paragraph"><p>With Checkmk version <span class="new">2.1.0</span>, the way some <a href="clustered_services.html">cluster services</a> behave has changed.
Affected services assume the <span class="state3">UNKNOWN</span> state and require configuration adaptation.</p></div>
<div class="paragraph"><p>Checkmk identifies four cluster modes:</p></div>
<div class="ulist"><ul>
<li><p><em>Best</em> (the value for the best node determines the overall state).</p></li>
<li><p><em>Worst</em> (analog: value for the worst node)</p></li>
<li><p><em>Failover</em> (only one node is allowed to return <span class="state0">OK</span>)</p></li>
<li><p><em>Native Clustering</em> via API function (freely programmable, e.g.: <em>80 % of nodes must be <span class="state0">OK</span></em> for the cluster to be OK).</p></li>
</ul></div>
<div class="paragraph"><p>Legacy plug-ins using the old Check API previously had an additional implicit clustering capability, where the output of the assigned hosts was simply evaluated in sequence and the last individual state received determined the overall state of the cluster.
Since this behavior was not reliable, it was removed in <span class="new">2.1.0</span>.</p></div>
<div class="paragraph"><p>In the course of porting to <span class="new">2.1.0</span>, we removed the <em>native clustering</em> retrofitted to <span class="new">2.0.0</span> from some supplied check plug-ins when it was not useful.
Instead, we selected one from the <em>best</em>, <em>worst</em>, or <em>failover</em> behaviors as the default.
<a href="https://checkmk.com/werk/12908#" target="_blank">This list</a> shows the affected plug-ins and their new default behavior.
Also affected are plug-ins programmed in-house or obtained from the <a href="https://exchange.checkmk.com" target="_blank">Checkmk Exchange</a> that do not use API integration for native cluster mode.</p></div>
<div class="paragraph"><p>All of these services will assume the <span class="state3">UNKNOWN</span> state after updating to <span class="new">2.1.0</span> if the cluster mode once selected is no longer supported.
In these cases, use the <span class="guihint">Aggregation options for clustered services</span> rule to define one of the three cluster modes <em>best</em>, <em>worst</em>, or <em>failover</em>.</p></div>
</div>
<div class="sect3">
<h4 id="heading_service_descriptions">
<span class="hidden-anchor sr-only" id="service_descriptions"></span>Service descriptions</h4>
<div class="paragraph"><p>Each update of Checkmk will involve changing service descriptions to improve the consistency of naming within the monitoring and documentation of Checkmk.
Since changing service descriptions means that rules sometimes need to be modified and historical monitoring data is lost, Checkmk initially leaves the old descriptions in place for updates.
For services where the loss of old monitoring data is acceptable and the effort for adapting rules is manageable, you should switch to new service descriptions as soon as possible.</p></div>
<div class="paragraph"><p>To do this, go to <span class="guihint">Setup &gt; General &gt; Global Settings &gt; Execution of checks</span> and go through the list <span class="guihint">Use new service descriptions</span> and identify the services where the checkboxes are not yet active and activate them.
After applying the changes, the new service descriptions will be active and a few minutes will pass before you see the defined states of the affected services in the monitoring again.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_new_ports">
<span class="hidden-anchor sr-only" id="new_ports"></span>4.4. New ports</h3>
<div class="paragraph"><p>To perform <a href="#agent_registration">TLS registration</a> of hosts in the monitoring, they need access to port 443 (respectively 80) for REST API requests and port 8000 (new component <em>Agent Receiver</em>).
If necessary, be sure to configure routing and firewall settings to allow these hosts to access these ports on the Checkmk server.</p></div>
<div class="paragraph"><p>If security policies prevent you from making these ports available, you can perform a <a href="agent_linux.html#proxyregister">registration by proxy</a> directly on the Checkmk server.</p></div>
</div>
<div class="sect2">
<h3 id="heading_agent_registration">
<span class="hidden-anchor sr-only" id="agent_registration"></span>4.5. Registering agents for TLS</h3>
<div class="paragraph"><p>After updating the agents to <span class="new">2.1.0</span>, the <span class="guihint">Check_MK Agent</span> service assumes <span class="state1">WARN</span> status for the affected hosts and displays the message <em>TLS is not activated on monitored</em> host.
In the two articles on the <a href="agent_linux.html">Linux</a> and <a href="agent_windows.html">Windows</a> agents, we describe the registration of the certificates in use with the <code>cmk-agent-ctl</code> command line tool.
This tool also provides many options for automatic registration — for example, via post-installation snippet in <a href="bakery_api.html">Bakery plug-ins</a>.</p></div>
<div class="paragraph"><p>If unencrypted data transfer is desired for a transition period for the parallel operation of <span class="new">2.0.0</span> servers in a <span class="new">2.1.0</span> environment, modify the <span class="guihint">Checkmk Agent installation auditing</span> ruleset to allow the <span class="guihint">Check_MK Agent</span> service to assume <span class="state0">OK</span> status despite the lack of registration.</p></div>
</div>
<div class="sect2">
<h3 id="heading_kubernetes">
<span class="hidden-anchor sr-only" id="kubernetes"></span>4.6. The new Kubernetes monitoring</h3>
<div class="paragraph"><p>Kubernetes monitoring has been rewritten from the ground up in Checkmk <span class="new">2.1.0</span> and now enables a simplified and efficient monitoring.
Unfortunately, because the architecture has fundamentally changed in version <span class="new">2.1.0</span>, it is not possible to carry over or rewrite any previous monitoring data collected from your Kubernetes objects under previous Checkmk versions.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> This affects you if you used the Checkmk special agent to monitor Kubernetes in version <span class="new">2.0.0</span>.
The old special agent and associated check plug-ins will still work in version <span class="new">2.1.0</span>, but will subsequently be <a href="#kubernetes_20">removed</a> from Checkmk.
We therefore recommend a complete move to the new, much improved Kubernetes monitoring in version <span class="new">2.1.0</span>.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> Completely redeploy Kubernetes monitoring as described in the <a href="monitoring_kubernetes.html">Monitoring Kubernetes</a> article.</p></div>
</div>
<div class="sect2">
<h3 id="heading_encrypt_notification_spooler">
<span class="hidden-anchor sr-only" id="encrypt_notification_spooler"></span>4.7. Encrypting the notification spooler</h3>
<div class="paragraph"><p><strong>Does this affect you?</strong>
If you use distributed monitoring with <a href="notifications.html#async">centralized notification</a>, you will benefit from increased security when enabling data transfer encryption in the <code>mknotifyd</code> notification spooler.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong>
When updating existing Checkmk installations, connections that have already been configured will initially remain usable without encryption.
However, in this case <span class="guihint">Analyze configuration</span> will fault the setting with <span class="state2">CRIT</span>.
After migrating all involved sites to <span class="new">2.1.0</span>, change <span class="guihint">Global settings &gt; Notification spooler configuration &gt; Encryption</span> to <span class="guihint">Encrypt communication with TLS</span>.
New connections automatically use TLS encryption when they are created.</p></div>
</div>
<div class="sect2">
<h3 id="heading_rest-api">
<span class="hidden-anchor sr-only" id="rest-api"></span>4.8. The REST API replaces the Web API</h3>
<div class="paragraph"><p>The Web API (also known as <a href="web_api.html">HTTP API</a>) has been discontinued and will be <a href="#web-api">unavailable</a> in the next Checkmk version.
Its replacement is ready as the <a href="rest_api.html">REST API</a> introduced in version <span class="new">2.0.0</span>.</p></div>
<div class="paragraph"><p><strong>Does this affect you?</strong> This affects you if you have written custom scripts that use the Web API.</p></div>
<div class="paragraph"><p>The Web API will continue to work in this Checkmk version,
and in existing sites updated from version <span class="new">2.0.0</span> to <span class="new">2.1.0</span>, the Web API will remain enabled.
In sites newly created with the <span class="new">2.1.0</span> version, the Web API will have already been disabled in the <span class="guihint">Global settings</span>.
The switch to turn the Web API on and off can be found in <span class="guihint">Setup &gt; General &gt; Global settings &gt; Site management &gt; Disable Web API</span>.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> We recommend migrating all existing scripts that use the Web API to the REST API as soon as possible in order to catch any possible problems early, before upgrading to Checkmk version <span class="new">2.2.0</span>.</p></div>
<div class="paragraph"><p>The REST API already provides access to more areas in Checkmk than the Web API, such as host status, service status, scheduled downtimes, time periods, problem acknowledgement, and Business Intelligence (BI).</p></div>
<div class="paragraph"><p>The functions for accessing sites in a distributed monitoring, and metrics and graphs that are still missing from the REST API will be added in <span class="new">2.1.0</span> patch versions, so that over time all functions that could also be used in the Web API will again be available.</p></div>
</div>
<div class="sect2">
<h3 id="heading_remove_old_mkps">
<span class="hidden-anchor sr-only" id="remove_old_mkps"></span>4.9. Removing obsolete MKPs</h3>
<div class="paragraph"><p><strong>Does this affect you?</strong> This will affect you if you have made use of the feature to keep <a href="#mkp_backport">MKPs in differing versions</a>.</p></div>
<div class="paragraph"><p><strong>What do you need to do?</strong> During the update, incompatible packages will be automatically set to the <span class="guihint">Disabled</span> state, but not completely deleted.
Packages compatible with the new Checkmk version will be automatically enabled, and you will see the <span class="guihint">Enabled (active on this site)</span> state.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list
<span class="tok-go">Name        Version Title        Req. Version Until Version Files State</span>
<span class="tok-go">----------- ------- ------------ ------------ ------------- ----- -----------------------------</span>
<span class="tok-go">hello_world 0.2.1   Hello world! 2.1.0        2.1.999       6     Enabled (active on this site)</span>
<span class="tok-go">hello_world 0.2.0   Hello world! 2.0.0        2.0.999       6     Disabled</span></code></pre></div></div>
<div class="paragraph"><p>Once the functionality of the new packages has been verified and the old ones are no longer needed for reference, you can search for obsolete packages:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>grep<span class="tok-w"> </span>Disabled</code></pre></div></div>
<div class="paragraph"><p>Then uninstall them with <code>mkp remove</code>.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>remove<span class="tok-w"> </span>hello_world<span class="tok-w"> </span><span class="tok-m">0</span>.2.0</code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_outlook">
<span class="hidden-anchor sr-only" id="outlook"></span>5. The outlook</h2>
<div class="sectionbody">
<div class="paragraph"><p>This chapter covers topics not directly related to the current Checkmk version <span class="new">2.1.0</span>, but to one of its subsequent versions.</p></div>
<div class="sect2">
<h3 id="heading_web-api">
<span class="hidden-anchor sr-only" id="web-api"></span>5.1. The Web API is being removed</h3>
<div class="paragraph"><p>The Web API (also called HTTP API) will be removed in the next Checkmk version <span class="new">2.2.0</span>.
The Web API will be replaced by the <a href="#rest-api">REST API</a> introduced in <span class="new">2.0.0</span>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_kubernetes_20">
<span class="hidden-anchor sr-only" id="kubernetes_20"></span>5.2. The old Kubernetes special agent will be removed.</h3>
<div class="paragraph"><p>The Checkmk <span class="new">2.0.0</span> special agent for Kubernetes monitoring and its associated check plug-ins will be removed in the next Checkmk version <span class="new">2.2.0</span>.
Details can be found under the <a href="https://checkmk.com/werk/13561" target="_blank">Werk #13561</a>.
Replacements are provided in version <span class="new">2.1.0</span> by the completely rewritten <a href="#kubernetes">new Kubernetes monitoring</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_nsca">
<span class="hidden-anchor sr-only" id="nsca"></span>5.3. NSCA will no longer be supported</h3>
<div class="paragraph"><p>Support for the Nagios Service Check Acceptor (NSCA) will be removed in the next Checkmk version <span class="new">2.2.0</span>.</p></div>
<div class="paragraph"><p>NSCA is a Nagios add-on for getting results from passive <a href="monitoring_basics.html#checks">checks</a> on remote hosts in a distributed Nagios configuration.
This deprecated method for setting up <a href="distributed_monitoring.html">distributed monitoring</a> offers no advantages over Checkmk’s own methods.</p></div>
<div class="paragraph"><p>Details and notes on its replacement can be found in <a href="https://checkmk.com/werk/13644" target="_blank">Werk #13644</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_hw_sw_inventory_plugin_api">
<span class="hidden-anchor sr-only" id="hw_sw_inventory_plugin_api"></span>5.4. The old HW/SW Inventory plug-in API is no longer supported</h3>
<div class="paragraph"><p>Support for the old HW/SW Inventory plug-in API will be removed in the next Checkmk version <span class="new">2.2.0</span>.</p></div>
<div class="paragraph"><p>The plug-ins following this API are located in the site directory under <code>~/share/check_mk/inventory</code> and (as local files) under <code>~/local/share/check_mk/inventory</code>.
These plug-ins will work in version <span class="new">2.1.0</span>, but will be ignored in version <span class="new">2.2.0</span> and later.</p></div>
<div class="paragraph"><p>If you use custom plug-ins, migrate these to the new Check API before updating to version <span class="new">2.2.0</span>.
See <a href="https://checkmk.com/werk/14084" target="_blank">Werk #14084</a> for more details and information on migration.</p></div>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#intro">1. Introduction</a></li>
<li>
<a href="#prep">2. Preparations</a><ul class="sectlevel1">
<li><a href="#backup">2.1. Backup</a></li>
<li><a href="#linux_versions">2.2. Linux distribution versions</a></li>
<li><a href="#agents">2.3. The agents for Linux and Windows</a></li>
<li><a href="#local_files">2.4. Local files</a></li>
<li><a href="#check-api">2.5. The Check API</a></li>
<li>
<a href="#incompatible_mkps">2.6. Incompatible and obsolete MKPs</a><ul class="sectlevel2"><li><a href="#mkp_backport">MKP management from versions <span class="new">2.0.0</span>p33 and <span class="new">2.1.0</span>p21</a></li></ul>
</li>
<li><a href="#incompatible">2.7. Incompatible changes</a></li>
</ul>
</li>
<li>
<a href="#update">3. Updates</a><ul class="sectlevel1">
<li>
<a href="#dry_run">3.1. Best practices when updating</a><ul class="sectlevel2">
<li><a href="#_update_the_operating_system">Update the operating system</a></li>
<li><a href="#_update_the_checkmk_version">Update the Checkmk version</a></li>
<li><a href="#_perform_a_test_run_of_the_update">Perform a test run of the update</a></li>
<li><a href="#automatic_agent_updates">Temporarily disable agent updates</a></li>
<li><a href="#notifications">Temporarily disable notifications</a></li>
</ul>
</li>
<li>
<a href="#update_distributed_monitoring">3.2. Updates in distributed monitoring</a><ul class="sectlevel2">
<li><a href="#compat_chart">Compatibility table</a></li>
<li><a href="#dist_setup">MKPs in a distributed setup</a></li>
</ul>
</li>
<li><a href="#_performing_the_update">3.3. Performing the update</a></li>
</ul>
</li>
<li>
<a href="#follow-up">4. Follow-ups</a><ul class="sectlevel1">
<li>
<a href="#gui">4.1. Changes to the user interface</a><ul class="sectlevel2"><li><a href="#_snapins_removed_from_the_sidebar">Snapins removed from the sidebar</a></li></ul>
</li>
<li><a href="#automigration">4.2. Verify automigration to the Check API</a></li>
<li>
<a href="#service_discovery">4.3. Updating services</a><ul class="sectlevel2">
<li><a href="#service_check_mk_agent">The Check_MK and Check_MK Agent services</a></li>
<li><a href="#cluster_services">Cluster services</a></li>
<li><a href="#service_descriptions">Service descriptions</a></li>
</ul>
</li>
<li><a href="#new_ports">4.4. New ports</a></li>
<li><a href="#agent_registration">4.5. Registering agents for TLS</a></li>
<li><a href="#kubernetes">4.6. The new Kubernetes monitoring</a></li>
<li><a href="#encrypt_notification_spooler">4.7. Encrypting the notification spooler</a></li>
<li><a href="#rest-api">4.8. The REST API replaces the Web API</a></li>
<li><a href="#remove_old_mkps">4.9. Removing obsolete MKPs</a></li>
</ul>
</li>
<li>
<a href="#outlook">5. The outlook</a><ul class="sectlevel1">
<li><a href="#web-api">5.1. The Web API is being removed</a></li>
<li><a href="#kubernetes_20">5.2. The old Kubernetes special agent will be removed.</a></li>
<li><a href="#nsca">5.3. NSCA will no longer be supported</a></li>
<li><a href="#hw_sw_inventory_plugin_api">5.4. The old HW/SW Inventory plug-in API is no longer supported</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
