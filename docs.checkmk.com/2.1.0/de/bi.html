<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Mit der Business Intelligence (BI) können Sie komplexe Zusammenhänge einfach darstellen. Lernen Sie hier Schritt für Schritt, BIs regelbasiert und dynamisch zu erstellen.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Business Intelligence (BI) - Komplexität mit der BI reduzieren">
<meta name="og:description" content="Mit der Business Intelligence (BI) können Sie komplexe Zusammenhänge einfach darstellen. Lernen Sie hier Schritt für Schritt, BIs regelbasiert und dynamisch zu erstellen.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Business Intelligence (BI) - Komplexität mit der BI reduzieren</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.1.0/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.1.0/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.1.0/en/bi.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.1.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.2.0/de/bi.html">2.2.0</a><a class="dropdown-item" href="../../latest/de/bi.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und CentOS</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Host- und Serviceparameter</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Einführung in die Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMWare ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
<li>
<p><a href="managed.html">Die Managed Services Edition</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Konfiguration via Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
<li>
<p><a href="web_api.html">Konfiguration via HTTP-API</a></p>
</li>
<li>
<p><a href="web_api_references.html">Befehlsreferenz der HTTP-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_check_plugins.html">Eigene Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Business Intelligence (BI)</h1>
<div class="details">
<span id="revdate">Last modified on 08-Mar-2022</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.1.0/de/bi.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="views.html">Ansichten von Hosts und Services (Views)</a>
<a href="availability.html">Verfügbarkeit (Availability)</a>
<a href="basics_downtimes.html">Wartungszeiten</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__einleitung">
<span class="hidden-anchor sr-only" id="_einleitung"></span>1. Einleitung</h2>
<div class="sectionbody">
<div class="imageblock inline-image"><div class="content"><img src="../images/bi_large_icon_aggr.png" alt="bi large icon aggr" width="80"></div></div>
<div class="paragraph"><p>Checkmk Business Intelligence — das klingt zugegeben etwas hochtrabend
für eine im Grunde recht einfache Sache. Aber dieser Name trifft den Kern des
<em>BI</em>-Moduls von Checkmk recht gut. Hier geht es nämlich darum,
aus den vielen einzelnen Statuswerten den Gesamtzustand von
<strong>geschäftskritischen Anwendungen</strong> abzuleiten und übersichtlich darzustellen.</p></div>
<div class="paragraph"><p>Nehmen Sie als Beispiel den Dienst <em>E-Mail,</em> der in vielen Unternehmen
noch immer unverzichtbar ist. Dieser Dienst basiert auf der korrekten
Funktion einer Vielzahl von Hardware- und Softwarekomponenten — angefangen bei bestimmten Switchen, über SMTP- und IMAP-Dienste, bis hin zu
Infrastrukturdiensten wie LDAP und DNS.</p></div>
<div class="paragraph"><p>Der Ausfall eines essenziellen Bausteins ist kein Problem, wenn dieser
redundant ausgelegt ist. Umgekehrt mag ein Problem bei einem ganz anderen
Service, der auf den ersten Blick mit E-Mail nichts zu tun hat, viel
schwerwiegendere Auswirkungen haben.  Ein einfacher Blick auf eine Liste
von Services in Checkmk ist also nicht immer aussagekräftig — zumindest
nicht für jeden!</p></div>
<div class="paragraph"><p><em>Checkmk BI</em> ermöglicht Ihnen, aus dem aktuellen Zustand von
einzelnen Hosts und Services einen Gesamtzustand für eine Anwendung
abzuleiten. Dazu definieren Sie über BI-Regeln, wie die Dinge baumartig voneinander
abhängen. Jede Anwendung ist dann insgesamt <span class="state0">OK</span>, <span class="state1">WARN</span> oder <span class="state2">CRIT</span>. Die
Information über den Zustand und die Abhängigkeiten können Sie auf
verschiedene Weise nutzen:</p></div>
<div class="ulist"><ul>
<li><p>Anzeige des Gesamtstatus einer Anwendung in der GUI.</p></li>
<li><p>Berechnung der <a href="availability.html">Verfügbarkeit</a> einer Anwendung.</p></li>
<li><p><a href="notifications.html">Benachrichtigungen</a> bei einem Problem oder gar einem Ausfall einer Anwendung.</p></li>
<li><p>Impact-Analyse: Ein Service geht auf <span class="state2">CRIT</span> — welche Anwendungen sind davon betroffen?</p></li>
<li><p>Planung von Wartungszeiten und „Was wäre wenn …​“-Analysen.</p></li>
</ul></div>
<div class="paragraph"><p>Daneben gibt es noch die Möglichkeit, die Baumdarstellung von BI für eine
„Drilldown“-Ansicht für den Zustand eines Hosts mit allen seinen Services
zu verwenden.</p></div>
<div class="paragraph"><p>Eine Besonderheit von Checkmk BI im Gegensatz zu vergleichbaren Tools im
Monitoringumfeld ist, dass Checkmk auch hier <em>regelbasiert</em> arbeitet. Das
ermöglicht Ihnen z.B. mit einem generischen Satz von Regeln, dynamisch eine
unbestimmte Zahl von ähnlichen Anwendungen zu beschreiben. Das erleichtert immens
die Arbeit und hilft, Fehler zu vermeiden — besonders in sehr dynamischen Umgebungen.</p></div>
<div class="imageblock"><div class="content"><img src="../images/business_intelligence.png" alt="business intelligence"></div></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_first">
<span class="hidden-anchor sr-only" id="first"></span>2. Konfiguration Teil 1: Das erste Aggregat</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__begriffe">
<span class="hidden-anchor sr-only" id="_begriffe"></span>2.1. Begriffe</h3>
<div class="paragraph"><p>Bevor Sie Schritt für Schritt mit der Praxis anfangen, benötigen Sie zunächst ein
paar Begriffe:</p></div>
<div class="paragraph"><p>Jede mit BI formalisierte Anwendung wird als <strong>Aggregation</strong> bezeichnet,
da hier aus vielen Einzelzuständen ein Gesamtzustand aggregiert wird.</p></div>
<div class="paragraph"><p>Eine Aggregation ist ein Baum von Objekten. Diese werden <strong>Knoten</strong> genannt.
Die untersten Knoten — also die <em>Blätter</em> des Baums — sind Hosts und Services aus
Ihren Checkmk-Instanzen. Die übrigen Knoten sind
künstlich erzeugte BI-Objekte.</p></div>
<div class="paragraph"><p>Jeder Knoten wird durch eine <strong>Regel</strong> erzeugt. Das gilt auch für die
Wurzel des Baums — also den obersten Knoten.  Die Regeln legen fest, welche
Knoten unter einem Knoten hängen und wie aus deren Zuständen der Zustand
des Knotens berechnet werden soll.</p></div>
<div class="paragraph"><p>Auch der oberste Knoten einer Aggregation (die Wurzel des Baums) wird mit einer
Regel erzeugt. Dabei kann eine Regel mehrere Aggregationen erzeugen.</p></div>
</div>
<div class="sect2">
<h3 id="heading__ein_beispiel">
<span class="hidden-anchor sr-only" id="_ein_beispiel"></span>2.2. Ein Beispiel</h3>
<div class="paragraph"><p>Am einfachsten geht alles mit einem konkreten Beispiel. Dafür haben wir
uns für diesen Artikel die <em>„Mystery Application“</em> ausgedacht.
Nehmen Sie an, dass dies eine wichtige Anwendung in einem nicht näher genannten
Unternehmen ist. Dabei spielen unter anderem fünf Server und zwei Netzwerkswitche
eine wichtige Rolle. Damit Sie das Beispiel besser nachvollziehen können,
bekommen diese einfache Namen wie <code>srv-mys-1</code> oder <code>switch-1</code>.
Folgendes Schaubild gibt den Aufbau grob wieder:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_example.jpeg" alt="bi example" width="90%"></div></div>
<div class="ulist"><ul>
<li><p>Die beiden Server <code>srv-mys-1</code> und <code>srv-mys-2</code> bilden einen redundanten Cluster, auf welchem die eigentliche Anwendung läuft.</p></li>
<li><p><code>srv-db</code> ist ein Datenbankserver, welcher die Daten der Anwendung speichert.</p></li>
<li><p><code>switch-1</code> und <code>switch-2</code> sind zwei redundante Router, welche das Servernetz mit einem höheren Netz verbinden.</p></li>
<li><p>In jenem befindet sich ein Zeitgeber <code>srv-ntp</code>, welcher für eine exakt synchrone Zeit sorgt.</p></li>
<li><p>Außerdem arbeitet dort der Server <code>srv-spool</code>, welcher die von der Mystery Application berechneten Resultate in ein Spool-Verzeichnis befördert.</p></li>
<li><p>Von dort werden die Daten von einem mysteriösen übergeordneten Dienst abgeholt.</p></li>
</ul></div>
<div class="paragraph"><p>Wenn Sie die nachfolgenden Schritte eins zu eins durchspielen möchten,
können Sie die aufgeführten Monitoring-Objekte kurz nachbauen. Zum Testen
genügt es dabei, wenn Sie einen vorhandenen Host mehrfach klonen und die
Klone entsprechend benennen.  Später kommen noch einige wenige Services
ins Spiel, die Sie dann bei Zeit für die betroffenen Hosts ins Monitoring
aufnehmen können. Auch da können Sie wieder schummeln: Mit simplen
<a href="localchecks.html">Dummy-Local-Checks</a> bekommen Sie schnell passende Services
zum Spielen.</p></div>
<div class="paragraph"><p>Die Hosts im Monitoring sehen in etwa so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_example_2.png" alt="bi 2 example 2"></div></div>
</div>
<div class="sect2">
<h3 id="heading__ihre_erste_bi_regel">
<span class="hidden-anchor sr-only" id="_ihre_erste_bi_regel"></span>2.3. Ihre erste BI-Regel</h3>
<div class="paragraph"><p>Beginnen Sie mit etwas Einfachem — quasi der einfachst möglichen sinnvollen
Aggregation überhaupt: einer Aggregation mit nur zwei Knoten. Dabei möchten
Sie den Zustand bei beiden Hosts <code>switch-1</code> und <code>switch-2</code>
zusammenfassen. Die Aggregation soll <em>Netzwerk</em> heißen und <span class="state0">OK</span> sein,
wenn beide Switche erreichbar sind. Bei einem Teilausfall soll sie auf
<span class="state1">WARN</span> gehen und wenn beide Switche weg sind auf <span class="state2">CRIT</span>.</p></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/bi_aggregation_icon.png" alt="bi aggregation icon" width="80"></div></div>
<div class="paragraph"><p>Legen Sie los: Das BI-Modul erreichen Sie über <span class="guihint">Setup &gt; Business Intelligence &gt; Business Intelligence.</span>
Die Konfiguration der Regeln und Aggregationen geschieht
innerhalb von Konfigurationspaketen: den <em>BI Packs</em>. Die Pakete
sind nicht nur deswegen praktisch, weil Sie komplexere Konfigurationen damit
besser verwalten können. Sie können auch für ein Paket Berechtigungen für
bestimmte Kontaktgruppen vergeben und somit Benutzern ohne Adminrechte
das Editieren von Teilen der Konfiguration erlauben. Doch dazu später mehr …​</p></div>
<div class="paragraph"><p>Wenn Sie das BI-Modul zum ersten Mal aufrufen, sieht das etwa so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_default.png" alt="bi 2 default"></div></div>
<div class="paragraph"><p>Dort ist bereits ein Paket mit dem Titel <span class="guihint">Default Pack</span> vorhanden. Es
enthält eine Demo für eine Aggregation, die Daten eines einzelnen
Hosts zusammenfasst.</p></div>
<div class="paragraph"><p>Für das aktuelle Beispiel legen Sie am besten ein neues Paket an (Knopf <span class="guihint">Add BI pack</span>), welches Sie <em>Mystery</em> nennen.
Wie immer in Checkmk, vergeben Sie eine interne ID (<code>mystery</code>), welche sich später nicht ändern lässt, und einen beschreibenden Titel.
Die Option <span class="guihint">Public</span> brauchen andere Benutzer, wenn sie Regeln in diesem Paket für ihre eigenen Regeln oder Aggregationen verwenden möchten.
Da Sie Ihre Experimente vermutlich erst mal in Ruhe alleine durchführen wollen, lassen Sie das deaktiviert:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_create_pack.png" alt="bi 2 create pack"></div></div>
<div class="paragraph"><p>Nach dem Anlegen finden Sie in der Hauptliste jetzt natürlich zwei Pakete:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_two_rulepacks.png" alt="bi 2 two rulepacks"></div></div>
<div class="paragraph"><p>Vor jedem Eintrag steht ein Symbol zum Editieren der Eigenschaften (<span class="image-inline"><img src="../images/icons/icon_edit.png" alt="icon edit"></span>) und eines,
um zum eigentlichen <em>Inhalt</em> des Pakets zu kommen (<span class="image-inline"><img src="../images/icons/icon_rules.png" alt="icon rules"></span>), wo Sie jetzt auch hin wollen.
Dort angelangt, legen Sie gleich Ihre erste Regel über <span class="guihint">Add rule</span> an.</p></div>
<div class="paragraph"><p>Wie immer in Checkmk, will auch diese Regel eine eindeutige ID und einen Titel haben. Der
Titel der Regel hat hier allerdings nicht nur Dokumentationscharakter, sondern wird später
auch als Name desjenigen Knotens sichtbar, den diese Regel erzeugt:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_create_rule_2.png" alt="bi 2 create rule 2"></div></div>
<div class="paragraph"><p>Der darunter folgende Kasten hat den Namen <span class="guihint">Child Node Generation</span> und ist
der wichtigste. Hier legen Sie fest, welche Objekte in diesem Knoten
zusammengefasst werden sollen. Das können entweder andere BI-Knoten sein;
dazu würden Sie eine andere BI-Regel auswählen. Oder es sind
Monitoringobjekte — also Hosts oder Services.</p></div>
<div class="paragraph"><p>Für das erste Beispiel wählen Sie die zweite Variante (<span class="guihint">State of a host</span>) und legen
zwei Objekte als Kinder an, nämlich die beiden Hosts <code>switch-1</code>
und <code>switch-2</code>.  Das geschieht jeweils mit dem Knopf
<span class="guihint">Add child node generator</span>. Hier wählen Sie dann logischerweise
<span class="guihint">State of a host</span> und tragen jeweils den Namen des Hosts ein:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_create_rule_3.png" alt="bi 2 create rule 3"></div></div>
<div class="paragraph" id="aggregationfunction"><p>Im dritten und letzten Kasten, <span class="guihint">Aggregation Function</span>, geben Sie an, wie der Monitoringstatus des Knotens berechnet werden soll.
Grundlage dafür ist immer die Liste der Zustände der Unterknoten. Verschiedene logische
Verknüpfungen sind möglich.</p></div>
<div class="paragraph"><p>Vorausgewählt ist <span class="guihint">Best — take best of all node states.</span> Das würde bedeuten, dass
der Knoten erst dann <span class="state2">CRIT</span> wird, wenn auch alle Unterknoten <span class="state2">CRIT</span> bzw. <span class="hstate1">DOWN</span> sind.
Wie oben erwähnt, soll das hier aber nicht der Fall sein.  Wählen Sie stattdessen
<span class="guihint">Count the number of nodes in state OK</span>, um die Anzahl der Unterknoten mit Status
<span class="state0">OK</span> als Maßstab heranzuziehen. Hier werden als Schwellwerte die
beiden Zahlen 2 und 1 vorgeschlagen. Das ist prima, denn es ist genau das was
Sie brauchen:</p></div>
<div class="ulist"><ul>
<li><p>Wenn beide Switche <span class="hstate0">UP</span> sind (das wird hier als <span class="state0">OK</span> gewertet), soll der Knoten <span class="state0">OK</span> werden.</p></li>
<li><p>Wenn nur ein Switch <span class="hstate0">UP</span> ist, wird er <span class="state1">WARN</span>.</p></li>
<li><p>Und wenn beide <span class="hstate1">DOWN</span> sind, wird er <span class="state2">CRIT</span>.</p></li>
</ul></div>
<div class="paragraph"><p>Und so sieht die Maske ausgefüllt aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_create_rule_5.png" alt="bi 2 create rule 5"></div></div>
<div class="paragraph"><p>Ein Klick auf <span class="guihint">Create</span>, und schon haben Sie Ihre erste Regel:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_create_rule_6.png" alt="bi 2 create rule 6"></div></div>
</div>
<div class="sect2">
<h3 id="heading__ihre_erste_aggregation">
<span class="hidden-anchor sr-only" id="_ihre_erste_aggregation"></span>2.4. Ihre erste Aggregation</h3>
<div class="paragraph"><p>Nun ist es wichtig, dass Sie verstehen, dass eine Regel noch keine Aggregation
ist.  Checkmk kann ja noch nicht wissen, ob das hier alles ist oder nur
Teil eines größeren Baums! Wirkliche BI-Objekte werden erst dann erzeugt und
in der Statusoberfläche sichtbar, wenn Sie eine <em>Aggregation</em> anlegen.
Dazu wechseln Sie in die Liste der <span class="image-inline"><img src="../images/icons/button_aggregations.png" alt="button aggregations"></span> Aggregationen.</p></div>
<div class="paragraph"><p>Der Knopf <span class="image-inline"><img src="../images/icons/button_add_aggregation.png" alt="button add aggregation"></span> bringt Sie zu einer Maske zum Anlegen einer neuen Aggregation.
Bei den <span class="guihint">Aggregation groups</span> können Sie beliebige
Namen angeben. Diese erscheinen dann in der Statusoberfläche als Gruppen, unter denen all
diejenigen Aggregationen sichtbar werden, welche eben diese Gruppenbezeichnung teilen.
Das ist eigentlich das gleiche Konzept wie bei Hashtags oder Schlagworten.
Auch die <span class="guihint">Aggregation ID</span> können Sie wie gewohnt frei vergeben, später aber nicht mehr ändern.</p></div>
<div class="paragraph"><p>Den Inhalt der Aggregation legen Sie über <span class="guihint">Add new element</span> fest.
Wählen Sie hier die Einstellung <span class="guihint">Call a rule</span> und bei <span class="guihint">Rule:</span> die Regel, die Sie gerade angelegt haben
(und davor das Regelpaket, in dem diese sich befindet).</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_2_new_aggregation.png" alt="bi 2 new aggregation"></div></div>
<div class="paragraph"><p>Wenn Sie die Aggregation jetzt mit <span class="image-inline"><img src="../images/icons/icon_save.png" alt="icon save"></span> speichern, sind Sie fertig!
Ihre erste Aggregation sollte jetzt in der Statusoberfläche auftauchen — vorausgesetzt,
Sie haben auch tatsächlich mindestens einen der Hosts <code>switch-1</code> oder <code>switch-2</code> im System!</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_statusgui">
<span class="hidden-anchor sr-only" id="statusgui"></span>3. BI im Operating Teil 1: Die Statusansicht</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__alle_aggregate_anzeigen">
<span class="hidden-anchor sr-only" id="_alle_aggregate_anzeigen"></span>3.1. Alle Aggregate anzeigen</h3>
<div class="paragraph"><p>Wenn Sie alles richtig gemacht haben, können Sie jetzt Ihr erstes Aggregat über die
Statusoberfläche aufrufen. Das geht am einfachsten über <span class="guihint">Monitor &gt; Business Intelligence &gt; All Aggregations</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_3_status_gui_1.png" alt="bi 3 status gui 1"></div></div>
<div class="sect3">
<h4 id="heading__ansichten_für_bi_erstellen">
<span class="hidden-anchor sr-only" id="_ansichten_für_bi_erstellen"></span>Ansichten für BI erstellen</h4>
<div class="paragraph"><p>Neben den vorgefertigten BI-Ansichten können Sie auch individuell erstellte Ansichten nutzen.
Wählen Sie dazu beim <a href="views.html#1">Anlegen einer neuen Ansicht</a> eine der
BI-Datenquellen. <span class="guihint">BI Aggregations</span> liefert Informationen über die Aggregate,
<span class="guihint">BI Hostname Aggregations</span> fügt Filter und Informationen für einzelne Hosts hinzu,
<span class="guihint">BI Aggregations affected by one host</span> zeigt lediglich Aggregate, die sich
auf einen einzelnen Host beziehen und <span class="guihint">BI Aggregations for Hosts by Hostgroups</span>
ermöglicht die Unterscheidung nach Hostgruppen.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__mit_dem_baum_arbeiten">
<span class="hidden-anchor sr-only" id="_mit_dem_baum_arbeiten"></span>3.2. Mit dem Baum arbeiten</h3>
<div class="paragraph"><p>Sehen Sie sich die Darstellung des BI-Baums etwas näher an. Folgendes Beispiel
zeigt Ihr Miniaggregat in einer Situation, in der einer der beiden Switches
<span class="hstate1">DOWN</span> ist und der andere <span class="hstate0">UP</span>. Wie gewollt, geht das Aggregat dabei
in den Zustand <span class="state1">WARN</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_3_tree_minimal.png" alt="bi 3 tree minimal"></div></div>
<div class="paragraph"><p>Dabei sehen Sie auch, dass zur Vereinheitlichung von Hosts und Services ein
Host, der <span class="hstate1">DOWN</span> ist, quasi wie ein Service gewertet wird, der <span class="state2">CRIT</span> ist.
Aus <span class="hstate0">UP</span> wird entsprechend <span class="state0">OK</span>.</p></div>
<div class="paragraph"><p>Die Blätter des Baums zeigen die Zustände von Hosts und Services.
Der Hostname — und bei Services auch der Servicename — ist anklickbar
und führt Sie zum aktuellen Status des entsprechenden Objekts. Außerdem
sehen Sie die letzte Ausgabe des Check-Plugins.</p></div>
<div class="paragraph"><p>Ganz links neben jedem Aggregat finden Sie zwei Symbole: <span class="image-inline"><img src="../images/icons/icon_showbi.png" alt="icon showbi"></span>
und <span class="image-inline"><img src="../images/icons/button_availability.png" alt="button availability"></span>. Mit dem ersten Symbol — <span class="image-inline"><img src="../images/icons/icon_showbi.png" alt="icon showbi"></span> — kommen
Sie zu einer Seite, die nur genau dieses eine Aggregat anzeigt. Das ist natürlich
hauptsächlich dann nützlich, wenn Sie mehr als ein Aggregat angelegt haben. Es eignet
sich z.B. gut für ein Lesezeichen. <span class="image-inline"><img src="../images/icons/button_availability.png" alt="button availability"></span> bringt Sie zur Berechnung
der Verfügbarkeit. Dazu später mehr.</p></div>
</div>
<div class="sect2">
<h3 id="heading__bi_ausprobieren_was_wäre_wenn">
<span class="hidden-anchor sr-only" id="_bi_ausprobieren_was_wäre_wenn"></span>3.3. BI ausprobieren: Was wäre wenn?</h3>
<div class="paragraph"><p>Links vom Hostnamen finden Sie noch ein interessantes Symbol: <span class="image-inline"><img src="../images/icons/icon_assume_none.png" alt="icon assume none"></span>.
Dies ermöglicht eine „Was wäre wenn“-Analyse. Die Idee dahinter ist einfach: Durch
einen Klick auf das Symbol schalten Sie das Objekt testweise auf einen anderen Zustand — allerdings
nur für die BI-Oberfläche, nicht in echt!
Durch mehrfache Klicks gelangen Sie von <span class="image-inline"><img src="../images/icons/icon_assume_0.png" alt="icon assume 0"></span> (<span class="state0">OK</span>) über
<span class="image-inline"><img src="../images/icons/icon_assume_1.png" alt="icon assume 1"></span> (<span class="state1">WARN</span>), <span class="image-inline"><img src="../images/icons/icon_assume_2.png" alt="icon assume 2"></span> (<span class="state2">CRIT</span>) und
<span class="image-inline"><img src="../images/icons/icon_assume_3.png" alt="icon assume 3"></span> (<span class="state3">UNKNOWN</span>) wieder zu <span class="image-inline"><img src="../images/icons/icon_assume_none.png" alt="icon assume none"></span> zurück.</p></div>
<div class="paragraph"><p>BI berechnet dann den kompletten Baum anhand des angenommenen Status.
Folgende Abbildung zeigt das Minimalaggregat unter der Annahme, dass neben
<code>switch-1</code>, der tatsächlich ausgefallen ist, auch <code>switch-2</code> <span class="hstate1">DOWN</span>
wäre:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_3_assume_example_1.png" alt="bi 3 assume example 1"></div></div>
<div class="paragraph"><p>Der Gesamtzustand des Aggregats geht dadurch von <span class="state1">WARN</span> auf <span class="state2">CRIT</span>. Dabei wird
dessen Farbe mit einem Karomuster hinterlegt. Dieses Muster zeigt Ihnen an,
dass der <strong>tatsächliche</strong> Zustand eigentlich anders ist. Das ist
keineswegs immer der Fall, denn manche Änderungen bei einem Host oder Service
sind für den Gesamtzustand nicht mehr relevant, z. B. weil dieser sowieso schon
<span class="state2">CRIT</span> ist (wie hier im Bild <code>switch-1</code>).</p></div>
<div class="paragraph"><p>Sie können diese „Was wäre wenn“-Analyse auf verschiedene Arten nutzen, z. B.:</p></div>
<div class="ulist"><ul>
<li><p>Testen, ob das BI-Aggregat so reagiert, wie Sie das wollen.</p></li>
<li><p>Planung der Abschaltung einer Komponente aus Gründen der Wartung.</p></li>
</ul></div>
<div class="paragraph"><p>Bei letzterem Szenario setzen Sie das zu wartende Gerät bzw. dessen Services testweise
auf <span class="image-inline"><img src="../images/icons/icon_assume_2.png" alt="icon assume 2"></span>. Wenn das Gesamtaggregat dann <span class="state0">OK</span> bleibt, muss das
bedeuten, dass der Ausfall <strong>aktuell</strong> durch Redundanz kompensiert werden kann.</p></div>
</div>
<div class="sect2">
<h3 id="heading__bi_ausprobieren_durch_gefakte_zustände">
<span class="hidden-anchor sr-only" id="_bi_ausprobieren_durch_gefakte_zustände"></span>3.4. BI ausprobieren durch gefakte Zustände</h3>
<div class="paragraph"><p>Es gibt noch eine zweite Möglichkeit, die BI-Aggregate zu testen:
Das direkte Ändern des <em>tatsächlichen</em> Zustands von Objekten. Das
bietet sich vor allem in einem Testsystem an.</p></div>
<div class="paragraph"><p>Zu diesem Zweck gibt es bei den <a href="commands.html">Kommandos</a>
ein
Host-/Servicekommando mit dem Namen <span class="guihint">Fake check results</span>.  Es ist per Default
nur in der Rolle Administrator verfügbar. Diese Methode wurde z. B. bei der
Erstellung der Screenshots für diesen Artikel genutzt, um <code>switch-1</code>
auf <span class="hstate1">DOWN</span> zu setzen. Daher kommt der verräterische Text
<span class="guihint">Manually set to Down by cmkadmin</span>.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_3_fake_check_results.png" alt="bi 3 fake check results"></div></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/bi_3_master_control_checks_off.png" alt="bi 3 master control checks off" width="280"></div></div>
<div class="paragraph"><p>Hier noch ein kleiner Tipp: Wenn Sie mit dieser Methode arbeiten, schalten
Sie am besten die aktiven Checks für die betroffenen Hosts und Services aus,
denn sonst gehen diese beim nächsten Checkintervall sofort wieder auf den
eigentlichen Zustand zurück. Wenn Sie faul sind, machen Sie das einfach global
über das Seitenleistenelement <span class="guihint">Master Control.</span> Bitte vergessen Sie
nie, das später wieder zu aktivieren!</p></div>
</div>
<div class="sect2">
<h3 id="heading__bi_gruppen">
<span class="hidden-anchor sr-only" id="_bi_gruppen"></span>3.5. BI-Gruppen</h3>
<div class="paragraph"><p>Beim Anlegen des Aggregats haben wir die Eingabemöglichkeit der <span class="guihint">Aggregation Groups</span>
kurz angesprochen. Im Beispiel hatten Sie das vorgeschlagene <span class="guihint">Main</span> hier
einfach bestätigt. Sie sind aber bei der Vergabe der Namen völlig
frei und können ein Aggregat auch mehreren Gruppen zuweisen.</p></div>
<div class="paragraph"><p>Gruppen werden dann wichtig, wenn die Anzahl der Aggregate das übersteigt, was Sie
vielleicht auf einem Bildschirm sehen möchten. Sie gelangen zu einer Gruppe, indem
Sie bei der Seite <span class="guihint">All Aggregations</span> auf die angezeigten Namen der Gruppen klicken — also
in unserem obigen Beispiel einfach auf die Überschrift <span class="guihint">Main</span>. Wenn Sie bisher
nur dieses eine Aggregat haben, ändert sich natürlich nicht viel. Nur
wenn man genau hinsieht merkt man:</p></div>
<div class="ulist"><ul>
<li><p>Der Titel der Seite heißt jetzt <span class="guihint">Aggregation group Main</span>.</p></li>
<li><p>Die Gruppenüberschrift <span class="guihint">Main</span> ist verschwunden.</p></li>
</ul></div>
<div class="paragraph"><p>Wenn Sie diese Ansicht öfter besuchen wollen, legen Sie doch einfach ein
Lesezeichen davon an — am besten mit dem <span class="guihint">Bookmarks</span>-Element in der Seitenleiste.</p></div>
</div>
<div class="sect2">
<h3 id="heading__vom_hostservice_zum_aggregat">
<span class="hidden-anchor sr-only" id="_vom_hostservice_zum_aggregat"></span>3.6. Vom Host/Service zum Aggregat</h3>
<div class="paragraph"><p>Sobald Sie BI-Aggregate eingerichtet haben, werden Sie bei Ihren Hosts und
Services im Kontextmenü ein neues <span class="image-inline"><img src="../images/icons/icon_aggr.png" alt="icon aggr"></span> Symbol finden:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_3_service_popup.png" alt="bi 3 service popup"></div></div>
<div class="paragraph"><p>Mit diesem Symbol gelangen Sie zur Liste aller Aggregationen, in denen der
betroffene Host oder Service enthalten ist.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_multilevel">
<span class="hidden-anchor sr-only" id="multilevel"></span>4. Konfiguration Teil 2: Mehrstufige Bäume</h2>
<div class="sectionbody">
<div class="paragraph"><p>Nach diesem ersten kurzen Eindruck der BI-Statusoberfläche geht es zurück
zur Konfiguration. Denn mit solch einem Miniaggregat können Sie natürlich noch niemanden
wirklich beeindrucken.</p></div>
<div class="paragraph"><p>Es beginnt damit, dass Sie den Baum um eine Ebene erweitern — also von
zwei Ebenen (Wurzel und Blätter) auf drei Ebenen (Wurzel, Zwischenebene, Blätter) gehen. Dazu kombinieren Sie Ihren vorhandenen Knoten „Switches 1 &amp; 2“ mit dem Zustand
der NTP-Zeitsynchronisation zu einem Oberknoten „Infrastructure“.</p></div>
<div class="paragraph"><p>Aber der Reihe nach — und zunächst das Ergebnis vorweg:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_4_rule_infra_4.png" alt="bi 4 rule infra 4"></div></div>
<div class="paragraph"><p>Voraussetzung ist, dass es einen Host <code>srv-ntp</code> gibt, der
einen Service mit dem Namen <code>NTP Time</code> hat:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_4_service_ntp.png" alt="bi 4 service ntp"></div></div>
<div class="paragraph"><p>Legen Sie erst einmal eine BI-Regel an, welche als Unterknoten 1 die Regel „Switches 1 &amp; 2“ bekommt und als Unterknoten 2 direkt den Service <code>NTP Time</code> des Hosts <code>srv-ntp</code>. Im Kopf der Regel wählen Sie <code>infrastructure</code> als Regel-ID und <span class="guihint">Infrastructure</span> als Namen. Weitere Angaben können Sie sich erst einmal sparen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_4_rule_infra_1.png" alt="bi 4 rule infra 1"></div></div>
<div class="paragraph"><p>Unter <span class="guihint">Child Node Generation</span> wird es interessant. Der erste Eintrag ist
jetzt vom Typ <span class="guihint">Call a rule</span> und als Regel wählen Sie Ihre Regel von oben
aus. Damit „hängen“ Sie diese quasi in den Unterbaum ein.</p></div>
<div class="paragraph"><p>Der zweite Unterknoten ist vom Typ <span class="guihint">State of a service</span>, und hier wählen
Sie Ihren NTP-Host per Namen (bitte beachten Sie hier die exakte
Schreibung, inklusive der Groß-/Kleinbuchstaben) sowie den <code>NTP Time</code>-Service per Regex:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_4_rule_infra_2.png" alt="bi 4 rule infra 2"></div></div>
<div class="paragraph"><p>Die <span class="guihint">Aggregation Function</span> im dritten Kasten setzen Sie dieses Mal auf
<span class="guihint">Worst - take worst state of all nodes.</span></p></div>
<div class="paragraph"><p>Der Zustand des Knotens leitet sich bei dieser Funktion also vom schlechtesten
Status eines Services darunter ab. Heißt hier: Geht <code>NTP Time</code> auf <span class="state2">CRIT</span>,
geht auch der Knoten auf <span class="state2">CRIT</span>.</p></div>
<div class="paragraph"><p>Damit der neue größere Baum sichtbar wird, müssen Sie natürlich wieder eine
Aggregation anlegen. Am besten verändern Sie einfach die bestehende
Aggregation, so dass fortan die neue Regel verwendet wird:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_4_rule_infra_3.png" alt="bi 4 rule infra 3"></div></div>
<div class="paragraph"><p>Auf diese Art bleiben Sie bei <em>einer</em> Aggregation. Und die sieht dann
so aus (dieses mal sind beide Switches wieder auf <span class="state0">OK</span>):</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_4_rule_infra_4.png" alt="bi 4 rule infra 4"></div></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_displayoptions">
<span class="hidden-anchor sr-only" id="displayoptions"></span>5. BI im Operating Teil 2: Alternative Darstellungen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__einleitung_2">
<span class="hidden-anchor sr-only" id="_einleitung_2"></span>5.1. Einleitung</h3>
<div class="paragraph"><p>Jetzt da Sie einen etwas interessanteren Baum haben, können Sie sich etwas genauer
mit den verschiedenen Darstellungsmöglichkeiten befassen, die Checkmk bietet. Ausgangspunkt
dafür ist die Funktion <span class="guihint">Modify display options</span>, welche Sie im Menü <span class="guihint">Display</span> finden. Diese öffnet einen Kasten mit Optionen. Der
Inhalt des Kastens ist immer angepasst auf die Elemente, die auf der Seite dargestellt
werden. Im Falle von BI finden Sie aktuell sechs Optionen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_display_options_screen.png" alt="bi 5 display options screen"></div></div>
<div class="sect3">
<h4 id="heading__bäume_sofort_auf_oder_zuklappen">
<span class="hidden-anchor sr-only" id="_bäume_sofort_auf_oder_zuklappen"></span>Bäume sofort auf- oder zuklappen</h4>
<div class="paragraph"><p>Wenn Sie nicht nur ein Aggregat, sondern sehr viele anzeigen, dann ist die
Einstellung <strong>Initial expansion of aggregations</strong> hilfreich. Hier legen Sie
fest, wie weit die Bäume beim ersten Anzeigen aufgeklappt sein sollen. Die
Auswahl reicht von geschlossen (<span class="guihint">collapsed</span>) über die ersten drei Ebenen
bis hin zu komplett geöffnet (<span class="guihint">complete</span>).</p></div>
</div>
<div class="sect3">
<h4 id="heading__nur_probleme_zeigen">
<span class="hidden-anchor sr-only" id="_nur_probleme_zeigen"></span>Nur Probleme zeigen</h4>
<div class="paragraph"><p>Wenn Sie die Option <strong>Show only problems</strong> aktivieren, werden in den Bäumen nur noch solche Zweige
angezeigt, die nicht den Status <span class="state0">OK</span> haben. Das sieht dann z.B. so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_only_problems.png" alt="bi 5 only problems"></div></div>
</div>
<div class="sect3">
<h4 id="heading__art_der_baumdarstellung">
<span class="hidden-anchor sr-only" id="_art_der_baumdarstellung"></span>Art der Baumdarstellung</h4>
<div class="paragraph"><p>Unter dem Punkt <strong>Type of tree layout</strong> finden Sie etliche alternative
Darstellungsarten für den Baum.  Eine davon heißt <span class="guihint">Table: top down</span>
und sieht so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_top_down.png" alt="bi 5 top down"></div></div>
<div class="paragraph"><p>Extrem platzsparend — vor allem, wenn Sie viele Aggregate gleichzeitig sehen möchten — ist die Darstellung <span class="guihint">Boxes.</span> Hier ist jeder Knoten ein farbiger Kasten, der per
Klick aufgeklappt wird. Die Baumstruktur ist nicht mehr sichtbar, aber Sie können
sich so bei minimalem Platzbedarf schnell zu einem Problem durchklicken. Hier im Beispiel
sind die Boxen komplett aufgeklappt:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_boxes.png" alt="bi 5 boxes"></div></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__weitere_optionen">
<span class="hidden-anchor sr-only" id="_weitere_optionen"></span>5.2. Weitere Optionen</h3>
<div class="paragraph"><p>Letztlich können Sie ein <span class="guihint">Refresh interval</span> von 30, 60 oder 90 Sekunden setzen
und die Anzahl der Spalten über <span class="guihint">Number of columns</span> bestimmen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_visualization">
<span class="hidden-anchor sr-only" id="visualization"></span>5.3. Visualisierung von BI-Aggregaten</h3>
<div class="paragraph"><p>Checkmk beherrscht neben tabellarischen Darstellungen
auch die Visualisierung von BI-Aggregaten. So können Sie Aggregate aus
neuer Perspektive und bisweilen übersichtlicher darstellen. Sie finden die
<span class="guihint">BI visualization</span> über <span class="image-inline"><img src="../images/icons/icon_aggr.png" alt="icon aggr"></span> in der regulären
Aggregatsansicht.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_start.png" alt="bi 5 visualization start"></div></div>
<div class="paragraph"><p>Sie können den Baum frei per Klick auf den Hintergrund bewegen und die
gesamte Darstellung per Mausrad skalieren. Sobald der Mauszeiger über
den einzelnen Knoten landet, bekommen Sie die zugehörigen Statusinformationen
via Hover-Fenster. Per Mausrad skalieren Sie nun die Länge der
Zweige des Baums.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_standard.png" alt="bi 5 visualization standard"></div></div>
<div class="paragraph"><p>Per Klick auf die Blatt-Knoten gelangen Sie direkt zu den Detailansichten
der Hosts oder Services. Per Rechtsklick auf die sonstigen Knoten erhalten
Sie, je nach Art des Knotens, Zugriff auf Darstellungsoptionen und
beispielsweise die verantwortliche Regel selbst; im Bild über <span class="guihint">Edit rule</span>.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_context.png" alt="bi 5 visualization context"></div></div>
<div class="sect3">
<h4 id="heading__visualisierung_anpassen">
<span class="hidden-anchor sr-only" id="_visualisierung_anpassen"></span>Visualisierung anpassen</h4>
<div class="paragraph"><p>Wirklich interessant wird es aber erst mit dem <span class="guihint">Layout Designer</span>, den
Sie über <span class="image-inline"><img src="../images/icons/icon_aggr.png" alt="icon aggr"></span> oben neben dem Suchfeld öffnen. Zunächst
sehen Sie zwei neue Elemente: Den Kasten <span class="guihint">Layout Configuration</span> und
zwei neue Icons an der Wurzel, <span class="image-inline"><img src="../images/icons/icon_bi_visualization_rotate.png" alt="icon bi visualization rotate"></span> und
<span class="image-inline"><img src="../images/icons/icon_bi_visualization_resize.png" alt="icon bi visualization resize"></span>.</p></div>
<div class="paragraph"><p>In der Konfiguration haben Sie die Wahl
zwischen unterschiedlichen Linienarten und können die <span class="guihint">Node icons</span>
aktivieren. Damit werden die Icons angezeigt, die Sie in den Regeln von
BI-Aggregaten im Bereich <a href="#aggregationfunction">Aggregation Function</a> festlegen dürfen
(direkt zu erreichen über das Kontextmenü des Knotens). Über die Icons
<span class="image-inline"><img src="../images/icons/icon_bi_visualization_rotate.png" alt="icon bi visualization rotate"></span> und
<span class="image-inline"><img src="../images/icons/icon_bi_visualization_resize.png" alt="icon bi visualization resize"></span> lässt sich der Baum durch Ziehen mit der Maus drehen beziehungsweise in Länge und Breite skalieren — einmal angeklickt, erscheint zudem der Kasten <span class="guihint">Style configuration</span> mit
weiteren Darstellungsoptionen. Welche am besten passt, finden Sie durch schlichtes Ausprobieren heraus.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_designer2.png" alt="bi 5 visualization designer2"></div></div>
<div class="paragraph"><p>Die größten Anpassungen ermöglichen Ihnen jedoch die Kontextmenüs der Knoten,
die im Designer-Modus vier verschiedene Darstellungen für die Hierarchie
ab diesem Knoten bieten:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p><span class="guihint">Hierarchical style</span>: Standardeinstellung mit einfacher Hierarchie.</p></li>
<li><p><span class="guihint">Radial style</span>: Kreisförmige Anordnung mit einstellbarem Kreisausschnitt.</p></li>
<li><p><span class="guihint">Leaf-Nodes Block style</span>: Blatt-Knoten werden grau unterlegt als Gruppe dargestellt.</p></li>
<li><p><span class="guihint">Free-Floating style</span>: Dynamisches Layout mit Optionen wie Anziehung, Abständen, Länge der Äste.</p></li>
</ol></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_styles.png" alt="bi 5 visualization styles"></div></div>
<div class="paragraph"><p>Knoten, denen ein Stil zugeordnet wurde, lassen sich frei platzieren. Je
nach Stil unterscheiden sich auch die Optionen, beim <span class="guihint">Radial style</span> sehen
Sie am Wurzelknoten etwa ein drittes Icon
<span class="image-inline"><img src="../images/icons/icon_bi_visualization_pie.png" alt="icon bi visualization pie"></span>, über das Sie die Darstellung auf einen
Kreisausschnitt beschränken können.</p></div>
<div class="paragraph"><p>Über die Option <span class="guihint">Detach from parent style</span> können Sie Knoten vom Stil des
übergeordneten Knotens lösen, um diese anders zu konfigurieren und frei
zu platzieren. In die gleiche Richtung zielt auch <span class="guihint">Include parent rotation</span>,
womit Sie übergeordnete Knoten beim Drehen ein- und ausschließen dürfen.</p></div>
<div class="paragraph"><p>Im Grunde sind alle Stile selbsterklärend, lediglich der <span class="guihint">Free-Floating style</span>
bedarf einiger Erklärungen. Hierbei handelt es sich um ein System aus Anziehung und
Abstoßung, wie Sie es von Gravitationssimulationen kennen.</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Center force strength</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anziehungskraft der Mitte auf die Knoten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Repulsion force leaf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kraft des Abstoßungseffekts von Blättern auf andere Knoten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Repulsion force branches</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kraft der Abstoßung von Knoten auf andere Knoten im selben Zweig.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Link distance leaf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idealer Abstand vom Blattknoten zum vorherigen Knoten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Link distance branches</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idealer Abstand vom Zweigknoten zum vorherigen Knoten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Link strength</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stärke, mit der der ideale Abstand erzwungen wird.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Collision box leaf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Größe des Blattknotenbereichs, der andere Knoten abstößt.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Collision box branch</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Größe des Zweigknotenbereichs, der andere Knoten abstößt.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Das folgende Bild zeigt einen Zweig im <span class="guihint">Free-Floating style</span> — die Positionen
der einzelnen Blätter ergeben sich dynamisch gemäß der gesetzten Optionen.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_float.png" alt="bi 5 visualization float"></div></div>
</div>
<div class="sect3">
<h4 id="heading__bi_regeln_layout_stil_vorgeben">
<span class="hidden-anchor sr-only" id="_bi_regeln_layout_stil_vorgeben"></span>BI-Regeln Layout-Stil vorgeben</h4>
<div class="paragraph"><p>Sie können BI-Regeln, die Sie über das Kontextmenü der Knoten erreichen,
im Bereich <span class="guihint">Rule Properties</span> die Layouts <span class="guihint">Hierarchical</span>, <span class="guihint">Radial</span>
oder <span class="guihint">Leaf-Nodes Block</span> zuordnen sowie zugehörige Optionen festlegen.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_rule.png" alt="bi 5 visualization rule"></div></div>
</div>
<div class="sect3">
<h4 id="heading__suchfunktion">
<span class="hidden-anchor sr-only" id="_suchfunktion"></span>Suchfunktion</h4>
<div class="paragraph"><p>In größeren Bäumen ist die Suchfunktion eine enorme Hilfe. Im Suchfeld <span class="guihint">Search node</span>
können Sie einfach einen Namensteil des gewünschten Knotens eingeben und
bekommen direkt live eine Liste mit Treffern. Wenn Sie nun mit der Maus
über diese Vorschlagsliste fahren, wird der Node unter dem Mauszeiger im
Baum durch einen blauen Rand hervorgehoben — das erleichtert eine erste
Orientierung. Klicken Sie auf einen Node in der Liste, wird der Baum auf
diesen zentriert. So lässt sich auch in Visualisierungen mit Hunderten
Nodes schnell der passende Bereich Ihrer Infrastruktur finden.</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_5_visualization_search.png" alt="bi 5 visualization search"></div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_config3">
<span class="hidden-anchor sr-only" id="config3"></span>6. Konfiguration Teil 3: Variablen, Schablonen, Suche</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__konfiguration_mit_mehr_intelligenz">
<span class="hidden-anchor sr-only" id="_konfiguration_mit_mehr_intelligenz"></span>6.1. Konfiguration mit mehr Intelligenz</h3>
<div class="paragraph"><p>Weiter geht’s mit der Konfiguration. Und jetzt wird es Zeit, dass
es wirklich zur Sache geht. Bisher war das Beispiel nämlich so einfach,
dass es ohne Schwierigkeit möglich war, die Objekte in der Aggregation alle
einzeln aufzulisten. Aber was, wenn die Dinge komplexer werden? Wenn Sie
viele immer wiederkehrende gleiche oder ähnliche Abhängigkeiten formulieren
wollen? Wenn es von einer Anwendung nicht nur eine, sondern mehrere Instanzen
gibt? Oder wenn Sie mal eben hundert Einzelservices einer Datenbank zu einem
BI-Knoten zusammenfassen wollen?</p></div>
<div class="paragraph"><p>Nun, dann brauchen Sie mächtigere Methoden der Konfiguration. Und die
sind genau das, was Checkmk BI gegenüber anderen Tools auszeichnet — und leider auch die Lernkurve etwas steiler gestaltet. Es ist auch der
Grund, warum Checkmk BI sich nicht per „Drag-and-Drop“ konfigurieren
lässt. Aber wenn Sie die Möglichkeiten erst einmal kennengelernt haben, werden
Sie sie sicher nicht mehr missen wollen.</p></div>
</div>
<div class="sect2">
<h3 id="heading__parameter">
<span class="hidden-anchor sr-only" id="_parameter"></span>6.2. Parameter</h3>
<div class="paragraph"><p>Beginnen Sie mit den <em>Parametern.</em> Nehmen Sie folgende Situation: Sie
möchten bei den beiden Switches nicht nur feststellen, ob sie <span class="hstate0">UP</span> sind,
sondern auch den Zustand von zwei Ports wissen, die für den Uplink zuständig
sind. Insgesamt geht es um folgende vier Services:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_switch_service.png" alt="bi 6 switch service"></div></div>
<div class="paragraph"><p>Nun soll der Knoten <span class="guihint">Switch 1 &amp; 2</span> so erweitert werden, dass es anstelle
der beiden Hostzustände für Switch 1 und 2 jeweils einen Unterknoten gibt,
der den Hoststatus <strong>und</strong> die beiden Uplink-Interfaces zeigt. Diese beiden Unterknoten
sollen <span class="guihint">Switch 1</span> bzw. <span class="guihint">Switch 2</span> heißen.</p></div>
<div class="paragraph"><p>Eigentlich bräuchten Sie jetzt also zwei neue Regeln — für jeden Switch eine. Besser
geht das, indem Sie eine neue Regel <code>switch</code> erstellen, diese aber mit einem <em>Parameter</em>
ausstatten. Dieser Parameter ist eine Variable, die man beim Aufruf der Regel
aus dem übergeordneten Knoten, hier die alte Regel <code>Switch 1 &amp; 2</code>,
mitgeben kann. Im Beispiel können Sie einfach entweder <code>1</code> oder
<code>2</code> übergeben. Der Parameter bekommt einen Namen, den Sie frei wählen
können. Nehmen Sie hier z. B. den Namen <code>NUMBER</code>. Die Schreibweise mit
Großbuchstaben ist rein willkürlich. Wenn Sie Kleinbuchstaben schöner finden,
können Sie gerne auch diese verwenden.</p></div>
<div class="paragraph"><p>Und so sieht der Kopf der Regel aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_rule_with_parameter.png" alt="bi 6 rule with parameter"></div></div>
<div class="paragraph"><p>Als ID für die neue Regel können Sie hier <code>switch</code> wählen. Bei <span class="guihint">Parameter</span>
tragen Sie einfach den Namen der Variablen ein: <code>NUMBER</code>. Wichtig
ist jetzt, dass auch im <span class="guihint">Rule Title</span> der Regel die Variable eingesetzt
wird, damit nicht beide Knoten einfach nur <code>Switch</code> heißen und so
den gleichen Namen hätten. Beim <strong>Verwenden</strong> der Variable wird (wie an
vielen Stellen in Checkmk üblich) vorne und hinten ein Dollarzeichen gesetzt.
Als Ergebnis werden die beiden Knoten dann <code>Switch 1</code> und
<code>Switch 2</code> heißen.</p></div>
<div class="sect3">
<h4 id="heading__präfix_match_ist_für_servicenamen_default">
<span class="hidden-anchor sr-only" id="_präfix_match_ist_für_servicenamen_default"></span>Präfix-Match ist für Servicenamen Default</h4>
<div class="paragraph"><p>Unter <span class="guihint">Child Node Generation</span> fügen Sie jetzt als erstes den Hostzustand ein.
Dabei dürfen Sie beim Hostnamen anstelle der <code>1</code> oder <code>2</code>
einfach Ihre Variable einsetzen und zwar auch hier wieder mit je einem
<code>$</code> hinten und vorne.</p></div>
<div class="paragraph"><p>Das Gleiche machen Sie bei dem Hostnamen der Uplink-Interfaces. Und hier kommt
gleich noch der zweite Trick. Denn wie Sie vielleicht an der kleinen Serviceliste
oben bemerkt haben, heißen die Services für den Uplink bei beiden Switchen
unterschiedlich! Das ist aber kein Problem, da BI den Servicenamen — ganz
analog zu den bekannten Service-<a href="wato_rules.html">Regeln</a> — immer als Präfix-Match mit
regulären Ausdrücken interpretiert. Schreiben Sie also einfach <code>Interface Uplink</code>,
erwischen Sie so alle Services <em>auf dem jeweiligen Host,</em> die
mit <code>Interface Uplink</code> <strong>beginnen:</strong></p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_rule_with_parameter_2.png" alt="bi 6 rule with parameter 2"></div></div>
<div class="paragraph"><p>Übrigens: Durch das Anhängen von <code>$</code> können Sie das Präfix-Verhalten
abschalten. Ein <code>$</code> bedeutet bei regulären Ausdrücken — im Kontext der Checkmk-Regeln — soviel wie
„Der Text muss hier enden“. Also matcht <code>Interface 1$</code> auch
nur auf <code>Interface 1</code> und nicht z.B. auch auf <code>Interface 10</code>.</p></div>
<div class="paragraph"><p>Bauen Sie jetzt noch die alte Regel <span class="guihint">Switch 1 &amp; 2</span> so um, dass diese
anstelle der Hostzustände die neue Regel für jeden der beiden Switche je
einmal aufruft. Und hier ist jetzt auch die Stelle, an der Sie die Werte
<code>1</code> und <code>2</code> als Parameter für die Variable <code>NUMBER</code>
übergeben:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_rule_with_parameter_3.png" alt="bi 6 rule with parameter 3"></div></div>
<div class="paragraph"><p>Und voila: Schon haben Sie einen hübschen Baum mit drei Ebenen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_rule_with_parameter_4.png" alt="bi 6 rule with parameter 4"></div></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__reguläre_ausdrücke_fehlende_objekte">
<span class="hidden-anchor sr-only" id="_reguläre_ausdrücke_fehlende_objekte"></span>6.3. Reguläre Ausdrücke, fehlende Objekte</h3>
<div class="paragraph"><p>Die Sache mit den <a href="regexes.html">regulären Ausdrücken</a> ist nochmal
einen genaueren Blick wert.
Beim Matching der Servicenamen haben wir nämlich am Anfang
stillschweigend unterschlagen, dass es sich eben grundsätzlich um reguläre
Ausdrücke handelt. Wie gerade erwähnt, findet dabei ein Präfix-Match statt.</p></div>
<div class="paragraph"><p>Wenn Sie also in einem BI-Knoten beim Servicenamen z. B. <code>Disk</code> angeben,
werden alle Services des betreffenden Hosts eingefangen, die mit
<code>Disk</code> <em>beginnen</em>.</p></div>
<div class="paragraph"><p>Dabei gelten generell folgende Prinzipien:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Wenn sich ein Knoten auf Objekte bezieht, die es (aktuell) nicht gibt, dann werden diese einfach weggelassen.</p></li>
<li><p>Wenn ein Knoten dadurch leer wird, wird er selbst weggelassen.</p></li>
<li><p>Ist auch der Wurzelknoten eines Aggregats leer, wird das Aggregat selbst weggelassen.</p></li>
</ol></div>
<div class="paragraph"><p>Vielleicht klingt das für Sie erst einmal etwas verwegen. Ist es nicht gefährlich,
einfach Dinge, die da sein sollten, stillschweigend wegzulassen, wenn sie fehlen?</p></div>
<div class="paragraph"><p>Nun — mit der Zeit werden Sie feststellen, wie praktisch dieses Konzept ist. Denn
dadurch können Sie „intelligente“ Regeln schreiben, die auf sehr
unterschiedliche Situationen reagieren können.  Gibt es einen Service, der
nicht bei jeder Instanz einer Anwendung vorhanden ist? Kein Problem — er
wird einfach nur dann berücksichtigt, wenn er auch da ist. Oder werden Hosts
oder Services vorübergehend aus dem Monitoring genommen? Dann verschwinden
diese einfach aus BI, ohne dass es zu Fehlern oder dergleichen kommt. BI ist
<strong>nicht</strong> dafür da, um festzustellen, ob Ihre Monitoringkonfiguration
vollständig ist!</p></div>
<div class="paragraph"><p>Dieses Prinzip gilt übrigens auch bei <em>explizit</em> definierten Services. Denn eigentlich
gibt es diese ja nicht, weil die Servicenamen ja immer als reguläre Ausdrücke
gesehen werden, auch wenn sie keine speziellen Sonderzeichen wie <code>.*</code>
enthalten. Es handelt sich immer automatisch um ein Suchmuster.</p></div>
</div>
<div class="sect2">
<h3 id="heading__knoten_als_ergebnis_einer_suche_anlegen">
<span class="hidden-anchor sr-only" id="_knoten_als_ergebnis_einer_suche_anlegen"></span>6.4. Knoten als Ergebnis einer Suche anlegen</h3>
<div class="paragraph"><p>Sie können aber noch weiter automatisieren und vor allem flexibel auf Veränderungen
reagieren. Weiter geht es mit dem Beispiel der beiden Anwendungsserver
<code>srv-mys-1</code> und <code>srv-mys-2</code> aus dem Beispiel. Ihr Baum soll
weiter wachsen. Der Knoten <span class="guihint">Infrastructure</span> soll auf Ebene 2 rutschen.
Und als endgültige Wurzel soll eine Regel mit dem
Titel <span class="guihint">The Mystery Application</span> dienen, unter der alles hängen wird. Neben
<span class="guihint">Infrastructure</span> soll es einen Knoten mit dem Namen <span class="guihint">Mystery Servers</span>
geben.
Unter diesem sollen die (aktuell) zwei Mystery-Server hängen. Von jedem
kommen ein paar exemplarische Services in das Aggregat.
Das Ergebnis soll so aussehen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_mystery_tree.png" alt="bi 6 mystery tree"></div></div>
<div class="sect3">
<h4 id="heading__unterste_regel_mystery_server_x">
<span class="hidden-anchor sr-only" id="_unterste_regel_mystery_server_x"></span>Unterste Regel: Mystery Server X</h4>
<div class="paragraph"><p>Fangen Sie von unten an. Denn das ist in BI immer der einfachste Weg.
Unten gibt es die neue Regel <span class="guihint">Mystery Server X</span>. Natürlich verwenden
Sie einen Parameter, damit Sie nicht für jeden Server eine eigene
Regel brauchen. Den Parameter nennen Sie z. B. wieder <code>NUMBER</code>.
Er soll dann später als Wert <code>1</code> oder <code>2</code> haben.
Wie bereits oben geschehen, müssen Sie <code>NUMBER</code> abermals
im Kopf der Regel bei <span class="guihint">Parameters</span> eintragen.</p></div>
<div class="paragraph"><p>Der folgende Child-Node-Generator sieht dann so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_mystery_server_rule.png" alt="bi 6 mystery server rule"></div></div>
<div class="paragraph"><p>Hier ist Folgendes bemerkenswert:</p></div>
<div class="ulist"><ul>
<li><p>Beim Hostnamen <code>srv-mys-$NUMBER$</code> wird die Nummer aus dem Parameter eingesetzt.</p></li>
<li><p>Bei <span class="guihint">Service Regex:</span> wird der raffinierte <a href="regexes.html">reguläre Ausdruck</a> <code>CPU|Memory</code> eingesetzt, der mit einem senkrechten Balken alternative Servicenamen (-anfänge) zulässt und auf alle Services matcht, die mit <code>CPU</code> oder <code>Memory</code> beginnen. Das spart eine Verdoppelung der Konfiguration!</p></li>
</ul></div>
<div class="paragraph"><p>Übrigens: Dieses Beispiel ist natürlich noch nicht unbedingt perfekt.
Zum Beispiel
wurde Status des Hosts selbst gar nicht aufgenommen. Wenn also einer
der Server <span class="hstate1">DOWN</span> geht, werden die Services auf diesem veralten (<span class="guihint">stale</span>
gehen), aber der Zustand wird <span class="state0">OK</span> bleiben und das Aggregat von dem
Ausfall nichts „mitbekommen“. Wenn Sie so etwas aber wissen möchten, sollten Sie neben
den Services auf jeden Fall auch den Hoststatus aufnehmen.</p></div>
</div>
<div class="sect3">
<h4 id="heading__mittlere_regel_mystery_servers">
<span class="hidden-anchor sr-only" id="_mittlere_regel_mystery_servers"></span>Mittlere Regel: Mystery Servers</h4>
<div class="paragraph"><p>Diese Regel wird interessant. Sie fasst die beiden Mystery-Server zu einem
Knoten zusammen. Nun soll es möglich sein, dass die Anzahl der Server
nicht festgelegt ist und durchaus später auch mal drei oder mehr sein kann.
Oder es könnte gar sein, dass es dutzende Instanzen der Mystery-Anwendung
gibt — jede mit einer anderen Anzahl von Servern.</p></div>
<div class="paragraph"><p>Der Trick liegt im Child-Node-Generator-Typ <span class="guihint">Create nodes based on a host search</span>.
Dieser sucht nach vorhandenen Hosts und erzeugt Knoten auf Basis der gefundenen
Hosts. Er sieht hier so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_mystery_server_rule2.png" alt="bi 6 mystery server rule2"></div></div>
<div class="paragraph"><p>Das Ganze funktioniert so:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Sie formulieren eine Suchbedingung, um Hosts zu finden.</p></li>
<li><p>Für jeden gefundenen Host wird ein Child-Node angelegt.</p></li>
<li><p>Dabei können Sie aus den gefundenen Hostnamen Teile herausschneiden und als Parameter bereitstellen.</p></li>
</ol></div>
<div class="paragraph"><p>Den Anfang macht das Finden. Hier stehen Ihnen wie üblich Hosttags zur Verfügung. Im
Beispiel können Sie darauf verzichten und stattdessen den regulären Ausdruck <span class="guihint">srv-mys-(.*)</span>
für den Hostnamen verwenden. Dieser matcht auf alle Hosts, die mit <code>srv-mys-</code> beginnen.
Das <code>.*</code> steht für eine beliebige Zeichenfolge.</p></div>
<div class="paragraph"><p>Wichtig ist hierbei, dass das <code>.*</code> <em>eingeklammert</em> ist, also <code>(.*)</code>. Durch
die Klammerung bildet der Match eine sogenannte <em>Gruppe</em>. In dieser wird genau der Text eingefangen (und gespeichert),
auf den das <code>.*</code> matcht — hier also <code>1</code> oder <code>2</code>.
Die Matchgruppen werden intern durchnummeriert. Hier gibt es nur
eine, welche die Nummer 1 bekommt.</p></div>
<div class="paragraph"><p>Auf den gematchten Text können Sie später daher mit <code>$1$</code> zugreifen.</p></div>
<div class="paragraph"><p>Die Suche wird jetzt zwei Hosts finden:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Hostname</th>
<th class="tableblock halign-left valign-top">Wert von <code>$1$</code>
</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">srv-mys-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">srv-mys-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Für jeden gefundenen Host erzeugen Sie einen Unterknoten mit der
Funktion <span class="guihint">Call a rule</span>.  Wählen Sie die Regel <code>Mystery Server $NUMBER$</code> aus,
die Sie gerade angelegt haben. Als Argument für <code>NUMBER</code>
übergeben Sie die Matchgruppe: <code>$1$</code>.</p></div>
<div class="paragraph"><p>Jetzt wird also die Unterregel <code>Mystery Server $NUMBER$</code> zweimal aufgerufen:
einmal mit <code>1</code> und einmal mit <code>2</code>.</p></div>
<div class="paragraph"><p>Sollte in Zukunft einmal ein neuer Server mit dem Namen <code>srv-mys-3</code> ins Monitoring
aufgenommen werden, so wird dieser <strong>automatisch</strong> im BI-Aggregat auftauchen.
Der Zustand des Hosts ist dabei egal.
Auch wenn der Server  <span class="hstate1">DOWN</span> ist,
wird er natürlich <strong>nicht</strong> aus dem Aggregat entfernt!</p></div>
<div class="paragraph"><p>Zugegeben, das ist hier eine sehr steile Lernkurve. Diese Methode ist
wirklich komplex. Aber wenn Sie das erst einmal ausprobiert und verstanden haben,
werden Sie auch verstehen, wie mächtig das ganze Konzept ist.
Und bislang wurden die Möglichkeiten gerade erst angekratzt!</p></div>
</div>
<div class="sect3">
<h4 id="heading__oberste_regel">
<span class="hidden-anchor sr-only" id="_oberste_regel"></span>Oberste Regel</h4>
<div class="paragraph"><p>Der neue oberste Knoten <span class="guihint">The Mystery Application</span> ist jetzt einfach: Dazu
ist eine neue Regel notwendig, die zwei Unterknoten der Art <span class="guihint">Call a rule</span>
hat. Diese beiden Regeln sind die bestehende <span class="guihint">Infrastructure</span> und die gerade neu
angelegte Regel mit dem Namen <span class="guihint">Mystery Servers.</span></p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__knoten_mit_servicesuche_anlegen">
<span class="hidden-anchor sr-only" id="_knoten_mit_servicesuche_anlegen"></span>6.5. Knoten mit Servicesuche anlegen</h3>
<div class="paragraph"><p>Analog zu der Hostsuche gibt es auch einen Child-Generator-Typ der
<span class="guihint">Create nodes based on a service search</span> heißt. Hier sehen Sie ein Beispiel:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_6_service_search.png" alt="bi 6 service search"></div></div>
<div class="paragraph"><p>Sie können hier sowohl beim Host als auch beim Service mit <code>()</code>
Teilausdrücke einklammern. Hierbei gilt:</p></div>
<div class="ulist"><ul>
<li><p>Wählen Sie <span class="guihint">Regex for host name</span>, so <em>müssen</em> Sie genau einen Klammerausdruck definieren. Der Matchtext wird dann als <code>$1$</code> bereitgestellt.</p></li>
<li><p>Wählen Sie <span class="guihint">All hosts</span>, so wird der Hostname komplett als <code>$1$</code> bereitgestellt.</p></li>
<li><p>Im Servicenamen dürfen Sie mehrere Subgruppen verwenden. Die zugehörigen Matchtexte werden als <code>$2$</code>, <code>$3$</code> usw. bereitgestellt.</p></li>
</ul></div>
<div class="paragraph"><p>Und bitte vergessen Sie nie, dass Sie mit <span class="image-inline"><img src="../images/icons/icon_help.png" alt="icon help"></span> stets die Onlinehilfe aufrufen können.</p></div>
</div>
<div class="sect2">
<h3 id="heading__alle_übrigen_services">
<span class="hidden-anchor sr-only" id="_alle_übrigen_services"></span>6.6. Alle übrigen Services</h3>
<div class="paragraph"><p>Vielleicht sind Sie bei Ihren Versuchen über den Child-Node-Generator
<span class="guihint">State of remaining services</span> gestolpert. Dieser erzeugt für
jeden Service eines Hosts, der in Ihrem BI-Aggregat noch nirgends einsortiert
ist, einen Knoten. Dies ist nützlich, wenn Sie BI dazu verwenden, um den
Zustand aller Services eines Hosts übersichtlich zu gruppieren — so wie
dies im mitgelieferten Beispiel gemacht wird.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_hostaggr">
<span class="hidden-anchor sr-only" id="hostaggr"></span>7. Die vordefinierte Hostaggregation</h2>
<div class="sectionbody">
<div class="paragraph"><p>Wie erwähnt, können Sie BI auch dazu verwenden, die Services
eines Hosts strukturiert anzuzeigen. Dabei fassen Sie alle Services zu einem
Baum in einem Aggregat zusammen und verwenden grundsätzlich die Funktion
<span class="guihint">worst</span>. Der Gesamtstatus eines Hosts zeigt dann nur noch, ob es irgendein
Problem bei dem Host gibt. Und Sie nutzen BI als übersichtliche „Drilldown“-Methode.</p></div>
<div class="paragraph"><p>Für diesen Zweck liefert Checkmk bereits einen vordefinierten Satz an
Regeln mit, welchen Sie einfach nur freischalten müssen. Diese Regeln sind
auf die Darstellung von Services auf Windows- oder Linux-Hosts optimiert,
aber Sie können sie natürlich nach Ihren Wünschen anpassen. Sie finden
alle Regeln im Regelpaket <span class="guihint">Default</span>. Wie üblich gelangen Sie von dort
durch einen Klick auf <span class="image-inline"><img src="../images/icons/icon_rules.png" alt="icon rules"></span> zu den Regeln:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_7_wato_start.png" alt="bi 7 wato start"></div></div>
<div class="paragraph"><p>Dort finden Sie eine Liste von zwölf Regeln (hier gekürzt):</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_7_host_tree_rules.png" alt="bi 7 host tree rules"></div></div>
<div class="paragraph"><p>Die erste Regel ist die Regel für die Wurzel des Baums. Das Symbol
<span class="image-inline"><img src="../images/icons/icon_aggr.png" alt="icon aggr"></span> bei dieser Regel bringt Sie zu einer Baumdarstellung.
Hier können Sie sehen, wie die Regeln untereinander verschachtelt sind:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_7_host_tree_tree.png" alt="bi 7 host tree tree" width="40%"></div></div>
<div class="paragraph"><p>Zurück in der Liste der Regeln, gelangen Sie mit dem Knopf <span class="image-inline"><img src="../images/icons/button_aggregations.png" alt="button aggregations"></span> <span class="guihint">Aggregations</span>
zur Liste der Aggregationen in diesem Regelpaket — welche nur aus einer einzigen
Aggregation besteht. Entfernen Sie in den <span class="image-inline"><img src="../images/icons/icon_edit.png" alt="icon edit"></span> Details einfach die
Checkbox bei <span class="guihint">Currently disable this aggregation</span> und sofort bekommen Sie pro
Host eine Aggretation mit dem Titel <code>Host myhost123</code>. Diese sieht dann
z. B. so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_7_host_aggregation.png" alt="bi 7 host aggregation"></div></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_permissions">
<span class="hidden-anchor sr-only" id="permissions"></span>8. Berechtigungen und Sichtbarkeit</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__berechtigungen_zum_editieren">
<span class="hidden-anchor sr-only" id="_berechtigungen_zum_editieren"></span>8.1. Berechtigungen zum Editieren</h3>
<div class="paragraph"><p>Nochmal zurück zu den Regelpaketen. Normalerweise benötigt man für
alle Editieraktionen in BI die Rolle <span class="guihint">Administrator</span>. Genauer gesagt gibt es
für BI zwei <a href="wato_user.html#roles">Berechtigungen,</a> zu finden unter <span class="guihint">Setup &gt; Users &gt; Roles &amp; permissions:</span></p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_8_wato_permissions.png" alt="bi 8 wato permissions"></div></div>
<div class="paragraph"><p>In der Rolle <span class="guihint">User</span> ist standardmäßig nur die erste der beiden Berechtigungen
aktiv. Normale
Benutzer können also nur in solchen Regelpaketen arbeiten, in denen sie als
Kontakt hinterlegt sind.
Dies erledigen Sie in den <span class="image-inline"><img src="../images/icons/icon_edit.png" alt="icon edit"></span> Details des Regelpakets.</p></div>
<div class="paragraph"><p>Im folgenden Beispiel ist bei <span class="guihint">Permitted Contact Groups</span>
die Kontaktgruppe <span class="guihint">The Mystery Admins</span> hinterlegt. Alle Mitglieder dieser
Gruppe dürfen jetzt in diesem Paket Regeln editieren:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_8_pack_properties.png" alt="bi 8 pack properties"></div></div>
<div class="paragraph"><p>Übrigens können Sie mit
<span class="guihint">Public &gt; Allow all users to refer to rules contained in this pack</span>
anderen Benutzern zumindest erlauben, die hier enthaltenen Regeln
zu <strong>verwenden</strong> — also (woanders) eigene Regeln zu definieren, welche
diese Regeln als Unterknoten aufrufen.</p></div>
</div>
<div class="sect2">
<h3 id="heading__berechtigungen_auf_hosts_und_services">
<span class="hidden-anchor sr-only" id="_berechtigungen_auf_hosts_und_services"></span>8.2. Berechtigungen auf Hosts und Services</h3>
<div class="paragraph"><p>Und wie ist es eigentlich mit der Sichtbarkeit der Aggregationen in der
Statusoberfläche? Welcher Kontakt darf was sehen?</p></div>
<div class="paragraph"><p>Nun — in BI-Aggregaten selbst können Sie keine Rechte vergeben. Das
geschieht indirekt über die Sichtbarkeit der Hosts und Services und wird
geregelt über die Berechtigung <span class="guihint">See all hosts and services</span> einzelner Rollen unter
<span class="guihint">Setup &gt; Roles &amp; Permissions:</span></p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_8_see_all.png" alt="bi 8 see all"></div></div>
<div class="paragraph"><p>In der Rolle <span class="guihint">User</span> ist dieses Recht per Default ausgeknipst. Normale
Benutzer können nur für sie freigegebene Hosts und Services sehen. Und das
drückt sich bei BI so aus, dass sie genau alle BI-Aggregationen sehen, welche
mindestens einen freigegebenen Host oder Service enthalten. Diese Aggregate
enthalten aber auch <strong>nur</strong> diese berechtigten Objekte und sind daher
eventuell ausgedünnt. Und das wiederum bedeutet, dass sie für unterschiedliche
Benutzer einen unterschiedlichen Status haben können!</p></div>
<div class="paragraph"><p>Ob das jetzt gut oder schlecht ist, hängt davon ab, was Sie möchten. Im Zweifel
können Sie die Berechtigung umschalten und manchen oder allen Benutzern
erlauben, über den Umweg von BI auch Hosts und Services zu sehen, für die
sie kein Kontakt sind — und damit sicherstellen, dass der Status eines
Aggregats immer für alle gleich ist.</p></div>
<div class="paragraph"><p>Das ganze Thema spielt natürlich nur dann eine Rolle, wenn es überhaupt
Aggregate gibt, die so bunt zusammengewürfelt sind, dass eben manche
Benutzer nur für Teile davon Kontakte sind.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_operating">
<span class="hidden-anchor sr-only" id="operating"></span>9. BI im Operating Teil 3: Wartungszeiten, Quittierung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__die_generelle_idee">
<span class="hidden-anchor sr-only" id="_die_generelle_idee"></span>9.1. Die generelle Idee</h3>
<div class="paragraph"><p>Wie hält es BI eigentlich mit <span class="image-inline"><img src="../images/icons/icon_downtime.png" alt="icon downtime"></span> <a href="basics_downtimes.html">Wartungszeiten?</a> Nun, hier haben
wir lange nachgedacht und mit vielen Anwendern diskutiert. Das Ergebnis ist
wie folgt:</p></div>
<div class="ulist"><ul>
<li><p>Sie können ein BI-Aggregat nicht direkt in eine Wartungszeit versetzen — müssen es aber auch nicht, denn …​</p></li>
<li><p>die Wartungszeit eines BI-Aggregats leitet sich automatisch von den Wartungszeiten seiner Hosts und Services ab.</p></li>
</ul></div>
<div class="paragraph"><p>Um zu verstehen, nach welcher Regel BI den Status „in Wartung“ berechnet, hilft es, wenn Sie sich
zurückerinnern, was die eigentliche Idee hinter Wartungszeiten ist:
<em>Am betreffenden Objekt wird gerade gearbeitet. Mit Ausfällen ist zu rechnen. Auch wenn das Objekt gerade <span class="state0">OK</span> ist, sollte man sich nicht darauf verlassen. Es kann jederzeit <span class="state2">CRIT</span> werden. Dies ist bekannt und dokumentiert. Es soll nicht benachrichtigt werden.</em></p></div>
<div class="paragraph"><p>Diese Idee kann man 1:1 auf BI übertragen: Im Aggregat gibt es vielleicht ein paar Hosts und
Services, welche gerade in Wartung sind. Ob diese gerade <span class="state0">OK</span> oder <span class="state2">CRIT</span> sind, spielt keine
Rolle, denn es ist ja eigentlich Zufall, ob die Objekte während der Wartungsarbeiten ab und
zu mal wieder funktionieren oder nicht. Bloß weil im Aggregat aber ein Wartungsobjekt steckt, bedeutet
das aber auch nicht gleich, dass die Anwendung, die das Aggregat abbildet, selbst „bedroht“ ist und
als „in Wartung“ markiert sein muss. Denn es kann ja Redundanz eingebaut sein, welche den
Ausfall der Wartungsobjekte kompensiert. Nur wenn so ein Ausfall tatsächlich zum <span class="state2">CRIT</span>-Zustand des
Aggregats führen würde — es also eben <em>nicht</em> genug Redundanz gibt und das Aggregat wirklich bedroht
ist — genau dann wird es von Checkmk als „in Wartung“ markiert. Wobei auch
hier der <em>aktuelle</em> Zustand der Objekte generell keine Rolle spielt.</p></div>
<div class="paragraph"><p>Knapper formuliert ist die genaue Regel wie folgt:</p></div>
<div class="paragraph"><p>Wenn ein <span class="state2">CRIT</span>-Status eines Hosts/Services zu einem <span class="state2">CRIT</span>-Status der Aggregation führen <strong>würde,</strong>
führt ein „in Wartung“-Status dieses Hosts/Services zu einem „in Wartung“-Status der Aggregation.</p></div>
<div class="paragraph"><p>Wichtig: der <em>wirkliche</em> aktuelle Status der Hosts/Services spielt bei der Berechnung <em>keine</em> Rolle - was in Wartung ist, wird in der BI-Logik als <span class="state2">CRIT</span> angenommen. Warum? Weil ein <span class="hstate0">UP</span>- oder <span class="state0">OK</span>-Status während einer Wartungszeit reiner Zufall ist, etwa, wenn ein Host zwischen mehreren Neustarts zwischenzeitlich für wenige Sekunden <span class="hstate0">UP</span> meldet.</p></div>
<div class="paragraph"><p>Und hier haben wir jetzt noch ein Beispiel: Um Platz zu sparen ist dies eine Variante
mit nur einem Mystery-Server anstelle von zweien:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_9_downtimes.png" alt="bi 9 downtimes"></div></div>
<div class="paragraph"><p>Hier ist zunächst der Host <code>switch-1</code> in Wartung. Für den Knoten
<code>Infrastructure</code> hat das aber keine Auswirkung. Denn <code>switch-2</code>
ist ja <em>nicht</em> in Wartung. Also ist <code>Infrastructure</code> auch
nicht in Wartung. Dort fehlt das Symbol <span class="image-inline"><img src="../images/icons/icon_derived_downtime.png" alt="icon derived downtime"></span> für
abgeleitete Wartungszeiten.</p></div>
<div class="paragraph"><p>Aber: Auch der Service <code>Memory</code> auf <code>srv-mys-1</code> ist in Wartung.
Dieser ist <em>nicht</em> redundant. Die Wartung vererbt sich daher auf den
Vaterknoten <code>Mystery Server 1</code>, dann weiter auf <code>Mystery Servers</code>
und schließlich auf den obersten Knoten <code>The Mystery Application</code>. Also
ist dieser auch in Wartung.</p></div>
</div>
<div class="sect2">
<h3 id="heading__kommando_wartungszeit">
<span class="hidden-anchor sr-only" id="_kommando_wartungszeit"></span>9.2. Kommando Wartungszeit</h3>
<div class="paragraph"><p>Haben wir oben geschrieben, dass Sie ein BI-Aggregat nicht manuell in eine
Wartungszeit versetzen können? Das stimmt eigentlich nur halb. Denn
Sie werden in der Tat bei BI-Aggregaten ein Kommando
zum Setzen von Wartungszeiten finden. Aber das macht nichts anderes, als
auf auf <em>jeden einzelnen Host und Service</em> des Aggregats eine Wartung
einzutragen. Das führt dann natürlich in der Regel dazu, dass das Aggregat
selbst auch als in Wartung gilt. Aber das ist nur indirekt.</p></div>
</div>
<div class="sect2">
<h3 id="heading__tuningmöglichkeiten">
<span class="hidden-anchor sr-only" id="_tuningmöglichkeiten"></span>9.3. Tuningmöglichkeiten</h3>
<div class="paragraph"><p>Oben haben Sie gesehen, dass die Wartungszeitberechnung auf Basis eines
angenommenen <span class="state2">CRIT</span>-Zustands läuft. In den Eigenschaften eines Aggregats
können Sie den Algorithmus so anpassen, dass ein Knoten bereits bei einem
angenommenen <span class="state1">WARN</span>-Zustand als in Wartung gilt. Die Option hierzu
heißt <span class="guihint">Escalate downtimes based on aggregated WARN state</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_9_downtimes_on_warn.png" alt="bi 9 downtimes on warn"></div></div>
<div class="paragraph"><p>Die Grundannahme, dass die in Wartung befindlichen Objekte <span class="state2">CRIT</span>
sind, bleibt bestehen. Einen Unterschied gibt es nur dort, wo
aufgrund der Aggregatsfunktion aus <span class="state2">CRIT</span> ein <span class="state1">WARN</span> werden kann — so wie das z. B. beim allerersten Beispiel mit <span class="guihint">Count the number of nodes in state OK</span>
der Fall war. Hier würde eine Wartungszeit bereits dann angenommen
werden, wenn auch nur einer der beiden Switche in Wartung wäre.</p></div>
</div>
<div class="sect2">
<h3 id="heading__quittierungen">
<span class="hidden-anchor sr-only" id="_quittierungen"></span>9.4. Quittierungen</h3>
<div class="paragraph"><p>Ganz ähnlich zu den Wartungszeiten wird auch die Information, ob ein Problem
<span class="image-inline"><img src="../images/icons/icon_ack.png" alt="icon ack"></span> <a href="basics_ackn.html">quittiert</a> ist, von BI automatisch berechnet.
Diesmal spielt der Zustand der Objekte durchaus eine Rolle.</p></div>
<div class="paragraph"><p>Die Idee hier ist, folgendes Konzept auf BI zu übertragen: Ein Objekt
hat ein Problem (<span class="state1">WARN</span>, <span class="state2">CRIT</span>). Aber das ist bekannt und jemand
arbeitet daran (<span class="image-inline"><img src="../images/icons/icon_ack.png" alt="icon ack"></span>).</p></div>
<div class="paragraph"><p>Sie können das für ein Aggregat wie folgt selbst berechnen:</p></div>
<div class="ulist"><ul>
<li><p>Nehmen Sie an, dass alle Hosts und Services, die <span class="image-inline"><img src="../images/icons/icon_ack.png" alt="icon ack"></span> quittierte Probleme haben, wieder <span class="state0">OK</span> wären.</p></li>
<li><p>Würde das Aggregat dann selbst auch wieder <span class="state0">OK</span>? Genau dann gilt es ebenfalls als <span class="image-inline"><img src="../images/icons/icon_ack.png" alt="icon ack"></span> quittiert.</p></li>
</ul></div>
<div class="paragraph"><p>Würde das Aggregat jedoch <span class="state1">WARN</span> oder <span class="state2">CRIT</span> bleiben, dann gilt
es <strong>nicht</strong> als quittiert. Dann muss es noch mindestens ein weiteres
wichtiges Problem geben, das selbst nicht quittiert ist und den <span class="state0">OK</span>-Status
des Aggregats entfernt.</p></div>
<div class="paragraph"><p>Übrigens wird Ihnen bei den <span class="image-inline"><img src="../images/icons/icon_commands.png" alt="icon commands"></span> Kommandos zu einem
BI-Aggregat angeboten, dessen Probleme zu quittieren. Dies bedeutet aber nur,
dass <em>alle</em> im Aggregat erfassten Hosts und Services quittiert werden
(nur solche, die aktuell auch Probleme haben).</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_availability">
<span class="hidden-anchor sr-only" id="availability"></span>10. Verfügbarkeit</h2>
<div class="sectionbody">
<div class="paragraph"><p>Genauso wie bei Hosts und Services können Sie auch bei BI die <a href="availability.html">Verfügbarkeit</a>
eines oder mehrerer Aggregate für beliebige Zeiträume in der Vergangenheit berechnen lassen.
Dazu rekonstruiert das BI-Modul anhand der Historie von Hosts und Services den Zustand
des Aggregats für jeden Zeitpunkt in der Vergangenheit. Somit können Sie auch für solche
Zeiträume Verfügbarkeiten berechnen, in denen das Aggregat noch gar nicht konfiguriert war!</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_10_availability_example.png" alt="bi 10 availability example"></div></div>
<div class="paragraph"><p>Alle Einzelheiten zu BI und Verfügbarkeit finden Sie im Artikel zur Verfügbarkeit im
Abschnitt zu <a href="availability.html#bi">BI</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__bi_im_verteilten_monitoring">
<span class="hidden-anchor sr-only" id="_bi_im_verteilten_monitoring"></span>11. BI im verteilten Monitoring</h2>
<div class="sectionbody">
<div class="paragraph"><p>Was geschieht eigentlich mit BI in einer <a href="distributed_monitoring.html">verteilten Umgebung</a>?
Also wenn die Hosts über mehrere Monitoringserver verteilt sind?</p></div>
<div class="paragraph"><p>Die Antwort ist relativ einfach: Es funktioniert — und zwar ohne, dass Sie etwas Weiteres beachten
müssten. Da BI eine Komponente der Benutzeroberfläche ist und diese von Haus aus
eine verteilte Umgebung annimmt, ist dies für BI vollkommen transparent.</p></div>
<div class="paragraph"><p>Sollte ein Standort aktuell nicht erreichbar oder durch Sie manuell aus der GUI
ausgeblendet worden sein, so sind die Hosts des Standorts für BI nicht mehr vorhanden.
Das bedeutet dann:</p></div>
<div class="ulist"><ul>
<li><p>BI-Aggregate, die <em>ausschließlich</em> aus Objekten dieses Standorts aufgebaut sind, verschwinden.</p></li>
<li><p>BI-Aggregate, die <em>teilweise</em> aus Objekten dieses Standorts aufgebaut sind, werden ausgedünnt.</p></li>
</ul></div>
<div class="paragraph"><p>In letzterem Fall kann sich das natürlich auf den Status der betroffenen
Aggregate auswirken. Wie genau, das hängt von Ihren Aggregierungsfunktionen
ab. Wenn Sie z. B. überall <span class="guihint">worst</span> verwendet haben, kann der Status insgesamt
nur gleich bleiben oder besser werden. Denn Objekte des nicht mehr vorhandenen Standorts könnten
<span class="state1">WARN</span> oder <span class="state2">CRIT</span> gewesen sein. Bei anderen Aggregierungsfunktionen können
sich natürlich andere Zustände ergeben.</p></div>
<div class="paragraph"><p>Ob dieses Verhalten für Sie sinnvoll ist oder nicht, müssen Sie im Einzelfall beurteilen.
BI ist auf jeden Fall so aufgebaut, dass nicht vorhandene Objekte nicht in einem
Aggregat vorkommen können und auch nicht vermisst werden. Denn alle BI-Regeln arbeiten
ja, wie bereits oben erklärt, ausschließlich mit Suchmustern.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_biasservice">
<span class="hidden-anchor sr-only" id="biasservice"></span>12. Benachrichtigungen, BI als Service</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__aktive_checks_oder_datenquellenprogramm">
<span class="hidden-anchor sr-only" id="_aktive_checks_oder_datenquellenprogramm"></span>12.1. Aktive Checks oder Datenquellenprogramm</h3>
<div class="imageblock inline-image"><div class="content"><img src="../images/bi_large_icon_notifications.png" alt="bi large icon notifications" width="80"></div></div>
<div class="paragraph"><p>Kann man bei Statusänderungen in BI-Aggregaten eigentlich
<a href="notifications.html">benachrichtigen</a>? Nun — auf direktem Wege geht das erst mal nicht,
denn BI ist ausschließlich in der GUI vorhanden und hat keinen Bezug zum
eigentlichen Monitoring. Aber: Sie können aus BI-Aggregaten normale Services
machen. Und diese können dann natürlich wieder Benachrichtigungen auslösen.
Dazu gibt es zwei Möglichkeiten:</p></div>
<div class="ulist"><ul>
<li><p>Mit dem Datenquellenprogramm <span class="guihint">Check state of BI Aggregations</span></p></li>
<li><p>Mit aktiven Checks vom Typ <span class="guihint">Check State of BI Aggregation</span></p></li>
</ul></div>
</div>
<div class="sect2">
<h3 id="heading__benachrichtigungen_über_datenquellenprogramm">
<span class="hidden-anchor sr-only" id="_benachrichtigungen_über_datenquellenprogramm"></span>12.2. Benachrichtigungen über Datenquellenprogramm</h3>
<div class="paragraph"><p>Den Anfang macht die Methode „<a href="datasource_programs.html">Datenquellenprogramm</a>“,
denn diese ist immer dann gut, wenn Sie mehr als nur eine Handvoll
Aggregate als Services erzeugen wollen. Dazu finden Sie unter
<span class="guihint">Setup &gt; Agents &gt; Other integrations &gt; BI Aggregations</span> den passenden Regelsatz:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_12_datasource_program.png" alt="bi 12 datasource program"></div></div>
<div class="paragraph"><p>Hier können Sie sogar verschiedene Optionen angeben, zu welchen Hosts die Services
hinzugefügt werden sollen. Sie müssen nicht zwingend an dem Host kleben, welcher
das Datenquellenprogramm ausführt (<span class="guihint">Assign to the querying host</span>). Möglich ist
auch eine Zuordnung zu den Hosts, welche das Aggregat betrifft (<span class="guihint">Assign to the affected hosts</span>).
Das macht allerdings nur dann wirklich Sinn, wenn es sich dabei immer nur um einen
Host handelt. Über reguläre Ausdrücke und Ersetzungen können Sie sogar noch flexibler
zuordnen. Das Ganze geschieht dann über den <a href="piggyback.html">Piggyback-Mechanismus</a>.</p></div>
<div class="paragraph"><p><strong>Wichtig:</strong> Falls der Host, dem Sie diese Regel zuweisen, auch noch über den normalen Agenten überwacht
werden soll, müssen Sie unbedingt in dessen Einstellungen dafür sorgen, dass Agent <strong>und</strong>
Datenquellenprogramme ausgeführt werden:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_12_agent_and_all_ds_program.png" alt="bi 12 agent and all ds program"></div></div>
</div>
<div class="sect2">
<h3 id="heading__benachrichtigungen_über_einen_aktiven_check">
<span class="hidden-anchor sr-only" id="_benachrichtigungen_über_einen_aktiven_check"></span>12.3. Benachrichtigungen über einen aktiven Check</h3>
<div class="paragraph"><p>Die Benachrichtigung mit einem aktiven Check ist quasi der direktere Weg und erfordert
keinen künstlichen „Hilfs-Host“, welcher das Datenquellenprogramm ausführt.
Da er jedes Aggregat einzeln abfragen muss, ist er aber bei einer größeren
Menge von Aggregaten deutlich weniger performant und dann auch umständlicher
aufzusetzen.</p></div>
<div class="paragraph"><p>Das Ganze geht so: Es gibt einen aktiven Check, welcher per HTTP von der Web-API von
Checkmk den Zustand von BI-Aggregaten abrufen kann.
Diesen können Sie bequem mit dem Regelsatz
<span class="guihint">Setup &gt; Services &gt; Other services &gt; Check State of BI Aggregation</span> einrichten:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_12_active_check_rule.png" alt="bi 12 active check rule"></div></div>
<div class="paragraph"><p>Bitte beachten Sie hierbei Folgendes:</p></div>
<div class="ulist"><ul>
<li><p>Aktivieren Sie diese Regel nur für den Host, welcher den entsprechenden neuen BI-Service bekommen soll.</p></li>
<li><p>Die URL muss diejenige sein, mittels der <strong>dieser Host</strong> auf die GUI von Checkmk zugreifen kann.</p></li>
<li><p>Der Benutzer muss ein <a href="wato_user.html#automation">Automationsbenutzer</a> sein. Nur solch einer darf die Web-API abrufen. Der Benutzer <code>automation</code> bietet sich an, da dieser immer automatisch für solche Zwecke angelegt wird.</p></li>
<li><p>Tragen Sie bei <span class="guihint">Automation Secret</span> das <span class="guihint">Automation secret for machine accounts</span> des Benutzers ein, welches Sie in der Konfigurationsmaske der Benutzereigenschaften finden (nur, wenn Sie einen anderen Automationsbenutzer verwenden als <code>automation</code>).</p></li>
</ul></div>
<div class="paragraph"><p>Im Beispiel ist <span class="guihint">Automatically track downtimes of aggregation</span> aktiviert.
Genau genommen sind damit die <em>scheduled</em> Downtimes gemeint,
also die geplanten Wartungszeiten. Damit wird der neue aktive Service automatisch
eine Wartungszeit bekommen, wenn auch das BI-Aggregat dies tut.</p></div>
<div class="paragraph"><p>Der neue Service zeigt dann — natürlich mit einer Verzögerung von bis zu einem
Check-Intervall — den Zustand des Aggregats. Im Beispiel liegt der BI-Check
auf dem Host <code>srv-mys-1</code>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/bi_12_active_check_output.png" alt="bi 12 active check output"></div></div>
<div class="paragraph"><p>Diesen Service können Sie dann wie gewohnt Kontakten zuordnen und ihn als Basis für Benachrichtigungen verwenden.</p></div>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#_einleitung">1. Einleitung</a></li>
<li>
<a href="#first">2. Konfiguration Teil 1: Das erste Aggregat</a><ul class="sectlevel1">
<li><a href="#_begriffe">2.1. Begriffe</a></li>
<li><a href="#_ein_beispiel">2.2. Ein Beispiel</a></li>
<li><a href="#_ihre_erste_bi_regel">2.3. Ihre erste BI-Regel</a></li>
<li><a href="#_ihre_erste_aggregation">2.4. Ihre erste Aggregation</a></li>
</ul>
</li>
<li>
<a href="#statusgui">3. BI im Operating Teil 1: Die Statusansicht</a><ul class="sectlevel1">
<li>
<a href="#_alle_aggregate_anzeigen">3.1. Alle Aggregate anzeigen</a><ul class="sectlevel2"><li><a href="#_ansichten_f%C3%BCr_bi_erstellen">Ansichten für BI erstellen</a></li></ul>
</li>
<li><a href="#_mit_dem_baum_arbeiten">3.2. Mit dem Baum arbeiten</a></li>
<li><a href="#_bi_ausprobieren_was_w%C3%A4re_wenn">3.3. BI ausprobieren: Was wäre wenn?</a></li>
<li><a href="#_bi_ausprobieren_durch_gefakte_zust%C3%A4nde">3.4. BI ausprobieren durch gefakte Zustände</a></li>
<li><a href="#_bi_gruppen">3.5. BI-Gruppen</a></li>
<li><a href="#_vom_hostservice_zum_aggregat">3.6. Vom Host/Service zum Aggregat</a></li>
</ul>
</li>
<li><a href="#multilevel">4. Konfiguration Teil 2: Mehrstufige Bäume</a></li>
<li>
<a href="#displayoptions">5. BI im Operating Teil 2: Alternative Darstellungen</a><ul class="sectlevel1">
<li>
<a href="#_einleitung_2">5.1. Einleitung</a><ul class="sectlevel2">
<li><a href="#_b%C3%A4ume_sofort_auf_oder_zuklappen">Bäume sofort auf- oder zuklappen</a></li>
<li><a href="#_nur_probleme_zeigen">Nur Probleme zeigen</a></li>
<li><a href="#_art_der_baumdarstellung">Art der Baumdarstellung</a></li>
</ul>
</li>
<li><a href="#_weitere_optionen">5.2. Weitere Optionen</a></li>
<li>
<a href="#visualization">5.3. Visualisierung von BI-Aggregaten</a><ul class="sectlevel2">
<li><a href="#_visualisierung_anpassen">Visualisierung anpassen</a></li>
<li><a href="#_bi_regeln_layout_stil_vorgeben">BI-Regeln Layout-Stil vorgeben</a></li>
<li><a href="#_suchfunktion">Suchfunktion</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#config3">6. Konfiguration Teil 3: Variablen, Schablonen, Suche</a><ul class="sectlevel1">
<li><a href="#_konfiguration_mit_mehr_intelligenz">6.1. Konfiguration mit mehr Intelligenz</a></li>
<li>
<a href="#_parameter">6.2. Parameter</a><ul class="sectlevel2"><li><a href="#_pr%C3%A4fix_match_ist_f%C3%BCr_servicenamen_default">Präfix-Match ist für Servicenamen Default</a></li></ul>
</li>
<li><a href="#_regul%C3%A4re_ausdr%C3%BCcke_fehlende_objekte">6.3. Reguläre Ausdrücke, fehlende Objekte</a></li>
<li>
<a href="#_knoten_als_ergebnis_einer_suche_anlegen">6.4. Knoten als Ergebnis einer Suche anlegen</a><ul class="sectlevel2">
<li><a href="#_unterste_regel_mystery_server_x">Unterste Regel: Mystery Server X</a></li>
<li><a href="#_mittlere_regel_mystery_servers">Mittlere Regel: Mystery Servers</a></li>
<li><a href="#_oberste_regel">Oberste Regel</a></li>
</ul>
</li>
<li><a href="#_knoten_mit_servicesuche_anlegen">6.5. Knoten mit Servicesuche anlegen</a></li>
<li><a href="#_alle_%C3%BCbrigen_services">6.6. Alle übrigen Services</a></li>
</ul>
</li>
<li><a href="#hostaggr">7. Die vordefinierte Hostaggregation</a></li>
<li>
<a href="#permissions">8. Berechtigungen und Sichtbarkeit</a><ul class="sectlevel1">
<li><a href="#_berechtigungen_zum_editieren">8.1. Berechtigungen zum Editieren</a></li>
<li><a href="#_berechtigungen_auf_hosts_und_services">8.2. Berechtigungen auf Hosts und Services</a></li>
</ul>
</li>
<li>
<a href="#operating">9. BI im Operating Teil 3: Wartungszeiten, Quittierung</a><ul class="sectlevel1">
<li><a href="#_die_generelle_idee">9.1. Die generelle Idee</a></li>
<li><a href="#_kommando_wartungszeit">9.2. Kommando Wartungszeit</a></li>
<li><a href="#_tuningm%C3%B6glichkeiten">9.3. Tuningmöglichkeiten</a></li>
<li><a href="#_quittierungen">9.4. Quittierungen</a></li>
</ul>
</li>
<li><a href="#availability">10. Verfügbarkeit</a></li>
<li><a href="#_bi_im_verteilten_monitoring">11. BI im verteilten Monitoring</a></li>
<li>
<a href="#biasservice">12. Benachrichtigungen, BI als Service</a><ul class="sectlevel1">
<li><a href="#_aktive_checks_oder_datenquellenprogramm">12.1. Aktive Checks oder Datenquellenprogramm</a></li>
<li><a href="#_benachrichtigungen_%C3%BCber_datenquellenprogramm">12.2. Benachrichtigungen über Datenquellenprogramm</a></li>
<li><a href="#_benachrichtigungen_%C3%BCber_einen_aktiven_check">12.3. Benachrichtigungen über einen aktiven Check</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
