<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Egal, ob Open Source, Free Edition oder Enterprise Editions: Checkmk zu aktualisieren ist so einfach, wie möglich. Die Prinzipien dazu werden hier erklärt.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Updates und Upgrades">
<meta name="og:description" content="Egal, ob Open Source, Free Edition oder Enterprise Editions: Checkmk zu aktualisieren ist so einfach, wie möglich. Die Prinzipien dazu werden hier erklärt.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Updates und Upgrades</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.1.0/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.1.0/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.1.0/en/update.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.1.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.2.0/de/update.html">2.2.0</a><a class="dropdown-item" href="../../latest/de/update.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und CentOS</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.1.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Host- und Serviceparameter</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Einführung in die Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMWare ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
<li>
<p><a href="managed.html">Die Managed Services Edition</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Konfiguration via Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
<li>
<p><a href="web_api.html">Konfiguration via HTTP-API</a></p>
</li>
<li>
<p><a href="web_api_references.html">Befehlsreferenz der HTTP-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_check_plugins.html">Eigene Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Updates und Upgrades</h1>
<div class="details">
<span id="revdate">Last modified on 19-May-2022</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.1.0/de/update.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="cmk_versions.html">Checkmk-Versionen</a>
<a href="cmc.html">Der Checkmk Micro Core</a>
<a href="cmc_migration.html">Migration auf den CMC</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__einleitung">
<span class="hidden-anchor sr-only" id="_einleitung"></span>1. Einleitung</h2>
<div class="sectionbody">
<div class="paragraph"><p>Das Update von Checkmk auf eine neue Version läuft etwas anders
als bei anderer Software. Warum?</p></div>
<div class="paragraph"><p>Grund ist, dass Checkmk nicht nur mehrere unabhängige <strong>Instanzen</strong>
(<em>sites</em>) auf einem Server erlaubt, sondern auch mehrere gleichzeitig
installierte <a href="cmk_versions.html">Software-Versionen.</a> Dabei ist jede Instanz
einer installierten Version zugeordnet. Nehmen Sie als Beispiel folgende
Situation auf einem fiktiven Server:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update1.png" alt="update1" width="400"></div></div>
<div class="paragraph"><p>Hier verwendet die Instanz <code>mysite1</code> die Version <code>2.0.0p3.cee</code>,
die Instanzen <code>mysite2</code> und <code>mysite3</code> die
Version <code>2.0.0p1.cre</code>. Die Checkmk-Version <code>2.0.0p1.cfe</code> ist
zwar installiert, wird aber aktuell nicht verwendet.</p></div>
<div class="paragraph"><p>Dieses Beispiel macht klar, dass ein Update nicht einfach nur die Installation
eines neuen RPM/DEB-Pakets von Checkmk auf dem Server bedeuten kann. Vielmehr
braucht es dazu noch einen weiteren Schritt. Nehmen Sie nun als Beispiel folgende
Situation:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update2.png" alt="update2" width="400"></div></div>
<div class="paragraph"><p>Hier soll die Instanz <code>mysite</code> auf die Checkmk-Version
<code>2.0.0p3.cee</code> aktualisiert werden. Der erste Schritt ist das
Herunterladen und Installieren des passenden RPM/DEB-Pakets. Dies geschieht
genauso wie bei der <a href="install_packages.html">ersten Installation.</a> Die neu installierte
Version wird zunächst noch von keiner Instanz verwendet und das sieht dann so
aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update3.png" alt="update3" width="400"></div></div>
<div class="paragraph"><p>Als zweiter Schritt erfolgt nun ein Update der Instanz von <code>2.0.0p1.cre</code>
auf <code>2.0.0p3.cee</code>. Dies geschieht durch den Befehl <code>omd update</code>,
welchen Sie weiter unten im Detail kennenlernen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update4.png" alt="update4" width="400"></div></div>
<div class="paragraph"><p>Nach dem Update können Sie die (eventuell) nicht mehr benötigte Version
<code>2.0.0p1.cre</code> durch das Deinstallieren des entsprechenden Pakets
entfernen.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_before_update">
<span class="hidden-anchor sr-only" id="before_update"></span>2. Vor dem Update</h2>
<div class="sectionbody">
<div class="paragraph"><p>Falls Sie ein Update der Checkmk-Version <span class="new">2.0.0</span> auf <span class="new">2.1.0</span> planen, sollten Sie zuerst den Artikel <a href="update_major.html">Update auf Version 2.1.0</a> lesen, in dem wir die wichtigsten Themen zusammengetragen haben, die Sie vor und nach einem solchen Update beachten sollten.</p></div>
<div class="paragraph"><p>Aber auch, wenn Sie bereits eine <span class="new">2.1.0</span>-Version installiert haben und auf eine neue stabile Patch-Version der <span class="new">2.1.0</span> updaten wollen, können die in den folgenden Abschnitten beschriebenen Themen relevant sein.</p></div>
<div class="sect2">
<h3 id="heading_update_major_version">
<span class="hidden-anchor sr-only" id="update_major_version"></span>2.1. Update auf Major-Version</h3>
<div class="paragraph"><p>Bei einem Update auf eine Major-Version sollten Sie immer direkt auf die nächste Version aktualisieren und nicht einfach welche überspringen.
Wenn Sie also beispielsweise von <span class="new">1.6.0</span> auf <span class="new">2.1.0</span> aktualisieren wollen, aktualisieren Sie zunächst auf die <span class="new">2.0.0</span>.
Der Grund ist simpel: Zwischen zwei Major-Versionen gibt es bisweilen schlicht so viele Änderungen, dass es beim Überspringen zu Problemen kommen kann.
Diese Empfehlung setzt <code>omd update</code> durch eine Sperre um und gibt gegebenenfalls eine entsprechende Warnmeldung aus.
Dennoch können Sie ein solches Updates durchführen, indem Sie den Vorgang mit der Option <code>-f</code> erzwingen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>omd<span class="tok-w"> </span>-f<span class="tok-w"> </span>update</code></pre></div></div>
<div class="paragraph"><p><strong>Achtung:</strong> Auf diese Weise aktualisierte Instanzen werden von uns nicht mehr unterstützt!</p></div>
<div class="paragraph"><p>Der Befehl <code>omd update</code> ermöglicht auch die Aktualisierung auf eine <em>niedrigere</em> Version.
Nach einem solchen Update in die Rückwärtsrichtung sind allerdings viele Anpassungen nötig, um Konfiguration und Laufzeitumgebung wieder kompatibel zu machen — insbesondere, aber nicht nur, bei einem Update auf eine niedrigere Major-Version.
Daher raten wir von diesem Vorgehen ab — und können auch bei einem Update auf eine niedrigere Version keinen Support mehr bieten.</p></div>
</div>
<div class="sect2">
<h3 id="heading_local_files">
<span class="hidden-anchor sr-only" id="local_files"></span>2.2. Lokale Dateien</h3>
<div class="paragraph"><p>Mit lokalen Dateien können Sie die von Checkmk bereitgestellte Funktionalität anpassen und erweitern.
Diese Dateien befinden sich im lokalen Teil der Instanzverzeichnisstruktur, d. h. in <code>~/local</code>.
Lokale Dateien können bei einem Update Probleme bereiten, da sie eventuell nicht mehr zur neuen Checkmk-Version passen.</p></div>
<div class="paragraph"><p>Da es für Checkmk bei einem Update nicht möglich ist, die lokalen Anpassungen und jede von einem Drittanbieter hergestellte Erweiterung abzufangen und zu behandeln, sollten Sie Ihre Checkmk-Instanz vor einem Update daraufhin überprüfen, ob lokale Dateien bei Ihnen verwendet werden und gegebenenfalls welche.</p></div>
<div class="paragraph"><p>Verschaffen Sie sich einen Überblick über die lokalen Dateien Ihrer Checkmk-Instanz, indem Sie als Instanzbenutzer das folgende Kommando ausführen (bei dem die Option <code>-L</code> dafür sorgt, dass auch symbolischen Links gefolgt wird):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>find<span class="tok-w"> </span>-L<span class="tok-w"> </span>~/local<span class="tok-w"> </span>-type<span class="tok-w"> </span>f</code></pre></div></div>
<div class="paragraph"><p>In einer frischen Installation von Checkmk wird Ihnen derzeit nur eine Datei namens <code>README.TXT</code> aufgelistet.
Alles, was darüber hinaus angezeigt wird, sollte ganz oben auf Ihrer Liste zur Fehlerdiagnose stehen, falls es beim Update Probleme gibt.</p></div>
</div>
<div class="sect2">
<h3 id="heading_incompatible_mkps">
<span class="hidden-anchor sr-only" id="incompatible_mkps"></span>2.3. Inkompatible und obsolete MKPs</h3>
<div class="paragraph"><p>Über die Checkmk Erweiterungspakete (MKPs) lässt sich Ihr Monitoring-System recht einfach und bequem erweitern.
Auf der einen Seite kommt es dabei vor, dass solche MKPs nicht weiter gepflegt werden und dann ggf. mit neuen Versionen von Checkmk nicht mehr kompatibel sind.
Auf der anderen Seite nehmen wir immer wieder neue Plugins und Funktionserweiterungen in Checkmk auf, weshalb MKPs mitunter obsolet werden.
Ihre Funktionalität wird schlicht von Checkmk selbst sichergestellt.</p></div>
<div class="paragraph"><p>Falls Sie MKPs installiert haben, ist aus diesem Grund eine Prüfung dieser MKPs dringend geboten.
So verhindern Sie, dass inkompatible Pakete das Update behindern oder im Anschluss an das Update doppelte oder zumindest sehr ähnliche Services entstehen.</p></div>
<div class="paragraph"><p>Prüfen Sie hierzu Ihre installierten MKPs gegen unseren <a href="https://checkmk.com/de/integrations">Katalog der Check-Plugins</a> und entfernen Sie Pakete, welche inzwischen nativ von Checkmk bereitgestellt werden.
Bei dieser Gelegenheit können Sie auch MKPs entfernen, die eventuell nur mal für einen Probelauf installiert worden sind.
Eine Auflistung finden Sie im <span class="guihint">Setup</span>-Menü unter <span class="guihint">Maintenance &gt; Extension packages</span>.
Auf der Kommandozeile können Sie sich installierte Erweiterungen und auch unpaketierte Dateien mit den folgenden Befehlen anzeigen lassen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list
<span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>find</code></pre></div></div>
<div class="paragraph"><p>Überprüfen Sie die Ausgaben dieser Befehle auf Erweiterungen und Dateien, die nicht mehr benötigt werden oder die Sie gar nicht mehr zuordnen können.
Um deren Einfluss auf das Update zu prüfen, können Sie Kopien dieser Erweiterungen und Dateien anlegen und zumindest vorübergehend aus Ihrer Checkmk-Instanz entfernen.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_detailed">
<span class="hidden-anchor sr-only" id="detailed"></span>3. Update von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__installation_neuer_versionen">
<span class="hidden-anchor sr-only" id="_installation_neuer_versionen"></span>3.1. Installation neuer Versionen</h3>
<div class="paragraph"><p>Wie in der Einleitung beschrieben, ist der erste Schritt beim Update die
<a href="install_packages.html">Installation</a> der gewünschten neuen <a href="cmk_versions.html">Version</a>
von Checkmk. Dies erfolgt genau wie bei der ersten Installation  —  allerdings
wird es wohl etwas schneller gehen, weil die meisten abhängigen Pakete jetzt
schon installiert sind. In folgendem Beispiel installieren wir das Paket für
Ubuntu 20.04 (Focal Fossa):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>apt<span class="tok-w"> </span>install<span class="tok-w"> </span>/tmp/check-mk-enterprise-2.1.0p1_0.focal_amd64.deb</code></pre></div></div>
<div class="paragraph"><p><strong>Hinweis:</strong> Wenn Sie ein lokal vorliegendes Paket mit <code>apt install</code> installieren, müssen Sie den vollständigen Pfad zu der .deb-Datei angeben.</p></div>
<div class="paragraph"><p>Die Liste der installierten Checkmk-Versionen können Sie jederzeit mit
dem Befehl <code>omd versions</code> abrufen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>versions
<span class="tok-go">1.6.0p22.cre</span>
<span class="tok-go">2.0.0p2.cre</span>
<span class="tok-go">2.1.0p1.cee (default)</span></code></pre></div></div>
<div class="paragraph"><p>Eine dieser Versionen ist mit <code>(default)</code> markiert. Diese
Defaultversion wird automatisch beim Anlegen von neuen Instanzen
verwendet, sofern Sie nicht mit <code>omd -V myversion create mysite</code> eine
andere angeben. Die
aktuelle Defaultversion können Sie mit <code>omd version</code> abfragen und
mit <code>omd setversion</code> ändern:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>version
<span class="tok-go">OMD - Open Monitoring Distribution Version 2.0.0p3.cee</span>
<span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>setversion<span class="tok-w"> </span><span class="tok-m">2</span>.1.0p1.cre
<span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>version
<span class="tok-go">OMD - Open Monitoring Distribution Version 2.1.0p1.cre</span></code></pre></div></div>
<div class="paragraph"><p>Beim Verwalten <em>bestehender</em> Instanzen spielt die Defaultversion
keine Rolle. Der <code>omd</code>-Befehl startet immer mit der Version, die zur Instanz passt, für die der Befehl aufgerufen wird.</p></div>
<div class="paragraph"><p>Eine Auflistung der aktuellen Instanzen und welche Versionen diese verwenden
liefert der Befehl <code>omd sites</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>sites
<span class="tok-go">SITE             VERSION          COMMENTS</span>
<span class="tok-go">mysite           1.6.0p22.cre</span>
<span class="tok-go">test             2.1.0p1.cee      default version</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_execute">
<span class="hidden-anchor sr-only" id="execute"></span>3.2. Durchführen des Updates</h3>
<div class="paragraph"><p>Nachdem die gewünschte neue Version installiert ist, können Sie das
Update der Instanz durchführen. Dazu sind keine <code>root</code>-Rechte
erforderlich. Machen Sie das Update am besten als Instanzbenutzer:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>su<span class="tok-w"> </span>mysite</code></pre></div></div>
<div class="paragraph"><p>Stellen Sie sicher, dass die Instanz gestoppt ist:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>omd<span class="tok-w"> </span>stop</code></pre></div></div>
<div class="paragraph"><p>Das Updaten — also eigentlich das Umschalten auf eine andere Version — geschieht nun einfach
mit dem Befehl <code>omd update</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>omd<span class="tok-w"> </span>update</code></pre></div></div>
<div class="paragraph"><p>Falls es mehr als eine mögliche Zielversion gibt, bekommen Sie diese zur Auswahl:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_omd-update-2.png" alt="update omd update 2" width="55%"></div></div>
<div class="paragraph"><p>Bestätigen Sie in der folgenden Dialogbox das gewählte Update auf die neue Version:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_omd-update-3.png" alt="update omd update 3" width="55%"></div></div>
<div class="paragraph"><p>Beim Update von einer Raw Edition auf eine der <span class="image-inline"><img src="../images/CEE.svg" alt="CEE" width="20" title="Checkmk Enterprise Editions"></span> <strong>Checkmk Enterprise Editions</strong> werden Sie sicherheitshalber noch
einmal auf diesen Umstand hingewiesen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_raw_to_enterprise.png" alt="update raw to enterprise" width="55%"></div></div>
<div class="paragraph"><p>Ein wichtiger Teil des Updates ist das Aktualisieren von
mitausgelieferten Konfigurationsdateien. Dabei werden von
Ihnen eventuell vorgenommene Änderungen in diesen Dateien nicht einfach
verworfen, sondern zusammengeführt. Dies funktioniert sehr ähnlich zu
Versionskontrollsystemen, die versuchen, gleichzeitige Änderungen mehrerer
Entwickler in der gleichen Datei automatisch zusammenzuführen.</p></div>
<div class="paragraph"><p>Manchmal — wenn die Änderungen die gleiche Stelle der Datei betreffen — funktioniert das nicht und es kommt zu einem <em>Konflikt</em>. Wie Sie diesen
lösen können, zeigen wir <a href="#conflicts">weiter unten.</a></p></div>
<div class="paragraph"><p>Das Update zeigt eine Liste aller angepassten Dateien und Verzeichnisse (im folgenden Beispiel gekürzt):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">2022-05-16 16:49:42 - Updating site 'mysite' from version 2.0.0p23.cee to 2.1.0p1.cee...</span>

<span class="tok-go"> * Identical new  etc/omd</span>
<span class="tok-go"> * Installed file etc/mk-livestatus/livestatus.socket</span>
<span class="tok-go"> * Updated        etc/mk-livestatus/nagios.cfg</span>
<span class="tok-go">...</span>
<span class="tok-go"> * Vanished       etc/jmx4perl/config/websphere</span>
<span class="tok-go"> * Vanished       etc/jmx4perl/config</span>
<span class="tok-go">Creating temporary filesystem /omd/sites/mysite_update/tmp...OK</span>
<span class="tok-go">Executing update-pre-hooks script "01_mkp-disable-outdated"...OK</span>
<span class="tok-go">Executing update-pre-hooks script "02_cmk-update-config"...</span>
<span class="tok-go">-| Initializing application...</span>
<span class="tok-go">-| Updating Checkmk configuration...</span>
<span class="tok-go">-| ATTENTION: Some steps may take a long time depending on your installation, e.g. during major upgrades.</span>
<span class="tok-go">-|  1/24 Rewriting password store...</span>
<span class="tok-go">-|  2/24 Migrate Visuals context...</span>
<span class="tok-go">...</span>
<span class="tok-go">-|  24/24 Rewriting InfluxDB connections...</span>
<span class="tok-go">-| Done</span>
<span class="tok-go">OK</span>
<span class="tok-go">Updating core configuration...</span>
<span class="tok-go">Generating configuration for core (type cmc)...</span>
<span class="tok-go">Starting full compilation for all hosts Creating global helper config...OK</span>
<span class="tok-go"> Creating cmc protobuf configuration...OK</span>
<span class="tok-go">Finished update.</span></code></pre></div></div>
<div class="paragraph"><p>Wenn alles erfolgreich durchgelaufen ist, ist die Instanz auf die neue Version
umgeschaltet:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>omd<span class="tok-w"> </span>version
<span class="tok-go">OMD - Open Monitoring Distribution Version 2.1.0p1.cee</span></code></pre></div></div>
<div class="paragraph"><p>… und kann gestartet werden:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>omd<span class="tok-w"> </span>start</code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_incompatible">
<span class="hidden-anchor sr-only" id="incompatible"></span>3.3. Inkompatible Änderungen</h3>
<div class="paragraph"><p>Software-Entwicklung bedeutet Änderung. Und da wir immer daran arbeiten,
Checkmk modern zu halten, kommen wir manchmal nicht drumherum, alte Zöpfe
abzuschneiden und Änderungen zu machen, die <em>inkompatibel</em> sind. Das
bedeutet, dass Sie nach einem Update <em>eventuell</em> Ihre Konfiguration
anpassen oder wenigstens überprüfen sollten.</p></div>
<div class="paragraph"><p>Ein typisches Beispiel dafür sind neue Check-Plugins, die bestehende
Plugins ersetzen. Falls Sie eines der betroffenen Plugins einsetzen, ist nach
dem Update eine erneute <a href="wato_services.html">Serviceerkennung</a> auf den betroffenen
Hosts notwendig.</p></div>
<div class="paragraph"><p>Eine Übersicht über alle Änderungen in Checkmk inklusive einer Suchfunktion
finden Sie online in unseren
<a href="https://checkmk.com/de/werks">Werks</a>.</p></div>
<div class="paragraph"><p>Noch praktischer ist aber die in Checkmk eingebaute Funktion zur Recherche
in den Release Notes. Nachdem Sie sich an der Instanz angemeldet haben, finden Sie im <span class="guihint">Help</span>-Menü den rot hinterlegten Link:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_help_menu_incompatible_werks.png" alt="update help menu incompatible werks" width="65%"></div></div>
<div class="paragraph"><p>Checkmk verfolgt die beim Update von der ursprünglichen zur aktuellen Version angefallenen inkompatiblen Änderungen und fordert Sie auf, diese zu überprüfen und dann zu bestätigen (<em>acknowledge</em>):</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_incomp_werks.png" alt="update incomp werks"></div></div>
<div class="paragraph"><p>Sie können jedes „Werk“ einzeln aufrufen, ansehen, per Mausklick bestätigen — und damit die Zahl der offenen inkompatiblen Änderungen sukzessive verringern. Zusätzlich können Sie mit dem <span class="guihint">Filter</span>-Knopf die Filterleiste einblenden und haben so Zugriff auf die komplette Historie der Änderungen.</p></div>
</div>
<div class="sect2">
<h3 id="heading__das_update_im_detail">
<span class="hidden-anchor sr-only" id="_das_update_im_detail"></span>3.4. Das Update im Detail</h3>
<div class="paragraph"><p>Sind Sie neugierig, was beim Update genau „unter der Haube abläuft“? Oder
haben Sie beim Durchlauf von <code>omd update</code> Konflikte in Dateien bekommen?
Dann sollten Sie hier weiterlesen.</p></div>
<div class="paragraph"><p>Bei <code>omd update</code> geschehen drei Dinge:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Aktualisieren von Vorgabedateien unter <code>etc/</code> und <code>var/</code>, also solchen Dateien, die bei <code>omd create</code> erzeugt wurden</p></li>
<li><p>Umschalten der Version auf die Zielversion durch Ändern des symbolischen Links <code>version</code>, welcher sich im Instanzverzeichnis befindet</p></li>
<li><p>Nachbearbeitungen durch verschiedene Pakete (z.B. Checkmk). Insbesondere werden automatisch die <a href="wato.html#activate_changes">Änderungen aktiviert</a>, um eine valide Konfiguration für den Kern zu erzeugen.</p></li>
</ol></div>
<div class="sect3">
<h4 id="heading__aktualisieren_von_dateien_zusammenführen_von_änderungen">
<span class="hidden-anchor sr-only" id="_aktualisieren_von_dateien_zusammenführen_von_änderungen"></span>Aktualisieren von Dateien, Zusammenführen von Änderungen</h4>
<div class="paragraph"><p>Der erste Schritt ist der bei weitem umfangreichste. Hier zeigt sich ein
großer Vorteil von Checkmk gegenüber klassischen Software-Installationen:
Checkmk hilft Ihnen, alle Standard-Konfigurationsdateien an die Erfordernisse
der neuen Version anzupassen. Dies ähnelt dem Vorgang beim Update einer
Linux-Distribution, geht aber in der Umsetzung darüber hinaus.
So behandelt Checkmk eine Vielzahl von Fällen, zum Beispiel:</p></div>
<div class="ulist"><ul>
<li><p>Zusammenführen von Dateiänderungen mit lokalen Änderungen des Benutzers</p></li>
<li><p>Dateien, Verzeichnisse und symbolische Links, die in der neuen Version obsolet sind oder vom Benutzer gelöscht wurden</p></li>
<li><p>Änderungen an den Berechtigungen</p></li>
<li><p>Änderungen des Dateityps (aus Verzeichnis oder Datei wird symbolischer Link oder umgekehrt)</p></li>
<li><p>Änderungen des Ziels von symbolischen Links</p></li>
</ul></div>
<div class="paragraph"><p>Dabei achtet Checkmk stets darauf, dass Ihre lokalen Änderungen erhalten bleiben,
gleichzeitig aber alle für die neue Version notwendigen Änderungen
umgesetzt werden.</p></div>
</div>
<div class="sect3">
<h4 id="heading_conflicts">
<span class="hidden-anchor sr-only" id="conflicts"></span>Zusammenführen und Konflikte</h4>
<div class="paragraph"><p>Falls die neue Version eine Änderung an einer Konfigurationsdatei vorsieht,
an der Sie inzwischen selbst Änderungen vorgenommen haben, versucht Checkmk,
beide Änderungen automatisch zusammenzuführen (<em>merge</em>). Dies geschieht
mit den gleichen Methoden, die auch Versionskontrollsysteme verwenden.</p></div>
<div class="paragraph"><p>Am wenigsten Probleme gibt es immer dann, wenn Ihre und Checkmks Änderungen
räumlich weit genug auseinander liegen (mindestens ein paar Zeilen). Dann
erfolgt die Zusammenführung automatisch und ohne Ihre Hilfe.</p></div>
<div class="paragraph"><p>Wenn zwei Änderungen kollidieren, weil sie die gleiche Stelle der Datei
betreffen, kann und will Checkmk nicht entscheiden, welche der beiden Änderungen
wichtiger ist. In diesem Fall werden Sie als Benutzer eingeschaltet und
können den Konflikt interaktiv auflösen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/omd-update.png" alt="omd update" width="85%"></div></div>
<div class="paragraph"><p>Sie haben nun folgende Möglichkeiten:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 95%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>d</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dies zeigt Ihnen die Unterschiede zwischen der neuen Defaultversion der Datei und Ihrer Version in Form eines "unified diff" (<code>diff -u</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>y</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dies ist ähnlich, zeigt aber ausgehend von der früheren Defaultversion, welche Änderungen Sie an der Datei gemacht haben.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>n</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diese dritte Option schließt quasi das Dreieck und zeigt die Änderungen, welche Checkmk an der Datei vornehmen möchte.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>e</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lösen Sie den Konflikt manuell im Editor auf.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>t</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Drücken Sie <strong>t</strong>, so wird Ihre Originaldatei  —  ohne die bereits erfolgreich zusammengeführten Änderungen  —  in einem Editor geöffnet. Editieren Sie nun die Datei, um eventuellen Konflikten aus dem Weg zu gehen. Nach dem Schließen des Editors probiert Checkmk die Zusammenführung erneut.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>k</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hier entscheiden Sie sich dafür, die Datei so zu übernehmen, wie sie jetzt ist. Die erfolgreich eingebauten Änderungen bleiben. Ansonsten bleibt die Datei so, wie von Ihnen angepasst.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>r</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">So stellen Sie Ihre Datei im Ausgangszustand wieder her und verzichten auf das Update von Checkmk für diese Datei. Möglicherweise notwendige Anpassungen müssen Sie selbst vornehmen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>i</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installieren der neuen Defaultversion der Datei: Ihre Änderungen an der Datei gehen verloren.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>s</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wenn Sie unsicher sind, können Sie mit <strong>s</strong> eine Shell öffnen. Sie befinden sich im Verzeichnis, in der die betroffene Datei liegt, und können sich ein Bild von der Lage machen. Beenden Sie die Shell mit Ctrl+D, um das Update fortzusetzen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>a</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Abbruch des Updates. Die Instanz bleibt auf der alten Version. Die bereits geänderten Dateien bleiben aber geändert! Sie können jederzeit einen neuen Update-Versuch starten.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="heading__weitere_konfliktsituationen">
<span class="hidden-anchor sr-only" id="_weitere_konfliktsituationen"></span>Weitere Konfliktsituationen</h4>
<div class="paragraph"><p>Neben dem inhaltlichen Zusammenführen von Dateien gibt es noch
eine ganze Reihe weiterer Fälle, in denen Checkmk Ihre Entscheidung braucht.
Dies sind teils sehr ungewöhnliche Situationen, die aber trotzdem
korrekte Behandlung brauchen. Checkmk wird Ihnen in diesen Fällen stets
die Auswahl geben, Ihre Version beizubehalten oder die neue Defaultversion
zu übernehmen. Außerdem haben Sie immer die Möglichkeit eines Abbruchs
oder können eine Shell öffnen. Beispiele für solche Fälle sind:</p></div>
<div class="ulist"><ul>
<li><p>Kollidierende Änderungen des Dateityps (z.B. wenn eine Datei durch einen symbolischen Link ersetzt wird)</p></li>
<li><p>Kollidierende Änderungen an den Dateirechten</p></li>
<li><p>Geänderte Dateien, die in der neuen Version entfallen</p></li>
<li><p>Von Ihnen angelegte Dateien, Verzeichnisse oder Links, die mit neuen Dateien/Verzeichnissen/Links kollidieren</p></li>
</ul></div>
</div>
<div class="sect3">
<h4 id="heading__erklärung_der_ausgaben_beim_update">
<span class="hidden-anchor sr-only" id="_erklärung_der_ausgaben_beim_update"></span>Erklärung der Ausgaben beim Update</h4>
<div class="paragraph"><p>Immer wenn der Update-Vorgang automatisch Änderungen an Dateien macht,
gibt er eine Zeile zur Erklärung aus. Dabei gibt es folgende Möglichkeiten
(wenn von Datei die Rede ist, gilt dies analog auch für Links und
Verzeichnisse):</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eine Datei hat sich in der neuen Version geändert. Da Sie keine Änderungen an der Datei gemacht haben, setzt Checkmk einfach die neue Defaultversion der Datei ein.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Merged</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eine Datei hat sich in der neuen Version geändert, während Sie gleichzeitig andere Änderungen an der Datei gemacht haben. Beide konnten konfliktfrei zusammengeführt werden.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eine Datei hat sich in der neuen Version geändert. Gleichzeitig haben Sie die Datei selbst schon in genau der gleichen Art geändert. Checkmk muss nichts unternehmen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Die neue Version bringt eine neue Konfigurationsdatei mit, welche soeben installiert wurde.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identical new</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Die neue Version bringt eine Datei mit, inzwischen haben Sie selbst die gleiche Datei mit dem gleichen Inhalt angelegt.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obsolete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In der neuen Version ist eine Datei (Link, Verzeichnis) weggefallen. Sie haben diese Datei sowieso schon gelöscht. Nichts passiert.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vanished</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auch hier ist eine Datei weggefallen, welche Sie aber weder gelöscht noch verändert haben. Checkmk entfernt diese Datei automatisch.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unwanted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sie haben eine Datei gelöscht, die normalerweise vorhanden ist. Da sich in der neuen Version keine Änderung in der Datei ergeben hat, belässt es Checkmk dabei, dass die Datei fehlt.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Missing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sie haben eine Datei gelöscht, an der sich in der neuen Version Änderungen ergeben haben. Checkmk legt die Datei nicht neu an, warnt Sie aber durch diese Ausgabe.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permissions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk hat die Berechtigungen einer Datei aktualisiert, da in der neuen Version andere Rechte gesetzt sind.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="heading__update_ohne_benutzerinteraktion">
<span class="hidden-anchor sr-only" id="_update_ohne_benutzerinteraktion"></span>3.5. Update ohne Benutzerinteraktion</h3>
<div class="paragraph"><p>Möchten Sie das Software-Update von Checkmk automatisieren? Dann werden Sie vielleicht
erstmal an den interaktiven Rückfragen von <code>omd update</code> gescheitert sein.
Dafür gibt es eine einfache Lösung: Der Befehl kennt nämlich Optionen, die speziell
für den Einsatz in Skripten gedacht sind:</p></div>
<div class="ulist"><ul>
<li><p>Die Option <code>-f</code> oder <code>--force</code> direkt nach <code>omd</code> verhindert alle Fragen vom Typ „Sind Sie sicher…​“.</p></li>
<li><p>Die Option <code>--conflict=</code> direkt nach <code>update</code> setzt das gewünschte Verhalten bei einem Dateikonflikt.</p></li>
</ul></div>
<div class="paragraph"><p>Mögliche Werte für <code>--conflict=</code> sind:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--conflict=keepold</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Behält im Konfliktfall Ihre eigene modifizierte Version der Datei. Eventuell ist Checkmk dann aber nicht lauffähig und ein manuelles Nacharbeiten erforderlich.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--conflict=install</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Installiert im Konfliktfall die neue Standardversion der Datei. Damit gehen lokale Änderungen in der Datei zumindest teilweise verloren.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--conflict=abort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bricht das Update im Konfliktfall ab. Das bedeutet aber <strong>nicht</strong>, dass alles auf den alten Stand zurückgerollt wird. Etliche Konfigurationsdateien sind eventuell schon umgestellt. Als Version ist aber noch die alte Version eingestellt.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--conflict=ask</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dies ist das Standardverhalten, somit ist die Option in dieser Form eigentlich wirkungslos.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Ein Beispiel für den kompletten Befehl für ein automatisches Update der Instanz <code>mysite</code>
auf die Version <code>2.1.0p1.cee</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>stop<span class="tok-w"> </span>mysite<span class="tok-w"> </span><span class="tok-p">;</span><span class="tok-w"> </span>omd<span class="tok-w"> </span>-f<span class="tok-w"> </span>-V<span class="tok-w"> </span><span class="tok-m">2</span>.1.0p1.cee<span class="tok-w"> </span>update<span class="tok-w"> </span>--conflict<span class="tok-o">=</span>install<span class="tok-w"> </span>mysite<span class="tok-w"> </span><span class="tok-o">&amp;&amp;</span><span class="tok-w"> </span>omd<span class="tok-w"> </span>start<span class="tok-w"> </span>mysite</code></pre></div></div>
<div class="paragraph"><p>Durch das <code>&amp;&amp;</code> vor dem <code>omd start</code> wird ein Starten der
Instanz verhindert, falls das <code>omd update</code> mit einem Fehler abbricht.
Ersetzen Sie das <code>&amp;&amp;</code> durch ein Semikolon (<code>;</code>), falls Sie
einen Start auch in diesem Fall unbedingt versuchen wollen.</p></div>
<div class="paragraph"><p>Falls Sie sicher sind, dass Sie nur eine einzige Checkmk-Instanz auf dem Server
haben, können Sie deren Namen zur Verwendung in einem Shellskript einfach
in einer Variable einfangen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>sites<span class="tok-w"> </span>--bare
<span class="tok-go">mysite</span>
<span class="tok-gp">root@linux# SITENAME=$</span><span class="tok-o">(</span>omd<span class="tok-w"> </span>sites<span class="tok-w"> </span>--bare<span class="tok-o">)</span>
<span class="tok-gp">root@linux# echo $</span>SITENAME
<span class="tok-go">mysite</span></code></pre></div></div>
<div class="paragraph"><p>Das ermöglicht Ihnen, obige Zeile vom Namen der Instanz unabhängig zu machen.
Ein kleines Shellskript könnte z.B. so aussehen:</p></div>
<div class="listingblock">
<div class="title">update.sh</div>
<div class="content"><pre class="pygments highlight"><code><span></span>#!/bin/bash
SITE=$(omd sites --bare)
VERSION=2.1.0p1.cee

omd stop $SITE
omd -f -V $VERSION update --conflict=install $SITE  &amp;&amp; omd start $SITE</code></pre></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_updatedocker">
<span class="hidden-anchor sr-only" id="updatedocker"></span>4. Aktualisierung eines Docker-Containers</h2>
<div class="sectionbody">
<div class="paragraph"><p>Der Update-Prozess für eine Checkmk-Instanz im Docker-Container ist sehr einfach.
Es gibt lediglich die folgenden Voraussetzungen:</p></div>
<div class="ulist"><ul>
<li><p>Der Container wird nicht gelöscht, wenn er gestoppt wird. Das heißt, die Option <code>--rm</code> wurde beim Starten nicht benutzt.</p></li>
<li><p>Sie kennen die ID des Datenspeichers (<em>volume</em>) zum Container. Normalerweise sollten Sie beim Start des Containers seinem Speicher eine eindeutige ID gegeben haben. Wenn Sie sich unsicher sind, wie die ID Ihres Volumes ist, können Sie Informationen zum Container namens <code>myContainer</code> mit dem <a href="managing_docker.html#commands">Kommando</a> <code>docker inspect myContainer</code> abrufen.</p></li>
</ul></div>
<div class="paragraph"><p>Wenn Sie der <a href="introduction_docker.html">Installationsanleitung für Checkmk in Docker</a> gefolgt sind, sollten Sie die Voraussetzungen automatisch erfüllt haben.</p></div>
<div class="paragraph"><p>Die Aktualisierung selbst ist in 3 Schritten erledigt:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Stoppen Sie den Container. Wenn der Checkmk-Container <code>myContainer</code> heißt, lautet der Befehl: <code>docker stop myContainer</code>.</p></li>
<li><p>Entfernen Sie den Container. Der Befehl dazu ist: <code>docker rm myContainer</code>.</p></li>
<li><p>Starten Sie einen neuen Container mit dem Befehl <code>docker container run</code> mit der gewünschten Version und binden Sie das bekannte Volume ein. Wenn Ihr Volume <code>myVolume</code> heißt, ist die entsprechende Option <code>-v myVolume:/omd/sites</code>. Alle Optionen des Kommandos finden Sie in der <a href="introduction_docker.html">Installationsanleitung für Checkmk in Docker.</a></p></li>
</ol></div>
<div class="paragraph"><p>Danach wird Checkmk automatisch den Rest erledigen und Ihre Checkmk-Instanz aktualisieren und starten. Sie können sich danach wie gewohnt anmelden.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_updatedemo">
<span class="hidden-anchor sr-only" id="updatedemo"></span>5. Upgrade der Free Edition auf eine Vollversion</h2>
<div class="sectionbody">
<div class="paragraph"><p>Haben Sie Ihre erste Installation von Checkmk mit der <span class="image-inline"><img src="../images/CFE.svg" alt="CFE" width="20" title="Checkmk Enterprise Free Edition"></span> <strong>Checkmk Enterprise Free Edition</strong> gemacht? Sobald Sie
eine Subskription der Standard Edition oder Managed Services Edition haben, können Sie Ihre bestehende Instanz
einfach auf die Vollversion upgraden.</p></div>
<div class="paragraph"><p>Das Vorgehen ist exakt wie beim „normalen“ Update. Der einzige
Unterschied ist, dass Sie von einer Version mit der Endung <code>.cfe</code>
auf eine Version mit der Endung <code>.cee</code> upgraden.  Installieren Sie
einfach das gewünschte Paket der Vollversion und schalten Sie dann die
bestehende Instanz mit <code>omd update</code> auf diese um.</p></div>
<div class="paragraph"><p>Am einfachsten geht das, wenn beide Versionen bis auf das Suffix <code>.cfe</code>
bzw. <code>.cee</code> identisch sind.  Was die Funktionalität betrifft, ist die
Free Edition völlig identisch mit der Vollversion. Daher ergeben sich durch das
Upgrade keinerlei Unterschiede.</p></div>
<div class="paragraph"><p>Ein gleichzeitiger Upgrade mit Wechsel der Version ist aber durchaus
möglich. Dabei gelten die gleichen Grundsätze wie bei einem <a href="#detailed">normalen Update von Checkmk</a>.</p></div>
<div class="sect2">
<h3 id="heading_upgrade">
<span class="hidden-anchor sr-only" id="upgrade"></span>5.1. Upgrade der Checkmk-Appliance</h3>
<div class="paragraph"><p>Auch die Appliance der Free Edition können Sie ohne Datenverlust auf eine Vollversion einer der Enterprise Editions upgraden.
Hierfür müssen Sie die Firmware der Appliance ebenfalls aktualisieren!</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p><a href="appliance_usage.html#cma_webconf_firmware">Aktualisieren Sie zuerst die Firmware</a> der Appliance über deren Web-Oberfläche von der <em>Demoversion</em> der Firmware auf die aktuelle <em>Vollversion</em>.</p></li>
<li><p><a href="appliance_usage.html#manage_cmk">Installieren Sie die Checkmk-Software</a> der Standard Edition oder der Managed Services Edition auf der Appliance.</p></li>
<li><p>Stellen Sie in der <a href="appliance_usage.html#site_management">Instanzverwaltung</a> der Appliance die Instanzen auf die Vollversion um.</p></li>
</ol></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_updateraw">
<span class="hidden-anchor sr-only" id="updateraw"></span>6. Upgrade der Raw Edition auf eine der Enterprise Editions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__einleitung_2">
<span class="hidden-anchor sr-only" id="_einleitung_2"></span>6.1. Einleitung</h3>
<div class="paragraph"><p>Auch ein Upgrade der <span class="image-inline"><img src="../images/CRE.svg" alt="CRE" width="20" title="Checkmk Raw Edition"></span> <strong>Checkmk Raw Edition</strong> auf eine der Enterprise Editions ist möglich.  Auch hier ist das
Vorgehen wie gehabt: Gewünschtes Paket installieren und Instanzen
mit <code>omd update</code> umstellen.</p></div>
<div class="paragraph"><p>Da der Raw Edition etliche Module und Features der Enterprise Editions fehlen, gibt es allerdings nach
der Umstellung ein paar Dinge zu beachten. Der entscheidende Punkt ist, dass
beim Anlegen von <em>neuen</em> Instanzen der Raw Edition bzw. Enterprise Editions <em>unterschiedliche
Standardeinstellungen</em> gesetzt werden.</p></div>
</div>
<div class="sect2">
<h3 id="heading__nagios_vs_cmc">
<span class="hidden-anchor sr-only" id="_nagios_vs_cmc"></span>6.2. Nagios vs. CMC</h3>
<div class="paragraph"><p>Da die Raw Edition nur Nagios als Kern unterstützt, ist dieser bei Instanzen voreingestellt, die mit der Raw Edition erstellt wurden. Diese Einstellung bleibt
beim Upgrade auf die <span class="image-inline"><img src="../images/CSE.svg" alt="CSE" width="20" title="Checkmk Enterprise Standard Edition"></span> <strong>Checkmk Enterprise Standard Edition</strong> erhalten. Das bedeutet, dass Sie nach einem Upgrade
zunächst weiterhin mit Nagios als Kern fahren. Eine Umstellung auf den CMC
erfolgt mit <code>omd config</code> und wird in einem
<a href="cmc_migration.html">eigenen Artikel</a> beschrieben.</p></div>
</div>
<div class="sect2">
<h3 id="heading__rrd_format">
<span class="hidden-anchor sr-only" id="_rrd_format"></span>6.3. RRD-Format</h3>
<div class="paragraph"><p>Die Enterprise Editions unterstützen ein alternatives Format für die Speicherung historischer
Messdaten, welches deutlich weniger Platten-I/O erzeugt. Bei neuen
Enterprise Editions-Instanzen ist dies automatisch voreingestellt. Raw Edition-Instanzen werden auch
hier beim Upgrade nicht automatisch umgestellt. Wie das Umstellen geht,
beschreibt ein eigener <a href="graphing.html#rrdformat">Abschnitt</a> im Artikel über
<a href="graphing.html">Messwerte und Graphen.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading__benachrichtigungs_spooler">
<span class="hidden-anchor sr-only" id="_benachrichtigungs_spooler"></span>6.4. Benachrichtigungs-Spooler</h3>
<div class="paragraph"><p>Die Raw Edition hat keinen Benachrichtigungs-Spooler. Deswegen ist dieser nach dem Umstieg auf
eine der Enterprise Editions ausgeschaltet. Wie dieser eingeschaltet werden kann, erfahren
Sie <a href="distributed_monitoring.html#activatemknotifyd">hier.</a></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__deinstallation_von_checkmk">
<span class="hidden-anchor sr-only" id="_deinstallation_von_checkmk"></span>7. Deinstallation von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__übersicht">
<span class="hidden-anchor sr-only" id="_übersicht"></span>7.1. Übersicht</h3>
<div class="paragraph"><p>Das Deinstallieren von nicht mehr benötigten Checkmk-Versionen geschieht mit
dem Paketmanager des Betriebssystems. Geben Sie hier den Namen des installierten
Pakets an, nicht den Dateinamen der ursprünglichen RPM/DEB-Datei. Wichtig:
Löschen Sie nur solche Checkmk-Versionen, die von keiner Instanz mehr verwendet
werden!</p></div>
<div class="paragraph"><p>Nicht mehr benötigte Checkmk-Instanzen können Sie einfach mit <code>omd rm</code>
entfernen (und dabei alle Daten löschen!):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>rm<span class="tok-w"> </span>mysite</code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading__sles_redhat_centos">
<span class="hidden-anchor sr-only" id="_sles_redhat_centos"></span>7.2. SLES, RedHat, CentOS</h3>
<div class="paragraph"><p>So finden Sie bei RPM-basierten Systemen heraus, welche Checkmk-Pakete
installiert sind:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>rpm<span class="tok-w"> </span>-qa<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>grep<span class="tok-w"> </span>check-mk
<span class="tok-go">check-mk-enterprise-2.1.0p1-el8-38.x86_64</span>
<span class="tok-go">check-mk-raw-2.0.0p2-el8-38.x86_64</span>
<span class="tok-go">check-mk-raw-1.6.0p22-el8-38.x86_64</span></code></pre></div></div>
<div class="paragraph"><p>Das Löschen geschieht mit <code>rpm -e</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>rpm<span class="tok-w"> </span>-e<span class="tok-w"> </span>check-mk-raw-1.6.0p22-el8-38.x86_64</code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading__debian_ubuntu">
<span class="hidden-anchor sr-only" id="_debian_ubuntu"></span>7.3. Debian, Ubuntu</h3>
<div class="paragraph"><p>So finden Sie heraus, welche Pakete installiert sind:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>dpkg<span class="tok-w"> </span>-l<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>grep<span class="tok-w"> </span>check-mk
<span class="tok-go">ii  check-mk-enterprise-2.1.0p1  0.focal  amd64  Checkmk - Best-in-class infrastructure &amp; application monitoring</span>
<span class="tok-go">ii  check-mk-enterprise-2.0.0p3  0.focal  amd64  Checkmk - Best-in-class infrastructure &amp; application monitoring</span>
<span class="tok-go">ii  check-mk-raw-2.0.0p2         0.focal  amd64  Checkmk - Best-in-class infrastructure &amp; application monitoring</span></code></pre></div></div>
<div class="paragraph"><p>Die Deinstallation geschieht mit <code>dpkg --purge</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>dpkg<span class="tok-w"> </span>--purge<span class="tok-w"> </span>check-mk-raw-1.6.0p22
<span class="tok-gp tok-gp-VirtualEnv">(Reading database ... 567850 files and directories currently installed.)</span>
<span class="tok-go">Removing check-mk-raw-1.6.0p22 (0.focal) ...</span>
<span class="tok-go">...</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_diagnose">
<span class="hidden-anchor sr-only" id="diagnose"></span>8. Diagnosemöglichkeiten</h2>
<div class="sectionbody">
<div class="paragraph"><p>Sollte es beim Update von Checkmk mal zu einem Fehler kommen, liegt diesem zumeist eine der folgenden drei Ursachen zugrunde, die bereits in den vorherigen Kapiteln angesprochen wurden:</p></div>
<div class="ulist"><ul>
<li><p>Der durch eine <a href="#incompatible">inkompatible Änderung</a> notwendige manuelle Eingriff wurde nicht vorgenommen.</p></li>
<li><p>Sie haben ein <a href="#incompatible_mkps">inkompatibles Erweiterungspaket (MKP)</a> installiert.</p></li>
<li><p>Es befinden sich inkompatible Skripte in den <a href="#local_files">lokalen Dateien</a> der Instanzverzeichnisstruktur.</p></li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__dateien_und_verzeichnisse">
<span class="hidden-anchor sr-only" id="_dateien_und_verzeichnisse"></span>9. Dateien und Verzeichnisse</h2>
<div class="sectionbody">
<div class="paragraph"><p>Hier finden Sie für diesen Artikel relevante Dateien und Verzeichnisse. Pfade,
die nicht mit einem <code>/</code> beginnen, gelten wie immer ab dem
Home-Verzeichnis der Instanz (<code>/omd/sites/mysite</code>).</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Symbolischer Link auf die Installation der von dieser Instanz verwendeten Checkmk-Version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/omd/versions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In diesem Verzeichnis existiert für jede installierte Checkmk-Version ein Unterverzeichnis. Die Dateien gehören <code>root</code> und werden niemals geändert.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/omd/sites</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In diesem Verzeichnis liegt für jede Instanz deren Home-Verzeichnis mit den Konfigurationsdateien und den variablen Daten. Die Dateien gehören dem Instanzbenutzer und werden durch Konfiguration und Betrieb geändert.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/bin/omd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verwaltungsbefehl für Checkmk-Instanzen. Dies ist ein symbolischer Link in das <code>bin</code>-Verzeichnis der Defaultversion. Sobald auf eine bestimmte Instanz zugegriffen wird, ersetzt sich der <code>omd</code>-Befehl selbst durch denjenigen der passenden Version.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#_einleitung">1. Einleitung</a></li>
<li>
<a href="#before_update">2. Vor dem Update</a><ul class="sectlevel1">
<li><a href="#update_major_version">2.1. Update auf Major-Version</a></li>
<li><a href="#local_files">2.2. Lokale Dateien</a></li>
<li><a href="#incompatible_mkps">2.3. Inkompatible und obsolete MKPs</a></li>
</ul>
</li>
<li>
<a href="#detailed">3. Update von Checkmk</a><ul class="sectlevel1">
<li><a href="#_installation_neuer_versionen">3.1. Installation neuer Versionen</a></li>
<li><a href="#execute">3.2. Durchführen des Updates</a></li>
<li><a href="#incompatible">3.3. Inkompatible Änderungen</a></li>
<li>
<a href="#_das_update_im_detail">3.4. Das Update im Detail</a><ul class="sectlevel2">
<li><a href="#_aktualisieren_von_dateien_zusammenf%C3%BChren_von_%C3%A4nderungen">Aktualisieren von Dateien, Zusammenführen von Änderungen</a></li>
<li><a href="#conflicts">Zusammenführen und Konflikte</a></li>
<li><a href="#_weitere_konfliktsituationen">Weitere Konfliktsituationen</a></li>
<li><a href="#_erkl%C3%A4rung_der_ausgaben_beim_update">Erklärung der Ausgaben beim Update</a></li>
</ul>
</li>
<li><a href="#_update_ohne_benutzerinteraktion">3.5. Update ohne Benutzerinteraktion</a></li>
</ul>
</li>
<li><a href="#updatedocker">4. Aktualisierung eines Docker-Containers</a></li>
<li>
<a href="#updatedemo">5. Upgrade der Free Edition auf eine Vollversion</a><ul class="sectlevel1"><li><a href="#upgrade">5.1. Upgrade der Checkmk-Appliance</a></li></ul>
</li>
<li>
<a href="#updateraw">6. Upgrade der Raw Edition auf eine der Enterprise Editions</a><ul class="sectlevel1">
<li><a href="#_einleitung_2">6.1. Einleitung</a></li>
<li><a href="#_nagios_vs_cmc">6.2. Nagios vs. CMC</a></li>
<li><a href="#_rrd_format">6.3. RRD-Format</a></li>
<li><a href="#_benachrichtigungs_spooler">6.4. Benachrichtigungs-Spooler</a></li>
</ul>
</li>
<li>
<a href="#_deinstallation_von_checkmk">7. Deinstallation von Checkmk</a><ul class="sectlevel1">
<li><a href="#_%C3%BCbersicht">7.1. Übersicht</a></li>
<li><a href="#_sles_redhat_centos">7.2. SLES, RedHat, CentOS</a></li>
<li><a href="#_debian_ubuntu">7.3. Debian, Ubuntu</a></li>
</ul>
</li>
<li><a href="#diagnose">8. Diagnosemöglichkeiten</a></li>
<li><a href="#_dateien_und_verzeichnisse">9. Dateien und Verzeichnisse</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
