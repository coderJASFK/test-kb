<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="Mit dem Legacy-Plugin `mssql.vbs` für Windows überwachen Sie Microsoft SQL Server.">
<meta name="keywords" content="mssql, sql, db, database">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="MSSQL mit dem Legacy-Plugin überwachen">
<meta name="og:description" content="Mit dem Legacy-Plugin `mssql.vbs` für Windows überwachen Sie Microsoft SQL Server.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>MSSQL mit dem Legacy-Plugin überwachen</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/en/monitoring_mssql_legacy.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/monitoring_mssql_legacy.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/de/monitoring_mssql_legacy.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Benachrichtigungen per SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">MSSQL mit dem Legacy-Plugin überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring mit Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Übersicht der API-Ressourcen</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>MSSQL mit dem Legacy-Plugin überwachen</h1>
<div class="details">
<span id="revdate">Last modified on 17-May-2024</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/onprem/de/monitoring_mssql_legacy.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="agent_windows.html">Windows überwachen</a>
<a href="wato_monitoringagents.html">Monitoring-Agenten</a>
<a href="https://checkmk.com/de/integrations" target="_blank">Katalog der Check-Plugins</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_preface">
<span class="hidden-anchor sr-only" id="preface"></span>1. Vorwort</h2>
<div class="sectionbody">
<div class="paragraph"><p>Das alte Plugin (<code>mssql.vbs</code>) für das Monitoring von Microsoft SQL Server wurde ersetzt.
Wenn Ihre Ihre SQL Server-Netzwerkkonfiguration den Zugriff per TCP/IP erlaubt, empfehlen wir das neue Plugin zu verwenden.</p></div>
<div class="paragraph"><p>Wie Sie das neue Plugin einrichten und verwenden, erklären wir im Artikel <a href="monitoring_mssql.html">Microsoft SQL Server überwachen</a></p></div>
<div class="paragraph"><p><code>mssql.vbs</code> wird mit den Version <span class="new">2.4.0</span> von Checkmk entfernt (vgl. <a href="https://checkmk.com/werk/15844">Werk #15844</a>).</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_intro">
<span class="hidden-anchor sr-only" id="intro"></span>2. Einleitung</h2>
<div class="sectionbody">
<div class="paragraph"><p>Checkmk erlaubt Ihnen die umfangreiche Überwachung von Microsoft SQL Server.
Eine vollständige Liste der Überwachungsmöglichkeiten können Sie in unserem <a href="https://checkmk.com/de/integrations?tags=mssql" target="_blank">Katalog der Check-Plugins</a> nachlesen.
Unter anderem kann Checkmk die folgenden Werte überwachen:</p></div>
<div class="ulist"><ul>
<li><p><a href="https://checkmk.com/de/integrations/mssql_availability_groups" target="_blank">MS SQL: Availability Groups</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_instance" target="_blank">MS SQL: General State</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_datafiles" target="_blank">MS SQL: Size of Datafiles</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_connections" target="_blank">MS SQL Database: Connections</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_jobs" target="_blank">MS SQL Database: Jobs</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_databases" target="_blank">MS SQL Database: Properties</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_blocked_sessions" target="_blank">MS SQL Server: Blocked Sessions</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_counters_cache_hits" target="_blank">MS SQL Server: Cache Hit Ratio</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_counters_pageactivity" target="_blank">MS SQL Server: Page Activity</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_counters_locks" target="_blank">MS SQL Tablespaces: Locks per Second</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_tablespaces" target="_blank">MS SQL Tablespaces: Size Information</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations/mssql_counters_transactions" target="_blank">MS SQL Tablespaces: Transactions per Second</a></p></li>
</ul></div>
<div class="paragraph"><p>Um die Datenbanken überwachen zu können, benötigen Sie neben dem Checkmk-Agenten lediglich das Agentenplugin auf dem Datenbank-Server.
Zusätzliche Software wird weder auf dem Checkmk- noch auf dem Datenbank-Server benötigt.</p></div>
<div class="paragraph"><p>Im Folgenden wird die Einrichtung für Windows-Hosts beschrieben.
Weiter unten gehen wir auf die Einrichtung über die <a href="monitoring_mysql.html#bakery">Agentenbäckerei</a> ein.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_setup_monitoring">
<span class="hidden-anchor sr-only" id="setup_monitoring"></span>3. Überwachung einrichten</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__systembenutzer_verwenden">
<span class="hidden-anchor sr-only" id="_systembenutzer_verwenden"></span>3.1. Systembenutzer verwenden</h3>
<div class="paragraph"><p>Wenn Sie den Systembenutzer (<code>NT AUTHORITY\SYSTEM</code>) für das Monitoring verwenden können, achten Sie darauf, dass dieses Konto (<em>login</em>), mindestens Berechtigungen für die folgenden sicherungsfähigen Elemente (<span class="guihint">Securables</span>) benötigt:</p></div>
<div class="ulist"><ul>
<li><p>Verbindung mit beliebiger Datenbank (<span class="guihint">Connect any database</span>)</p></li>
<li><p><span class="guihint">View Server State</span></p></li>
<li><p><span class="guihint">Connect SQL</span></p></li>
</ul></div>
<div class="paragraph"><p>In Abhängigkeit davon, welche Datenbanken Ihrer Instanzen Sie überwachen möchten und je nachdem über welche Server-Rollen und Mappings der Systembenutzer (<code>NT AUTHORITY\SYSTEM</code>) bereits verfügt, kann es notwendig sein, auch die Berechtigung für <span class="guihint">Connect Any Database</span> zu erteilen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_setup_user">
<span class="hidden-anchor sr-only" id="setup_user"></span>3.2. Exkurs: Neuen Benutzer einrichten</h3>
<div class="paragraph"><p>Sollte es unbedingt notwendig sein, dass in Ihrem Unternehmen nicht der Systembenutzer verwendet wird, so müssen Sie in den zu überwachenden Instanzen einen passenden Datenbankbenutzer für das Monitoring anlegen.
Die Grundvoraussetzung in MSSQL ist, dass die <span class="guihint">Server authentication</span> auf <span class="guihint">SQL Server and Windows Authentication mode</span> gestellt ist.
Wenn Sie nicht den Windows-eigenen Systembenutzer verwenden können, dürfte diese Voraussetzung zwar bereits erfüllt sein, sie soll aber auch nicht unerwähnt bleiben.</p></div>
<div class="paragraph"><p>Melden Sie sich nun mit einem Benutzer mit ausreichenden Zugriffsberechtigungen in MSSQL an und erstellen Sie über das Microsoft SQL Server Management Studio einen neuen Datenbankbenutzer:</p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_new_user.png" alt="Auswahl der Option 'New Login...' in MSSQL." width="38%"></div></div>
<div class="paragraph"><p>Dieser neu angelegte Benutzer benötigt die oben genannte Berechtigung.
Gehen Sie in den <span class="guihint">Object Explorer</span>, öffnen Sie <span class="guihint">Security &gt; Logins</span> und dann die Eigenschaften des Kontos (<em>login</em>), welche Sie für das Agentenplugin konfiguriert haben.
Unter <span class="guihint">Securables</span> finden Sie die explizite Berechtigung <span class="guihint">Connect any database,</span> welche Sie erteilen müssen.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_permissions.png" alt="Berechtigung 'Connect any database' erteilen."></div></div>
<div class="paragraph"><p>Alternativ können Sie den Benutzer und die Berechtigungen auch über die Befehlszeile erzeugen.
Im folgenden Beispiel wird das für den Benutzer <code>checkmk</code> erledigt:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mssql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-n">USE</span><span class="tok-w"> </span><span class="tok-n">master</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">CREATE</span><span class="tok-w"> </span><span class="tok-k">USER</span><span class="tok-w"> </span><span class="tok-n">checkmk</span><span class="tok-w"> </span><span class="tok-k">WITH</span><span class="tok-w"> </span><span class="tok-n">PASSWORD</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-s1">'MyPassword123'</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GO</span></code></pre></div></div>
<div class="paragraph"><p>und danach:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mssql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-n">USE</span><span class="tok-w"> </span><span class="tok-n">master</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-k">CONNECT</span><span class="tok-w"> </span><span class="tok-k">ANY</span><span class="tok-w"> </span><span class="tok-k">DATABASE</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-n">checkmk</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GO</span></code></pre></div></div>
<div class="sect3">
<h4 id="heading__konfigurationsdatei_erstellen">
<span class="hidden-anchor sr-only" id="_konfigurationsdatei_erstellen"></span>Konfigurationsdatei erstellen</h4>
<div class="paragraph"><p>Auf dem Windows-Host legen Sie im unten angegebenen Verzeichnis eine Datei <code>mssql.ini</code> an:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\config\mssql.ini</div>
<div class="content"><pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[client]</span>
<span class="tok-na">user</span><span class="tok-o">=</span><span class="tok-s">checkmk</span>
<span class="tok-na">password</span><span class="tok-o">=</span><span class="tok-s">MyPassword123</span></code></pre></div>
</div>
<div class="paragraph"><p>Sollten Sie auf dem Host mehrere MSSQL-Instanzen mit verschiedenen Benutzernamen und Passwörtern betreiben, erstellen Sie einfach pro Instanz eine <code>ini</code>-Datei nach dem Namensschema <code>mssql_instance-ID.ini</code>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__agentenplugin_installieren">
<span class="hidden-anchor sr-only" id="_agentenplugin_installieren"></span>3.3. Agentenplugin installieren</h3>
<div class="paragraph"><p>Der Agent für Windows wird standardmäßig bereits mit einer ganzen Reihe von Plugins ausgeliefert.
Deshalb finden Sie auch das Plugin für die Überwachung von MSSQL nach der Installation des Agenten bereits auf Ihrem Host.
Die Plugin-Datei kopieren Sie für die Verwendung nur noch in das richtige Verzeichnis:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="powershell"><span></span><span class="tok-n">PS</span><span class="tok-p">&gt;</span> <span class="tok-nb">copy </span><span class="tok-s2">"c:\Program Files (x86)\checkmk\service\plugins\mssql.vbs"</span> <span class="tok-n">c</span><span class="tok-p">:\</span><span class="tok-n">ProgramData</span><span class="tok-p">\</span><span class="tok-n">checkmk</span><span class="tok-p">\</span><span class="tok-n">agent</span><span class="tok-p">\</span><span class="tok-n">plugins</span><span class="tok-p">\</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading__services_einrichten">
<span class="hidden-anchor sr-only" id="_services_einrichten"></span>3.4. Services einrichten</h3>
<div class="paragraph"><p>Nachdem Sie das Plugin nun installiert und konfiguriert haben, können Sie für diesen Host eine <a href="glossar.html#service_discovery">Service-Erkennung</a> durchführen.
Der folgende Screenshot zeigt dabei nur eine Auswahl der auffindbaren Services:</p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_discovery.png" alt="Auszug der Service-Erkennung."></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_extended_configuration">
<span class="hidden-anchor sr-only" id="extended_configuration"></span>4. Erweiterte Konfiguration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__asynchrone_ausführung_des_agentenplugins">
<span class="hidden-anchor sr-only" id="_asynchrone_ausführung_des_agentenplugins"></span>4.1. Asynchrone Ausführung des Agentenplugins</h3>
<div class="paragraph"><p>Das Plugin für die Überwachung von MSSQL kann - wie so viele andere - asynchron ausgeführt werden, um beispielsweise längeren Laufzeiten bei großen MSSQL-Instanzen Rechnung zu tragen.</p></div>
<div class="paragraph"><p>Um das Plugin unter Windows asynchron auszuführen, passen Sie die Konfiguration des Agenten an und erweitern die Sektion <code>execution</code> unter <code>plugins</code> um den folgenden Eintrag:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\check_mk.user.yml</div>
<div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-nt">plugins</span><span class="tok-p">:</span>
<span class="tok-w">    </span><span class="tok-nt">execution</span><span class="tok-p">:</span>
<span class="tok-w">        </span><span class="tok-p tok-p-Indicator">-</span><span class="tok-w"> </span><span class="tok-nt">pattern</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">mssql.vbs</span>
<span class="tok-w">          </span><span class="tok-nt">cache_age</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">300</span>
<span class="tok-w">          </span><span class="tok-nt">async</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">yes</span></code></pre></div>
</div>
<div class="paragraph"><p>Eine detaillierte Anleitung zur asynchronen Ausführung von Plugins auf einem Windows-Host finden Sie im Artikel über den <a href="agent_windows.html#customizeexecution">Windows-Agenten.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading__schwellwerte_konfigurieren">
<span class="hidden-anchor sr-only" id="_schwellwerte_konfigurieren"></span>4.2. Schwellwerte konfigurieren</h3>
<div class="sect3">
<h4 id="heading__verbindungen_überwachen">
<span class="hidden-anchor sr-only" id="_verbindungen_überwachen"></span>Verbindungen überwachen</h4>
<div class="paragraph"><p>Für die Auslastung der durch MSSQL vorgegebenen maximalen Anzahl an gleichzeitigen Verbindungen können Sie eigene Schwellwerte vorgeben, da diese viel stärker als bei anderen Services vom Aufbau Ihrer MSSQL-Instanz abhängig sind.
Die Einrichtung entsprechender Schwellwerte lässt sich mit einer Regel aus dem Regelsatz <span class="guihint">MSSQL Connections</span> im Handumdrehen bewerkstelligen.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_connections.png" alt="Einstellung der oberen Schwellwerte für aktive Verbindungen."></div></div>
</div>
<div class="sect3">
<h4 id="heading__dateigröße_überwachen">
<span class="hidden-anchor sr-only" id="_dateigröße_überwachen"></span>Dateigröße überwachen</h4>
<div class="paragraph"><p>Auch für die Größe einzelner Dateien in MSSQL können Sie Schwellwerte festlegen.
Dazu verwenden Sie den Regelsatz <span class="guihint">MSSQL datafile sizes.</span></p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_size_datafile.png" alt="Einstellung der genutzten Dateigrößen."></div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_bakery">
<span class="hidden-anchor sr-only" id="bakery"></span>5. Konfiguration über die Agentenbäckerei</h2>
<div class="sectionbody">
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Die Einrichtung wird in den kommerziellen Editionen mittels der <a href="glossar.html#agent_bakery">Agentenbäckerei</a> sehr vereinfacht,
da Syntaxfehler in den Konfigurationsdateien vermieden werden und Anpassungen an sich verändernde Umgebungen einfach bewerkstelligt werden können.
Der wesentliche Unterschied zu einer manuellen Installation ist, dass Sie nur noch dann auf dem MSSQL-Host auf der Kommandozeile arbeiten müssen, wenn Sie spezielle MSSQL-spezifische Konfigurationen vornehmen möchten.</p></div>
<div class="paragraph"><p>Für die erste Einrichtung reicht es, wenn Sie den <a href="#setup_user">Datenbankbenutzer auf dem MSSQL-Host einrichten</a> und eine entsprechende Regel in der Agentenbäckerei anlegen.
Sie finden den Regelsatz unter <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX &gt; Agent rules.</span>
In dem Suchfeld können Sie dann nach <code>mssql</code> suchen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_bakery_ruleset_search.png" alt="Die Regel 'Microsoft SQL Server' in den Agentenregeln."></div></div>
<div class="paragraph"><p>Wählen Sie in der neuen Regel im Abschnitt <span class="guihint">Microsoft SQL Server (Windows)</span> idealerweise die Option <span class="guihint">System Authentication</span> für eine einfache und problemlose Anbindung.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_bakery.png" alt="Mögliche Einstellungen für den MSSQL Server in der Agentenbäckerei."></div></div>
<div class="paragraph"><p>Entscheiden Sie sich stattdessen für die Option <span class="guihint">Database User Credentials</span>, so müssen Sie zusätzlich <span class="guihint">User ID</span> und <span class="guihint">Password</span> des gewünschten Datenbanknutzers angeben (z.B. des Benutzers, den Sie <a href="#setup_user">zuvor</a> angelegt haben).</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_diagnostic">
<span class="hidden-anchor sr-only" id="diagnostic"></span>6. Diagnosemöglichkeiten</h2>
<div class="sectionbody">
<div class="paragraph"><p>Sollte es beispielsweise bei der Einrichtung der Überwachung zu unerwartetem Verhalten oder Problemen kommen, so empfiehlt sich eine Prüfung direkt auf einem betroffenen Host.
Da es sich bei dem Plugin für die Überwachung von MSSQL um Shell- bzw. Visual Basic-Skripte handelt, können diese leicht auch ohne den Agenten ausgeführt werden.
Der Shell bzw. der Kommandozeile muss vorher nur das jeweilige Konfigurationsverzeichnis bekannt gemacht werden.</p></div>
<div class="paragraph"><p>Um das Plugin manuell anführen zu können, öffnen Sie zuerst eine Kommandozeile mit Admin-Rechten.
Setzen Sie in dieser Kommandozeile nun die Umgebungsvariable <code>MK_CONFDIR</code>.
Diese wird benötigt, damit das Plugin die Konfigurationsdateien finden kann.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="powershell"><span></span><span class="tok-n">PS</span><span class="tok-p">&gt;</span> <span class="tok-nb">set </span><span class="tok-n">MK_CONFDIR</span><span class="tok-p">=</span><span class="tok-n">c</span><span class="tok-p">:\</span><span class="tok-n">ProgramData</span><span class="tok-p">\</span><span class="tok-n">checkmk</span><span class="tok-p">\</span><span class="tok-n">agent</span><span class="tok-p">\</span><span class="tok-n">config</span></code></pre></div></div>
<div class="paragraph"><p><strong>Hinweis:</strong> Auch hier ist die gesetzte Umgebungsvariable nicht permanent, sondern besteht nur, solange diese Kommandozeile offen ist.</p></div>
<div class="paragraph"><p>Bei der eigentlichen Ausführung des Plugins empfiehlt es sich, die Ausgabe auf die Kommandozeile umzulenken.
Zu diesem Zweck liefert Windows das Bordwerkzeug <code>cscript</code> mit.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="powershell"><span></span><span class="tok-n">PS</span><span class="tok-p">&gt;</span> <span class="tok-n">cscript</span> <span class="tok-n">c</span><span class="tok-p">:\</span><span class="tok-n">ProgramData</span><span class="tok-p">\</span><span class="tok-n">checkmk</span><span class="tok-p">\</span><span class="tok-n">agent</span><span class="tok-p">\</span><span class="tok-n">plugins</span><span class="tok-p">\</span><span class="tok-n">mssql</span><span class="tok-p">.</span><span class="tok-n">vbs</span></code></pre></div></div>
<div class="sect2">
<h3 id="heading__mögliche_fehler_und_fehlermeldungen">
<span class="hidden-anchor sr-only" id="_mögliche_fehler_und_fehlermeldungen"></span>6.1. Mögliche Fehler und Fehlermeldungen</h3>
<div class="sect3">
<h4 id="heading__failed_to_connect_to_database">
<span class="hidden-anchor sr-only" id="_failed_to_connect_to_database"></span>Failed to connect to database</h4>
<div class="paragraph"><p>Es gibt drei verschiedene Treiber mit deren Hilfe Checkmk alternativ versucht sich mit der MSSQL-Datenbank zu verbinden: <code>msoledbsql</code>, <code>sqloledb</code> und <code>sqlncli11</code>.</p></div>
<div class="paragraph"><p>Standardmäßig sind alle drei in der Regel vorhanden und werden beim Verbindungsaufbau nacheinander getestet.
In einzelnen Fällen kann es vorkommen, dass diese sukzessive Abarbeitung zu Fehlermeldungen führt.
Gegebenenfalls müssen Sie dann ein oder sogar zwei der genannten Treiber aus der Syntax des Aufrufs entfernen.</p></div>
</div>
<div class="sect3">
<h4 id="heading__mssql_vbs_no_backup_found">
<span class="hidden-anchor sr-only" id="_mssql_vbs_no_backup_found"></span>mssql.vbs: "no backup found"</h4>
<div class="paragraph"><p>Meldet ein Plugin "no backup found", so sollten Sie als erstes manuell prüfen, ob ein Backup vorhanden ist.
Ist ein Backup vorhanden und das Problem besteht dennoch weiter, so liegt dies möglicherweise an den Namenskonventionen auf der MSSQL-Seite.</p></div>
<div class="paragraph"><p>Checkmk interpretiert Host-Namen grundsätzlich in Kleinbuchstaben, werden diese aber im Rahmen der Backups vom Host beispielsweise in Großbuchstaben übermittelt, so entstehen Verständigungsprobleme.</p></div>
<div class="paragraph"><p>Sie können dann den Wert der <code>serverproperty('collation')</code> auf der MSSQL-Seite prüfen.
Ist hier zum Beispiel <code>SQL_Latin1_General_CP1_CS_AS</code> gesetzt, so steht <code>CS</code> für „Case Sensitive“.
Das Plugin kann den Host-Namen dann nicht anpassen und es kann zu Problemen aufgrund der Schreibweise kommen.
Ein Wechsel auf <code>SQL_Latin1_General_CP1_CI_AS</code>, d.h. auf <code>CI</code> für „Case Insensitive“ sollte das Problem beheben.</p></div>
<div class="paragraph"><p>Alternativ können Sie auch die Schreibweise des ursprünglichen Namens des MSSQL-Servers ändern.
Dies ist nur nicht in jedem Unternehmen und in jeder Umgebung möglich.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_files">
<span class="hidden-anchor sr-only" id="files"></span>7. Dateien und Verzeichnisse</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__auf_dem_mssql_host">
<span class="hidden-anchor sr-only" id="_auf_dem_mssql_host"></span>7.1. Auf dem MSSQL-Host</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 55%;">
<col style="width: 45%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Verwendung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\plugins\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plugin-Verzeichnis</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\config\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsverzeichnis</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="heading__auf_dem_checkmk_server">
<span class="hidden-anchor sr-only" id="_auf_dem_checkmk_server"></span>7.2. Auf dem Checkmk-Server</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 55%;">
<col style="width: 45%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Verwendung</th>
</tr></thead>
<tbody><tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/plugins/mssql</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Das Plugin, welches auf dem MSSQL-Host die Daten holt.</p></td>
</tr></tbody>
</table>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#preface">1. Vorwort</a></li>
<li><a href="#intro">2. Einleitung</a></li>
<li>
<a href="#setup_monitoring">3. Überwachung einrichten</a><ul class="sectlevel1">
<li><a href="#_systembenutzer_verwenden">3.1. Systembenutzer verwenden</a></li>
<li>
<a href="#setup_user">3.2. Exkurs: Neuen Benutzer einrichten</a><ul class="sectlevel2"><li><a href="#_konfigurationsdatei_erstellen">Konfigurationsdatei erstellen</a></li></ul>
</li>
<li><a href="#_agentenplugin_installieren">3.3. Agentenplugin installieren</a></li>
<li><a href="#_services_einrichten">3.4. Services einrichten</a></li>
</ul>
</li>
<li>
<a href="#extended_configuration">4. Erweiterte Konfiguration</a><ul class="sectlevel1">
<li><a href="#_asynchrone_ausf%C3%BChrung_des_agentenplugins">4.1. Asynchrone Ausführung des Agentenplugins</a></li>
<li>
<a href="#_schwellwerte_konfigurieren">4.2. Schwellwerte konfigurieren</a><ul class="sectlevel2">
<li><a href="#_verbindungen_%C3%BCberwachen">Verbindungen überwachen</a></li>
<li><a href="#_dateigr%C3%B6%C3%9Fe_%C3%BCberwachen">Dateigröße überwachen</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#bakery">5. Konfiguration über die Agentenbäckerei</a></li>
<li>
<a href="#diagnostic">6. Diagnosemöglichkeiten</a><ul class="sectlevel1"><li>
<a href="#_m%C3%B6gliche_fehler_und_fehlermeldungen">6.1. Mögliche Fehler und Fehlermeldungen</a><ul class="sectlevel2">
<li><a href="#_failed_to_connect_to_database">Failed to connect to database</a></li>
<li><a href="#_mssql_vbs_no_backup_found">mssql.vbs: "no backup found"</a></li>
</ul>
</li></ul>
</li>
<li>
<a href="#files">7. Dateien und Verzeichnisse</a><ul class="sectlevel1">
<li><a href="#_auf_dem_mssql_host">7.1. Auf dem MSSQL-Host</a></li>
<li><a href="#_auf_dem_checkmk_server">7.2. Auf dem Checkmk-Server</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
