<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="In Checkmk können Sie mit mk_filestats und fileinfo Dateien bezüglich Alter, Größe und Anzahl überwachen, sowohl unter Linux als auch unter Windows.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Dateien überwachen">
<meta name="og:description" content="In Checkmk können Sie mit mk_filestats und fileinfo Dateien bezüglich Alter, Größe und Anzahl überwachen, sowohl unter Linux als auch unter Windows.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Dateien überwachen</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/en/mk_filestats.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/mk_filestats.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/de/mk_filestats.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Benachrichtigungen per SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">MSSQL mit dem Legacy-Plugin überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring mit Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Übersicht der API-Ressourcen</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Dateien überwachen</h1>
<div class="details">
<span id="revdate">Last modified on 18-Nov-2021</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/common/de/mk_filestats.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="wato.html">Die Konfiguration von Checkmk</a>
<a href="wato_services.html">Services verstehen und konfigurieren</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_basics">
<span class="hidden-anchor sr-only" id="basics"></span>1. Grundlagen zur Dateiüberwachung</h2>
<div class="sectionbody">
<div class="paragraph"><p>Mit Checkmk können Sie Dateien bezüglich Anzahl, Größe und Alter überwachen, einzeln oder in Gruppen.
Diese Funktion lässt sich äußerst vielfältig einsetzen.
Beispielsweise lässt sich damit der Erfolg von Backup-Strategien überwachen:
Ist die richtige Anzahl an Archiven vorhanden? Ist keines der Backups älter als X Tage? Ist eines der Backups verdächtig groß oder klein?
Sie können auch unternehmensweite Dateiserver darauf abklopfen, ob Nutzer diese als private Ablage für Filme missbrauchen.
Oder ganz klassisch Auslagerungs- oder flüchtige Dateien wie Container im Auge behalten.</p></div>
<div class="paragraph"><p>Das grundsätzliche Vorgehen entspricht dem Checkmk-Standard:
Im Agenten wird ein Plugin/eine Konfiguration installiert, das die gewünschten Informationen über Dateien oder Dateigruppen ins Monitoring bringt.
Dort wird dann über entsprechende Regelsätze bestimmt, welche Eigenschaften zu welchen Status führen.</p></div>
<div class="paragraph"><p>Die eigentliche Filterung, also welche Daten überhaupt im Monitoring landen, geschieht im Agenten.
Sie können hier über Globbing-Muster beispielsweise Dateien ganzer Verzeichnisse rekursiv einbeziehen oder auch nur bestimmte Dateitypen oder gar einzelne Dateien.
Über Globbing-Muster wie <code>/myfiles/*.*</code> können dabei unter Umständen enorm große Dateilisten entstehen, obwohl Sie vielleicht nur an besonders alten oder großen Dateien interessiert sind.
Diesem Umstand ist es geschuldet, dass es derzeit zwei Agenten- und zugehörige Monitoring-Regelsätze gibt:
Das ältere <em>fileinfo</em> ist bereits im Agenten eingebaut und filtert nur nach Globbing-Muster/Pfad, das neuere <em>mk_filestats</em> muss als Plugin separat installiert werden und filtert nach weiteren Eigenschaften.</p></div>
<div class="paragraph"><p>Es gibt noch weitere Unterschiede zwischen mk_filestats und fileinfo, die wir im Folgenden aufzeigen werden.
Der wichtigste Unterschied:
mk_filestats kann nur Linux-Hosts überwachen, fileinfo hingegen auch Windows-Hosts.
Für Linux-Hosts sollten Sie in der Regel das aktuellere mk_filestats verwenden.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_differences">
<span class="hidden-anchor sr-only" id="differences"></span>2. Unterschiede mk_filestats und fileinfo</h2>
<div class="sectionbody">
<div class="paragraph"><p>Wenn Sie die Regelsätze der beiden Varianten der Übersicht halber nebeneinander sehen wollen, geben Sie einfach im <span class="guihint">Setup</span>-Menü <code>size age</code> ein.
Die Regeln für einzelne Dateien und Gruppen heißen (weitgehend) identisch, die mk_filestats-Regeln sind aber explizit als solche ausgewiesen.
Beide Varianten von Service-Regeln gibt es zusätzlich als <a href="wato_services.html#enforced_services">erzwungene Services.</a></p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_setup_menu.png" alt="Setup-Menü mit mk_filestats- und fileinfo-Einträgen."></div>
<div class="title">fileinfo-Regeln sind nicht explizit gekennzeichnet</div>
</div>
<div class="paragraph"><p>Unterschiede der beiden Varianten gibt es auf Agenten- und Service-Ebene.
Hier zunächst die groben theoretischen Unterschiede.
Die Details sehen Sie dann im Anschluss in den konkreten Anleitungen für das Agentenplugin mk_filestats und für fileinfo des Agenten.</p></div>
<div class="paragraph"><p>Beim Agenten zeichnet sich mk_filestats durch zwei Möglichkeiten aus, die fileinfo fehlen:
mk_filestats bietet zum einen die bereits erwähnten zusätzlichen Filtermöglichkeiten, nämlich nach Dateigröße, -anzahl und -name, letzteres in Form <a href="regexes.html">regulärer Ausdrücke.</a>
So könnten Sie bei einem Globbing-Muster <code>/myfiles/*</code> beispielsweise nur die Dateien ins Monitoring holen, die größer als 1 KB sind und <code>backup</code> irgendwo im Dateinamen haben.
Zum anderen werden bei mk_filestats auch Dateigruppen direkt in der Plugin-Konfiguration festgelegt, ganz einfach, indem mehrere Filter angelegt werden, die dann jeweils als eigene <a href="wato_monitoringagents.html#diagnostics">Sektion</a> in der Agentenausgabe landen und später über die Sektionsnamen von Regeln angesprochen werden können.</p></div>
<div class="paragraph"><p>Bei den <strong>Service-Monitoring-Regeln</strong> unterscheiden sich die Wege von mk_filestats und fileinfo eher im Detail.
Beide können Auswertungen auf bestimmte <a href="timeperiods.html">Zeitperioden</a> beschränken, aber nur fileinfo ermöglicht die explizite Angabe von Zeitfenstern pro Tag direkt in der Regel.
Ebenfalls exklusiv kann fileinfo für Dateigruppen so genannte <span class="guihint">Conjunctions</span> konfigurieren.
Dabei wird für jeden Status eine Reihe von Bedingungen verknüpft, also zum Beispiel:
„Der Status geht auf <span class="state2">CRIT</span>, sobald die älteste Datei der Gruppe genau 5 Stunden alt <strong>und</strong> die kleinste Datei genau 8 Megabyte groß ist.“
Im Gegenzug liefert mk_filestats für Dateigruppen die Option, Ausreißer zu definieren:
Angenommen, eine Dateigruppe soll auf <span class="state2">CRIT</span> gehen, sobald die Gruppengröße 2 Gigabyte übersteigt.
Wenn die Gruppe aber <strong>nicht</strong> auf <span class="state2">CRIT</span> gehen soll, wenn eine bestimmte einzelne Datei allein schon auf über 1 Gigabyte kommt (etwa eine temporäre Datei), so können Sie dies als Sonderfall definieren und die Gruppenregel damit fallweise überschreiben.</p></div>
<div class="paragraph"><p>Die Unterschiede in der Übersicht:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Feature</th>
<th class="tableblock halign-left valign-top">mk_filestats</th>
<th class="tableblock halign-left valign-top">fileinfo</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Überwachte Betriebssysteme</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux und Windows</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Agentenplugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Im Agenten enthalten</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filtert direkt im Agenten nach Globbing-Muster und Eigenschaften</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filtert im Agenten nur nach Globbing-Muster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dateilisten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liefert schlanke Dateilisten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Liefert bisweilen ausschweifende Dateilisten</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dateigruppierung</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gruppiert direkt im Agenten</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gruppiert über einen separaten Monitoring-Regelsatz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anzeige von Dateien</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zeigt optional Dateien in den Service-Details</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zeigt immer Dateien in den Service-Details</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dateiauswertung</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kann Ausreißer bei den Dateien berücksichtigen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kann Zusammenhänge zwischen Dateien berücksichtigen</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>In den folgenden Kapiteln sehen Sie nun die beiden Funktionen einzeln im praktischen Einsatz — dabei sollten die geschilderten Unterschiede und Features deutlich werden.
mk_filestats liefert zudem selbst ausführliche Informationen über den Aufruf <code>filestats.py --help</code>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_mk_filestats">
<span class="hidden-anchor sr-only" id="mk_filestats"></span>3. Dateien überwachen mit mk_filestats (Linux)</h2>
<div class="sectionbody">
<div class="paragraph"><p>Im folgenden Beispiel sehen Sie das Vorgehen für Gruppen von Dateien.
Bei einzelnen Dateien ist das Prozedere identisch, es gibt lediglich weniger Optionen.
Angenommen, Sie möchten eine <strong>Gruppe</strong> von Backup-Dateien (<code>mybackup_01.zip</code> etc.) überwachen, die eine bestimmte Anzahl haben und eine minimale Größe nicht unterschreiten sollen, dann können Sie wie folgt vorgehen:</p></div>
<div class="sect2">
<h3 id="heading_mk_filestats_agent_rule">
<span class="hidden-anchor sr-only" id="mk_filestats_agent_rule"></span>3.1. Regel für das Agentenplugin konfigurieren</h3>
<div class="sect3">
<h4 id="heading__konfiguration_über_agentenbäckerei">
<span class="hidden-anchor sr-only" id="_konfiguration_über_agentenbäckerei"></span>Konfiguration über Agentenbäckerei</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
In den kommerziellen Editionen rufen Sie zunächst die Regel für das Agentenplugin <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX &gt; Agent rules &gt; Count, size and age of files - mk_filestats (Linux)</span> auf.
Unter <span class="guihint">Section name</span> vergeben Sie einen beliebigen Namen, der so später in der Agentenausgabe als eigenständige Sektion erscheint.</p></div>
<div class="paragraph"><p>Unter <span class="guihint">Globbing pattern for input files</span> geben Sie dann an, welche Dateien überwacht werden sollen.
Dabei können Sie Globbing-Muster nutzen, also letztlich Pfadangaben mit Platzhaltern.
Hier soll es bei einer absoluten Pfadangabe bleiben, die alle Dateien im angegebenen Ordner einbezieht.</p></div>
<div class="paragraph"><p>Die weitere Filterung übernehmen hier die nächsten beiden Optionen: <span class="guihint">Filter files by matching regular expression</span> inkludiert Dateien nach angegebenem Muster, hier Dateien mit <code>my</code> irgendwo im Namen.
<span class="guihint">Filter files by not matching regular expression</span> exkludiert dann Dateien, hier solche, die auf <code>tmp</code> enden.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_agent_rule.png" alt="Formular zur Konfiguration des Agentenplugins mk_filestats."></div>
<div class="title">Achten Sie auf die Unterscheidung von Globs und regulären Ausdrücken</div>
</div>
<div class="paragraph"><p>Damit ist die Konfiguration abgeschlossen und Sie können das Plugin samt Konfiguration über die <a href="agent_linux.html#install_plugins_using_bakery">Agentenbäckerei verteilen.</a></p></div>
</div>
<div class="sect3">
<h4 id="heading__manuelle_konfiguration">
<span class="hidden-anchor sr-only" id="_manuelle_konfiguration"></span>Manuelle Konfiguration</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CRE.svg" alt="CRE" class="icon-left"></span>
In <span class="image-inline"><img src="../images/icons/CRE.png" alt="CRE" width="20" title="Checkmk Raw"></span> <strong>Checkmk Raw</strong> konfigurieren Sie das Plugin wie üblich über eine Textdatei:
Eine Beispielkonfiguration finden Sie als Instanzbenutzer in der Datei <code>share/check_mk/agents/cfg_examples/filestats.cfg</code>.
Eine Konfiguration gemäß obiger Vorgaben sieht dann so aus:</p></div>
<div class="listingblock">
<div class="title">/etc/check_mk/filestats.cfg</div>
<div class="content"><pre class="pygments highlight"><code><span></span>[myfiles]
input_patterns: /media/evo/myfiles/
filter_regex: .*my.*
filter_regex_inverse: tmp$</code></pre></div>
</div>
<div class="paragraph"><p>Damit ist die Konfiguration abgeschlossen und Sie können das Agentenplugin <a href="agent_linux.html#manualplugins">manuell installieren.</a></p></div>
</div>
<div class="sect3">
<h4 id="heading__daten_in_der_agentenausgabe">
<span class="hidden-anchor sr-only" id="_daten_in_der_agentenausgabe"></span>Daten in der Agentenausgabe</h4>
<div class="paragraph"><p>Das Ergebnis Ihrer Konfiguration finden Sie dann in Form von Rohdaten in der Agentenausgabe:</p></div>
<div class="listingblock">
<div class="title">mysite-myhost-agent.txt</div>
<div class="content"><pre class="pygments highlight"><code><span></span>&lt;&lt;&lt;filestats:sep(0)&gt;&gt;&gt;
[[[file_stats myfiles]]]
{'type': 'file', 'path': '/media/evo/myfiles/mybackup_01.zip', 'stat_status': 'ok', 'size': 13146562, 'age': 339080, 'mtime': 1633966263}
{'type': 'file', 'path': '/media/evo/myfiles/mybackup_02.zip', 'stat_status': 'ok', 'size': 13145766, 'age': 325141, 'mtime': 1633980202}
{'type': 'file', 'path': '/media/evo/myfiles/mybackup_03.zip', 'stat_status': 'ok', 'size': 13151050, 'age': 325352, 'mtime': 1633979991}
...</code></pre></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="heading_mk_filestats_service_rule">
<span class="hidden-anchor sr-only" id="mk_filestats_service_rule"></span>3.2. Service-Regel konfigurieren</h3>
<div class="paragraph"><p>Über den Agenten stehen dem Monitoring jetzt also die Daten zu den Dateien zur Verfügung.
Zur Auswertung rufen Sie die Regel <span class="guihint">Setup &gt; Services &gt; Service monitoring rules &gt; Size, age and count of file groups (mk_filestats)</span> auf.
In unserem Beispiel soll gewarnt werden, sobald eine bestimmte Anzahl von Dateien über- oder unterschritten wird.
Das erledigen die Optionen <span class="guihint">Minimal file count</span> und <span class="guihint">Maximal file count</span>, über die schlicht Grenzwerte eingetragen werden. Alle anderen Minimal-Maximal-Optionen arbeiten analog.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_service_rule_group_value_1.png" alt="Formular mit Grenzwerten für Dateiüberwachung."></div>
<div class="title">Teil 1/3: <span class="state0">OK</span> sind hier ausschließlich 7 oder 8 Dateien</div>
</div>
<div class="paragraph"><p>Aber welche Datei provoziert dann beispielsweise einen <span class="state2">CRIT</span>-Status?
Dabei hilft die Option <span class="guihint">Show files in service details</span>:
Ist diese aktiviert, sehen Sie alle betroffenen Dateien aufgelistet in der Detailansicht des Services.</p></div>
<div class="imageblock" id="showfiles">
<div class="content"><img src="../images/filestats_service_rule_group_value_2.png" alt="Festlegung zur Anzeige einzelner Dateien in den Service-Details."></div>
<div class="title">Teil 2/3: Die Option sorgt für Transparenz — kann aber auch sehr lange Listen erzeugen</div>
</div>
<div class="paragraph"><p>Nun könnte es sein, dass zwar die richtige Anzahl an Dateien vorhanden ist, es aber beispielsweise Ausreißer bezüglich der Größe gibt.
Für solche Ausnahmen können Sie die Option <span class="guihint">Additional rules for outliers</span> einsetzen:
Hier wird zum Beispiel festgelegt, dass für Dateien unterhalb von 5 Megabyte der Status <span class="state1">WARN</span> gesetzt wird, unter 1 Megabyte geht der Service auf <span class="state2">CRIT</span>.
Nützlich ist das zum Beispiel, um auf defekte Backups aufmerksam zu werden.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_service_rule_group_value_3.png" alt="Festlegung von Ausreißern in den überwachten Dateien."></div>
<div class="title">Teil 3/3: Dateien müssen mindestens 5 MB groß sein, sonst wird gewarnt</div>
</div>
<div class="paragraph"><p>Im Kasten <span class="guihint">Conditions</span> können Sie nun noch bestimmen, dass die Regel ausschließlich für die im Agentenplugin konfigurierte Dateigruppe <code>myfiles</code> gelten soll:
Geben Sie dazu unter <span class="guihint">File Group Name</span> den Namen ein, den Sie im Agentenplugin unter <span class="guihint">Section name</span> vergeben haben.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_service_rule_group_condition.png" alt="Filter auf Dateien der Gruppe myfiles."></div>
<div class="title">
<span class="guihint">File Group Name</span> entspricht dem <span class="guihint">Section name</span> aus der Plugin-Regel</div>
</div>
<div class="paragraph"><p>Damit ist auch die Service-Regel fertig.
Optional könnten Sie die Auswertung noch auf eine <a href="timeperiods.html">Zeitperiode</a> beschränken.
Fügen Sie anschließend wie üblich den neuen Service zu den betroffenen Hosts hinzu und aktivieren Sie die Änderungen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_mk_filestats_monitoring">
<span class="hidden-anchor sr-only" id="mk_filestats_monitoring"></span>3.3. mk_filestats im Monitoring</h3>
<div class="paragraph"><p>Die Auswertung sehen Sie dann im Monitoring in Listen und natürlich in den Details.
Neben den Parametern des Services sehen Sie hier nun auch die Dateien, die für den Status <span class="state1">WARN</span> beziehungsweise <span class="state2">CRIT</span> verantwortlich sind.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_service_monitoring.png" alt="Service-Details im Monitoring für den Status WARN."></div>
<div class="title">mk_filestats offenbart im Monitoring, welche Dateien für den Status verantwortlich sind</div>
</div>
<div class="paragraph"><p>Bei der Option <a href="#showfiles">Show files in service details</a> ist jedoch Vorsicht angeraten:
Wenn viele Dateien für eine Statusänderung sorgen, werden sie auch alle aufgeführt, was zu langen Listen und damit verbundenen Problemen mit Performance und Ansichten führen kann.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_many_files.png" alt="Service-Details im Monitoring für den Status CRIT."></div>
<div class="title">Allzu offenherzige reguläre Ausdrücke können riesige Listen erzeugen</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_fileinfo">
<span class="hidden-anchor sr-only" id="fileinfo"></span>4. Dateien überwachen mit fileinfo (Linux, Windows)</h2>
<div class="sectionbody">
<div class="paragraph"><p>Die Überwachung von Dateien mit fileinfo läuft prinzipiell genauso wie mit mk_filestats, daher das Prozedere hier leicht verkürzt, abermals für Dateigruppen.</p></div>
<div class="sect2">
<h3 id="heading_fileinfo_agent_rule">
<span class="hidden-anchor sr-only" id="fileinfo_agent_rule"></span>4.1. Regel für den Agenten konfigurieren</h3>
<div class="sect3">
<h4 id="heading__konfiguration_über_agentenbäckerei_2">
<span class="hidden-anchor sr-only" id="_konfiguration_über_agentenbäckerei_2"></span>Konfiguration über Agentenbäckerei</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Die Konfiguration des Agenten in den kommerziellen Editionen unter <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX &gt; Agent rules &gt; Count, size and age of files (Linux, Windows)</span> ist deutlich einfacher gehalten:
Sie definieren hier lediglich den Pfad für die Dateien in Form eines Globbing-Musters.
Das wirft eben auch das Problem auf, dass eventuell extrem lange Dateilisten übertragen werden, die das Monitoring spürbar verlangsamen können.Außerdem wird standardmäßig für jede gefundene Datei ein eigener Service angelegt, was sich lediglich durch Gruppenbildung verhindern lässt.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_fileinfo_agent_rule.png" alt="Regel für fileinfo mit Filterung auf Windows-Pfad."></div>
<div class="title">Überwachung aller Dateien unterhalb des Pfads</div>
</div>
<div class="paragraph"><p><strong>Zusätzliches Datum:</strong> Es gibt aber noch eine leicht versteckte Filtermöglichkeit:
Im Globbing-Muster können Sie die Variable <code>$DATE</code> nutzen, um nur Dateien einzubeziehen, deren Namen das aktuelle Datum enthält.
Die Angabe des Datumsformats entspricht dabei dem Linux-Programm <code>date</code>.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_fileinfo_date_rule.png" alt="Regel für fileinfo mit Filterung über Datumsvariable."></div>
<div class="title">Dateien mit Zeitstempel im Namen lassen sich nur unter Linux explizit ansprechen</div>
</div>
<div class="paragraph"><p>Eine Angabe wie <code>/backups/mybackup_*_$DATE:%Y%m%d$</code> würde — Stand heute, dem 22.10.2021 — folglich Dateien wie <code>mybackup_01_20211022</code> und <code>mybackup_foobar_20211022</code> finden:</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_fileinfo_date_monitoring.png" alt="Datei im Monitoring, gefiltert nach Datum im Dateinamen."></div>
<div class="title">Für Backup-Dateien bieten sich Zeitstempel und eine tagesaktuelle Prüfung an</div>
</div>
<div class="paragraph"><p>Weitere Informationen finden Sie direkt auf der Seite der Regel sowie in der zugehörigen Inline-Hilfe.</p></div>
<div class="paragraph"><p>Damit ist die Konfiguration abgeschlossen und Sie können das Plugin samt Konfiguration über die <a href="agent_deployment.html">Agentenbäckerei verteilen.</a></p></div>
</div>
<div class="sect3">
<h4 id="heading__manuelle_konfiguration_2">
<span class="hidden-anchor sr-only" id="_manuelle_konfiguration_2"></span>Manuelle Konfiguration</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CRE.svg" alt="CRE" class="icon-left"></span>
In <span class="image-inline"><img src="../images/icons/CRE.png" alt="CRE" width="20" title="Checkmk Raw"></span> <strong>Checkmk Raw</strong> müssen Sie auch bei fileinfo wieder über Dateien konfigurieren, unterschiedlich nach Betriebssystem:</p></div>
<div class="paragraph"><p><strong>Linux:</strong> Konfigurationsdatei <code>fileinfo.cfg</code>:</p></div>
<div class="listingblock">
<div class="title">/etc/check_mk/fileinfo.cfg</div>
<div class="content"><pre class="pygments highlight"><code><span></span>C:\myfiles\*
/myfiles/*
/media/evo/test_$DATE:%Y%m%d$</code></pre></div>
</div>
<div class="paragraph"><p><strong>Windows:</strong> Konfigurationsdatei <code>check_mk.user.yml</code>:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\check_mk.user.yml</div>
<div class="content"><pre class="pygments highlight"><code><span></span>fileinfo:
  enabled: yes
  path:
  - 'c:\myfiles\*.*'
  - "c:\\myfiles\\*.*"
  - /media/evo/test_$DATE:%Y%m%d$</code></pre></div>
</div>
<div class="paragraph"><p>Beachten Sie hier die unterschiedlichen Schreibweisen von Windows-Pfaden — in doppelten Anführungsstrichen müssen die Backslashs escaped werden.</p></div>
<div class="paragraph"><p>Damit ist die Konfiguration abgeschlossen und Sie können das Plugin <a href="agent_linux.html#manualplugins">unter Linux</a> oder <a href="agent_windows.html#manual_installation_of_plugins">unter Windows</a> manuell installieren.</p></div>
</div>
<div class="sect3">
<h4 id="heading__daten_in_der_agentenausgabe_2">
<span class="hidden-anchor sr-only" id="_daten_in_der_agentenausgabe_2"></span>Daten in der Agentenausgabe</h4>
<div class="paragraph"><p>Das Ergebnis Ihrer Konfiguration finden Sie dann in Form von Rohdaten in der Agentenausgabe, beginnend mit dem Sektions-Header <span class="guihint">fileinfo:</span></p></div>
<div class="listingblock">
<div class="title">mysite-myhost-agent.txt</div>
<div class="content"><pre class="pygments highlight"><code><span></span> &lt;&lt;&lt;fileinfo:sep(124)&gt;&gt;&gt;
1634131485
C:\myfiles\myfile|12|1632490780
C:\myfiles\myfile2|12|1632490780
C:\myfiles\myfile3|12|1632490780
...</code></pre></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="heading_fileinfo_service_rule">
<span class="hidden-anchor sr-only" id="fileinfo_service_rule"></span>4.2. Service-Regel konfigurieren</h3>
<div class="paragraph"><p>Im zweiten Schritt wird auch hier wieder die Service-Regel <span class="guihint">Setup &gt; Services &gt; Service monitoring rules &gt; Size, age and count of file groups</span> konfiguriert:
Die Minimal-Maximal-Optionen entsprechen denen von mk_filestats, die Optionen zum Anzeigen der betroffenen Dateinamen in den Service-Details und für Ausreißer sind hier aber nicht vorhanden.
Dafür gibt es zwei zusätzliche Optionen:
Zum einen können Sie über <span class="guihint">Add time range</span> direkt einen Zeitraum eingeben — außerhalb dieses Zeitraums hat der Service immer den Status <span class="state0">OK</span>.</p></div>
<div class="paragraph"><p>Zum anderen steht Ihnen das mächtige Feature <span class="guihint">Level conjunctions</span> zur Verfügung:
Hierüber können Sie für jeden der vier Zustände <span class="state0">OK</span>, <span class="state1">WARN</span>, <span class="state2">CRIT</span> und <span class="state3">UNKNOWN</span> Reihen von Bedingungen setzen.
So könnten Sie zum Beispiel festlegen, dass der Service auf <span class="state2">CRIT</span> geht, wenn</p></div>
<div class="ulist"><ul>
<li><p>es exakt 7 Dateien gibt,</p></li>
<li><p>die kleinste Datei unterhalb von 10 Megabyte liegt,</p></li>
<li><p>die älteste Datei jünger als 5 Tage alt ist und</p></li>
</ul></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_fileinfo_service_rule.png" alt="Festlegung der Bedingungen für die mit fileinfo überwachten Dateien."></div>
<div class="title">
<span class="guihint">Level conjunctions</span> ermöglichen auch, explizite Ausnahmen zu definieren</div>
</div>
<div class="paragraph"><p>Und auch diese Regel können Sie wieder im Kasten <span class="guihint">Conditions</span> auf die gewünschte Gruppe <code>myfiles</code> mit <span class="guihint">File Group Name</span> beschränken.</p></div>
<div class="paragraph"><p>Anders als bei mk_filestats läuft die Gruppenbildung erst im Monitoring über die Service-Regel <span class="guihint">Setup &gt; Services &gt; Service monitoring rules &gt; File Grouping Patterns</span>.
Die Zuordnung stellen Sie sicher, indem Sie unter <span class="guihint">Name of group</span> ebenfalls die Gruppe <code>myfiles</code> eintragen.</p></div>
<div class="paragraph"><p>Die Angabe der Muster für ein- und auszuschließende Dateien geschieht hier <strong>standardmäßig</strong> nicht über reguläre Ausdrücke, sondern lediglich über Globbing.
Wenn Sie eine Tilde (<code>~</code>) voranstellen, können Sie aber auch hier reguläre Ausdrücke verwenden.</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_fileinfo_grouping_pattern.png" alt="Filter auf Dateien der Gruppe myfiles."></div>
<div class="title">Eingabefelder verhalten sich nicht immer identisch — die Inline-Hilfe bietet immer weitere Details</div>
</div>
<div class="paragraph"><p><strong>Zusätzliches Datum:</strong> Wieder ist die Verwendung der Variablen <code>$DATE</code> möglich, mehr noch: Alternativ können Sie auch <code>$YESTERDAY</code> zum Filtern verwenden, was schlicht einen Tag von <code>$DATE</code> abzieht.
Weitere Infos dazu erhalten Sie wie immer in der Inline-Hilfe.</p></div>
</div>
<div class="sect2">
<h3 id="heading_fileinfo_monitoring">
<span class="hidden-anchor sr-only" id="fileinfo_monitoring"></span>4.3. fileinfo im Monitoring</h3>
<div class="paragraph"><p>Im Monitoring unterscheidet sich die Ansicht einer fileinfo-Gruppe nicht sonderlich von einer mk_filestats-Gruppe.
Allerdings werden bei fileinfo immer alle betroffenen Dateien explizit aufgeführt, egal, ob sie für eine Statusänderung verantwortlich sind oder nicht.
Hier im Beispiel sehen Sie etwa die beiden Dateien <code>yourfile</code> mit 0 Megabyte ohne Auswirkungen auf den Status und <code>yourfile_2.exe</code> mit knapp 11 Megabyte, die damit den Status <span class="state2">CRIT</span> auslöst:</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_fileinfo_service_monitoring.png" alt="Eine fileinfo-Gruppe im Monitoring."></div>
<div class="title">
<code>yourfile</code> wird von fileinfo angezeigt, obwohl nicht für die Statusänderung verantwortlich</div>
</div>
<div class="paragraph"><p>Alle Dateien, die von fileinfo ins Monitoring geliefert und keiner Gruppe zugeordnet werden, bleiben als einzelne Services erhalten:</p></div>
<div class="imageblock">
<div class="content"><img src="../images/filestats_fileinfo__service_monitoring_singlefiles.png" alt="Einzelne Dateien als separate Services im Monitoring."></div>
<div class="title">Bei fileinfo sind es zu offenherzige Globbing-Muster, die für riesige Listen sorgen können</div>
</div>
<div class="paragraph"><p>Genau diese Liste zeigt, warum es so wichtig ist, bei fileinfo präzise auf die Filter zu achten:
Wenn hier etwa <code>C:\</code> ohne jegliche Einschränkungen angegeben würde, gäbe es es anschließend mehrere Hunderttausend einzelne Services im Monitoring.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_troubleshooting">
<span class="hidden-anchor sr-only" id="troubleshooting"></span>5. Troubleshooting</h2>
<div class="sectionbody"><div class="sect2">
<h3 id="heading__keinezu_viele_dateien_im_monitoring">
<span class="hidden-anchor sr-only" id="_keinezu_viele_dateien_im_monitoring"></span>5.1. Keine/zu viele Dateien im Monitoring</h3>
<div class="paragraph"><p>Egal, ob Sie mit mk_filestats oder fileinfo arbeiten, fehlende Dateien oder auch zu viele Einträge im Monitoring liegen häufig an falschen Filtern.
Dafür gibt es vor allem zwei Quellen:
Eine Verwechslung von Globbing-Muster und regulärem Ausdruck oder eine falsche Konfiguration.
Beispielsweise verhält sich das Sternchen in beiden Varianten anders:
Beim Globbing steht <code>*</code> als Platzhalter für beliebig viele beliebige Zeichen, in einem regulären Ausdruck für ein oder mehrere Vorkommen des davor stehenden Zeichens. Um per Regex beliebige Zeichen in beliebiger Menge zu matchen, müsste entsprechend mit <code>.*</code> gearbeitet werden.</p></div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_files">
<span class="hidden-anchor sr-only" id="files"></span>6. Dateien und Verzeichnisse</h2>
<div class="sectionbody">
<div class="paragraph"><p>Wie immer sind alle Pfadangaben für den Checkmk-Server relativ zum Instanzverzeichnis (z.B. <code>/omd/sites/mysite</code>) angegeben.</p></div>
<div class="sect2">
<h3 id="heading__mk_filestats">
<span class="hidden-anchor sr-only" id="_mk_filestats"></span>6.1. mk_filestats</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 39%;">
<col style="width: 46%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Ort</th>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk-Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/cfg_examples/filestats.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beispielkonfigurationsdatei</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk-Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/plugins/mk_filestats.py</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python-3-Agentenplugin inklusive Erläuterungen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk-Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/plugins/mk_filestats_2.py</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python-2-Agentenplugin inklusive Erläuterungen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/check_mk/filestats.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsdatei - von der Agentenbäckerei oder manuell erstellt</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="heading__fileinfo">
<span class="hidden-anchor sr-only" id="_fileinfo"></span>6.2. fileinfo</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 39%;">
<col style="width: 46%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Ort</th>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk-Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/cfg_examples/fileinfo.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beispielkonfigurationsdatei</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/check_mk/fileinfo.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsdatei - von der Agentenbäckerei oder manuell erstellt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\bakery\check_mk.bakery.yml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsdatei - von der Agentenbäckerei erstellt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\check_mk.user.yml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsdatei - manuell erstellt</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#basics">1. Grundlagen zur Dateiüberwachung</a></li>
<li><a href="#differences">2. Unterschiede mk_filestats und fileinfo</a></li>
<li>
<a href="#mk_filestats">3. Dateien überwachen mit mk_filestats (Linux)</a><ul class="sectlevel1">
<li>
<a href="#mk_filestats_agent_rule">3.1. Regel für das Agentenplugin konfigurieren</a><ul class="sectlevel2">
<li><a href="#_konfiguration_%C3%BCber_agentenb%C3%A4ckerei">Konfiguration über Agentenbäckerei</a></li>
<li><a href="#_manuelle_konfiguration">Manuelle Konfiguration</a></li>
<li><a href="#_daten_in_der_agentenausgabe">Daten in der Agentenausgabe</a></li>
</ul>
</li>
<li><a href="#mk_filestats_service_rule">3.2. Service-Regel konfigurieren</a></li>
<li><a href="#mk_filestats_monitoring">3.3. mk_filestats im Monitoring</a></li>
</ul>
</li>
<li>
<a href="#fileinfo">4. Dateien überwachen mit fileinfo (Linux, Windows)</a><ul class="sectlevel1">
<li>
<a href="#fileinfo_agent_rule">4.1. Regel für den Agenten konfigurieren</a><ul class="sectlevel2">
<li><a href="#_konfiguration_%C3%BCber_agentenb%C3%A4ckerei_2">Konfiguration über Agentenbäckerei</a></li>
<li><a href="#_manuelle_konfiguration_2">Manuelle Konfiguration</a></li>
<li><a href="#_daten_in_der_agentenausgabe_2">Daten in der Agentenausgabe</a></li>
</ul>
</li>
<li><a href="#fileinfo_service_rule">4.2. Service-Regel konfigurieren</a></li>
<li><a href="#fileinfo_monitoring">4.3. fileinfo im Monitoring</a></li>
</ul>
</li>
<li>
<a href="#troubleshooting">5. Troubleshooting</a><ul class="sectlevel1"><li><a href="#_keinezu_viele_dateien_im_monitoring">5.1. Keine/zu viele Dateien im Monitoring</a></li></ul>
</li>
<li>
<a href="#files">6. Dateien und Verzeichnisse</a><ul class="sectlevel1">
<li><a href="#_mk_filestats">6.1. mk_filestats</a></li>
<li><a href="#_fileinfo">6.2. fileinfo</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
