<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="Checkmk hilft Ihnen dabei, für eine Gruppe vernetzter Hosts mit der gleichen Aufgabe ein Cluster einzurichten und die Cluster-Services für das Monitoring auszuwählen.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Cluster-Services überwachen">
<meta name="og:description" content="Checkmk hilft Ihnen dabei, für eine Gruppe vernetzter Hosts mit der gleichen Aufgabe ein Cluster einzurichten und die Cluster-Services für das Monitoring auszuwählen.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Cluster-Services überwachen</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/en/clustered_services.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/clustered_services.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/de/clustered_services.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Benachrichtigungen per SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">MSSQL mit dem Legacy-Plugin überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring mit Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Übersicht der API-Ressourcen</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Cluster-Services überwachen</h1>
<div class="details">
<span id="revdate">Last modified on 25-Jan-2021</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/common/de/clustered_services.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="hosts_setup.html">Verwaltung der Hosts</a>
<a href="agent_windows.html">Windows überwachen</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__einleitung">
<span class="hidden-anchor sr-only" id="_einleitung"></span>1. Einleitung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__cluster_knoten_und_cluster_services">
<span class="hidden-anchor sr-only" id="_cluster_knoten_und_cluster_services"></span>1.1. Cluster, Knoten und Cluster-Services</h3>
<div class="paragraph"><p>Bei der Bereitstellung wichtiger und geschäftskritischer Services wie Datenbanken oder Websites für den elektronischen Handel (<em>E-commerce</em>) werden Sie sich kaum darauf verlassen, dass der Host, auf dem diese Services laufen, ein langes, stabiles und absturzfreies Leben führen wird.
Stattdessen werden Sie den Ausfall eines Hosts einkalkulieren und dafür sorgen, dass andere Hosts bereitstehen, um bei einem Ausfall die Services unmittelbar zu übernehmen (<em>failover</em>),
so dass sich der Ausfall nach außen gar nicht bemerkbar macht.</p></div>
<div class="paragraph"><p>Eine Gruppe von vernetzten Hosts, die zusammenarbeiten, um die gleiche Aufgabe zu erledigen, wird als Rechnerverbund oder Computer-Cluster oder kürzer als Cluster bezeichnet.
Ein Cluster agiert nach außen als ein System und organisiert nach innen die Zusammenarbeit der Hosts, um die gemeinsame Aufgabe zu erfüllen.</p></div>
<div class="paragraph"><p>Ein Cluster kann verschiedene Aufgaben übernehmen, zum Beispiel ein HPC-Cluster das Hochleistungsrechnen (<em>high-performance computing</em>),
das unter anderem dann eingesetzt wird, wenn Berechnungen viel mehr Speicher benötigen als auf einem Computer verfügbar ist.
Falls das Cluster die Aufgabe hat, für Hochverfügbarkeit (<em>high availability</em>) zu sorgen, wird es auch als HA-Cluster bezeichnet.
Um HA-Cluster geht es in diesem Artikel, d.h. wenn wir im folgenden „Cluster“ schreiben, ist stets ein <strong>HA-Cluster</strong> gemeint.</p></div>
<div class="paragraph"><p>Ein Cluster bietet einen oder mehrere Services nach außen an: die Cluster-Services, die manchmal auch als „geclusterte Services“ bezeichnet werden.
In einem Cluster werden die Hosts, aus denen es besteht, als Knoten (<em>nodes</em>) bezeichnet.
Zu einem bestimmten Zeitpunkt wird jeder Service von genau einem der Knoten bereitgestellt.
Fällt ein Knoten des Clusters aus, werden alle Services, die für die Aufgabe des Clusters essentiell sind, auf einen der verbleibenden Knoten verschoben.</p></div>
<div class="paragraph"><p>Um ein Failover transparent zu machen, stellen einige Cluster eine eigene Cluster-IP-Adresse zur Verfügung, die manchmal auch als virtuelle IP-Adresse bezeichnet wird.
Die Cluster-IP-Adresse verweist stets auf den aktiven Knoten und steht stellvertretend für das gesamte Cluster.
Im Falle eines Failover geht die IP-Adresse auf einen anderen, bisher passiven Knoten über, der dann zum aktiven Knoten wird.
Dem Client, der mit dem Cluster kommuniziert, kann ein internes Failover egal sein:
Er verwendet unverändert die gleiche IP-Adresse und braucht nicht umzuschalten.</p></div>
<div class="paragraph"><p>Andere Cluster haben keine Cluster-IP-Adresse.
Ein prominentes Beispiel sind Oracle-Datenbank-Cluster in vielen ihrer Varianten.
Ohne Cluster-IP-Adresse muss der Client eine Liste der IP-Adressen aller Knoten führen, die den Service bereitstellen könnten.
Fällt der aktive Knoten aus, muss der Client dies erkennen und auf denjenigen Knoten umschalten, der den Service nunmehr bereitstellt.</p></div>
</div>
<div class="sect2">
<h3 id="heading__das_monitoring_eines_clusters">
<span class="hidden-anchor sr-only" id="_das_monitoring_eines_clusters"></span>1.2. Das Monitoring eines Clusters</h3>
<div class="paragraph"><p>Checkmk ist einer der Clients, der mit dem Cluster kommuniziert. In Checkmk können
alle Knoten eines Clusters eingerichtet und überwacht werden — unabhängig
davon, wie die Cluster-Software intern den Status der einzelnen Knoten überprüft
und, falls notwendig, einen Failover durchführt.</p></div>
<div class="paragraph"><p>Die meisten Checks, die Checkmk auf den einzelnen Knoten eines Clusters ausführt,
befassen sich mit den physischen Eigenschaften der Knoten, die unabhängig davon
sind, ob der Host zu einem Cluster gehört oder nicht. Beispiele dafür sind CPU-
und Speichernutzung, lokale Festplatten, physische Netzwerkschnittstellen usw.
Für die Abbildung der Cluster-Funktion der Knoten in Checkmk ist es aber
notwendig, diejenigen Services zu identifizieren, die die Aufgabe des Clusters
definieren und gegebenenfalls auf einen anderen Knoten übertragen werden: die
Cluster-Services.</p></div>
<div class="paragraph"><p>Checkmk hilft Ihnen dabei, die Cluster-Services zu überwachen. Was Sie tun müssen, ist:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Cluster erstellen</p></li>
<li><p>Cluster-Services auswählen</p></li>
<li><p>Service-Erkennung für alle beteiligten Hosts durchführen</p></li>
</ol></div>
<div class="paragraph"><p>Wie Sie dabei vorgehen, wird im nächsten Kapitel anhand der folgenden
Beispielkonfiguration beschrieben:</p></div>
<div class="imageblock border"><div class="content"><img src="../images/cs_example_cluster.png" alt="cs example cluster"></div></div>
<div class="paragraph"><p>In Checkmk soll ein Windows Failover Cluster
als HA-Cluster eingerichtet werden, das aus zwei Knoten mit installiertem
Microsoft SQL (MS SQL) Server besteht. Es handelt sich dabei um ein sogenanntes
Aktiv/Passiv-Cluster, das heißt, nur auf einem, dem aktiven Knoten läuft eine
Datenbankinstanz. Der andere Knoten ist passiv und wird nur im Fall eines
Failover aktiv, fährt die Datenbankinstanz hoch und ersetzt den ausgefallenen
Knoten. Die Daten der Datenbankinstanz werden nicht auf den Knoten selbst
gespeichert, sondern auf einem gemeinsam genutzten Speichermedium, z.B. einem
Storage Area Network (SAN), an das beide Knoten angeschlossen sind. Die
Beispielkonfiguration besteht aus den folgenden Komponenten:</p></div>
<div class="ulist"><ul>
<li><p><code>mssql-node01</code> ist der aktive Knoten mit laufender Datenbankinstanz.</p></li>
<li><p><code>mssql-node02</code> ist der passive Knoten.</p></li>
<li><p><code>mssql-cluster01</code> ist das Cluster, dem beide Knoten angehören.</p></li>
</ul></div>
<div class="paragraph"><p>Anders als in diesem Beispiel ist es auch möglich, das derselbe Knoten in
mehreren Clustern enthalten ist. Im letzten Kapitel erfahren Sie, wie Sie solche
überlappenden Cluster konfigurieren anhand einer abgeänderten
Beispielkonfiguration.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__cluster_und_cluster_services_einrichten">
<span class="hidden-anchor sr-only" id="_cluster_und_cluster_services_einrichten"></span>2. Cluster und Cluster-Services einrichten</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__cluster_erstellen">
<span class="hidden-anchor sr-only" id="_cluster_erstellen"></span>2.1. Cluster erstellen</h3>
<div class="paragraph"><p>In Checkmk werden die Knoten und das Cluster selbst als Hosts erstellt
(Knoten-Hosts und Cluster-Hosts), wobei es für einen Cluster-Host einen
speziellen Host-Typen gibt.</p></div>
<div class="paragraph"><p>Vor der Einrichtung eines Cluster-Hosts gibt es folgendes zu beachten:</p></div>
<div class="ulist"><ul>
<li><p>Der Cluster-Host ist ein virtueller Host, der mit Cluster-IP-Adresse konfiguriert werden soll, wenn diese existiert. In unserem Beispiel gehen wir davon aus, dass der Name des Cluster-Hosts über DNS auflösbar ist.</p></li>
<li><p>Cluster-Hosts können auf die gleiche Art und Weise konfiguriert werden wie „normale“ Hosts, zum Beispiel mit <a href="glossar.html#host_tag">Host-Merkmalen</a> oder <a href="glossar.html#host_group">Host-Gruppen.</a></p></li>
<li><p>Für alle beteiligten Hosts (damit sind stets der Cluster-Host und alle zugehörigen Knoten-Hosts gemeint), müssen die Datenquellen identisch konfiguriert werden, d.h. insbesondere dürfen nicht einige per Checkmk-Agent und andere per SNMP konfiguriert sein. Checkmk stellt sicher, dass ein Cluster-Host nur dann erstellt werden kann, wenn diese Voraussetzung erfüllt ist.</p></li>
<li><p>In einem <a href="distributed_monitoring.html">verteilten Monitoring</a> müssen alle beteiligten Hosts derselben Checkmk-Instanz zugeordnet sein.</p></li>
<li><p>Nicht alle Checks funktionieren in einer Cluster-Konfiguration. Bei denjenigen Checks, die die Cluster-Unterstützung implementiert haben, können Sie dies in der Manual Page des Plugins nachlesen. Zu den Manual Pages geht es im Menü <span class="guihint">Setup &gt; Services &gt; Catalog of check plugins</span>.</p></li>
</ul></div>
<div class="paragraph"><p>In unserem Beispiel sind die beiden Knoten-Hosts <code>mssql-node01</code> und <code>mssql-node02</code> bereits als <a href="glossar.html#host">Hosts</a> angelegt und eingerichtet. Wie es
so weit kommen konnte, können Sie im <a href="agent_windows.html">Artikel zur Überwachung von Windows-Servern</a> nachlesen — und dort im Kapitel zur Erweiterung des Standard Windows-Agenten mit Plugins, für unser Beispiel den <a href="https://checkmk.com/de/integrations?tags=mssql" target="_blank">MS SQL Server-Plugins.</a></p></div>
<div class="paragraph"><p>Starten Sie die Erstellung des Clusters im Menü <span class="guihint">Setup &gt; Hosts &gt; Hosts</span> und dann im Menü <span class="guihint">Hosts &gt; Add cluster</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/cs_create_cluster.png" alt="cs create cluster"></div></div>
<div class="paragraph"><p>Geben Sie als <span class="guihint">Hostname</span> <code>mssql-cluster01</code> ein und tragen Sie unter
<span class="guihint">Nodes</span> die beiden Knoten-Hosts ein.</p></div>
<div class="paragraph"><p><strong>Hinweis:</strong> Falls Sie es mit einem Cluster ohne Cluster-IP-Adresse zu tun haben, müssen Sie einen nicht ganz komfortablen Umweg gehen:
Sie können im Kasten <span class="guihint">Network Address</span> für die <span class="guihint">IP Address Family</span> den Eintrag <span class="guihint">No IP</span> auswählen.
Um aber zu verhindern, dass der Host im Monitoring auf <span class="hstate1">DOWN</span> geht, müssen Sie für diesen das standardmäßig eingestellte „Host Check Command“ über die gleichnamige Regel ändern:
von <span class="guihint">Smart PING</span> bzw. <span class="guihint">PING</span> auf z.B. den Status eines der Services, die dem Cluster-Host im nächsten Kapitel zugewiesen werden.
Mehr Informationen zu den Host-Regelsätzen finden Sie im <a href="wato_rules.html">Artikel über Regeln</a>.</p></div>
<div class="paragraph"><p>Schließen Sie die Erstellung mit <span class="guihint">Save &amp; view folder</span> ab und <a href="wato.html#activate_changes">aktivieren Sie die Änderungen</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading__cluster_services_auswählen">
<span class="hidden-anchor sr-only" id="_cluster_services_auswählen"></span>2.2. Cluster-Services auswählen</h3>
<div class="paragraph"><p>Checkmk kann nicht wissen, welche der auf einem Knoten laufenden Services lokale
und welche Cluster-Services sind: Einige Dateisysteme können lokal sein, andere
sind möglicherweise nur auf dem aktiven Knoten gemountet. Ähnliches gilt für
Prozesse: Während der
Windows Dienst „Windows-Zeitgeber“ höchstwahrscheinlich auf allen Knoten läuft, wird eine bestimmte Datenbankinstanz nur auf dem aktiven Knoten verfügbar sein.</p></div>
<div class="paragraph"><p>Statt Checkmk raten zu lassen, wählen Sie die Cluster-Services mit einer Regel
aus. Ohne Regel werden dem Cluster keine Services zugewiesen. Für das Beispiel gehen wir davon aus, dass die Namen aller MS SQL Server Cluster-Services mit <code>MSSQL</code> beginnen und das Dateisystem des gemeinsam genutzten Speichermedium über das Laufwerk <code>D:</code> zugreifbar ist.</p></div>
<div class="paragraph"><p>Starten Sie mit <span class="guihint">Setup &gt; Hosts &gt; Hosts</span> und klicken Sie den Cluster-Namen an. Auf der Seite <span class="guihint">Properties of host</span> wählen Sie im Menü <span class="guihint">Hosts &gt; Clustered services</span>. Sie landen auf der Seite des Regelsatzes <span class="guihint">Clustered services</span>, auf der Sie eine neue Regel erstellen können.</p></div>
<div class="paragraph"><p>Unabhängig davon, ob und wie die Hosts in Ordner organisiert sind: Achten Sie darauf, dass Sie alle Regeln für Cluster-Services so erstellen, dass sie für die Knoten-Hosts gelten, auf denen die Services laufen. Für einen Cluster-Host ist eine solche Regel unwirksam.</p></div>
<div class="paragraph"><p>Wählen Sie unter <span class="guihint">Create rule in folder</span> den Ordner aus, der die Knoten-Hosts enthält. Sie erhalten die Seite <span class="guihint">New rule: Clustered services</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/cs_rule_cs.png" alt="cs rule cs"></div></div>
<div class="paragraph"><p>Im Kasten <span class="guihint">Conditions</span> aktivieren Sie <span class="guihint">Explicit hosts</span> und tragen den aktiven Knoten-Host <code>mssql-node01</code> und den passiven Knoten-Host <code>mssql-node02</code> ein. Dann aktivieren Sie <span class="guihint">Services</span> und machen dort zwei Einträge: <code>MSSQL</code> für alle MS SQL-Services, deren Name mit <code>MSSQL</code> beginnen und <code>Filesystem D:</code> für das Laufwerk. Die Eingaben werden als <a href="regexes.html">reguläre Ausdrücke</a> interpretiert.</p></div>
<div class="paragraph"><p>Alle Services, die nicht als Cluster-Services definiert sind, werden von Checkmk
als lokale Services behandelt.</p></div>
<div class="paragraph"><p>Schließen Sie die Erstellung der Regel mit <span class="guihint">Save</span> ab und aktivieren Sie die
Änderungen.</p></div>
</div>
<div class="sect2">
<h3 id="heading__service_erkennung_durchführen">
<span class="hidden-anchor sr-only" id="_service_erkennung_durchführen"></span>2.3. Service-Erkennung durchführen</h3>
<div class="paragraph"><p>Für alle beteiligten Hosts (Cluster- und Knoten-Hosts) muss zum Abschluss eine
neue Service-Erkennung (<em>discovery</em>) durchgeführt werden, damit alle neu
definierten Cluster-Services zuerst bei den Knoten entfernt und dann beim
Cluster hinzugefügt werden.</p></div>
<div class="paragraph"><p>Unter <span class="guihint">Setup &gt; Hosts &gt; Hosts</span> markieren Sie zuerst alle beteiligten Hosts und wählen dann im Menü <span class="guihint">Hosts &gt; On Selected hosts &gt; Run bulk service discovery</span>.
Auf der Seite <span class="guihint">Bulk discovery</span> sollte die
erste Option <span class="guihint">Add unmonitored services and new host labels</span> zum gewünschten
Ergebnis führen.</p></div>
<div class="paragraph"><p>Klicken Sie <span class="guihint">Start</span> um die <a href="wato_services.html#bulk_discovery">Serviceerkennung für viele Hosts</a> zu beginnen. Nach erfolgreichem Abschluss, erkennbar an der Meldung <code>Bulk discovery successful</code>, verlassen Sie die Seite und aktivieren die Änderungen.</p></div>
<div class="paragraph"><p>Um herauszufinden, ob die Auswahl der Cluster-Services zum gewünschten Ergebnis geführt hat, können Sie sich alle Services auflisten, die nunmehr dem Cluster zugewiesen sind: Unter <span class="guihint">Setup &gt; Hosts &gt; Hosts</span> klicken Sie in der Host-Liste beim Eintrag des Cluster-Hosts auf das Symbol <span class="image-inline"><img src="../images/icons/icon_services.png" alt="icon services"></span> zum Bearbeiten der Services. Auf der folgenden Seite <span class="guihint">Services of host</span> werden unter <span class="guihint">Monitored services</span> alle Cluster-Services aufgelistet:</p></div>
<div class="imageblock"><div class="content"><img src="../images/cs_cluster_monitored_services.png" alt="cs cluster monitored services"></div></div>
<div class="paragraph"><p>Auf der anderen Seite, bei den Knoten-Hosts, fehlen nunmehr genau die zum
Cluster verschobenen Services in der Liste der überwachten Services. Am
Knoten-Host finden Sie diese am Ende der Services-Liste im Abschnitt
<span class="guihint">Monitored clustered services (located on cluster host)</span>:</p></div>
<div class="imageblock"><div class="content"><img src="../images/cs_node_monitored_services.png" alt="cs node monitored services"></div></div>
<div class="paragraph"><p><strong>Tipp:</strong> Falls Sie <a href="localchecks.html">lokale Checks</a> in einem Cluster ausführen, in der die Regel <span class="guihint">Clustered services</span> angewendet ist, können Sie mit dem Regelsatz <span class="guihint">Local checks in Checkmk clusters</span> das Ergebnis beeinflussen, indem Sie zwischen <span class="guihint">Worst state</span> und <span class="guihint">Best state</span> auswählen.</p></div>
</div>
<div class="sect2">
<h3 id="heading__automatische_service_erkennung">
<span class="hidden-anchor sr-only" id="_automatische_service_erkennung"></span>2.4. Automatische Service-Erkennung</h3>
<div class="paragraph"><p>Wenn Sie die Service-Erkennung automatisch über den <a href="wato_services.html#discovery_auto">Discovery Check</a> erledigen lassen, müssen Sie eine Besonderheit beachten.
Der <span class="guihint">Discovery Check</span> kann verschwundene Services automatisch löschen.
Wandert ein geclusterter Service aber von einem Knoten zum anderen, könnte er fälschlicherweise als verschwunden registriert und dann gelöscht werden.
Verzichten Sie hingegen auf diese Option, würden wiederum tatsächlich verschwundene Services niemals gelöscht.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__überlappende_cluster">
<span class="hidden-anchor sr-only" id="_überlappende_cluster"></span>3. Überlappende Cluster</h2>
<div class="sectionbody">
<div class="paragraph"><p>Es ist möglich, dass mehrere Cluster einen oder auch mehrere Knoten gemeinsam
nutzen. Man spricht dann von überlappenden Clustern. Bei überlappenden Clustern
benötigen Sie eine spezielle Regel, um Checkmk mitzuteilen, welche
Cluster-Services eines gemeinsam genutzten Knoten-Hosts welchem Cluster
zugeordnet werden sollen.</p></div>
<div class="paragraph"><p>Das prinzipielle Vorgehen beim Einrichten eines überlappenden Clusters werden
wir im folgenden vorstellen, indem wir das Beispiel des MS SQL Server Clusters
von einem Aktiv/Passiv- zu einem Aktiv/Aktiv-Cluster abwandeln:</p></div>
<div class="imageblock border"><div class="content"><img src="../images/cs_example_cluster_overlap.png" alt="cs example cluster overlap"></div></div>
<div class="paragraph"><p>In dieser
Konfiguration ist nicht nur MS SQL Server auf beiden Knoten-Hosts installiert,
sondern auf jedem der beiden Knoten läuft eine eigene Datenbankinstanz. Beide
Knoten greifen auf das gemeinsam genutzte Speichermedium zu, aber auf
unterschiedlichen Laufwerken. Dieses Beispiel realisiert ein zu 100 %
überlappendes Cluster, da die beiden Knoten beiden Clustern angehören.</p></div>
<div class="paragraph"><p>Der Vorteil des Aktiv/Aktiv-Clusters besteht darin, dass die verfügbaren
Ressourcen der beiden Knoten besser genutzt werden. Im Fall eines Failover
wird die Aufgabe des ausgefallenen Knotens vom anderen Knoten übernommen, auf
dem dann beide Datenbankinstanzen laufen.</p></div>
<div class="paragraph"><p>Diese Beispielkonfiguration besteht somit aus den folgenden Komponenten:</p></div>
<div class="ulist"><ul>
<li><p><code>mssql-node01</code> ist der erste aktive Knoten mit der laufenden Datenbankinstanz <code>MSSQL Instance1</code>.</p></li>
<li><p><code>mssql-node02</code> ist der zweite aktive Knoten mit der laufenden Datenbankinstanz <code>MSSQL Instance2</code>.</p></li>
<li><p><code>mssql-cluster01</code> und <code>mssql-cluster02</code> sind die beiden Cluster, denen beide Knoten angehören.</p></li>
</ul></div>
<div class="paragraph"><p>Den 1. Schritt zur Einrichtung des Aktiv/Passiv-Clusters müssen Sie für ein
Aktiv/Aktiv-Cluster nur leicht abwandeln: Sie erstellen, wie oben beschrieben,
das erste Cluster <code>mssql-cluster01</code>. Anschließend erstellen Sie das zweite
Cluster <code>mssql-cluster02</code> mit denselben beiden Knoten-Hosts.</p></div>
<div class="paragraph"><p>Im 2. Schritt nutzen Sie zur Auswahl der Cluster-Services statt des allgemeinen
Regelsatzes <span class="guihint">Clustered services</span> den speziell für überlappende Cluster geltenden Regelsatz <span class="guihint">Clustered services for overlapping clusters</span>. Damit definieren Sie in einer Regel die Cluster-Services, die bei den Knoten-Hosts entfernt und dem ausgewählten Cluster zugeschlagen werden.</p></div>
<div class="paragraph"><p>Für unser Beispiel mit 100 % Überlappung benötigen wir zwei dieser Regeln: Die
erste Regel definiert die Cluster-Services der ersten Datenbankinstanz, die standardmäßig auf dem ersten Knoten-Host laufen. Da im Fall eines Failover diese Cluster-Services auf den zweiten Knoten-Host übertragen werden, weisen wir die Services beiden Knoten-Hosts zu. Die zweite Regel tut dies analog für das zweite Cluster und die zweite Datenbankinstanz.</p></div>
<div class="paragraph"><p>Starten wir mit der ersten Regel: Unter <span class="guihint">Setup &gt; General &gt; Rule search</span> suchen Sie den Regelsatz <span class="guihint">Clustered services for overlapping clusters</span> und klicken ihn an. Wählen Sie unter <span class="guihint">Create rule in folder</span> wieder den Ordner aus, der die Knoten-Hosts enthält.</p></div>
<div class="paragraph"><p>Tragen Sie als <span class="guihint">Assign services to the following cluster</span> das Cluster <code>mssql-cluster01</code> ein:</p></div>
<div class="imageblock"><div class="content"><img src="../images/cs_rule_cs_overlapping.png" alt="cs rule cs overlapping"></div></div>
<div class="paragraph"><p>Im Kasten <span class="guihint">Conditions</span> aktivieren Sie <span class="guihint">Explicit hosts</span> und tragen
beide Knoten-Hosts ein. Dann aktivieren Sie <span class="guihint">Services</span> und machen dort zwei Einträge: <code>MSSQL Instance1</code> für alle MS SQL-Services der ersten Datenbankinstanz und <code>Filesystem D:</code> für das Laufwerk:</p></div>
<div class="imageblock"><div class="content"><img src="../images/cs_rule_cs_overlapping_conditions.png" alt="cs rule cs overlapping conditions"></div></div>
<div class="paragraph"><p>Schließen Sie die Erstellung der ersten Regel mit <span class="guihint">Save</span> ab.</p></div>
<div class="paragraph"><p>Erstellen Sie anschließend gleich die zweite Regel, diesmal für das zweite Cluster <code>mssql-cluster02</code> und erneut für beide Knoten-Hosts. Unter <span class="guihint">Services</span>
tragen Sie jetzt <code>MSSQL Instance2</code> ein für alle MS SQL-Services der zweiten Datenbankinstanz. Der zweite Knoten-Host, auf dem die zweiten Datenbankinstanz standardmäßig läuft, greift auf sein Speichermedium unter einem anderen Laufwerk zu, im folgenden Beispiel über das <code>E:</code> Laufwerk:</p></div>
<div class="imageblock"><div class="content"><img src="../images/cs_rule_cs_overlapping_conditions2.png" alt="cs rule cs overlapping conditions2"></div></div>
<div class="paragraph"><p>Sichern Sie auch diese Regel und aktivieren Sie dann die beiden Änderungen.</p></div>
<div class="paragraph"><p>Führen Sie abschließend die Service-Erkennung als 3. und letzten Schritt genauso aus wie oben beschrieben: als <span class="guihint">Bulk discovery</span> für alle beteiligten Hosts, d.h. die beiden Cluster-Hosts und die beiden Knoten-Hosts.</p></div>
<div class="paragraph"><p><strong>Hinweis:</strong> Falls mehrere Regeln einen Cluster-Service definieren, hat die
spezifischere Regel <span class="guihint">Clustered services for overlapping clusters</span> mit der
expliziten Zuordnung zu einem bestimmten Cluster Vorrang vor der allgemeineren
Regel <span class="guihint">Clustered Services</span>. Für die beiden in diesem Artikel vorgestellten
Beispiele bedeutet das: Durch die beiden zuletzt erstellten spezifischen Regeln
würde die im ersten Beispiel erstellte allgemeine Regel nie zur Anwendung
kommen.</p></div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li>
<a href="#_einleitung">1. Einleitung</a><ul class="sectlevel1">
<li><a href="#_cluster_knoten_und_cluster_services">1.1. Cluster, Knoten und Cluster-Services</a></li>
<li><a href="#_das_monitoring_eines_clusters">1.2. Das Monitoring eines Clusters</a></li>
</ul>
</li>
<li>
<a href="#_cluster_und_cluster_services_einrichten">2. Cluster und Cluster-Services einrichten</a><ul class="sectlevel1">
<li><a href="#_cluster_erstellen">2.1. Cluster erstellen</a></li>
<li><a href="#_cluster_services_ausw%C3%A4hlen">2.2. Cluster-Services auswählen</a></li>
<li><a href="#_service_erkennung_durchf%C3%BChren">2.3. Service-Erkennung durchführen</a></li>
<li><a href="#_automatische_service_erkennung">2.4. Automatische Service-Erkennung</a></li>
</ul>
</li>
<li><a href="#_%C3%BCberlappende_cluster">3. Überlappende Cluster</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
