<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="In Checkmk können Sie mit mk_logwatch Log-Dateien auf bestimmte Inhalte prüfen und überwachen.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Log-Dateien überwachen">
<meta name="og:description" content="In Checkmk können Sie mit mk_logwatch Log-Dateien auf bestimmte Inhalte prüfen und überwachen.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Log-Dateien überwachen</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/en/monitoring_logfiles.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/monitoring_logfiles.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/de/monitoring_logfiles.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Benachrichtigungen per SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">MSSQL mit dem Legacy-Plugin überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring mit Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Übersicht der API-Ressourcen</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Log-Dateien überwachen</h1>
<div class="details">
<span id="revdate">draft</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/common/de/monitoring_logfiles.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody">
<div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="mk_filestats.html">Dateien überwachen</a>
<a href="ec.html">Die Event Console</a>
</div>
</div>
</div>
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>Dieser Artikel ist derzeit im Entstehen begriffen und wird regelmäßig ergänzt.</p></div></td>
</tr></table></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_basics">
<span class="hidden-anchor sr-only" id="basics"></span>1. Wesentliches zur Überwachung von Log-Dateien</h2>
<div class="sectionbody">
<div class="paragraph"><p>Die Geschichte der Überwachung von Log-Dateien ist eine Geschichte voller Missverständnisse.
Die Missverständnisse beginnen bereits, wenn wir uns anschauen, was Log-Einträge sind und was andererseits Services in Checkmk anzeigen.
Zeilen oder Einträge in Log-Dateien sind "von Natur aus" ereignisbasiert (event based).
Checkmk hingegen bildet Zustände ab.
Mehr über den Unterschied von Ereignissen und Zuständen im Artikel <a href="monitoring_basics.html#states_events">Grundlagen des Monitorings mit Checkmk</a>.</p></div>
<div class="paragraph"><p>In Checkmk umgehen wir dieses Problem, indem wir definieren, wann ein Service, der eine oder mehrere Log-Dateien abbildet, einen kritischen Zustand annimmt.
Im Regelfall definieren wir "werde kritisch, wenn die Log-Datei Meldungen enthält die</p></div>
<div class="ulist"><ul>
<li><p>neu,</p></li>
<li><p>unbestätigt und</p></li>
<li><p>kritisch sind".</p></li>
</ul></div>
<div class="paragraph"><p>Außerdem sollten Sie bei der Verwendung von Logwatch Maß halten.
Logwatch eignet sich für den dosierten Einsatz und nicht dafür, Gigabytes oder Terabytes von Log-Dateien zu verarbeiten.
Dafür gibt es sicherlich geeignetere Werkzeuge.
Wir empfehlen unbedingt Logwatch nur anlassbezogen und nicht flächendeckend einzusetzen.
Wie Sie im weiteren Verlauf des Artikels noch sehen werden, ist es leicht möglich, bereits auf dem überwachten Host einen wichtigen Teil der (Vor-)Filterung vorzunehmen.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_prereqisites">
<span class="hidden-anchor sr-only" id="prereqisites"></span>2. Voraussetzungen</h2>
<div class="sectionbody">
<div class="paragraph"><p>Logwatch ist ein Python-Programm und benötigt somit eine Python-Umgebung auf dem Host.
In den meisten Linux-Distributionen wird Python bereits installiert sein und auch Solaris bringt seit geraumer Zeit Python 3.x mit.
Falls Sie Log-Dateien auf einem Windows-Host überwachen möchten, gibt es unterschiedliche Wege zum Ziel.</p></div>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Nutzer unserer kommerziellen Editionen können Logwatch komfortabel über die GUI konfigurieren und das Plugin mit der Agentenbäckerei in das Agentenpaket einfügen lassen.
Sobald Checkmk bemerkt, dass Sie ein Agentenplugin auf Basis von Python für einen Windows-Host konfigurieren, wird dem Agenten zusätzlich eine virtuelle Python-Umgebung (<code>venv</code>) mitgegeben.</p></div>
<div class="paragraph"><p>Sollten Sie zwar eine unserer kommerziellen Editionen, aber die Agentenbäckerei nicht nutzen, so können Sie für Ihre Windows-Hosts den nun folgenden Abschnitt zu Rate ziehen.</p></div>
<div class="sect2">
<h3 id="heading_python_windows">
<span class="hidden-anchor sr-only" id="python_windows"></span>2.1. Python für Windows in Checkmk Raw</h3>
<div class="sect3">
<h4 id="heading_install_python_venv">
<span class="hidden-anchor sr-only" id="install_python_venv"></span>Checkmk Python (<code>venv</code>) installieren</h4>
<div class="paragraph"><p>Das Installationspaket des Windows-Agenten aus Checkmk Raw enthält keine Python-Umgebung.
Eine entsprechende Cabinet-Datei liegt allerdings bereits auf Ihrem Checkmk-Server bereit.
Diese Datei namens <code>python-3.cab</code> finden Sie im Verzeichnis <code>~/share/check_mk/agents/windows</code> oder in Checkmk über <span class="guihint">Setup &gt; Agents &gt; Windows &gt; Windows Agent</span>.
Kopieren Sie diese Datei auf Ihren Windows-Host in das Verzeichnis <code>C:\Program Files (x86)\checkmk\service\install</code>.
Dort liegt bereits eine Datei mit diesem Namen und einer Dateigröße von 0 Byte.
Diese Datei müssen Sie mit der Version vom Checkmk-Server überschreiben.
Starten Sie anschließend den Service des Checkmk-Agenten neu.
In der Windows PowerShell mit Administratorrechten, können Sie das mit dem folgenden Befehl erledigen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">net stop checkmkservice; net start checkmkservice</span></code></pre></div></div>
<div class="paragraph"><p>Beim Neustart des Windows-Service wird die virtuelle Python-Umgebung automatisch installiert.</p></div>
</div>
<div class="sect3">
<h4 id="heading_install_full_python">
<span class="hidden-anchor sr-only" id="install_full_python"></span>Python vollständig installieren</h4>
<div class="paragraph"><p>Alternativ können Sie auch ein aktuelles Python-Paket von <a href="https://www.python.org/" target="_blank">python.org</a> herunterladen und installieren.
Achten Sie bei der Installation darauf, die folgenden Optionen zu aktivieren:</p></div>
<div class="ulist"><ul>
<li><p><span class="guihint">Install Python 3.x for all users</span>. Hierdurch wird auch automatisch die Option <span class="guihint">Precompile standard library</span> aktiviert und das ist auch gut so.</p></li>
<li><p><span class="guihint">Add Python to environment variables</span></p></li>
</ul></div>
<div class="paragraph"><p>Falls sie nach der Installation von Python gleich drauflos testen wollen, ist auch unbedingt ein Neustart von <code>checkmkservice</code> entweder über den Windows Task Manager oder mit den oben angegebenen Befehlen notwendig.
Sonst weiß der Service nämlich nichts von den neuen Umgebungsvariablen.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_monitor_logfiles">
<span class="hidden-anchor sr-only" id="monitor_logfiles"></span>3. Log-Dateien überwachen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_installation">
<span class="hidden-anchor sr-only" id="installation"></span>3.1. Installation auf dem Host</h3>
<div class="paragraph"><p>Beginnen Sie damit, das Agentenplugin zu installieren.
Kopieren Sie dazu die Datei <code>~/share/check_mk/agents/plugins/mk_logwatch.py</code> von Ihrem Checkmk-Server auf den Host in das Verzeichnis <code>/usr/lib/check_mk_agent/plugins/</code> (Linux) bzw. <code>C:\ProgramData\checkmk\agent\plugins</code> (Windows).
Achten Sie darauf, dass die Datei auf dem Host ausführbar ist.
Weitere Informationen zu diesem Schritt finden Sie jeweils im Abschnitt "Manuelle Installation" in den Artikeln <a href="agent_linux.html#manualplugins">Linux überwachen</a> und <a href="agent_windows.html#manual_installation_of_plugins">Windows überwachen</a>.</p></div>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Nutzer unserer kommerziellen Editionen können während der <a href="#configuration">Konfiguration der Regel</a> <span class="guihint">Text logfiles (Linux, Solaris, Windows)</span> die Option <span class="guihint">Deploy the Logwatch plugin and its configuration</span> auswählen und das Agentenplugin so automatisch mit dem Agenten ausrollen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_configuration">
<span class="hidden-anchor sr-only" id="configuration"></span>3.2. Konfiguration von Logwatch</h3>
<div class="paragraph"><p>Passend zu den anfänglichen Überlegungen überwacht Logwatch ohne Konfiguration nichts.
Deshalb ist es nach der Installation den Agentenplugins unerlässlich, eine Konfigurationsdatei vom dem überwachten Host anzulegen.</p></div>
<div class="sect3">
<h4 id="heading_configuration_bakery">
<span class="hidden-anchor sr-only" id="configuration_bakery"></span>Konfiguration über die Agentenbäckerei</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
In den kommerziellen Editionen rufen Sie zunächst die Regel für das Agentenplugin <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX &gt; Agent rules &gt; Text logfiles (Linux, Solaris, Windows)</span> auf.
Die Voreinstellung <span class="guihint">Deploy the Logwatch plugin and its configuration</span> sollte im Regelfall so belassen werden.
Falls Sie die Konfigurationsdatei <code>logwatch.cfg</code> allerdings auf einem anderen Weg auf den Host übertragen wollen oder müssen, steht hier noch die Option <span class="guihint">Deploy the Logwatch plugin without configuration</span> zur Verfügung.</p></div>
<div class="paragraph"><p>Weiter geht es mit der Option <span class="guihint">Retention period</span>.
Die Voreinstellung beträgt hier eine Minute, was auch dem voreingestellten Check-Intervall in Checkmk entspricht.
Der Wert sollte immer mindestens dem Check-Intervall entsprechen.
Diese Option ist in erster Linie dafür zuständig, dass keine Log-Meldungen durch eine Service-Erkennung oder die manuelle Ausführung von <code>cmk -d myhost</code> verloren gehen.
Weitere Details dazu finden Sie in der Inline-Hilfe der Option und im <a href="https://checkmk.com/werk/14451" target="_blank">Werk #14451</a> mit dem diese Option eingeführt wurde.</p></div>
<div class="paragraph"><p>Jetzt folgt die Sektion der Regel, wo es endlich richtig losgeht - <span class="guihint">Configure a logfile section</span>.
Und das beginnen wir direkt mit dem größten Stolperstein der vergangenen Jahre.
In dem Feld <span class="guihint">Patterns for logfiles to monitor</span> müssen Sie die Log-Dateien, die Sie überwachen wollen, benennen.
Dies können Sie einzeln und explizit oder mit sogenannten Glob Patterns (kurz: Glob) erledigen.
Wir verwenden an dieser Stelle das Python-Modul <code>glob</code>, zu dem es auf docs.python.org eine <a href="https://docs.python.org/3/library/glob.html" target="_blank">ausführliche Dokumentation</a> gibt.
Wir wollen Ihnen aber gleich hier ein paar hilfreiche Beispiele an die Hand geben.</p></div>
<div class="paragraph"><p>Schreiben Sie hier beispielsweise <code>/var/log/my.log</code> hinein, wird Logwatch eben diese eine Log-Datei überwachen.
Geben Sie hier stattdessen <code>/var/log/*log</code> ein, wird Logwatch alle Dateien, die auf die Zeichenfolge <code>log</code> enden und <strong>direkt</strong> im Verzeichnis <code>/var/log</code> liegen, überwachen.
Wollen Sie Log-Dateien in allen direkten Unterverzeichnissen von <code>/var/</code> überwachen, können Sie das beispielsweise mit dem folgenden Glob erledigen: <code>/var/*/*log</code>.
Das Glob <code>**</code> zum rekursiven Durchsuchen einer Verzeichnisstruktur bieten wir hier explizit <strong>nicht</strong> an, weil wir damit viel zu schnell bei viel zu großen Trefferlisten landen und den eigentlichen Einsatzzweck von Logwatch hinter uns lassen.</p></div>
<div class="paragraph"><p>Die folgende Tabelle gibt Ihnen noch ein paar hilfreiche Beispiele, wie Sie Globs verwenden können, um auch wirklich zu die Dateien zu überwachen, die der Überwachung bedürfen, ohne alle einzeln angeben zu müssen:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Glob Pattern</th>
<th class="tableblock halign-left valign-top">Erläuterung</th>
<th class="tableblock halign-left valign-top">Beispieltreffer</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alle Dateien in <code>/var/log</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/mylog</code> <code>/var/log/my.log</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/*/*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alle Dateien in allen direkten Unterverzeichnissen von <code>/var/log/</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/foo/mylog</code> <code>/var/log/bar/mylog</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/mylog?.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alle Dateien in <code>/var/log</code> deren Namen mit <code>mylog</code> beginnen, gefolgt von einem einzelnen Zeichen und mit <code>.log</code> enden.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/mylog1.log</code> <code>/var/log/mylog9.log</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/mylog[123].log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alle Dateien in <code>/var/log</code> deren Namen mit <code>mylog</code> beginnen, gefolgt von entweder einer <code>1</code>, <code>2</code> oder <code>3</code> und auf <code>.log</code> enden.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/log/mylog1.log</code> <code>/var/log/mylog3.log</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Wenn es also darum geht, welche Dateien im <strong>ersten</strong> Schritt "gematcht" werden, verwenden wir <strong>keine</strong> regulären Ausdrücke und womöglich genügt Ihnen das schon, um alle gewünschten Dateien zu erreichen.</p></div>
<div class="paragraph"><p>Wenn Sie jetzt allerdings weiter aussieben müssen, können Sie in einem zweiten Schritt mit der Option <span class="guihint">Regular expression for logfile filtering</span> reguläre Ausdrücke auf die Treffer aus Schritt 1 anwenden.</p></div>
<div class="paragraph"><p>Haben Sie also im ersten Schritt mit <code>/var/log/*</code> und <code>/var/log/*/*</code> alle Dateien in <code>/var/log/</code> und seinen direkten Unterverzeichnissen eingesammelt, könnten Sie mit dem regulären Ausdruck <code>error.log$|err$</code> die Trefferliste auf alle Dateien reduzieren, die auf <code>err.log</code> oder <code>err</code> enden.
Obacht: Der Punkt ist nun wieder ein beliebiges Zeichen.
Somit könnten dann zum Beispiel die Dateien <code>/var/log/apache2/error.log</code>, <code>/var/log/mail.err</code> und <code>/var/log/cups/error_log</code> übrig bleiben.</p></div>
<div class="paragraph"><p>Sie sehen also, dass wir Ihnen für Auswahl der überwachten Dateien bereits zwei gute und mächtige Werkzeuge an die Hand geben, damit Logwatch im nächsten Schritt sehr zügig durch eine überschaubare Dateiliste auch die weiteren Parameter bzw. Inhalte prüfen kann.
Zu Letzterem können Sie Ihre Kenntnisse im Artikel <a href="regexes.html">reguläre Ausdrücke in Checkmk</a> weiter vertiefen.</p></div>
<div class="paragraph"><p>Mit der Option <span class="guihint">Restrict the length of the lines</span> können Sie Logwatch anweisen, überlange Zeilen nach der vorgegebenen Anzahl an Zeichen abzuschneiden.</p></div>
<div class="paragraph"><p>Die folgende Option <span class="guihint">Watch the total size of the log file</span> bietet sich an, um eine defekte Log-Rotation zu erkennen.
Wenn Sie hier 100 MiB einstellen, erhalten Sie jedes Mal eine Warnung, wenn eine bestimmte Log-Datei erneut um die eingestellte Größe gewachsen ist.</p></div>
<div class="paragraph"><p>Die maximale Anzahl der Zeilen, die Logwatch pro Durchlauf und Datei prüft, lässt sich mit <span class="guihint">Restrict number of processed messages per cycle</span> einschränken und mit <span class="guihint">Restrict runtime of logfile parsing</span> können Sie dafür sorgen, dass Logwatch sich nicht zu lang an einer einzelnen Datei aufhält, die womöglich seit der letzten Prüfung mit abertausenden neuen Einträgen geflutet wurde.</p></div>
<div class="paragraph"><p>Wenn Sie eine der beiden letzteren Optionen aktivieren, müssen Sie auch festlegen, was bei einer Überschreitung des angegebenen Grenzwerts passieren soll.
Mit unserer Voreinstellung wird der zugehörige Service kritisch und Sie erhalten die Mitteilung, dass Zeilen übersprungen wurden bzw. dass die maximale Laufzeit überschritten wurde.</p></div>
<div class="paragraph"><p><span class="guihint">Handling of context messages</span> ist eine Option, mit der die Menge der übertragenen Daten sehr rasch sehr groß werden <strong>kann</strong>.
Überlegen Sie also genau, ob Ihnen nur die Log-Meldung wichtig ist, die Ihrer Ansicht nach ein <span class="state2">CRIT</span> oder <span class="state1">WARN</span> erzeugen soll, oder ob <strong>alle</strong> Zeilen, die seit dem letzten Durchlauf von Logwatch hinzugekommen sind, an den Checkmk-Server übertragen werden sollen.
Bei kleinen Log-Dateien, die minütlich nur um ein paar Zeilen anwachsen, ist die Einstellung <span class="guihint">Do transfer context</span> sicherlich unproblematisch.
Wenn aber auf einem Host aber 50 Log-Dateien überwacht werden, die plötzlich 100 000 neue Zeilen mit einer Länge von 500 Zeichen aufweisen, landen wir schon im Gigabyte-Bereich.
Womöglich würde es bei einem solchen Ereignis eben genügen zu sehen, dass seit der letzten Prüfung sehr viele neue Meldungen dazu gekommen sind, um eine Prüfung direkt auf dem betroffenen Host zu veranlassen.</p></div>
<div class="paragraph"><p>Sollten Sie den Kontext - also die Zeilen vor und nach einer für Sie wichtigen Log-Meldung - doch benötigen, so können Sie diesen mit der Option <span class="guihint">Limit the amount of context data sent to the monitoring server</span> auf eine bestimmte Zahl an Zeilen vorher und nachher beschränken.</p></div>
<div class="paragraph"><p>Mit <span class="guihint">Limit the amount of data sent to the monitoring server</span> beschränken Sie die Größe der übertragenen Daten ganz allgemein.</p></div>
<div class="paragraph"><p><span class="guihint">Process new logfiles from the beginning</span> ist standardmäßig abgeschaltet.
Dies führt mitunter zu Verwunderung, weil Logwatch Probleme, die in Log-Dateien stehen, nicht "erkennt" und an den Checkmk-Server weiterreicht.
Nach unserer Auffassung ist nichts älter als die Zeitung von gestern und so eben auch die Log-Meldungen, die <strong>vor dem ersten Durchlauf</strong> von Logwatch bereits in einer Log-Datei standen.
Bei diesem allerersten Durchlauf tut Logwatch nämlich nicht mehr, als sich zu notieren, wie viele Zeilen bereits in dem jeweiligen Log enthalten sind.
Erst beim zweiten Durchlauf werden die Dateien dann auf Ihren Inhalt - sprich die neu hinzugekommenen Zeilen - geprüft.</p></div>
<div class="paragraph"><p>Logwatch ist bei seiner Arbeit darauf angewiesen, die Log-Dateien auch tatsächlich lesen zu können.
Unter der Haube gibt sich Logwatch sehr viel Mühe, die Kodierung einer jeden Log-Datei zu erkennen.
Allzu exotische Zeichenkodierungen können aber dazu führen, dass es hier zu Problemen kommt.
Falls Sie die Zeichenkodierungen der überwachten Log-Dateien beeinflussen können, ist UTF-8 eine sehr gute Wahl.
Geht das nicht und schafft Logwatch es nicht, die Kodierung herauszufinden, können Sie mit <span class="guihint">Codec that should be used to decode the matching files</span> eine explizite Angabe machen.</p></div>
<div class="paragraph"><p>Mit <span class="guihint">Duplicated messages management</span> lässt sich wieder ein bisschen Bandbreite sparen und auch die spätere Ausgabe in Checkmk wird leserlicher, wenn Sie diese Option aktivieren.
Wenn Sie <span class="guihint">Filter out consecutive duplicated messages in the agent output</span> aktivieren, zählt Logwatch wie oft eine Zeile wiederholt wurde und schreibt dies entsprechend in den Output, statt die Zeilen zu wiederholen.</p></div>
<div class="paragraph"><p>Zu guter Letzt werden jetzt die für Sie interessanten Zeilen in den Log-Dateien per regulärem Ausdruck beschrieben und einem Zustand zugeordnet.
Wenn Sie möchten, dass jede Zeile, die das Wort <code>panic</code> enthält zu einem <span class="state2">CRIT</span> in Checkmk führt, genügt es hier nach einem Klick auf <span class="guihint">Add message pattern</span> unterhalb von <span class="guihint">Regular expressions for message classification</span> <code>panic</code> in das Feld <span class="guihint">Pattern(Regex)</span> einzutragen.
Die Funktion der weiteren angebotenen Optionen sind bereits sehr detailliert ist der Inline-Hilfe an dieser Stelle beschrieben und werden hier nicht dupliziert.</p></div>
<div class="paragraph"><p>Nur soviel: Der Zustand <span class="guihint">OK</span> mag auf den ersten Blick verwirren.
Er dient dazu, Zeilen aus einer Log-Datei erstmal an den Checkmk-Server zu übertragen, um dann dort erst die endgültige Klassifizierung vorzunehmen.
Und damit kommen wir zu einem wichtigen Punkt, der zeigt, wie flexibel Logwatch - bei richtigem Einsatz - sein kann.</p></div>
<div class="paragraph"><p>Alle Optionen, die in diesem Abschnitt erklärt wurden, werden zu Einträgen in der bereits erwähnten Konfigurationsdatei, die auf dem jeweiligen Host abgelegt wird.
Sollten Sie nun Änderungen an der Klassifizierung bestimmter Meldungen vornehmen wollen, kann es also sein, dass Sie zuerst die Regel editieren müssen, anschließend den Agenten backen und diesen installieren müssen.</p></div>
<div class="paragraph"><p>Alternativ können Sie aber erstmal alle interessanten Meldungen an den Checkmk-Server übertragen (beispielsweise eben mit dem Zustand <span class="state0">OK</span>) und diese dann im Anschluss mit der Regel <span class="guihint">Logfile patterns</span> auf dem Checkmk-Server (um-)klassifizieren.
Auf diesem Wege können Sie sich das Backen und Ausrollen des neuen Agenten sparen und müssen nach einer entsprechenden Anpassung der oben genannten Regel nur einmal schnell die Änderungen aktivieren.
Wie das genau geht, erfahren Sie weiter unten im Kapitel <a href="#logfile_patterns">Umklassifizieren mit Log-Datei-Mustern.</a></p></div>
</div>
<div class="sect3">
<h4 id="heading_configuration_manual">
<span class="hidden-anchor sr-only" id="configuration_manual"></span>Manuelle Konfiguration</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CRE.svg" alt="CRE" class="icon-left"></span>
In der <span class="image-inline"><img src="../images/icons/CRE.png" alt="CRE" width="20" title="Checkmk Raw"></span> <strong>Checkmk Raw</strong> konfigurieren Sie das Agentenplugin wie üblich über eine Textdatei.
Im Regelfall sucht Logwatch eine Datei namens <code>logwatch.cfg</code> in den Verzeichnissen <code>/etc/check_mk</code> (Linux) bzw. <code>c:\ProgramData\checkmk\agent\config\</code> (Windows).
Eine (fast) minimale Konfiguration könnte so aussehen:</p></div>
<div class="listingblock">
<div class="title">/etc/check_mk/logwatch.cfg</div>
<div class="content"><pre class="pygments highlight"><code><span></span>"/var/log/my.log" overflow=C nocontext=True
 C a critical message
 W something that should only trigger a warning</code></pre></div>
</div>
<div class="paragraph"><p>Zuerst geben Sie hier also immer ein Glob Pattern an, gefolgt von allen anzuwendenden Optionen.
Darauf folgt - mit einer Einrückung von einem Leerzeichen - zuerst ein Buchstabe, der den gewünschten Zustand bzw. die Funktion repräsentiert und schließend ein regulärer Ausdruck, der mit jeder Zeile der Log-Datei verglichen wird.
Mit obiger Konfiguration würden alle neuen Zeilen, die seit dem letzten Durchlauf von Logwatch in die Datei <code>/var/log/my.log</code> hinzugefügt wurden, auf die beiden Pattern <code>a critical message</code> und <code>something that should only trigger a warning</code> geprüft.</p></div>
<div class="paragraph"><p>Eine sehr umfangreiche Beispielkonfiguration finden Sie als Instanzbenutzer in der Datei <code>~/share/check_mk/agents/cfg_examples/logwatch.cfg</code>.</p></div>
<div class="paragraph"><p>Da alle Optionen, die Sie in einer solchen Konfigurationsdatei angeben können, bereits im Abschnitt <a href="#configuration_bakery">Konfiguration über Agentenbäckerei</a> erklärt wurden, folgt hier nur eine Auflistung samt Verweis.
Konsultieren Sie für die Erklärung den obigen Abschnitt.</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Option in <code>logwatch.cfg</code>
</th>
<th class="tableblock halign-left valign-top">Entsprechung</th>
<th class="tableblock halign-left valign-top">Beispiel</th>
<th class="tableblock halign-left valign-top">Anmerkung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>regex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Regular expression for logfile filtering</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>regex='error.log$|err$'</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>encoding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Codec that should be used to decode the matching files</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>encoding=utf-8</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxlines</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Restrict number of processed messages per cycle</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxlines=500</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxtime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Restrict runtime of logfile parsing</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxtime=23</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>overflow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of an overflow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>overflow=W</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxlinesize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Restrict the length of the lines</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxlinesize=123</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxoutputsize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Limit the amount of data sent to the monitoring server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxoutputsize=10485760</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Größe in Bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skipconsecutiveduplicated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Duplicated messages management</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skipconsecutiveduplicated=True</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nocontext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Handling of context messages</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nocontext=True</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxcontextlines</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Limit the amount of context data sent to the monitoring server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxcontextlines=55,66</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_logfile_grouping">
<span class="hidden-anchor sr-only" id="logfile_grouping"></span>4. Gruppierung von Log-Dateien</h2>
<div class="sectionbody">
<div class="paragraph"><p>Der zum Agentenplugin gehörige Check namens <code>logwatch</code> erstellt normalerweise für jede Log-Datei einen eigenen Service.
Durch die Definition von Gruppierungen mithilfe der Regel <span class="guihint">Logfile Grouping</span> können Sie auf den Check <code>logwatch_groups</code> umschalten.</p></div>
<div class="paragraph"><p>Weitere Informationen folgen demnächst.
Konsultieren Sie bis dahin die Inline-Hilfe der Regel <span class="guihint">Logfile Grouping.</span></p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_logfile_patterns">
<span class="hidden-anchor sr-only" id="logfile_patterns"></span>5. Umklassifizieren mit Log-Datei-Mustern</h2>
<div class="sectionbody"><div class="paragraph"><p>Dieser Abschnitt folgt zeitnah. Konsultieren Sie bis dahin die Inline-Hilfe der Regel <span class="guihint">Logfile patterns.</span></p></div></div>
</div>
<div class="sect1">
<h2 id="heading__weiterleitung_an_die_event_console">
<span class="hidden-anchor sr-only" id="_weiterleitung_an_die_event_console"></span>6. Weiterleitung an die Event Console</h2>
<div class="sectionbody"><div class="paragraph"><p>Neben der direkten Verarbeitung von Log-Meldungen in Checkmk und einer etwaigen Umklassifizierung mit der Regel <span class="guihint">Logfile patterns</span>, gibt es auch noch die Möglichkeit, durch Logwatch gewonnene Log-Zeilen an die <a href="glossar.html#ec">Event Console</a> weiterzuleiten.
Dies geschieht mithilfe der Regel <span class="guihint">Logwatch Event Console Forwarding</span> und wird im Artikel <a href="ec.html#logwatch">Die Event Console</a> beschrieben.</p></div></div>
</div>
<div class="sect1">
<h2 id="heading__logwatch_im_monitoring">
<span class="hidden-anchor sr-only" id="_logwatch_im_monitoring"></span>7. Logwatch im Monitoring</h2>
<div class="sectionbody">
<div class="paragraph"><p>Im Monitoring unterscheidet sich die Darstellung je nach verwendetem Check-Plugin.</p></div>
<div class="paragraph"><p>Verwenden Sie entweder <code>logwatch</code> oder <code>logwatch_groups</code>, finden Sie - nach der notwendigen Service-Erkennung - pro Log-Datei bzw. pro Gruppierung von Log-Dateien (siehe <a href="#logfile_grouping">Gruppierung von Log-Dateien</a>) einen Service der mit <code>Log</code> beginnt.
Darauf folgt der vollständige Pfad der Datei bzw. der Gruppenname.</p></div>
<div class="paragraph"><p>Wenn Sie ihre Log-Meldungen hingegen and die Event Console weiterleiten, sehen Sie je nach Einstellung der Regel <span class="guihint">Logwatch Event Console Forwarding</span> pro Weiterleitung einen Service, der Sie über die Zahl der weitergeleiteten Log-Meldungen informiert.
Bei der gebündelten Weiterleitung durch das Plugin <code>logwatch_ec</code> heißt dieser Service <span class="guihint">Log Forwarding</span>.
Wenn Sie die Option <span class="guihint">Separate check</span> und damit das Plugin <code>logwatch_ec_single</code> verwenden, beginnt der Service-Name auch wieder mit <code>Log</code> gefolgt von dem Pfad der Log-Datei.
Auch dieser Service informiert Sie dann über die Anzahl der weitergeleiteten Meldungen und darüber, wenn eine Log-Datei nicht gelesen werden kann.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_files">
<span class="hidden-anchor sr-only" id="files"></span>8. Dateien und Verzeichnisse</h2>
<div class="sectionbody">
<div class="paragraph"><p>Alle Pfadangaben für den Checkmk-Server sind relativ zum Instanzverzeichnis (z.B. <code>/omd/sites/mysite</code>) angegeben.</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 39%;">
<col style="width: 46%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Ort</th>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk-Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/cfg_examples/logwatch.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beispielkonfigurationsdatei</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk-Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/plugins/mk_logwatch.py</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python-3-Agentenplugin inklusive Erläuterungen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Checkmk-Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/plugins/mk_logwatch_2.py</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python-2-Agentenplugin inklusive Erläuterungen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/check_mk/logwatch.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsdatei - von der Agentenbäckerei oder manuell erstellt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/check_mk_agent/logwatch.state.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">State-Dateien von mk_logwatch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/var/lib/check_mk_agent/logwatch-batches/*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speicherort der einzelnen Batches, die mk_logwatch pro Abfrage erzeugt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c:\ProgramData\checkmk\agent\config\logwatch.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Konfigurationsdatei - von der Agentenbäckerei oder manuell erstellt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c:\ProgramData\checkmk\agent\state</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ablageort für die State-Dateien von mk_logwatch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows-Host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c:\ProgramData\checkmk\agent\state\logwatch-batches</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Speicherort der einzelnen Batches, die mk_logwatch pro Abfrage erzeugt</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#basics">1. Wesentliches zur Überwachung von Log-Dateien</a></li>
<li>
<a href="#prereqisites">2. Voraussetzungen</a><ul class="sectlevel1"><li>
<a href="#python_windows">2.1. Python für Windows in Checkmk Raw</a><ul class="sectlevel2">
<li><a href="#install_python_venv">Checkmk Python (<code>venv</code>) installieren</a></li>
<li><a href="#install_full_python">Python vollständig installieren</a></li>
</ul>
</li></ul>
</li>
<li>
<a href="#monitor_logfiles">3. Log-Dateien überwachen</a><ul class="sectlevel1">
<li><a href="#installation">3.1. Installation auf dem Host</a></li>
<li>
<a href="#configuration">3.2. Konfiguration von Logwatch</a><ul class="sectlevel2">
<li><a href="#configuration_bakery">Konfiguration über die Agentenbäckerei</a></li>
<li><a href="#configuration_manual">Manuelle Konfiguration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#logfile_grouping">4. Gruppierung von Log-Dateien</a></li>
<li><a href="#logfile_patterns">5. Umklassifizieren mit Log-Datei-Mustern</a></li>
<li><a href="#_weiterleitung_an_die_event_console">6. Weiterleitung an die Event Console</a></li>
<li><a href="#_logwatch_im_monitoring">7. Logwatch im Monitoring</a></li>
<li><a href="#files">8. Dateien und Verzeichnisse</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
