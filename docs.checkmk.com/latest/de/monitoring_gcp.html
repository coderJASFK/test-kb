<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="Wie Sie ohne Agent Google Cloud Run, Cloud SQL, Cloud Functions, GCE, GCS und Memorystore/Redis oder ihre Kosten überwachen und nahtlos in Checkmk integrieren, wird hier beschrieben.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Google Cloud Platform (GCP) überwachen">
<meta name="og:description" content="Wie Sie ohne Agent Google Cloud Run, Cloud SQL, Cloud Functions, GCE, GCS und Memorystore/Redis oder ihre Kosten überwachen und nahtlos in Checkmk integrieren, wird hier beschrieben.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Google Cloud Platform (GCP) überwachen</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/en/monitoring_gcp.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/monitoring_gcp.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/de/monitoring_gcp.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Benachrichtigungen per SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">MSSQL mit dem Legacy-Plugin überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring mit Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Übersicht der API-Ressourcen</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Google Cloud Platform (GCP) überwachen</h1>
<div class="details">
<span id="revdate">Last modified on 07-Jun-2023</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/common/de/monitoring_gcp.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="https://checkmk.com/de/integrations" target="_blank">Katalog der Check-Plugins</a>
<a href="dcd.html">Dynamische Host-Konfiguration</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__einleitung">
<span class="hidden-anchor sr-only" id="_einleitung"></span>1. Einleitung</h2>
<div class="sectionbody">
<div class="imageblock inline-image"><div class="content"><img src="../images/logo_google_cloud.png" alt="logo google cloud" width="120"></div></div>
<div class="paragraph"><p>Checkmk enthält ein umfangreiches Monitoring von Google Cloud Platform (GCP), welches aus einem Konnektor zu GCP und einer stattlichen Sammlung von Check-Plugins besteht, die für Sie verschiedenste Metriken und Zustände abrufen und auswerten.</p></div>
<div class="paragraph"><p>Neben den allgemeinen Informationen zu den <a href="https://checkmk.com/de/integrations/gcp_cost" target="_blank">Kosten</a> Ihrer Google Cloud
und dem aktuellen <a href="https://checkmk.com/de/integrations/gcp_status" target="_blank">Status</a> der Google-Dienste in Ihrer Region,
können Sie mit allen Editionen von Checkmk ab Version <span class="new">2.2.0</span> die folgenden Google Cloud-Produkte überwachen:</p></div>
<div class="ulist"><ul>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_gce" target="_blank">Compute Engine (GCE)</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_gcs" target="_blank">Cloud Storage (GCS)</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_filestore" target="_blank">Filestore</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_sql" target="_blank">Cloud SQL</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_http_lb" target="_blank">Cloud Load Balancing</a></p></li>
</ul></div>
<div class="paragraph"><p>Mit <span class="image-inline"><img src="../images/icons/CSE.png" alt="CSE" width="20" title="Checkmk Cloud"></span> <strong>Checkmk Cloud</strong> und <span class="image-inline"><img src="../images/icons/CME.png" alt="CME" width="20" title="Checkmk MSP"></span> <strong>Checkmk MSP</strong> können Sie darüber hinaus noch die folgenden Produkte in Ihr Monitoring aufnehmen:</p></div>
<div class="ulist"><ul>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_function" target="_blank">Cloud Functions</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_run" target="_blank">Cloud Run</a></p></li>
<li><p><a href="https://checkmk.com/de/integrations?distributions%5B%5D=check_mk&amp;distributions%5B%5D=check_mk_cloud&amp;search=gcp_redis" target="_blank">Memorystore for Redis</a></p></li>
</ul></div>
<div class="paragraph"><p>Eine vollständige Auflistung aller verfügbaren Check-Plugins für die Überwachung von GCP finden Sie in unserem <a href="https://checkmk.com/de/integrations?tags=gcp" target="_blank">Katalog der Check-Plugins</a> und wie Sie Ihre GKE-Cluster (Google Kubernetes Engine) ins Monitoring aufnehmen, beschreiben wir im Artikel <a href="monitoring_kubernetes.html">Kubernetes überwachen</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_implementation_gcp">
<span class="hidden-anchor sr-only" id="implementation_gcp"></span>2. Konkrete Umsetzung der GCP-Überwachung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__hosts_und_services">
<span class="hidden-anchor sr-only" id="_hosts_und_services"></span>2.1. Hosts und Services</h3>
<div class="paragraph"><p>In Checkmk ordnen sich alle zu überwachenden Objekte in eine hierarchische Struktur von Hosts und Services ein.
Nun gibt es bei Cloud-basierten Diensten das Konzept von Hosts in dieser Form nicht.
Um die Einfachheit und Konsistenz von Checkmk zu bewahren, bilden wir GCP-Objekte auf das Schema Host/Service ab.
Jedes Ihrer Projekte in der Google Cloud wird dabei einem eigenen Host in Checkmk zugewiesen.
Alle Cloud-Produkte, die Sie in diesem Projekt überwachen möchten, werden dann auf mehrere Services auf diesem speziellen Host aufgeteilt.</p></div>
<div class="paragraph"><p>Ein kleines Projekt, in dem nur eine Compute Engine-VM läuft, kann dann in der Überwachung in Checkmk so aussehen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_example_host.png" alt="monitoring gcp example host"></div></div>
</div>
<div class="sect2">
<h3 id="heading__zugriff_auf_gcp">
<span class="hidden-anchor sr-only" id="_zugriff_auf_gcp"></span>2.2. Zugriff auf GCP</h3>
<div class="paragraph"><p>GCP stellt eine HTTP-basierte API bereit, über die auch Monitoring-Daten abrufbar sind.
Checkmk greift auf diese API über den <a href="glossar.html#special_agent">Spezialagenten</a> <code>agent_gcp</code> zu.
Dieser tritt an die Stelle des Checkmk-Agenten, wird aber - anders als dieser - lokal auf dem Checkmk-Server ausgeführt.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_preparation_gcp">
<span class="hidden-anchor sr-only" id="preparation_gcp"></span>3. GCP für Checkmk vorbereiten</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_acquire_project_id">
<span class="hidden-anchor sr-only" id="acquire_project_id"></span>3.1. Projekt-ID besorgen</h3>
<div class="paragraph"><p>Melden Sie sich in der <a href="https://console.cloud.google.com" target="_blank">Konsole von Google Cloud</a> an.
Achten Sie darauf, dass in der Titelzeile das korrekte Projekt ausgewählt ist bzw. wählen Sie hier das zu überwachende Projekt aus.</p></div>
<div class="paragraph"><p>Öffnen Sie dann das Dashboard des Projekts.
Hier sollten Sie - wenn das Dashboard noch dem Standard entspricht - eine Karte finden auf der die <span class="guihint">Project ID</span> angegeben ist.
Kopieren oder notieren Sie diese.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_project_info.png" alt="monitoring gcp project info" width="56%"></div></div>
<div class="paragraph"><p>Sollte die Karte mit den Projektinformationen nicht mehr Teil Ihres Dashboards sein, finden Sie die notwendige ID auch über die <span class="guihint">Project settings:</span></p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_project_settings.png" alt="monitoring gcp project settings" width="30%"></div></div>
</div>
<div class="sect2">
<h3 id="heading__benutzer_anlegen">
<span class="hidden-anchor sr-only" id="_benutzer_anlegen"></span>3.2. Benutzer anlegen</h3>
<div class="paragraph"><p>Öffnen Sie als nächstes die Benutzerverwaltung unter <span class="guihint">IAM &amp; Admin</span>.
In der Übersicht auf der linken Seite müssen Sie nun <span class="guihint">Service Accounts</span> auswählen und dann oben auf <span class="guihint">Create Service Account</span> klicken.
Legen Sie anschließend einen Namen für den Service Account fest.
Wir empfehlen hier einen Namen zu vergeben, der sofort klar macht, wofür dieser Account da ist, bspw. <code>checkmk-monitoring</code>.
Zusätzlich zu einem sprechenden Namen können Sie optional noch eine Beschreibung - eine Service Account Description - angeben.
Nach einem Klick auf <span class="guihint">Create and continue</span> müssen Sie diesem Service-Account noch die beiden Rollen <em>Monitoring Viewer</em> und <em>Cloud Asset Viewer</em> zuweisen.
Klicken Sie dafür jeweils in das Feld <span class="guihint">Select a role</span> und geben Sie den Rollennamen ein.</p></div>
<div class="paragraph"><p><strong>Achtung:</strong> Wenn Sie <em>Monitoring Viewer</em> in das Feld eingeben, werden Ihnen eine ganze Reihe Rollen mit ähnlichen Namen angezeigt.
Achten Sie darauf tatsächlich <em>Monitoring Viewer</em> zu wählen.</p></div>
<div class="paragraph"><p>Nach der Auswahl der Rollen, können Sie den nächsten optionalen Schritt überspringen und direkt auf <span class="guihint">Done</span> klicken.</p></div>
</div>
<div class="sect2">
<h3 id="heading_create_key">
<span class="hidden-anchor sr-only" id="create_key"></span>3.3. Schlüssel erzeugen</h3>
<div class="paragraph"><p>Damit Sie über diesen neuen Service Account auch tatsächlich auf die Monitoring- und Asset-Daten Ihrer Google Cloud zugreifen können, müssen Sie noch einen Schlüssel erzeugen.
Diesen hinterlegen Sie später in der entsprechenden Regel in Checkmk bzw. im <span class="guihint">Password store</span>.</p></div>
<div class="paragraph"><p>In der Übersicht <span class="guihint">Service accounts for project My Project</span> können Sie dazu in der Zeile Ihres neuen Service Accounts auf die drei Punkte klicken und dort <span class="guihint">Manage keys</span> auswählen.
Klicken Sie sodann auf <span class="guihint">Add key</span> und dann auf <span class="guihint">Create new key</span>.
Wählen Sie als Format unbedingt <code>JSON</code> aus und klicken Sie auf <span class="guihint">Create</span>.
Mit diesem Klick auf <span class="guihint">Create</span> wird - leicht übersehbar - eine Datei im JSON-Format heruntergeladen.
Bewahren Sie diese Datei vorübergehend gut auf, da Sie sie <strong>nicht</strong> erneut herunterladen können.
Wir empfehlen allerdings, auch diese Datei zu löschen, nachdem Sie deren Inhalt in Checkmk hinterlegt haben (siehe <a href="#agent_rule">Regel für GCP-Agenten anlegen</a>).
Bei Bedarf sollte ein neuer Schlüssel erzeugt und der alte gänzlich verworfen werden.</p></div>
</div>
<div class="sect2">
<h3 id="heading_enable_apis">
<span class="hidden-anchor sr-only" id="enable_apis"></span>3.4. APIs im GCP-Projekt aktivieren</h3>
<div class="paragraph"><p>Auf der Übersichtsseite Ihres GCP-Projekts finden Sie auch den Menüpunkt <span class="guihint">APIs &amp; Services</span>.
Überprüfen Sie in dieser Übersicht, ob die <code>Cloud Asset API</code> in der Liste der <span class="guihint">Enabled APIs &amp; services</span> auftaucht.
Wenn dem nicht der Fall ist, aktivieren Sie diese API über den Knopf <span class="guihint">Enable APIs and services</span>.
Nach der Aktivierung dauert es noch einige Minute bis die API auch tatsächlich ansprechbar ist.</p></div>
</div>
<div class="sect2">
<h3 id="heading__abrechnungsinformationen_überwachen">
<span class="hidden-anchor sr-only" id="_abrechnungsinformationen_überwachen"></span>3.5. Abrechnungsinformationen überwachen</h3>
<div class="paragraph"><p>In der Google Cloud Platform werden Abrechnungsinformationen separat von den Ressourcen gespeichert.
Im Regelfall werden dazu eigene Projekte für die Kostenanalyse in GCP angelegt, in welchen dann wiederum die Abrechnungsinformationen für andere Projekte gesammelt werden.
Um diese Informationen auch mit Checkmk überwachen zu können ist es unerlässlich, dass diese Daten innerhalb der GCP nach BigQuery exportiert werden.
Nur Daten, die in Tabellen von BigQuery vorliegen sind von außen - und somit für Checkmk - abrufbar.
Wie ein solcher Export innerhalb von GCP eingerichtet wird, wird in dem Dokument <a href="https://cloud.google.com/billing/docs/how-to/export-data-bigquery?hl=de" target="_blank">Cloud Billing-Daten nach BigQuery exportieren</a> der GCP-Hilfe ausführlich erklärt.</p></div>
<div class="paragraph"><p>Wenn Sie BigQuery eingerichtet haben bzw. ohnehin bereits nutzen, finden Sie im <span class="guihint">SQL-Arbeitsbereich</span> des Abrechnungsprojekts eine Auflistung der enthaltenen Tabellen.
Öffnen Sie die Tabelle des Abrechnungsprojekts und klicken Sie auf den Reiter <span class="guihint">Details.</span>
Unter <span class="guihint">Tabellen-ID</span> finden Sie die Information, die Sie beim Anlegen der Regel in Checkmk unter <span class="guihint">Costs &gt; BigQuery table ID</span> eintragen müssen.</p></div>
<div class="paragraph"><p>Der Service für die Überwachung der Projektkosten ist als Übersicht ausgelegt.
Es werden ausschließlich die monatlichen Kosten der einzelnen Projekte angezeigt und überwacht.
Schwellwerte für diese monatlichen Kosten können Sie mit der Regel <span class="guihint">GCP Cost</span> festlegen.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_configure_cmk">
<span class="hidden-anchor sr-only" id="configure_cmk"></span>4. Monitoring in Checkmk konfigurieren</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_create_host">
<span class="hidden-anchor sr-only" id="create_host"></span>4.1. Host für GCP anlegen</h3>
<div class="paragraph"><p>Legen Sie für die Überwachung von GCP nun einen Host in Checkmk an.
Den Host-Namen können Sie nach Belieben vergeben.
Wenn Sie mehrere Projekte in GCP überwachen wollen, müssen Sie für jedes Projekt einen eigenen Host in Checkmk anlegen.</p></div>
<div class="paragraph"><p><strong>Wichtig:</strong> Da GCP als Dienst weder eine IP-Adresse noch einen DNS-Namen hat (den Zugriff macht der Spezialagent von selbst), müssen Sie die <span class="guihint">IP address family</span> auf <span class="guihint">No IP</span> einstellen.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_no_ip.png" alt="monitoring gcp no ip"></div></div>
</div>
<div class="sect2">
<h3 id="heading_agent_rule">
<span class="hidden-anchor sr-only" id="agent_rule"></span>4.2. Den GCP-Agenten konfigurieren</h3>
<div class="paragraph"><p>Wie eingangs erwähnt werden Projekte auf der Google Cloud Platform von einem <a href="glossar.html#special_agent">Spezialagenten</a> überwacht.
Dieser wird mit einer Regel konfiguriert, welche Sie über <span class="guihint">Setup &gt; Agents &gt; VM, cloud, container &gt; Google Cloud Platform (GCP)</span> finden.</p></div>
<div class="paragraph"><p>Tragen Sie hier im entsprechenden Feld die <span class="guihint">Project ID</span> ein, welche Sie zuvor <a href="#acquire_project_id">in Ihrem Projekt nachgeschlagen</a> haben.</p></div>
<div class="paragraph"><p>Unter <span class="guihint">JSON credentials for service account</span> muss als nächstes der Schlüssel eingetragen werden, welchen Sie <a href="#create_key">für Ihren Service Account erzeugt</a> haben.
Sie müssen hier das gesamte JSON-Objekt (inklusive der geschweiften Klammern) hineinkopieren.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_id_and_key.png" alt="monitoring gcp id and key"></div></div>
<div class="paragraph"><p>Unter <span class="guihint">GCP services to monitor</span> können Sie nun auswählen, welche GCP-Produkte durch den Spezialagenten überwacht werden sollen.
Um die API-Abfragen möglichst sparsam zu gestalten, empfehlen wir nur die Produkte auszuwählen, die tatsächlich in Ihrem Projekt verwendet werden.</p></div>
</div>
<div class="sect2">
<h3 id="heading__services_auf_dem_gcp_host_selbst">
<span class="hidden-anchor sr-only" id="_services_auf_dem_gcp_host_selbst"></span>4.3. Services auf dem GCP-Host selbst</h3>
<div class="paragraph"><p>Starten Sie nun eine <a href="glossar.html#service_discovery">Service-Erkennung</a> des neu angelegten GCP-Hosts, wo Checkmk nun etliche Services finden sollte.
Nachdem Sie die Services hinzugefügt haben, sieht das nach einem <a href="glossar.html#activate_changes">Aktivieren der Änderungen</a> im Monitoring etwa so aus:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_services.png" alt="monitoring gcp services"></div></div>
</div>
<div class="sect2">
<h3 id="heading_vm-hosts">
<span class="hidden-anchor sr-only" id="vm-hosts"></span>4.4. Hosts für die Compute Engine VM-Instanzen anlegen</h3>
<div class="paragraph"><p>Services, die Compute Engine VM-Instanzen zugeordnet sind, werden nicht dem GCP-Host zugeordnet, sondern sogenannten <a href="glossar.html#piggyback">Piggyback-Hosts</a>.
Dies funktioniert so, dass Daten, die vom GCP-Host abgerufen wurden, an diese Piggyback-Hosts, die ohne eigene Monitoring-Agenten arbeiten, verteilt werden.
Dabei wird jeder VM-Instanz ein Piggyback-Host zugeordnet.
Die Namen dieser Piggyback-Hosts setzen sich aus der ID Ihres Projekts, einem Unterstrich und dem vollständigen Namen der Instanz zusammen.
Wenn Ihr Projekt beispielsweise die Projekt-ID <code>my-project-19001216</code> trägt und Sie dann eine VM mit dem Namen <code>my-instance01</code> überwachen, heißt der Piggyback-Host <code>my-project-19001216_my-instance01</code>.
Legen Sie diese Hosts entweder von Hand an oder - falls möglich - überlassen Sie diese Aufgabe der dynamischen Host-Verwaltung.</p></div>
<div class="sect3">
<h4 id="heading__dynamische_host_verwaltung_einrichten">
<span class="hidden-anchor sr-only" id="_dynamische_host_verwaltung_einrichten"></span>Dynamische Host-Verwaltung einrichten</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Als Nutzer einer unserer kommerziellen Editionen können Sie die Erstellung und Löschung von Hosts für Ihre VM-Instanzen einfach der <a href="dcd.html">dynamischen Host-Verwaltung</a> überlassen.
Der Menüeintrag <span class="guihint">Setup &gt; Hosts &gt; Dynamic host management</span> bringt Sie zur Übersichtsseite aller bereits konfigurierten Verbindungen.
Klicken Sie hier auf <span class="image-inline"><img src="../images/icons/icon_new.png" alt="icon new"></span> <span class="guihint">Add connection</span> und geben Sie der Verbindung anschließend eine <span class="guihint">ID</span> und einen <span class="guihint">Title.</span></p></div>
<div class="paragraph"><p>Im Folgenden werden nicht alle Optionen der <span class="guihint">Connection properties</span> behandelt.
Konsultieren Sie bei Fragen die Inline-Hilfe und den oben verlinkten Hauptartikel.</p></div>
<div class="paragraph"><p>Stellen Sie zuerst sicher, dass für den Kasten <span class="guihint">Connection properties</span> der <a href="intro_gui.html#show_less_more">Show-more-Modus</a> aktiviert ist, damit alle verfügbaren Optionen angezeigt werden.</p></div>
<div class="paragraph"><p>Klicken Sie als nächstes unter <span class="guihint">Piggyback creation options</span> auf <span class="guihint">Add new element</span>.
Passen Sie den Ordner an, in dem die Hosts Ihrer VM-Instanzen erstellt werden sollen.
Die vorausgewählten <span class="guihint">Host attributes</span> sind für Piggyback-Hosts im Grunde korrekt und bedürfen eher nicht der Anpassung.</p></div>
<div class="paragraph"><p>Mit dem Aktivieren der Option <span class="guihint">Delete vanished hosts</span> können Sie dafür sorgen, dass Piggyback-Hosts, für die über einen bestimmten Zeitraum keine frischen Daten mehr kommen, automatisch wieder gelöscht werden.</p></div>
<div class="paragraph"><p>Im Rahmen der Überwachung Ihrer GCP-Projekte sollte die Option <span class="guihint">Restrict source hosts</span> aktiviert werden.
Tragen Sie hier Ihren GCP-Host aus dem Abschnitt <a href="#create_host">Host für GCP in Checkmk anlegen</a> ein.</p></div>
<div class="paragraph"><p>Eine exemplarische Konfiguration der Verbindung könnte dann so aussehen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_connection_properties.png" alt="Exemplarische Konfiguration der Connection Properties."></div></div>
</div>
<div class="sect3">
<h4 id="heading__hosts_für_vm_instanzen_manuell_anlegen">
<span class="hidden-anchor sr-only" id="_hosts_für_vm_instanzen_manuell_anlegen"></span>Hosts für VM-Instanzen manuell anlegen</h4>
<div class="paragraph"><p>Alternativ können Sie Hosts für die Piggyback-Daten auch manuell anlegen.
Dabei ist es wichtig, dass die Namen der Hosts exakt dem <a href="#vm-hosts">oben beschriebenen Schema</a> entsprechen.</p></div>
<div class="paragraph"><p><strong>Tipp:</strong> Mit dem Skript <code>find_piggy_orphans</code> aus dem Treasures-Verzeichnis finden Sie alle Piggyback-Hosts, für die es zwar Daten gibt, die aber noch nicht als Hosts in Checkmk angelegt sind:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>share/doc/check_mk/treasures/find_piggy_orphans
<span class="tok-go">my-project-19001216_my-instance01</span>
<span class="tok-go">my-project-19001216_my-instance02</span></code></pre></div></div>
<div class="paragraph"><p>Konfigurieren Sie die Hosts für diese Compute Engine VMs ohne IP-Adresse (analog zum GCP-Host) und wählen Sie als Monitoring-Agent <span class="guihint">No API integrations, no Checkmk agent</span> aus.
Wenn Sie unter <span class="guihint">Piggyback</span> auch noch die Option <span class="guihint">Always use and expect piggyback data</span> wählen, werden Sie beim Ausbleiben der Daten entsprechend gewarnt.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_add_host_for_piggyback_data.png" alt="monitoring gcp add host for piggyback data"></div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__diagnosemöglichkeiten">
<span class="hidden-anchor sr-only" id="_diagnosemöglichkeiten"></span>5. Diagnosemöglichkeiten</h2>
<div class="sectionbody"><div class="sect2">
<h3 id="heading__der_service_exceptions">
<span class="hidden-anchor sr-only" id="_der_service_exceptions"></span>5.1. Der Service Exceptions</h3>
<div class="paragraph"><p>Um Sie bei der Einrichtung des GCP-Monitorings zu unterstützen und auch zukünftig bei Problemen in der Kommunikation mit der Google Cloud API zu helfen, gibt es den Service <span class="guihint">Exceptions</span>.
Hier werden alle Fehlermeldungen, welche die Google Cloud API an den Spezialagenten zurückliefert, gesammelt und aufbereitet.
Im Fehlerfall wird dieser Service standardmäßig <span class="state2">CRIT</span> und gibt bereits in der <span class="guihint">Summary</span> einen Hinweis darauf, wo das Problem liegt.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_exceptions.png" alt="monitoring gcp exceptions"></div></div>
<div class="paragraph"><p>Nach einem Klick auf den Namen des Services erhalten Sie dann eine sehr detaillierte Meldung, die oft einen Link an genau die Stelle in Ihrem GCP-Projekt enthält, an der es beispielsweise einer anderen Einstellung bedarf.
In folgendem Beispiel ist die <span class="guihint">Cloud Asset API</span> im überwachten Projekt deaktiviert.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_exceptions_details.png" alt="monitoring gcp exceptions details"></div></div>
<div class="paragraph"><p>Ein Klick auf den WWW-Globus <span class="image-inline"><img src="../images/icons/icon_link.png" alt="icon link"></span> bringt Sie dann genau auf die Seite in Ihrem Projekt, auf der sich diese API aktivieren lässt.</p></div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_dashboards">
<span class="hidden-anchor sr-only" id="dashboards"></span>6. Dashboards</h2>
<div class="sectionbody">
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Zum komfortablen Einstieg in die Überwachung von GCP liefert Checkmk ab Checkmk Cloud die beiden eingebauten <a href="glossar.html#dashboard">Dashboards</a> <span class="guihint">GCP GCE instances</span> und <span class="guihint">GCP storage buckets</span> mit aus.
Beide finden Sie im Monitoring als Menüeinträge unter <span class="guihint">Monitor &gt; Cloud.</span></p></div>
<div class="paragraph"><p>Damit Sie einen direkten Eindruck bekommen, finden Sie nachfolgend zwei Beispiele, wie diese Dashboards aufgebaut sind.
Zuerst das Dashboard zu den Compute-Engine-Instanzen, bei der Sie auf der linken Seite den aktuellen Zustand und auf der rechten Seite den zeitlichen Verlauf der wichtigsten Metriken vergleichen können:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_dashboard_vm.png" alt="Dashboard zu den GCP Compute-Engine-Instanzen."></div></div>
<div class="paragraph"><p>Das Dashboard zu den Storage Buckets ist ganz ähnlich aufgebaut.
Auf der linken Seite finden Sie aktuelle Daten der jeweiligen Buckets.
Auf der rechten werden wieder die wichtigsten Metriken im zeitlichen Verlauf dargestellt:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_gcp_dashboard_storage.png" alt="Dashboard zu den GCP Storage Buckets."></div></div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#_einleitung">1. Einleitung</a></li>
<li>
<a href="#implementation_gcp">2. Konkrete Umsetzung der GCP-Überwachung</a><ul class="sectlevel1">
<li><a href="#_hosts_und_services">2.1. Hosts und Services</a></li>
<li><a href="#_zugriff_auf_gcp">2.2. Zugriff auf GCP</a></li>
</ul>
</li>
<li>
<a href="#preparation_gcp">3. GCP für Checkmk vorbereiten</a><ul class="sectlevel1">
<li><a href="#acquire_project_id">3.1. Projekt-ID besorgen</a></li>
<li><a href="#_benutzer_anlegen">3.2. Benutzer anlegen</a></li>
<li><a href="#create_key">3.3. Schlüssel erzeugen</a></li>
<li><a href="#enable_apis">3.4. APIs im GCP-Projekt aktivieren</a></li>
<li><a href="#_abrechnungsinformationen_%C3%BCberwachen">3.5. Abrechnungsinformationen überwachen</a></li>
</ul>
</li>
<li>
<a href="#configure_cmk">4. Monitoring in Checkmk konfigurieren</a><ul class="sectlevel1">
<li><a href="#create_host">4.1. Host für GCP anlegen</a></li>
<li><a href="#agent_rule">4.2. Den GCP-Agenten konfigurieren</a></li>
<li><a href="#_services_auf_dem_gcp_host_selbst">4.3. Services auf dem GCP-Host selbst</a></li>
<li>
<a href="#vm-hosts">4.4. Hosts für die Compute Engine VM-Instanzen anlegen</a><ul class="sectlevel2">
<li><a href="#_dynamische_host_verwaltung_einrichten">Dynamische Host-Verwaltung einrichten</a></li>
<li><a href="#_hosts_f%C3%BCr_vm_instanzen_manuell_anlegen">Hosts für VM-Instanzen manuell anlegen</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#_diagnosem%C3%B6glichkeiten">5. Diagnosemöglichkeiten</a><ul class="sectlevel1"><li><a href="#_der_service_exceptions">5.1. Der Service Exceptions</a></li></ul>
</li>
<li><a href="#dashboards">6. Dashboards</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
