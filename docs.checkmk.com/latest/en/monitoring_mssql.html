<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="With the Checkmk plug-in for Windows and Linux you can fully monitor Microsoft SQL Server.">
<meta name="keywords" content="mssql, sql, db, database">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Monitoring Microsoft SQL Server">
<meta name="og:description" content="With the Checkmk plug-in for Windows and Linux you can fully monitor Microsoft SQL Server.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Monitoring Microsoft SQL Server</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/de/monitoring_mssql.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/en/monitoring_mssql.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/en/monitoring_mssql.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginnerâ€™s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and derivatives</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation from Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation from AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Password store</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs for GUI extensions</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automated host creation</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Rules</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Notifications</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Notifications via ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Notifications via Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Notifications via SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Monitoring log files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">Monitoring MSSQL with the legacy plug-in</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMware ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Monitoring Google Cloud Platform (GCP)</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">Monitoring OpenShift</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring with Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Measured values and graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Custom notes</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Overview of API resources</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">The Checkmk REST API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Developing extensions for Checkmk</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Writing agent-based check plug-ins</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">Writing SNMP-based check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Monitoring Microsoft SQL Server</h1>
<div class="details">
<span id="revdate">draft</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/common/en/monitoring_mssql.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">This page was exported for offline usage on 2025-01-07 22:12:14 +0000. It may not reflect the current state of the Checkmk documentation. To view a daily updated version, visit <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a>.</div>
<div class="sectionbody">
<div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="agent_windows.html">Monitoring Windows</a>
<a href="wato_monitoringagents.html">Monitoring agents</a>
<a href="https://checkmk.com/integrations" target="_blank">Catalog of Check Plug-ins</a>
</div>
</div>
</div>
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>This article is currently under construction and is being expanded on a regular basis.</p></div></td>
</tr></table></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_intro">
<span class="hidden-anchor sr-only" id="intro"></span>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>Checkmk enables you to comprehensively monitor Microsoft SQL Server (abbreviated to 'MSSQL' in this article).
You can find a complete list of all available <a href="glossar.html#check_plugin">check plug-ins</a> in our <a href="https://checkmk.com/integrations?tags=mssql" target="_blank">Catalog of Check Plug-ins</a>.</p></div>
<div class="paragraph"><p>In order to be able to monitor the databases, you just need the <a href="glossar.html#agent_plugin">agent plug-in</a> <code>mk-sql</code> in addition to the Checkmk agent.
As of Checkmk <span class="new">2.3.0</span>, this agent plug-in is also able to monitor databases on remote systems.
No additional software is required either on the Checkmk server or on the database server.</p></div>
<div class="paragraph"><p>The only mandatory requirement for the use of <code>mk-sql</code> is that the TCP/IP protocol is activated in the SQL server network configuration.
If TCP/IP is not permitted or allowed in your MSSQL server environment, until further notice you will have to fall back to the <a href="monitoring_mssql_legacy.html"><code>mssql.vbs</code> legacy plug-in</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_setup_login">
<span class="hidden-anchor sr-only" id="setup_login"></span>2. Setting up a login for the monitoring</h2>
<div class="sectionbody">
<div class="paragraph"><p>The agent plug-in requires access to your MSSQL instances.
As a rule, it will be clearâ€‰â€”â€‰long before the monitoring team arrivesâ€‰â€”â€‰what such access can or may look like.
In the case of MSSQL, there are two options.
Either you exclusively use the <span class="guihint">Windows Authentication mode</span> or the mixed mode <span class="guihint">SQL Server and Windows Authentication mode</span>.
In the following two sections, we explain what to look out for in these respective procedures.</p></div>
<div class="sect2">
<h3 id="heading_system_user">
<span class="hidden-anchor sr-only" id="system_user"></span>2.1. Using the system user (Windows only)</h3>
<div class="paragraph"><p>The Checkmk agent is executed by the system user (<code>NT AUTHORITY\SYSTEM</code>) on Windows systems.
If you can also use this system user for monitoring MSSQL, you only need to make sure that this login has at least permissions for the following securable elements (<span class="guihint">Securables</span>):</p></div>
<div class="ulist"><ul>
<li><p><span class="guihint">View server state</span></p></li>
<li><p><span class="guihint">Connect SQL</span></p></li>
</ul></div>
<div class="paragraph"><p>Depending on which of your instances' databases you want to monitor and depending on which server roles and mappings the system user (<code>NT AUTHORITY\SYSTEM</code>) already has, it may also be necessary to grant permission for <span class="guihint">Connect any database</span>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_dedicated_login">
<span class="hidden-anchor sr-only" id="dedicated_login"></span>2.2. Using a dedicated account for the monitoring</h3>
<div class="paragraph"><p>There are also good reasons for <strong>not</strong> running MSSQL monitoring via the Windows system user,
the most banal reason being that there is no Windows system user on Linux systems.
Further reasons can include security requirements within the company or simply the desire to have dedicated and clearly named logins, the meanings and functions of which can be readily recognized from their names.</p></div>
<div class="paragraph"><p>The agent plug-in of course also works with such logins.</p></div>
<div class="paragraph"><p>The basic requirement in MSSQL is that the <span class="guihint">Server authentication</span> is set to <span class="guihint">SQL Server and Windows Authentication mode</span>.
If you do not want to or cannot use the Windows system user, this requirement should already have been met, but this point should not go unmentioned.</p></div>
<div class="paragraph"><p>If there is no corresponding user on your MSSQL server or in your instance, you can create one using the Microsoft SQL Server Management Studio:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_new_user.png" alt="Selecting the 'New Login...' option in MSSQL."></div></div>
<div class="paragraph"><p>This login requires the following permissions:</p></div>
<div class="ulist"><ul>
<li><p><span class="guihint">View server state</span></p></li>
<li><p><span class="guihint">Connect SQL</span></p></li>
<li><p><span class="guihint">Connect any database</span></p></li>
</ul></div>
<div class="paragraph"><p>Grant these permissions in the <span class="guihint">Object Explorer</span> via <span class="guihint">Security &gt; Logins</span>.
Open the properties of the login and click on <span class="guihint">Securables</span>.
Under <span class="guihint">Explicit</span> you will find the three entries mentioned above.
Set the corresponding check marks in the <span class="guihint">Grant</span> column and confirm with <span class="guihint">OK</span>.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mssql_permissions.png" alt="Grant 'Connect any database' permission."></div></div>
<div class="paragraph"><p>Alternatively, you can also create the user and the permissions via the command line.
In the following example, this is done for the user <code>checkmk</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mssql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-n">USE</span><span class="tok-w"> </span><span class="tok-n">master</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">CREATE</span><span class="tok-w"> </span><span class="tok-k">USER</span><span class="tok-w"> </span><span class="tok-n">checkmk</span><span class="tok-w"> </span><span class="tok-k">WITH</span><span class="tok-w"> </span><span class="tok-n">PASSWORD</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-s1">'MyPassword123'</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GO</span></code></pre></div></div>
<div class="paragraph"><p>and then:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mssql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-n">USE</span><span class="tok-w"> </span><span class="tok-n">master</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-k">CONNECT</span><span class="tok-w"> </span><span class="tok-k">SQL</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-n">checkmk</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-k">CONNECT</span><span class="tok-w"> </span><span class="tok-k">ANY</span><span class="tok-w"> </span><span class="tok-k">DATABASE</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-n">checkmk</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-k">VIEW</span><span class="tok-w"> </span><span class="tok-k">ANY</span><span class="tok-w"> </span><span class="tok-k">DATABASE</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-n">checkmk</span><span class="tok-p">;</span>
<span class="tok-w">      </span><span class="tok-k">GO</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__setting_up_the_connection_manually">
<span class="hidden-anchor sr-only" id="_setting_up_the_connection_manually"></span>3. Setting up the connection manually</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you use <span class="image-inline"><img src="../images/icons/CRE.png" alt="CRE" width="20" title="Checkmk Raw"></span> <strong>Checkmk Raw</strong> or do not want to use the Agent Bakery of the commercial editions, set up the communication manually.</p></div>
<div class="paragraph"><p>For the rest of the description, we will assume that the agent for Windows monitoring has already been installed on the host.</p></div>
<div class="sect2">
<h3 id="heading__creating_the_configuration_file">
<span class="hidden-anchor sr-only" id="_creating_the_configuration_file"></span>3.1. Creating the configuration file</h3>
<div class="paragraph"><p>On the Windows host, create a <code>mk-sql.yml</code> file in the directory specified below:</p></div>
<div class="paragraph"><p>If you are using the system user, this will be sufficient:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\config\mk-sql.yml</div>
<div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-nn">---</span>
<span class="tok-nt">mssql</span><span class="tok-p">:</span>
<span class="tok-w">  </span><span class="tok-nt">main</span><span class="tok-p">:</span>
<span class="tok-w">    </span><span class="tok-nt">authentication</span><span class="tok-p">:</span>
<span class="tok-w">      </span><span class="tok-nt">username</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">''</span>
<span class="tok-w">      </span><span class="tok-nt">type</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">integrated</span></code></pre></div>
</div>
<div class="paragraph"><p>If instead you work with the <a href="#dedicated_login">dedicated account for monitoring</a>, you will need the following content:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\config\mk-sql.yml</div>
<div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-nn">---</span>
<span class="tok-nt">mssql</span><span class="tok-p">:</span>
<span class="tok-w">  </span><span class="tok-nt">main</span><span class="tok-p">:</span>
<span class="tok-w">    </span><span class="tok-nt">authentication</span><span class="tok-p">:</span>
<span class="tok-w">      </span><span class="tok-nt">username</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">checkmk</span>
<span class="tok-w">      </span><span class="tok-nt">password</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">MyPassword123</span>
<span class="tok-w">      </span><span class="tok-nt">type</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">sql_server</span></code></pre></div>
</div>
<div class="paragraph"><p>If you are running multiple MSSQL instances with individual user names and passwords on the host, add the details of these instances to the <code>yml</code> file accordingly.
Your <code>yml</code> file could then look like this, for example:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\config\mk-sql.yml</div>
<div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-nn">---</span>
<span class="tok-nt">mssql</span><span class="tok-p">:</span>
<span class="tok-w">  </span><span class="tok-nt">main</span><span class="tok-p">:</span>
<span class="tok-w">    </span><span class="tok-nt">authentication</span><span class="tok-p">:</span>
<span class="tok-w">      </span><span class="tok-nt">username</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">""</span>
<span class="tok-w">      </span><span class="tok-nt">type</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">integrated</span>
<span class="tok-w">    </span><span class="tok-nt">instances</span><span class="tok-p">:</span>
<span class="tok-w">      </span><span class="tok-p tok-p-Indicator">-</span><span class="tok-w"> </span><span class="tok-nt">sid</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">myInstance 1</span>
<span class="tok-w">        </span><span class="tok-nt">auth</span><span class="tok-p">:</span>
<span class="tok-w">          </span><span class="tok-nt">username</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">myUser1</span>
<span class="tok-w">          </span><span class="tok-nt">password</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">"123456"</span>
<span class="tok-w">          </span><span class="tok-nt">type</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">sql_server</span>
<span class="tok-w">      </span><span class="tok-p tok-p-Indicator">-</span><span class="tok-w"> </span><span class="tok-nt">sid</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">myInstance 2</span>
<span class="tok-w">        </span><span class="tok-nt">auth</span><span class="tok-p">:</span>
<span class="tok-w">          </span><span class="tok-nt">username</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">myUser2</span>
<span class="tok-w">          </span><span class="tok-nt">password</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s">"987654"</span>
<span class="tok-w">          </span><span class="tok-nt">type</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">sql_server</span></code></pre></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__installing_the_agent_plug_in">
<span class="hidden-anchor sr-only" id="_installing_the_agent_plug_in"></span>3.2. Installing the agent plug-in</h3>
<div class="paragraph"><p>Under <span class="guihint">Setup &gt; Agents &gt; Windows files</span> you will find the file <code>mk-sql.exe</code> in the <span class="guihint">Windows Agent</span> section.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_agentfile.png" alt="Selection of the Checkmk agent plug-in."></div></div>
<div class="paragraph"><p>Download the file and save this on the Windows host in the directory <code>C:\ProgramData\checkmk\agent\plugins\</code>.
Then execute the file once.</p></div>
</div>
<div class="sect2">
<h3 id="heading__configuring_services">
<span class="hidden-anchor sr-only" id="_configuring_services"></span>3.3. Configuring services</h3>
<div class="paragraph"><p>Now that you have installed and configured the agent plug-in, you can perform a <a href="glossar.html#service_discovery">service discovery</a> for this host.
The following screenshot shows only a selection of the services that can be found:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_discovery.png" alt="Extract from the service discovery."></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_extended_configuration">
<span class="hidden-anchor sr-only" id="extended_configuration"></span>4. Extended configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__asynchronous_execution_of_the_agent_plug_in">
<span class="hidden-anchor sr-only" id="_asynchronous_execution_of_the_agent_plug_in"></span>4.1. Asynchronous execution of the agent plug-in</h3>
<div class="paragraph"><p>The agent plug-in for monitoring MSSQL canâ€‰â€”â€‰like so many othersâ€‰â€”â€‰be executed asynchronously, to take account of longer runtimes for large MSSQL instances for example.</p></div>
<div class="paragraph"><p>To run the agent plug-in asynchronously under Windows, modify the configuration of the agent and add the following entry to the <code>execution</code> section under <code>plugins</code>:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\check_mk.user.yml</div>
<div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-nt">plugins</span><span class="tok-p">:</span>
<span class="tok-w">    </span><span class="tok-nt">execution</span><span class="tok-p">:</span>
<span class="tok-w">        </span><span class="tok-p tok-p-Indicator">-</span><span class="tok-w"> </span><span class="tok-nt">pattern</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">mssql.vbs</span>
<span class="tok-w">          </span><span class="tok-nt">cache_age</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">300</span>
<span class="tok-w">          </span><span class="tok-nt">async</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">yes</span></code></pre></div>
</div>
<div class="paragraph"><p>You can find detailed instructions explaining the asynchronous execution of agent plug-ins on a Windows host in the article on the <a href="agent_windows.html#customizeexecution">Windows agent</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading__configuring_thresholds">
<span class="hidden-anchor sr-only" id="_configuring_thresholds"></span>4.2. Configuring thresholds</h3>
<div class="sect3">
<h4 id="heading__monitoring_connections">
<span class="hidden-anchor sr-only" id="_monitoring_connections"></span>Monitoring connections</h4>
<div class="paragraph"><p>You can specify your own thresholds for the utilization of the maximum number of simultaneous connections specified by MSSQL, as these are much more dependent on the structure of your MSSQL instance than with other services.
You can set up the corresponding thresholds in no time at all using a rule from the <span class="guihint">MSSQL Connections</span> rule set.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_connections.png" alt="Setting the upper thresholds for active connections."></div></div>
</div>
<div class="sect3">
<h4 id="heading__monitoring_file_sizes">
<span class="hidden-anchor sr-only" id="_monitoring_file_sizes"></span>Monitoring file sizes</h4>
<div class="paragraph"><p>You can also define thresholds for the sizes of individual files in MSSQL.
To do this, use the rule set <span class="guihint">MSSQL datafile sizes.</span></p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_size_datafile.png" alt="Setting the file sizes used."></div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_bakery">
<span class="hidden-anchor sr-only" id="bakery"></span>5. Configuration using the Agent Bakery</h2>
<div class="sectionbody">
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Setup is greatly simplified in the commercial editions using the <a href="glossar.html#agent_bakery">Agent Bakery</a>, as syntax errors in the configuration files are avoided and adjustments to changing environments can be made easily.
The main difference compared to a manual installation is that you will only need to work on the MSSQL host on the command line if you want to make special MSSQL-specific configurations.</p></div>
<div class="paragraph"><p>For the initial setup, it is sufficient to create a corresponding rule in the agent bakery.
You can find the rule set under <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX &gt; Agent rules.</span>
You can then search for <code>mssql</code> in the search field:</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_bakery_ruleset_search.png" alt="The rule 'Microsoft SQL Server (Linux, Windows)' in the agent rules."></div></div>
<div class="paragraph"><p>Depending on how the agent plugin is allowed to log in to your SQL server (see <a href="#setup_login">Setting up a login for monitoring</a>), select the appropriate option under <span class="guihint">Authentication</span>.
If you use the system user (<code>NT AUTHORITY\SYSTEM</code>), leave the selection at <span class="guihint">Local Integrated Authentication (Windows)</span>.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_bakery_new.png" alt="Possible settings for the MSSQL server in the agent bakery."></div></div>
<div class="paragraph"><p>Instead, use the <em>SQL Server Authentication</em>, select the <span class="guihint">SQL Database User Credentials</span> option, also enter the <span class="guihint">Login name</span> in the <span class="guihint">User</span> field and add the corresponding <span class="guihint">Password</span>.</p></div>
<div class="paragraph"><p>If you are running multiple MSSQL instances with different user names and passwords on the host, select the <span class="guihint">Custom instances</span> option.
Use <span class="guihint">Add new element</span> to access the details for the firstâ€‰â€”â€‰and then each additionalâ€‰â€”â€‰instance to be monitored.
Enter the access data for each instance here, as described above.</p></div>
<div class="imageblock"><div class="content"><img src="../images/monitoring_mssql_bakery_more.png" alt="Multiple MSSQL instances in the Bakery rule."></div></div>
<div class="sect2">
<h3 id="heading__further_options">
<span class="hidden-anchor sr-only" id="_further_options"></span>5.1. Further options</h3>
<div class="paragraph"><p>With the settings you have just made, you first create a simple agent for monitoring your MSSQL instance, which is located directly on the host.
All available data is evaluated directly in Checkmk and this should be sufficient for a standard setup.
However, if you have a more complex MSSQL world in your organization, there are further options, both for monitoring the database on the same host and for monitoring it on a remote host.
These are basically the same for both connection types.</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Connection</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you need more specific connection data for the general connection to the MS SQL server, you can enter it here.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Data to collect (Sections)</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Here you can restrict section by section which data should be collected or whether it should be collected synchronously or asynchronously.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Cache age for asynchronous checks</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You can change the caching period in seconds for the previously defined asynchronous checks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Map data to specific host (Piggyback)</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="glossar.html#piggyback">Piggyback</a> data can be assigned to a host regardless of the actual source. For example, the SQL information can be separated from the data of the underlying Windows server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Discovery mode of databases</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Settings for the instance search.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Custom instances</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In addition to the general settings for accessing your MS SQL Server, you can make your own settings for specific instances here.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Options</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of parallel SQL Server connections can be set here.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_diagnostic">
<span class="hidden-anchor sr-only" id="diagnostic"></span>6. Diagnostic options</h2>
<div class="sectionbody"><div class="sect2">
<h3 id="heading__possible_errors_and_error_messages">
<span class="hidden-anchor sr-only" id="_possible_errors_and_error_messages"></span>6.1. Possible errors and error messages</h3>
<div class="sect3">
<h4 id="heading__error_message_failed_to_gather_sql_server_instances">
<span class="hidden-anchor sr-only" id="_error_message_failed_to_gather_sql_server_instances"></span>Error message: Failed to gather SQL Server instances</h4>
<div class="paragraph"><p>Check whether the TCP/IP connection is configured and working.</p></div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_files">
<span class="hidden-anchor sr-only" id="files"></span>7. Files and directories</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__on_the_mssql_host_windows">
<span class="hidden-anchor sr-only" id="_on_the_mssql_host_windows"></span>7.1. On the MSSQL host (Windows)</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">File path</th>
<th class="tableblock halign-left valign-top">Content</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\plugins\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory for storing the agent plug-ins.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\config\mk-sql.yml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration file for the agent plug-in.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="heading__on_the_mssql_host_linux">
<span class="hidden-anchor sr-only" id="_on_the_mssql_host_linux"></span>7.2. On the MSSQL host (Linux)</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">File path</th>
<th class="tableblock halign-left valign-top">Content</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/lib/check_mk_agent/plugins/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory for storing the agent plug-ins.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/check_mk/mk-sql.yml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration file for the agent plug-in.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="heading__on_the_checkmk_server">
<span class="hidden-anchor sr-only" id="_on_the_checkmk_server"></span>7.3. On the Checkmk server</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">File path</th>
<th class="tableblock halign-left valign-top">Content</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/windowss/mk-sql.exe</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agent plug-in you have to copy to your Windows hosts, in order to monitor MS SQL there.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/linux/mk-sql</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agent plug-in you have to copy to your Linux hosts, in order to monitor MS SQL there.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#intro">1. Introduction</a></li>
<li>
<a href="#setup_login">2. Setting up a login for the monitoring</a><ul class="sectlevel1">
<li><a href="#system_user">2.1. Using the system user (Windows only)</a></li>
<li><a href="#dedicated_login">2.2. Using a dedicated account for the monitoring</a></li>
</ul>
</li>
<li>
<a href="#_setting_up_the_connection_manually">3. Setting up the connection manually</a><ul class="sectlevel1">
<li><a href="#_creating_the_configuration_file">3.1. Creating the configuration file</a></li>
<li><a href="#_installing_the_agent_plug_in">3.2. Installing the agent plug-in</a></li>
<li><a href="#_configuring_services">3.3. Configuring services</a></li>
</ul>
</li>
<li>
<a href="#extended_configuration">4. Extended configuration</a><ul class="sectlevel1">
<li><a href="#_asynchronous_execution_of_the_agent_plug_in">4.1. Asynchronous execution of the agent plug-in</a></li>
<li>
<a href="#_configuring_thresholds">4.2. Configuring thresholds</a><ul class="sectlevel2">
<li><a href="#_monitoring_connections">Monitoring connections</a></li>
<li><a href="#_monitoring_file_sizes">Monitoring file sizes</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#bakery">5. Configuration using the Agent Bakery</a><ul class="sectlevel1"><li><a href="#_further_options">5.1. Further options</a></li></ul>
</li>
<li>
<a href="#diagnostic">6. Diagnostic options</a><ul class="sectlevel1"><li>
<a href="#_possible_errors_and_error_messages">6.1. Possible errors and error messages</a><ul class="sectlevel2"><li><a href="#_error_message_failed_to_gather_sql_server_instances">Error message: Failed to gather SQL Server instances</a></li></ul>
</li></ul>
</li>
<li>
<a href="#files">7. Files and directories</a><ul class="sectlevel1">
<li><a href="#_on_the_mssql_host_windows">7.1. On the MSSQL host (Windows)</a></li>
<li><a href="#_on_the_mssql_host_linux">7.2. On the MSSQL host (Linux)</a></li>
<li><a href="#_on_the_checkmk_server">7.3. On the Checkmk server</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
