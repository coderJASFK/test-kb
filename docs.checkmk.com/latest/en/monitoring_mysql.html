<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="With the Checkmk plug-in for Windows, Linux, Solaris and AIX you can fully monitor MySQL.">
<meta name="keywords" content="sql, db, database, oracle">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Monitoring MySQL">
<meta name="og:description" content="With the Checkmk plug-in for Windows, Linux, Solaris and AIX you can fully monitor MySQL.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Monitoring MySQL</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/de/monitoring_mysql.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/en/monitoring_mysql.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/en/monitoring_mysql.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginner’s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and derivatives</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation from Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation from AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Password store</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs for GUI extensions</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automated host creation</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Rules</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Notifications</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Notifications via ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Notifications via Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Notifications via SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Monitoring log files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">Monitoring MSSQL with the legacy plug-in</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMware ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Monitoring Google Cloud Platform (GCP)</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">Monitoring OpenShift</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring with Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Measured values and graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Custom notes</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Overview of API resources</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">The Checkmk REST API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Developing extensions for Checkmk</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Writing agent-based check plug-ins</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">Writing SNMP-based check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Monitoring MySQL</h1>
<div class="details">
<span id="revdate">Last modified on 30-Dec-2021</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/common/en/monitoring_mysql.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">This page was exported for offline usage on 2025-01-07 22:12:14 +0000. It may not reflect the current state of the Checkmk documentation. To view a daily updated version, visit <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a>.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="agent_linux.html">Monitoring Linux</a>
<a href="wato_monitoringagents.html">Monitoring agents</a>
<a href="https://checkmk.com/integrations" target="_blank">Catalog of Check Plug-ins</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__introduction">
<span class="hidden-anchor sr-only" id="_introduction"></span>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>Checkmk allows you to comprehensively monitor MySQL and Galera clusters for MySQL.
You can find a complete list of monitoring options in our <a href="https://checkmk.com/integrations?tags=mysql" target="_blank">Catalog of Check Plug-ins</a>.
Among other things, Checkmk can monitor the following:</p></div>
<div class="ulist"><ul>
<li><p><a href="https://checkmk.com/integrations/mysql_sessions" target="_blank">MySQL: Sessions</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_galeradonor" target="_blank">MySQL: Galera Donor</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_galerasize" target="_blank">MySQL: Galera Size</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_galerastartup" target="_blank">MySQL: Galera Cluster Addresses (Startup)</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_galerastatus" target="_blank">MySQL: Galera Status</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_galerasync" target="_blank">MySQL: Galera Sync Status</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_connections" target="_blank">MySQL: Maximum Connection Usage since Startup</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_replica_slave" target="_blank">MySQL: Replica/Slave Sync Status</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_ping" target="_blank">MySQL: Status of Daemon</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_innodb_io" target="_blank">MySQL: IO Statistics of InnoDB Engine</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql" target="_blank">MySQL: Version</a></p></li>
<li><p><a href="https://checkmk.com/integrations/mysql_capacity" target="_blank">MySQL: Capacity</a></p></li>
</ul></div>
<div class="paragraph"><p>In order to be able to monitor the databases, besides the Checkmk agent you
only need the agent plug-in on the database server. Additional
software is neither required on the Checkmk, nor on the database server.</p></div>
<div class="paragraph"><p>Next, we will describe setting up MySQL monitoring for Linux and Windows hosts.
Later we will go into setting up using the <a href="#bakery">Agent Bakery</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__setting_up_the_monitoring">
<span class="hidden-anchor sr-only" id="_setting_up_the_monitoring"></span>2. Setting up the monitoring</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_benutzereinrichten">
<span class="hidden-anchor sr-only" id="benutzereinrichten"></span>2.1. Creating a user</h3>
<div class="sect3">
<h4 id="heading__linux_and_windows">
<span class="hidden-anchor sr-only" id="_linux_and_windows"></span>Linux and Windows</h4>
<div class="paragraph"><p>The only requirement for setting up monitoring within MySQL is that a
database user and its password must be available. This user only needs reading
rights to the MySQL instances. If such a user does not yet exist, create it in
the instances to be monitored. To do this, log on to MySQL with a user with
sufficient access rights, and then create a new database user:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mysql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-k">CREATE</span><span class="tok-w"> </span><span class="tok-k">USER</span><span class="tok-w"> </span><span class="tok-s1">'checkmk'</span><span class="tok-o">@</span><span class="tok-s1">'localhost'</span><span class="tok-w"> </span><span class="tok-n">IDENTIFIED</span><span class="tok-w"> </span><span class="tok-k">BY</span><span class="tok-w"> </span><span class="tok-s1">'MyPassword'</span><span class="tok-p">;</span></code></pre></div></div>
<div class="paragraph"><p>This newly created user needs authorization to read the instances. Therefore,
check whether the user has the necessary permissions, or add them with the
following command. The following example does this for the user <code>checkmk</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mysql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-k">SELECT</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-k">SHOW</span><span class="tok-w"> </span><span class="tok-n">DATABASES</span><span class="tok-w"> </span><span class="tok-k">ON</span><span class="tok-w"> </span><span class="tok-o">*</span><span class="tok-p">.</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-s1">'checkmk'</span><span class="tok-o">@</span><span class="tok-s1">'localhost'</span><span class="tok-p">;</span></code></pre></div></div>
<div class="paragraph"><p>If you use MySQL replication, the user must at least have the REPLICATION CLIENT
right to monitor the replica server:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mysql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-n">REPLICATION</span><span class="tok-w"> </span><span class="tok-n">CLIENT</span><span class="tok-w"> </span><span class="tok-k">ON</span><span class="tok-w"> </span><span class="tok-o">*</span><span class="tok-p">.</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-s1">'checkmk'</span><span class="tok-o">@</span><span class="tok-s1">'localhost'</span><span class="tok-p">;</span></code></pre></div></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__installing_the_plug_in">
<span class="hidden-anchor sr-only" id="_installing_the_plug_in"></span>2.2. Installing the plug-in</h3>
<div class="sect3">
<h4 id="heading__linux">
<span class="hidden-anchor sr-only" id="_linux"></span>Linux</h4>
<div class="paragraph"><p>The required <code>mk_mysql</code> plug-in can be found on your Checkmk server in the
<code>~/share/check_mk/agents/plugins/</code> directory. As a first step, copy this
plug-in into the plug-ins directory for the <a href="agent_linux.html#manualplugins">agent</a>
on the host to be monitored. The plug-ins directory is usually
<code>/usr/lib/check_mk_agent/plugins/</code>. As soon as the script is in the
specified directory, make it executable:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>chmod<span class="tok-w"> </span><span class="tok-m">700</span><span class="tok-w"> </span>mk_mysql</code></pre></div></div>
<div class="paragraph"><p>This plug-in can of course also be run <a href="agent_linux.html#async_plugins">asynchronously</a> if required.</p></div>
</div>
<div class="sect3">
<h4 id="heading__windows">
<span class="hidden-anchor sr-only" id="_windows"></span>Windows</h4>
<div class="paragraph"><p>The Agent for Windows comes with a number of plug-ins as standard.
That is why you will also find the plug-in for monitoring MySQL on your host
after installing the agent. Simply copy this into the correct directory for use.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="powershell"><span></span><span class="tok-n">PS</span><span class="tok-p">&gt;</span> <span class="tok-nb">copy </span><span class="tok-s2">"c:\Program Files (x86)\checkmk\service\plugins\mk_mysql.vbs"</span> <span class="tok-n">c</span><span class="tok-p">:\</span><span class="tok-n">ProgramData</span><span class="tok-p">\</span><span class="tok-n">checkmk</span><span class="tok-p">\</span><span class="tok-n">agent</span><span class="tok-p">\</span><span class="tok-n">plugins</span><span class="tok-p">\</span></code></pre></div></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__creating_the_configuration_file">
<span class="hidden-anchor sr-only" id="_creating_the_configuration_file"></span>2.3. Creating the configuration file</h3>
<div class="paragraph"><p>The configuration file that you create below - or <a href="#bakery">via the Agent Bakery</a> - is used as the only source for the MySQL monitoring settings.
Any other configuration settings that may exist locally are not taken into account by Checkmk.</p></div>
<div class="sect3">
<h4 id="heading__linux_2">
<span class="hidden-anchor sr-only" id="_linux_2"></span>Linux</h4>
<div class="paragraph"><p>Then create a file with the name <code>mysql.cfg</code> in the
<a href="agent_linux.html#pluginconfig">configuration directory</a> (regular:
<code>/etc/check_mk/</code>) for the Checkmk agent on the target host.</p></div>
<div class="paragraph"><p>The agent can retrieve the desired information from your MySQL instance using the user data entered in it.
Although the specification of a database user is optional, we recommend this as the agent usually runs the plug-in as the system user <em>root</em>.
If no database user name is specified, the MySQL client attempts to access the database with the user name of the executing system user without using a password, or by using the password stored in <code>.mylogin.cnf</code>.
Further information can be found, for example, in the <a href="https://dev.mysql.com/doc/refman/9.1/en/option-files.html" target="_blank">MySQL documentation</a>.</p></div>
<div class="paragraph"><p>This is done in the usual format for MySQL configuration files:</p></div>
<div class="listingblock">
<div class="title">/etc/check_mk/mysql.cfg</div>
<div class="content"><pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[client]</span>
<span class="tok-na">user</span><span class="tok-o">=</span><span class="tok-s">checkmk</span>
<span class="tok-na">password</span><span class="tok-o">=</span><span class="tok-s">MyPassword</span></code></pre></div>
</div>
<div class="paragraph"><p>Saving the access data with the following command protects against unauthorized access:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>chmod<span class="tok-w"> </span><span class="tok-m">400</span><span class="tok-w"> </span>mysql.cfg</code></pre></div></div>
</div>
<div class="sect3">
<h4 id="heading__windows_2">
<span class="hidden-anchor sr-only" id="_windows_2"></span>Windows</h4>
<div class="paragraph"><p>On a Windows host, create a file named <code>mysql.ini</code> in the directory below:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\config\mysql.ini</div>
<div class="content"><pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[client]</span>
<span class="tok-na">user</span><span class="tok-o">=</span><span class="tok-s">checkmk</span>
<span class="tok-na">password</span><span class="tok-o">=</span><span class="tok-s">MyPassword</span></code></pre></div>
</div>
<div class="paragraph"><p>If you run multiple MySQL instances with different user names and passwords on
the host, simply create one <code>.ini</code> file per instance using the following naming
scheme: <code>mysql_INSTANCE-ID.ini</code></p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__creating_services">
<span class="hidden-anchor sr-only" id="_creating_services"></span>2.4. Creating services</h3>
<div class="paragraph"><p>Now that you have installed and configured the plug-in, you can perform a
<a href="hosts_setup.html#services">service discovery</a> for this host. The following screenshot
shows only a selection of the services that can be found:</p></div>
<div class="imageblock"><div class="content"><img src="../images/mysql_discovery.png" alt="mysql discovery"></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__advanced_configuration">
<span class="hidden-anchor sr-only" id="_advanced_configuration"></span>3. Advanced configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__executing_a_plug_in_asynchronously">
<span class="hidden-anchor sr-only" id="_executing_a_plug_in_asynchronously"></span>3.1. Executing a plug-in asynchronously</h3>
<div class="paragraph"><p>The plug-in for monitoring MySQL like so many others can be run
asynchronously, for example to take longer runtimes into account for large
MySQL instances.</p></div>
<div class="sect3">
<h4 id="heading__linux_3">
<span class="hidden-anchor sr-only" id="_linux_3"></span>Linux</h4>
<div class="paragraph"><p>On a Linux host, the plug-in is only moved to a subdirectory of the plug-in
directory. For example, if you only want to run the plug-in every 5 minutes,
simply move the <code>mk_mysql</code> script to a subdirectory called <code>300</code>.
Detailed instructions for the asynchronous execution of plugins can be found in
the <a href="agent_linux.html#async_plugins">article on the Linux agent</a>.</p></div>
</div>
<div class="sect3">
<h4 id="heading__windows_3">
<span class="hidden-anchor sr-only" id="_windows_3"></span>Windows</h4>
<div class="paragraph"><p>To run the plug-in asynchronously under Windows, adjust the configuration of
the agent, and expand the <code>execution</code> section under <code>plugins</code>
with the following entry:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\check_mk.user.yml</div>
<div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-nt">plugins</span><span class="tok-p">:</span>
<span class="tok-w">    </span><span class="tok-nt">execution</span><span class="tok-p">:</span>
<span class="tok-w">        </span><span class="tok-p tok-p-Indicator">-</span><span class="tok-w"> </span><span class="tok-nt">pattern</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">mk_mysql.vbs</span>
<span class="tok-w">          </span><span class="tok-nt">cache_age</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">300</span>
<span class="tok-w">          </span><span class="tok-nt">async</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">yes</span></code></pre></div>
</div>
<div class="paragraph"><p>You can find detailed instructions for the asynchronous execution of plug-ins
on a Windows host in the article on the
<a href="agent_windows.html#customizeexecution">Windows agents</a>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__additional_options_for_the_configuration_files">
<span class="hidden-anchor sr-only" id="_additional_options_for_the_configuration_files"></span>3.2. Additional options for the configuration files</h3>
<div class="sect3">
<h4 id="heading__setting_up_communication_with_mysql_via_socket">
<span class="hidden-anchor sr-only" id="_setting_up_communication_with_mysql_via_socket"></span>Setting up communication with MySQL via socket</h4>
<div class="paragraph"><p>Instead of letting the agent communicate with MySQL via TCP, you can instruct Checkmk to address the socket.
To do this, simply define the variable <code>socket</code> in the <code>mysql.cfg</code> file.
Here is an example of the Windows configuration file:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\config\mysql.ini</div>
<div class="content"><pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[client]</span>
<span class="tok-na">user</span><span class="tok-o">=</span><span class="tok-s">checkmk</span>
<span class="tok-na">password</span><span class="tok-o">=</span><span class="tok-s">MyPassword</span>
<span class="tok-na">*socket</span><span class="tok-o">=</span><span class="tok-s">/var/run/mysqld/mysqld.sock*</span></code></pre></div>
</div>
</div>
<div class="sect3">
<h4 id="heading__defining_hosts_manually">
<span class="hidden-anchor sr-only" id="_defining_hosts_manually"></span>Defining hosts manually</h4>
<div class="paragraph"><p>Furthermore, it is also possible to set the MySQL host manually via the
configuration files. The corresponding variable is simply called <code>host</code>.
Here again using the example of Windows:</p></div>
<div class="listingblock">
<div class="title">C:\ProgramData\checkmk\agent\config\mysql.ini</div>
<div class="content"><pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[client]</span>
<span class="tok-na">user</span><span class="tok-o">=</span><span class="tok-s">checkmk</span>
<span class="tok-na">password</span><span class="tok-o">=</span><span class="tok-s">MyPassword</span>
<span class="tok-na">*host</span><span class="tok-o">=</span><span class="tok-s">127.0.0.1*</span></code></pre></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="heading__configuring_thresholds">
<span class="hidden-anchor sr-only" id="_configuring_thresholds"></span>3.3. Configuring thresholds</h3>
<div class="sect3">
<h4 id="heading__monitoring_sessions">
<span class="hidden-anchor sr-only" id="_monitoring_sessions"></span>Monitoring sessions</h4>
<div class="paragraph"><p>Some of the checks set up in this way have no preset threshold values.
This is usually the case because there are no reasonable default values that
would be sufficient in most cases. However, these can be set up in a few
simple steps. For example, you can find the <span class="guihint">MySQL Sessions &amp; Connections</span>
rule via the familiar <span class="guihint">Host &amp; Service Parameters</span>. This can be used to define
meaningful threshold values for the <span class="guihint">MySQL sessions</span> service that are useful
for your MySQL instance.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mysql_sessions_connections.png" alt="mysql sessions connections"></div></div>
</div>
<div class="sect3">
<h4 id="heading__monitoring_connections">
<span class="hidden-anchor sr-only" id="_monitoring_connections"></span>Monitoring connections</h4>
<div class="paragraph"><p>We have also not specified any threshold values for the utilization of the
maximum number of simultaneous connections specified by MySQL, since these
depend much more on the structure of your MySQL instance than with other
services. The establishment of corresponding threshold values can be
accomplished in a jiffy with a rule from the <span class="guihint">MySQL Connections</span> set.
The same goes for the amount of open connections.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mysql_connections.png" alt="mysql connections"></div></div>
</div>
<div class="sect3">
<h4 id="heading__monitoring_database_sizes">
<span class="hidden-anchor sr-only" id="_monitoring_database_sizes"></span>Monitoring database sizes</h4>
<div class="paragraph"><p>The size of individual databases in MySQL is monitored by the <a href="https://checkmk.com/integrations/mysql_capacity" target="_blank">MySQL: Capacity</a> check plug-in.
Threshold values for this plug-in can be determined with the <span class="guihint">Size of MySQL databases</span> rule.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mysql_size_database.png" alt="mysql size database"></div></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__monitoring_log_files">
<span class="hidden-anchor sr-only" id="_monitoring_log_files"></span>3.4. Monitoring log files</h3>
<div class="paragraph"><p>With the help of the <a href="https://checkmk.com/integrations/logwatch" target="_blank">logwatch</a> check plug-in you can also monitor the log files generated by MySQL for errors.
After setting up the plug-in, first check where the corresponding log files are located in your MySQL instance.
Their exact location can be found in your instance’s <code>.ini</code> or <code>.cnf</code> file.</p></div>
<div class="paragraph"><p>You can enter the logs you are interested in in the logwatch configuration file
and make the following entries for example on a Linux host:</p></div>
<div class="listingblock">
<div class="title">/etc/check_mk/logwatch.cfg</div>
<div class="content"><pre class="pygments highlight"><code><span></span>/var/log/mysql/error.log
 W Can't create/write to file
 C [ERROR] Can't start server
 C mysqld_safe mysqld from pid file /var/run/mysql/mysqld.pid ended</code></pre></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_bakery">
<span class="hidden-anchor sr-only" id="bakery"></span>4. Configurations using the Agent Bakery</h2>
<div class="sectionbody">
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
The setup is much simplified with the
<a href="wato_monitoringagents.html#bakery">Agent Bakery</a>, since syntax errors in the
configuration files are avoided, and adaptations to changing environments can
easily be made. The main difference compared to a manual installation is that
only for special MySQL-specific configurations you have to work on the MySQL
host on its command line.</p></div>
<div class="paragraph"><p>For the initial setup, it is sufficient if you
<a href="#benutzereinrichten">set up the database user on the MySQL host</a>,
and create a corresponding rule in the bakery. You can find the rule set
under <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX &gt; Agent rules</span>.
You can then search for <code>MySQL</code> in the search field:</p></div>
<div class="imageblock border"><div class="content"><img src="../images/mysql_bakery_ruleset_search.png" alt="mysql bakery ruleset search"></div></div>
<div class="paragraph"><p>Enter the user ID and password for the new database user. With the following
field you can set the Checkmk agent for Linux hosts so that it does not establish
the connection to MySQL via TCP, but instead via the socket. Depending on the
size and utilization, this can contribute to better performance.</p></div>
<div class="paragraph"><p>An asynchronous version of the MySQL plug-in can also be defined using this
rule set. This can be useful to take longer runtimes into account with large
MySQL instances, or if the status data is simply not required every minute.</p></div>
<div class="imageblock"><div class="content"><img src="../images/mysql_bakery.png" alt="mysql bakery"></div></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__diagnostic_options">
<span class="hidden-anchor sr-only" id="_diagnostic_options"></span>5. Diagnostic options</h2>
<div class="sectionbody">
<div class="paragraph"><p>If, for example, unexpected behavior or problems arise when setting up the
monitoring, it is recommended to check directly on an affected host. Since
the plug-ins for monitoring MySQL for both Linux and Windows are shell or
Visual Basic scripts, they can easily be executed without the agent. Regardless
of the operating system used, only the relevant configuration directory needs
to be made known to the shell or to the command line.</p></div>
<div class="sect2">
<h3 id="heading__diagnostic_options_under_linux">
<span class="hidden-anchor sr-only" id="_diagnostic_options_under_linux"></span>5.1. Diagnostic options under Linux</h3>
<div class="paragraph"><p>First check the applicable directories for your respective host.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">user@host:~$  </span>grep<span class="tok-w"> </span><span class="tok-s1">'export MK'</span><span class="tok-w"> </span>/usr/bin/check_mk_agent
<span class="tok-go">export MK_LIBDIR='/usr/lib/check_mk_agent'</span>
<span class="tok-go">export MK_CONFDIR='/etc/check_mk'</span></code></pre></div></div>
<div class="paragraph"><p>Now use the export command to create the <code>MK_CONFDIR</code> and
<code>MK_LIBDIR</code> environment variables. Customize the commands according to
your actual directories.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span><span class="tok-nb">export</span><span class="tok-w"> </span><span class="tok-nv">MK_CONFDIR</span><span class="tok-o">=</span><span class="tok-s2">"/etc/check_mk/"</span>
<span class="tok-gp">root@linux# </span><span class="tok-nb">export</span><span class="tok-w"> </span><span class="tok-nv">MK_LIBDIR</span><span class="tok-o">=</span><span class="tok-s2">"/usr/lib/check_mk_agent"</span></code></pre></div></div>
<div class="paragraph"><p><strong>Important:</strong> These environment variables only exist in the currently open
shell, and disappear as soon as you close them.</p></div>
<div class="paragraph"><p>You can then run the <code>mk_mysql</code> script directly in the of the Checkmk
agent’s plug-in directory.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# $</span>MK_LIBDIR/plugins/mk_mysql</code></pre></div></div>
<div class="paragraph"><p>If all rights have been granted to the database user correctly, you should now
see several hundred lines of output even in a small and fresh MySQL environment.</p></div>
</div>
<div class="sect2">
<h3 id="heading__diagnostic_options_under_windows">
<span class="hidden-anchor sr-only" id="_diagnostic_options_under_windows"></span>5.2. Diagnostic options under Windows</h3>
<div class="paragraph"><p>In order to be able to run the Check plug-in on a Windows host manually, first
open a command line with admin rights. Now set the <code>MK_CONFDIR</code>
environment variable in this command line  this is required so that the
plug-in can find your configuration files.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="powershell"><span></span><span class="tok-n">PS</span><span class="tok-p">&gt;</span> <span class="tok-nb">set </span><span class="tok-n">MK_CONFDIR</span><span class="tok-p">=</span><span class="tok-n">c</span><span class="tok-p">:\</span><span class="tok-n">ProgramData</span><span class="tok-p">\</span><span class="tok-n">checkmk</span><span class="tok-p">\</span><span class="tok-n">agent</span><span class="tok-p">\</span><span class="tok-n">config</span></code></pre></div></div>
<div class="paragraph"><p><strong>Important:</strong> Here too an environment variable set here is not permanent,
but only exists for as long as this command line is open.</p></div>
<div class="paragraph"><p>During the actual execution of the plug-in, it is advisable to redirect the output to the command line.
Windows provides the on-board tool <code>cscript</code> for this purpose.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="powershell"><span></span><span class="tok-n">PS</span><span class="tok-p">&gt;</span> <span class="tok-n">cscript</span> <span class="tok-n">c</span><span class="tok-p">:\</span><span class="tok-n">ProgramData</span><span class="tok-p">\</span><span class="tok-n">checkmk</span><span class="tok-p">\</span><span class="tok-n">agent</span><span class="tok-p">\</span><span class="tok-n">plugins</span><span class="tok-p">\</span><span class="tok-n">mk_mysql</span><span class="tok-p">.</span><span class="tok-n">vbs</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading__possible_errors_and_error_messages">
<span class="hidden-anchor sr-only" id="_possible_errors_and_error_messages"></span>5.3. Possible errors and error messages</h3>
<div class="sect3">
<h4 id="heading__mysqladmin_connect_to_server_at_xyz_failed">
<span class="hidden-anchor sr-only" id="_mysqladmin_connect_to_server_at_xyz_failed"></span>mysqladmin: connect to server at <em>xyz</em> failed</h4>
<div class="paragraph"><p>The error message <code>connect to server at xyz failed</code> indicates that the
user specified in the configuration file has no access to MySQL. First check
that no transmission errors have crept in when creating the configuration file
(<code>mysql.cfg</code> or <code>mysql.ini</code>).</p></div>
<div class="paragraph"><p>If the username or password specified in the configuration file is incorrect,
you will receive something like the following error message:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">Access denied for user checkmk</span></code></pre></div></div>
</div>
<div class="sect3">
<h4 id="heading__database_size_is_not_output">
<span class="hidden-anchor sr-only" id="_database_size_is_not_output"></span>Database size is not output</h4>
<div class="paragraph"><p>If you see a whole series of data from your MySQL instance in Checkmk, but there
is no service that monitors the size of the databases it contains, this is an
indication that the database user does not have the SELECT right.</p></div>
<div class="paragraph"><p>Check your database user in MySQL with the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">mysql</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-k">show</span><span class="tok-w"> </span><span class="tok-n">grants</span><span class="tok-w"> </span><span class="tok-k">for</span><span class="tok-w"> </span><span class="tok-s1">'checkmk'</span><span class="tok-o">@</span><span class="tok-s1">'localhost'</span><span class="tok-p">;</span>
<span class="tok-o">+</span><span class="tok-c1">--------------------------------------------------------------------------+</span>
<span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-n">Grants</span><span class="tok-w"> </span><span class="tok-k">for</span><span class="tok-w"> </span><span class="tok-n">checkmk</span><span class="tok-o">@</span><span class="tok-n">localhost</span><span class="tok-w">                                             </span><span class="tok-o">|</span>
<span class="tok-o">+</span><span class="tok-c1">--------------------------------------------------------------------------+</span>
<span class="tok-o">|</span><span class="tok-w"> </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-k">SELECT</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-k">SHOW</span><span class="tok-w"> </span><span class="tok-n">DATABASES</span><span class="tok-w"> </span><span class="tok-k">ON</span><span class="tok-w"> </span><span class="tok-o">*</span><span class="tok-p">.</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-o">`</span><span class="tok-n">checkmk</span><span class="tok-o">`@`</span><span class="tok-n">localhost</span><span class="tok-o">`</span><span class="tok-w">             </span><span class="tok-o">|</span>
<span class="tok-o">+</span><span class="tok-c1">--------------------------------------------------------------------------+</span></code></pre></div></div>
<div class="paragraph"><p>If the keyword SELECT is missing in your output, grant the database user the
appropriate rights as specified in the
<a href="#benutzereinrichten">user setup</a> chapter.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__files_and_directories">
<span class="hidden-anchor sr-only" id="_files_and_directories"></span>6. Files and directories</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__on_the_mysql_host">
<span class="hidden-anchor sr-only" id="_on_the_mysql_host"></span>6.1. On the MySQL host</h3>
<div class="sect3">
<h4 id="heading__linux_4">
<span class="hidden-anchor sr-only" id="_linux_4"></span>Linux</h4>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">File path</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/bin/check_mk_agent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The agent that collects all data about the host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/lib/check_mk/plugins/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The usual directory in which plug-ins are stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/check_mk/mysql.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The configuration file for the MySQL plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/etc/check_mk/mysql.local.cfg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional configuration file for specifying host-specific sockets.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="heading__windows_4">
<span class="hidden-anchor sr-only" id="_windows_4"></span>Windows</h4>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">File path</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\plugins\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The usual plug-ins directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\ProgramData\checkmk\agent\config\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The usual configuration directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\Program Files (x86)\checkmk\agent\config\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The usual configuration directory up to Checkmk version <span class="new">1.6.0</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C:\Program Files (x86)\check_mk\plugins\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The usual plug-ins directory up to Checkmk version <span class="new">1.6.0</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="heading__on_the_checkmk_server">
<span class="hidden-anchor sr-only" id="_on_the_checkmk_server"></span>6.2. On the Checkmk server</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">File path</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr></thead>
<tbody><tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/plugins/mk_mysql</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The plug-in that retrieves the data from the MySQL host.</p></td>
</tr></tbody>
</table>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li>
<a href="#_setting_up_the_monitoring">2. Setting up the monitoring</a><ul class="sectlevel1">
<li>
<a href="#benutzereinrichten">2.1. Creating a user</a><ul class="sectlevel2"><li><a href="#_linux_and_windows">Linux and Windows</a></li></ul>
</li>
<li>
<a href="#_installing_the_plug_in">2.2. Installing the plug-in</a><ul class="sectlevel2">
<li><a href="#_linux">Linux</a></li>
<li><a href="#_windows">Windows</a></li>
</ul>
</li>
<li>
<a href="#_creating_the_configuration_file">2.3. Creating the configuration file</a><ul class="sectlevel2">
<li><a href="#_linux_2">Linux</a></li>
<li><a href="#_windows_2">Windows</a></li>
</ul>
</li>
<li><a href="#_creating_services">2.4. Creating services</a></li>
</ul>
</li>
<li>
<a href="#_advanced_configuration">3. Advanced configuration</a><ul class="sectlevel1">
<li>
<a href="#_executing_a_plug_in_asynchronously">3.1. Executing a plug-in asynchronously</a><ul class="sectlevel2">
<li><a href="#_linux_3">Linux</a></li>
<li><a href="#_windows_3">Windows</a></li>
</ul>
</li>
<li>
<a href="#_additional_options_for_the_configuration_files">3.2. Additional options for the configuration files</a><ul class="sectlevel2">
<li><a href="#_setting_up_communication_with_mysql_via_socket">Setting up communication with MySQL via socket</a></li>
<li><a href="#_defining_hosts_manually">Defining hosts manually</a></li>
</ul>
</li>
<li>
<a href="#_configuring_thresholds">3.3. Configuring thresholds</a><ul class="sectlevel2">
<li><a href="#_monitoring_sessions">Monitoring sessions</a></li>
<li><a href="#_monitoring_connections">Monitoring connections</a></li>
<li><a href="#_monitoring_database_sizes">Monitoring database sizes</a></li>
</ul>
</li>
<li><a href="#_monitoring_log_files">3.4. Monitoring log files</a></li>
</ul>
</li>
<li><a href="#bakery">4. Configurations using the Agent Bakery</a></li>
<li>
<a href="#_diagnostic_options">5. Diagnostic options</a><ul class="sectlevel1">
<li><a href="#_diagnostic_options_under_linux">5.1. Diagnostic options under Linux</a></li>
<li><a href="#_diagnostic_options_under_windows">5.2. Diagnostic options under Windows</a></li>
<li>
<a href="#_possible_errors_and_error_messages">5.3. Possible errors and error messages</a><ul class="sectlevel2">
<li><a href="#_mysqladmin_connect_to_server_at_xyz_failed">mysqladmin: connect to server at <em>xyz</em> failed</a></li>
<li><a href="#_database_size_is_not_output">Database size is not output</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#_files_and_directories">6. Files and directories</a><ul class="sectlevel1">
<li>
<a href="#_on_the_mysql_host">6.1. On the MySQL host</a><ul class="sectlevel2">
<li><a href="#_linux_4">Linux</a></li>
<li><a href="#_windows_4">Windows</a></li>
</ul>
</li>
<li><a href="#_on_the_checkmk_server">6.2. On the Checkmk server</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
