<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Checkmk calculates the availability of an object as needed since it is known to it. Learn all about how to use reports here.">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Availability - Evaluating and analyzing availabilities">
<meta name="og:description" content="Checkmk calculates the availability of an object as needed since it is known to it. Learn all about how to use reports here.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Availability - Evaluating and analyzing availabilities</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.2.0/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.2.0/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.2.0/de/availability.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.2.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/en/availability.html">2.1.0</a><a class="dropdown-item" href="../../latest/en/availability.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginner’s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and derivatives</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation from Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation from AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Password store</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs for GUI extensions</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automated host creation</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Rules</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Notifications</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Notifications via ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Notifications via Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Monitoring log files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMware ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Monitoring Google Cloud Platform (GCP)</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">Monitoring OpenShift</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Measured values and graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Custom notes</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">The Standard Edition</a></p>
</li>
<li>
<p><a href="cce.html">The Cloud Edition</a></p>
</li>
<li>
<p><a href="managed.html">The Managed Services Edition</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">The Checkmk REST API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Developing extensions for Checkmk</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Writing agent-based check plug-ins</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">Writing SNMP-based check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Availability</h1>
<div class="details">
<span id="revdate">Last modified on 21-Dec-2021</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.2.0/src/common/en/availability.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">This page was exported for offline usage on 2025-01-07 22:12:14 +0000. It may not reflect the current state of the Checkmk documentation. To view a daily updated version, visit <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a>.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="sla.html">Extended availability (SLAs)</a>
<a href="reporting.html">Reports</a>
<a href="timeperiods.html">Time periods</a>
<a href="bi.html">Business Intelligence (BI)</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__the_basic_principle">
<span class="hidden-anchor sr-only" id="_the_basic_principle"></span>1. The basic principle</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__a_look_back_into_the_past">
<span class="hidden-anchor sr-only" id="_a_look_back_into_the_past"></span>1.1. A look back into the past</h3>
<div class="paragraph"><p>Because Checkmk continuously monitors all hosts and services at regular
intervals, it provides an exceptional basis for the later evaluation of
their availability. And not only that — it can also be calculated for what
percentage of a given time range an object was in a specified state or states,
how often this state occurred, the duration of its longest stop, and much more.</p></div>
<div class="paragraph"><p>Every calculation is based on a <em>selection of objects</em> and a specified
<em>time range in the past</em>. Checkmk then reconstructs, within this time range,
a chronological sequence of the states of all of the selected objects.
Per state the times will be added together and displayed in a table.
This table can, for example, show that a particular service experienced states
of 99.95 % <span class="state0">OK</span>, and 0.005 % <span class="state1">WARN</span> over the defined time range.</p></div>
<div class="paragraph"><p>When making such calculations, Checkmk also correctly takes account of such
factors as scheduled downtimes, service downtimes, unmonitored time ranges and
other special factors, enables the summary of states, and the ignoring
of ‘brief interruptions’. Numerous customization options are also available.
An availability of <a href="#bi">BI aggregations</a> is also possible.</p></div>
</div>
<div class="sect2">
<h3 id="heading_states">
<span class="hidden-anchor sr-only" id="states"></span>1.2. Possible states</h3>
<div class="paragraph"><p>Through the inclusion of scheduled downtimes and similar special states,
there is in theory a large number of possible combinations of states,
for example: <span class="state2">CRIT</span> + In Planned Downtime + In Service Time + Flapping.
Because most such combinations are not very useful, Checkmk reduces these to a
small number and in doing so proceeds according to a principle of priorities.
Since in the above example the service was in a scheduled downtime,
the state <span class="guihint">in scheduled downtime</span> simply applies, and the actual state is ignored.
This reduces the list of possible states to the following:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_states.png" alt="avail states"></div></div>
<div class="paragraph"><p>This graphic shows the order in which states are prioritized. Later we will show
how some states can be ignored or combined. Here are the states again, in detail:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 13%;">
<col style="width: 57%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Abbreviation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">unmonitored</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time ranges during which the object was not being monitored. There are two possible reasons for this: the object was not in the monitoring’s configuration, or the monitoring itself was not running during the specified time range.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">out of service period</span></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The object was outside its service period <span class="image-inline"><img src="../images/icons/icon_outof_serviceperiod.png" alt="icon outof serviceperiod"></span> – in other words when its availability was ‘irrelevant’. You can learn more about service periods <a href="#serviceperiod">further below</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">in scheduled downtime</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">Downtime</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The object was in a period of scheduled downtime <span class="image-inline"><img src="../images/icons/icon_downtime.png" alt="icon downtime"></span> <a href="basics_downtimes.html">Downtime</a>. This state will also be assumed for services whose hosts are in a scheduled downtime.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">on down host</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">H.Down</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This state is only available for services — when the service’s host is (down). A monitoring of the service at this time is not possible. For most services this has the same meaning as if the service is <span class="state2">CRIT</span> — but not for all! For example, the state of a (<span class="guihint">File system</span>-Check) is certainly independent of the host’s accessibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="guihint">flapping</span></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phases in which the state is <span class="image-inline"><img src="../images/icons/icon_flapping.png" alt="icon flapping"></span> <a href="monitoring_basics.html#flapping">flapping</a> — i.e., those phases during which many changes of state have been experienced over a short time span.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="hstate0">UP</span> <span class="hstate1">DOWN</span> <span class="hstate2">UNREACH</span></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring states for hosts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="state0">OK</span> <span class="state1">WARN</span> <span class="state2">CRIT</span> <span class="state3">UNKNOWN</span></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring states for services and BI aggregations</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__availability_retrieval">
<span class="hidden-anchor sr-only" id="_availability_retrieval"></span>2. Availability retrieval</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__from_the_view_to_the_analysis">
<span class="hidden-anchor sr-only" id="_from_the_view_to_the_analysis"></span>2.1. From the view to the analysis</h3>
<div class="paragraph"><p>Generating an availability analysis is very simple. First retrieve any
<a href="views.html">view</a> of hosts, services or <a href="bi.html">BI aggregations</a>.
There you will find in the menu <span class="guihint">Services</span> menu the <span class="guihint">Availability</span> item, which takes you directly to the calculation of the availability of the selected objects.
The data will be displayed as a table:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_screenshot.png" alt="avail screenshot"></div></div>
<div class="paragraph"><p>The table shows the same objects that were seen in the preceding view.
Shown in each column is the proportion of the requested time range an object
was in the state being queried.
The value is given as a percentage, by default to two decimal places — which
you can also easily <a href="#format_time_range">customize</a>.</p></div>
<div class="paragraph"><p>The time range query can be customized with the <span class="guihint">Availability &gt; Change display options &gt; <a href="#option_timerange">Time Range</a></span> menu item.
More on this later…​</p></div>
<div class="paragraph"><p>You have the option of receiving the table as a PDF (commercial editions only).
A download of the data in the CSV-Format is also possible <span class="guihint">(Export as CSV)</span>.
It will look like this for the above example:</p></div>
<div class="listingblock">
<div class="title">Checkmk-Availability-2021-10-19_11-01-15.csv</div>
<div class="content"><pre class="pygments highlight"><code><span></span>Host;Service;OK;WARN;CRIT;UNKNOWN;Flapping;H.Down;Downtime;N/A
mail.mydomain.test;Check_MK;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;Check_MK Discovery;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;Filesystem /;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;Filesystem /var/spool;0.00%;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;HTTP https://mail.mydomain.test/;99.85%;0.15%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;HTTPS https://mail.mydomain.test/;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;MTA performance check;99.23%;0.30%;0.46%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;Postfix Queue;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;Postfix status;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
mail.mydomain.test;Uptime;100.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%;0.00%
Summary;;89.91%;10.05%;0.05%;0.00%;0.00%;0.00%;0.00%;0.00%</code></pre></div>
</div>
<div class="paragraph"><p>With the help of an <a href="wato_user.html#automation">automation user</a>, which can
authenticate itself via the URL, you can also retrieve data — e.g., with
<code>wget</code> or <code>curl</code>) — and automatically process the data under
script control.</p></div>
</div>
<div class="sect2">
<h3 id="heading_timeline">
<span class="hidden-anchor sr-only" id="timeline"></span>2.2. Timeline display</h3>
<div class="paragraph"><p>The <span class="image-inline"><img src="../images/icons/button_timeline.png" alt="button timeline"></span> symbol can be found in every line of the table.
This button takes you to a timeline display for the relevant object,
in which it is precisely itemized which state change(s) occurred in
the specified time range (abbreviated here):</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_timeline.png" alt="avail timeline"></div></div>
<div class="paragraph"><p>Some useful tips:</p></div>
<div class="ulist"><ul>
<li><p>Hover the mouse cursor over a timeline symbol in a object’s line in the display, this will be highlighted in the table display.</p></li>
<li><p>Also in the timeline, you can use the <span class="guihint">Availability &gt; Change display options</span> or <span class="guihint">Availability &gt; Change computation options</span> menu items to customize the <a href="#options">options</a> for display and evaluation.</p></li>
<li><p>With the <span class="image-inline"><img src="../images/icons/button_annotation.png" alt="button annotation"></span> symbol you can add an <span class="guihint">Annotation</span> to the selected item. Here you can also retrospectively post downtimes (more on this in the next section).</p></li>
<li><p>Under the availability of BI aggregations, with the <span class="image-inline"><img src="../images/icons/button_timewarp.png" alt="button timewarp"></span> magic wand symbol you can time travel to the state of the aggregate for the time slice in question. More on this <a href="#bi">below</a>.</p></li>
<li><p>Using the <span class="guihint">Availability &gt; Timeline</span> menu item in the main view, you can view the timelines of all selected objects in a long, single page.</p></li>
</ul></div>
</div>
<div class="sect2">
<h3 id="heading_annotations">
<span class="hidden-anchor sr-only" id="annotations"></span>2.3. Annotations and subsequent downtimes</h3>
<div class="paragraph"><p>As just mentioned, with the <span class="image-inline"><img src="../images/icons/button_annotation.png" alt="button annotation"></span> symbol the timelines
offer the possibility of adding an annotation to a time period.
A pre-filled form (‘Properties’) is provided into which comments can be entered:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_anno_1.png" alt="avail anno 1"></div></div>
<div class="paragraph"><p>With this you can define and extend the time range with different values
as required. This is, for example, practical if you wish to annotate a
larger time slice that has experienced repeated state changes.
If you omit entering a service, the annotation will be created for the host.
This will then be automatically related to all of the host’s services.</p></div>
<div class="paragraph"><p>In every availability view all annotations applicable to the time range and
the objects being displayed will be automatically visible.</p></div>
<div class="paragraph"><p>But annotations have an additional function.
Downtimes can be retrospectively entered — or conversely, removed.
The availability analysis takes these corrections into account in exactly
the same way as with ‘normal’ downtimes. There are at least two legitimate
justifications for this:</p></div>
<div class="ulist"><ul>
<li><p>During operations it can happen that planned downtimes are incorrectly entered. This of course is bad for the accuracy of the availability statistics. Through retrospective entering of these times the reporting can thus be rectified.</p></li>
<li><p>There are users who misuse downtimes during a spontaneous outage in order to suppress a notification. This effectively corrupts the later analysis. This can be corrected retrospectively by <em>deleting</em> the erroneous downtime.</p></li>
</ul></div>
<div class="paragraph"><p>To reclassify downtimes, simply select the <span class="guihint">Reclassify downtime of this period</span> checkbox:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_anno_2.png" alt="avail anno 2"></div></div>
</div>
<div class="sect2">
<h3 id="heading__displaying_monitoring_history">
<span class="hidden-anchor sr-only" id="_displaying_monitoring_history"></span>2.4. Displaying monitoring history</h3>
<div class="paragraph"><p>In the availability table, alongside the symbol for the timeline a further
symbol can be found: <span class="image-inline"><img src="../images/icons/button_history.png" alt="button history"></span>. This takes you to a
<a href="views.html">view</a> of the monitoring history with a pre-filled filter for the relevant
object and the time range for the query. Here you will not only see the event
on which the availability analysis is based (the state changes),
but also the associated notifications and similar events:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_history.png" alt="avail history"></div></div>
<div class="paragraph"><p>What is not visible here is the state of the object at the <em>start</em> of
the query’s time period.
The availability calculation looks even further back into the past in order to
reliably determine the starting state reliably.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_options">
<span class="hidden-anchor sr-only" id="options"></span>3. Calculation options</h2>
<div class="sectionbody">
<div class="imageblock inline-image"><div class="content"><img src="../images/avail_menu_options.png" alt="avail menu options" width="350"></div></div>
<div class="paragraph"><p>As well as the calculation itself, the availability display can also be
controlled using numerous options.
You can find them in the <span class="guihint">Availability &gt; Change display options</span> respectively <span class="guihint">Availability &gt; Change computation options</span> menu items.</p></div>
<div class="paragraph"><p>Once the options have been altered and confirmed with <span class="guihint">Apply</span>, the availability will be recalculated and displayed.
All of the changed options
will be stored in the user’s profile as the default, so that subsequent queries
will use the same settings.</p></div>
<div class="paragraph"><p>At the same time the options will be coded into the current page’s URL.
If you now save a <em>Bookmark</em> on the page — e.g., using the practical
<span class="guihint">Bookmarks</span>-element — the options will be a part of this, and when later
clicked-on will be generated in exactly the same way.</p></div>
<div class="sect2">
<h3 id="heading_option_timerange">
<span class="hidden-anchor sr-only" id="option_timerange"></span>3.1. Choosing the time range</h3>
<div class="openblock float-group"><div class="content">
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_time_range2.png" alt="avoption time range2" width="350"></div></div>
<div class="paragraph"><p>The first and most important option in any availability calculation is of course
the time range to be examined. In <span class="guihint">Date range</span> a time range with precise start
and end dates can be specified.
The final day — up until 24:00 — will be included.<br></p></div>
</div></div>
<div class="openblock float-group"><div class="content">
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_time_range.png" alt="avoption time range" width="350"></div></div>
<div class="paragraph"><p>Much more practical are the relative time specifications, such as, for example,
<span class="guihint">Last week</span>. Exactly which time range will be
displayed — intentionally — depends on the point of time at which the
calculation is made. Note — here "one week" always refers to a range
from Monday 00:00 until Sunday 24:00.</p></div>
</div></div>
</div>
<div class="sect2">
<h3 id="heading__options_affecting_displays">
<span class="hidden-anchor sr-only" id="_options_affecting_displays"></span>3.2. Options affecting displays</h3>
<div class="paragraph"><p>Many options influence the format of the displays, while others in turn
influence the calculation methods. To begin with, let’s look at the displays:</p></div>
<div class="sect3">
<h4 id="heading__hide_lines_with_100_availability">
<span class="hidden-anchor sr-only" id="_hide_lines_with_100_availability"></span>Hide lines with 100 % availability</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_only_outages.png" alt="avoption only outages" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Only show objects with outages</span> option limits the display to such objects
that really have outages — i.e., times when the state was not <span class="state0">OK</span> or <span class="hstate0">UP</span>.
This is useful where there are a large number of services, from which only those
few that actually have problems are of interest.<br></p></div>
</div>
<div class="sect3">
<h4 id="heading__labelling_options">
<span class="hidden-anchor sr-only" id="_labelling_options"></span>Labelling options</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_labelling.png" alt="avoption labelling" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Labelling options</span> allow various label fields to be activated or
deactivated. Some of the options are primarily interesting for <a href="reporting.html">Reporting</a>.
If, for instance, a report is to be produced for a single host, then the column
for the host name is not really required.</p></div>
<div class="paragraph"><p>The <span class="guihint">alternative display names</span> for services can be defined using a
<a href="wato_rules.html">rule</a>, and by using these, for example,
displays for important services can be given a name that is explicit and
meaningful for the report’s reader.</p></div>
</div>
<div class="sect3">
<h4 id="heading_thresholds">
<span class="hidden-anchor sr-only" id="thresholds"></span>Using colors when displaying SLAs with thresholds</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_visual_levels.png" alt="avoption visual levels" width="350"></div></div>
<div class="paragraph"><p>With <span class="guihint">Visual levels</span> you can highlight objects that have not maintained a
specified availability within the queried time range.
This applies only to the column for the <span class="state0">OK</span>-state. This is normally always green.
A shortfall for the defined threshold will cause the color of this cell to change
from green to yellow, or to red.
This could be described as a very simple SLA-overview.</p></div>
</div>
<div class="sect3">
<h4 id="heading__displaying_the_number_and_duration_of_the_individual_outages">
<span class="hidden-anchor sr-only" id="_displaying_the_number_and_duration_of_the_individual_outages"></span>Displaying the number and duration of the individual outages</h4>
<div class="openblock float-group"><div class="content">
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_outage_statistics.png" alt="avoption outage statistics" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Outage statistics</span> option provides additional information columns in
the availability table. In the screenshot below it can be seen that the
additional information for <span class="guihint">max. duration</span> and <span class="guihint">count</span> have been activated
for the <span class="guihint">Crit/Down</span> status column.
This means that for outages with a <span class="state2">CRIT</span>/<span class="hstate1">DOWN</span> state, the number of incidents,
as well as the duration of the longest incident respectively, are shown.</p></div>
</div></div>
<div class="openblock float-group"><div class="content">
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_count_max.png" alt="avoption count max" width="350"></div></div>
<div class="paragraph"><p>In the table these additional columns will be created.</p></div>
</div></div>
</div>
<div class="sect3">
<h4 id="heading_format_time_range">
<span class="hidden-anchor sr-only" id="format_time_range"></span>Time specification display</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_format_time.png" alt="avoption format time" width="350"></div></div>
<div class="paragraph"><p>It is not always wise to specify (un)availabilities as percentages.
The <span class="guihint">Format time ranges</span> option enables switching to a display that presents
the time ranges as absolute values. With this the total duration of the outages
can be seen to the exact minute. The display even shows seconds, but note that
that this only makes sense if the monitoring is conducted at one-second intervals,
and not as is customary with one check per minute.
Likewise the specification’s precision (the number of decimal places in the
percentage values) can be defined.</p></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_format_timestamps.png" alt="avoption format timestamps" width="350"></div></div>
<div class="paragraph"><p>The formatting of time stamps applies to settings in the <span class="guihint">Timeline</span>.
A changeover to UNIX-Epochs (seconds elapsed since 1.1.1970) simplifies the
correlation of time ranges to the appropriate locations in the monitoring
history’s log data.</p></div>
</div>
<div class="sect3">
<h4 id="heading__customizing_the_summary_line">
<span class="hidden-anchor sr-only" id="_customizing_the_summary_line"></span>Customizing the summary line</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_summary_line.png" alt="avoption summary line" width="350"></div></div>
<div class="paragraph"><p>Not only can the summary in the table’s last line be activated/deactivated
with this — you can also decide between a total sum and an average.
For columns containing a percentage value, using the <span class="guihint">Sum</span> setting will result
in an average being shown, since adding percentage values makes little sense.</p></div>
</div>
<div class="sect3">
<h4 id="heading__showing_the_small_timeline">
<span class="hidden-anchor sr-only" id="_showing_the_small_timeline"></span>Showing the small timeline</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_timeline.png" alt="avoption timeline" width="350"></div></div>
<div class="paragraph"><p>This option adds a miniature version of the <a href="#timeline">availability timeline</a>
directly to the results table. It corresponds to the graphic bar in the
detailed timeline, but is smaller and is integrated directly into the table.
In addition, it is true to scale, so that multiple objects can be compared
in the same table.</p></div>
</div>
<div class="sect3">
<h4 id="heading__grouping_by_host_host_group_or_service_group">
<span class="hidden-anchor sr-only" id="_grouping_by_host_host_group_or_service_group"></span>Grouping by host, host group or service group</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_group.png" alt="avoption group" width="350"></div></div>
<div class="paragraph"><p>Independently of the display from which you are coming, the availability always
shows all objects in a common table. With this option you can select a grouping
by host, by host group, or by service group — each group will then
get its own <span class="guihint">Summary</span>-line.</p></div>
<div class="paragraph"><p>Note that with a grouping by service group, services can appear <em>multiply</em>,
since services can be allocated to multiple groups simultaneously.</p></div>
</div>
<div class="sect3">
<h4 id="heading__only_display_availability">
<span class="hidden-anchor sr-only" id="_only_display_availability"></span>Only display availability</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_availability.png" alt="avoption availability" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Availability</span> option ensures that only the column for the <span class="state0">OK</span> or (UP
states will be displayed — with the title <span class="guihint">Avail.</span>.
In this way only the <span class="guihint">actual</span> availability will shown.
This option can be combined with the further options explained below,
with other states (e.g., <span class="state1">WARN</span>), and can also include the OK-state and thus
be assessed as available.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__grouping_of_states">
<span class="hidden-anchor sr-only" id="_grouping_of_states"></span>3.3. Grouping of states</h3>
<div class="paragraph"><p>The <a href="#states">states</a> described in the introduction can be customized
and condensed in very many ways. In this way very different forms of evaluation
can be flexibly generated. The are various options for this.</p></div>
<div class="sect3">
<h4 id="heading__handling_the_warn_unknown_and_host_down_states">
<span class="hidden-anchor sr-only" id="_handling_the_warn_unknown_and_host_down_states"></span>Handling the WARN, UNKNOWN and Host Down states</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_status_grouping.png" alt="avoption status grouping" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Service status grouping</span> option provides the possibility of showing
various ‘intermediate states’.
A common situation is to force <span class="state1">WARN</span> to be treated as <span class="state0">OK</span>.
This can be quite useful if you are interested in a service’s actual
<em>availability</em>. Often <span class="state1">WARN</span> doesn’t mean a real problem exists yet,
but <em>could</em> soon develop.
Thus, looked at in this way, <span class="state1">WARN</span> must be regarded as available.
With network services such as an HTTP-server, it is certainly sensible to treat
times during which the host is <span class="hstate1">DOWN</span> in the same manner as when the service
is <span class="state2">CRIT</span>.</p></div>
<div class="paragraph"><p>The states that are omitted due to the regrouping will of course also
be missing from the results table, which will have fewer columns.</p></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_host_status_grouping.png" alt="avoption host status grouping" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Host status grouping</span> option is very similar, but it relates to the
availability of hosts. The <span class="hstate2">UNREACH</span> state means that a host, due to network
problems, cannot be monitored by Checkmk.
In such situations, for the purposes of the availability calculations
you can decide whether you prefer to treat the <span class="hstate2">UNREACH</span> state
as <span class="hstate0">UP</span> or <span class="hstate1">DOWN</span>. The default is to treat <span class="hstate2">UNREACH</span> as its own state.</p></div>
</div>
<div class="sect3">
<h4 id="heading__handling_of_unmonitored_time_periods_and_flapping">
<span class="hidden-anchor sr-only" id="_handling_of_unmonitored_time_periods_and_flapping"></span>Handling of unmonitored time periods and flapping</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_status_classification.png" alt="avoption status classification" width="350"></div></div>
<div class="paragraph"><p>In the <span class="guihint">Status classification</span> option further summaries will be undertaken.
The <span class="guihint">Consider periods of flapping states</span> check box is on by
default — with this phases of frequent state changes constitute their own
state: <span class="image-inline"><img src="../images/icons/icon_flapping.png" alt="icon flapping"></span> — ‘<strong>flapping</strong>’. The idea behind this is
that even though it can be said that at such times the affected service always
returns to the <span class="state0">OK</span> state, due to the frequent outages the service is
effectively unusable.
By deactivating this option the concept of ‘flapping’ will then be completely
ignored, and the respective actual state will reappear — and the <span class="guihint">flapping</span>
column will also be removed from the table.</p></div>
<div class="paragraph"><p>Removing the <span class="guihint">Consider times where the host is down</span> option works in a similar
way. The concept of <span class="guihint">Host down</span> is deactivated.
This option only makes sense for the availability of services.
In phases during which the host is not <span class="hstate0">UP</span>, the actual state of the service
will be taken as the basis for the availability — or more precisely, the state
of the last Check before the host became unavailable. This can be sensible with
services for which their accessibility over the network is not relevant.</p></div>
<div class="paragraph"><p>The <span class="guihint">Include unmonitored time</span> option is also similar.
Assume that an analysis for February is to be made, and that a particular
service has only been in the monitoring since the 15th of February.
Does this service then have an availability of only 50 %? With the default
setting — option <em>active</em> — this will actually be the case.
The missing 50 % will not be assessed as outage, rather it will be added-together
in its own column under the title <span class="guihint">N/A</span>. Without the option it will correspond
to 100 % of the time from the 15th to the 28th of February.
This does however mean that a one hour outage for <em>this</em> service will be
reflected as double the percentage of a service that has been monitored for the
whole month.</p></div>
</div>
<div class="sect3">
<h4 id="heading__handling_of_scheduled_downtimes">
<span class="hidden-anchor sr-only" id="_handling_of_scheduled_downtimes"></span>Handling of scheduled downtimes</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_downtimes.png" alt="avoption downtimes" width="350"></div></div>
<div class="paragraph"><p>With the <span class="guihint">Scheduled Downtimes</span> option you can specify how
<a href="basics_downtimes.html">scheduled downtimes</a> affect the availability analysis:</p></div>
<div class="ulist"><ul>
<li><p><span class="guihint">Honor scheduled downtimes</span> is the default. Here downtimes will be treated as their own state and summarized in their own column. With <span class="guihint">Treat phases of UP/OK as non-downtime</span> you can subtract the times during which, despite the downtime, the service was <span class="state0">OK</span>.</p></li>
<li><p><span class="guihint">Ignore scheduled downtimes</span> is treated as if no downtime had been entered. Outages are outages — full stop. Of course then only if an outage really occurred.</p></li>
<li><p><span class="guihint">Exclude scheduled downtimes</span> means that the scheduled downtimes are simply excluded from the time period being analyzed. The percentage for the availability then corresponds to the times outside the scheduled downtimes.</p></li>
</ul></div>
</div>
<div class="sect3">
<h4 id="heading__merging_equal_phases">
<span class="hidden-anchor sr-only" id="_merging_equal_phases"></span>Merging equal phases</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_phase_merging.png" alt="avoption phase merging" width="350"></div></div>
<div class="paragraph"><p>Through the conversion of one state to another (e.g., from <span class="state1">WARN</span> to <span class="state0">OK</span>) it
can occur that consecutive sections of an object’s timeline will have the same
state. Normally such sections will be merged into a single section.
This is generally a good thing, and clear, but it does has an effect on the
display of the details in the timeline, and possibly also the counting of events
with the <span class="guihint">Outage statistics</span> option.
You can therefore deactivate this merging with the
<span class="guihint">Do not merge consecutive phases with equal state</span> option.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_softstates">
<span class="hidden-anchor sr-only" id="softstates"></span>3.4. Ignoring short interruptions</h3>
<div class="paragraph"><p>Sometimes monitoring often produce momentary problem messages, but under
normal conditions the object is already <span class="state0">OK</span> by the time the next check runs
(after one minute) — and no way has been found through adjusting thresholds or
similar to get a neat grip on such cases.
A common solution is to set the
<a href="monitoring_basics.html#max_check_attempts"><span class="guihint">Maximum number of check attempts</span></a>
from 1 to 3 to allow more failures before a notification is triggered. Thus the
concept of <span class="guihint">Soft states</span> has been developed — meaning the <span class="state1">WARN</span>, <span class="state2">CRIT</span> or
<span class="state3">UNKNOWN</span> states — as long as all of the permitted attempts have not been
‘used up’.</p></div>
<div class="paragraph"><p>We are occasionally asked by users who use this feature why Checkmk’s Availability
Module has no function for calculating using only <span class="guihint">Hard states</span>.
The reason for this: There is a better solution!
One could use the hard states as the basis…​</p></div>
<div class="ulist"><ul>
<li><p>…​ so that real outages, due to the unsuccessful first and second check attempts, will be assessed as being two minutes too short.</p></li>
<li><p>…​ and one could not <em>retrospectively</em> readjust the behavior for short outages.</p></li>
</ul></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_short_times.png" alt="avoption short times" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Short time Intervals</span> option is much more flexible and at the same time
very simple. Simply define a length of time which must be exceeded before the
states will be evaluated.</p></div>
<div class="paragraph"><p>Assume that the time value has been set to 2.5 minutes (150 seconds).
If a service has been continuously <span class="state0">OK</span>, then is <span class="state2">CRIT</span> for 2 minutes, and then
reverts to <span class="state0">OK</span>, the short <span class="state2">CRIT</span>-interval will simply be assessed as <span class="state0">OK</span>!
The opposite situation incidentally also works! A short <span class="state0">OK</span> within a long
<span class="state1">WARN</span>-phase will likewise be assessed as <span class="state1">WARN</span>.</p></div>
<div class="paragraph"><p>Generally speaking, short intervals for which <em>before and after
the same state prevails</em> will receive that same state.
For a sequence of <span class="state0">OK</span>, then a 2 minute <span class="state1">WARN</span>, followed by <span class="state2">CRIT</span>, the <span class="state1">WARN</span>
will persist — even if it was of a shorter duration than the defined
length of time!</p></div>
<div class="paragraph"><p>Bear in mind when defining the time, that in Checkmk the standard check interval
is one minute. Thus every state has a duration of multiples of
<em>approximately</em> one minute. Because the agent’s actual response times vary
slightly, this can easily be 61 or 59 seconds.
Therefore it is safer to not enter exact minutes for the value,
rather to include a buffer — hence the example with 2.5 minutes.</p></div>
</div>
<div class="sect2">
<h3 id="heading_serviceperiod">
<span class="hidden-anchor sr-only" id="serviceperiod"></span>3.5. Effect of time periods</h3>
<div class="paragraph"><p>An important function of the availability calculations in Checkmk is that they
can be made dependent on <a href="timeperiods.html">time periods</a>. With this times
can be defined for every individual host or service.
In these times the host/service will be expected to be available and the state
then used for the calculations. Therefore every object has the
<span class="guihint">Service period</span> attribute. The procedure is as follows:</p></div>
<div class="ulist"><ul>
<li><p>Define a time period for the service times.</p></li>
<li><p>Assign these to the objects with the <span class="guihint">Host &amp; Service parameters &gt; Monitoring configuration &gt; Service period for hosts</span> or respectively the <span class="guihint">…​ for services</span> rule sets.</p></li>
<li><p>Activate the changes.</p></li>
<li><p>Use the <span class="guihint">Service time</span> Availability-option to control the behavior:</p></li>
</ul></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_service_time.png" alt="avoption service time" width="350"></div></div>
<div class="paragraph"><p>Here there are three simple possibilities. The default
<span class="guihint">Base report only on service times</span> hides times outside the defined
service times. These hidden times then don’t count towards the 100 %.
Only the time ranges within the service times will be actually considered.
In the timeline display the remaining times will be ‘grayed-out’.</p></div>
<div class="paragraph"><p><span class="guihint">Base report only on non-service times</span> performs the opposite,
and and in effect calculates the inverse display: How good was the availability
<em>outside</em> the service times?</p></div>
<div class="paragraph"><p>The third option <span class="guihint">Include both service and non-service times</span> deactivates
the complete concept of service times and shows the calculations for
all times from Monday 00:00 to Sunday 24:00.</p></div>
<div class="paragraph"><p>By the way: If a host is not in the service time, for Checkmk it <em>does not</em>
automatically mean that this also applies to the services on the host.
Services always require their own rule in <span class="guihint">Service period for services</span>.</p></div>
<div class="sect3">
<h4 id="heading__the_notification_period">
<span class="hidden-anchor sr-only" id="_the_notification_period"></span>The notification period</h4>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_notification_period.png" alt="avoption notification period" width="350"></div></div>
<div class="paragraph"><p>There is incidentally another related option: <span class="guihint">Notification period</span>.
Here the notification period for the evaluation can also be drawn on.
This was actually only conceived so that for particular times no notifications
for problems would be generated, and does not necessarily cover the service time.
This option was introduced in the past when the software did not yet work with a
service time, and nowadays it has only been retained for compatibility reasons.
It is better not to use it.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__limiting_the_calculation_time">
<span class="hidden-anchor sr-only" id="_limiting_the_calculation_time"></span>3.6. Limiting the calculation time</h3>
<div class="paragraph"><p>When calculating availability, the complete history of the selected object must
be reopened. How that works in detail can be learned
<a href="#technical">further below</a>. Especially in the <span class="image-inline"><img src="../images/icons/CRE.png" alt="CRE" width="20" title="Checkmk Raw Edition"></span> <strong>Checkmk Raw Edition</strong>, the analysis
can take some time, since its core has no cache for the required data and the
text-based log data must be sequentially searched.</p></div>
<div class="paragraph"><p>So that an excessively-complex query — that may possibly have been started
unintentionally — does not tie up an Apache process, consume CPU and thus
‘hangs’, there are two options to limit the calculation’s duration.
Both are activated by default:</p></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_query_time_limit.png" alt="avoption query time limit" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Query time limit</span> limits the duration of the underlying query to the
monitoring core to a specified time. This is predefined as thirty seconds.
If this time is exceeded the analysis will be aborted and an error highlighted.
If you are certain that the analysis can be allowed to run for longer,
simply raise the timeout manually.</p></div>
<div class="imageblock inline-image"><div class="content"><img src="../images/avoption_limit_data.png" alt="avoption limit data" width="350"></div></div>
<div class="paragraph"><p>The <span class="guihint">Limit processed data</span> option protects from calculations with many
objects. Here a limit will be applied that functions analogous to that in the
<a href="views.html#limit">views</a>. If the query to the monitoring core will produce more
than 5000 time periods, the calculation will be aborted with a warning.
The limitation will have been pre-processed in the core — where the data
is gathered.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_bi">
<span class="hidden-anchor sr-only" id="bi"></span>4. Availability in Business Intelligence</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__the_basic_principle_2">
<span class="hidden-anchor sr-only" id="_the_basic_principle_2"></span>4.1. The basic principle</h3>
<div class="paragraph"><p>A powerful feature of Checkmk’s availability calculation is the facility
to calculate the availability from <a href="bi.html">BI aggregations</a>. The big attraction
here is that for this purpose Checkmk <em>retroactively</em> reconstructs
the precise state of the respective aggregates at a particular point in time
by using the protocols of the states of the individual hosts and services.</p></div>
<div class="paragraph"><p>Why so much time and effort? Why not just query the BI aggregation with an
active Check, and then show its availability? Well, the effort has quite
a number of advantages for the user:</p></div>
<div class="ulist"><ul>
<li><p>The construction of BI aggregations can be adapted retrospectively, and then the availability can be recalculated.</p></li>
<li><p>The calculation is more precise, since by not using an active check an inaccuracy of +/- one minute is not generated.</p></li>
<li><p>An excellent analysis function is available, with which the exact cause of an outage can be retrospectively investigated.</p></li>
<li><p>More importantly, an extra check must not be created.</p></li>
</ul></div>
</div>
<div class="sect2">
<h3 id="heading__availability_retrieval_2">
<span class="hidden-anchor sr-only" id="_availability_retrieval_2"></span>4.2. Availability retrieval</h3>
<div class="paragraph"><p>Retrieving the availability view is initially analogous to that for the hosts and services.
Select a view with one or more BI aggregations, and select the <span class="guihint">BI Aggregations &gt; Availability</span> menu item.
Here there is also a second method — every BI aggregation has a direct path
to its availability using the <span class="image-inline"><img src="../images/icons/button_availability.png" alt="button availability"></span> symbol:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_bi_icon.png" alt="avail bi icon"></div></div>
<div class="paragraph"><p>In itself the calculation is initially analogous to that for the services,
however without the <span class="guihint">Host down</span> and <span class="guihint">flapping</span> columns, since these states
do not exist for BI:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_bi_table.png" alt="avail bi table"></div></div>
</div>
<div class="sect2">
<h3 id="heading__time_travel">
<span class="hidden-anchor sr-only" id="_time_travel"></span>4.3. Time travel</h3>
<div class="paragraph"><p>The big difference is in the <span class="image-inline"><img src="../images/icons/button_timeline.png" alt="button timeline"></span> time line view.
The following example shows an aggregate in our demo server, which was <span class="state2">CRIT</span>
for a very brief interval of one second (this would be a good example for the
use of the <span class="guihint">Short time intervals</span> option).</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_bi_timeline.png" alt="avail bi timeline"></div></div>
<div class="paragraph"><p>Do you want to know what the cause of the outage was? A simple click
<span class="image-inline"><img src="../images/icons/button_timewarp.png" alt="button timewarp"></span> on the magic wand is enough. This enables a journey
through time to the exact point of time when the outage occurred,
and opens a display of the BI aggregation at that time — in the following image,
already opened at the correct location:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_bi_timewarp.png" alt="avail bi timewarp"></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__availability_in_reports">
<span class="hidden-anchor sr-only" id="_availability_in_reports"></span>5. Availability in reports</h2>
<div class="sectionbody">
<div class="paragraph"><p>Availability views can be embedded in <a href="reporting.html">reports</a>.
The simplest way is via the <span class="guihint">Add to</span> menu in the menu bar:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_addto.png" alt="avail addto"></div></div>
<div class="paragraph"><p>The <span class="guihint">Availability table</span> report element inserts an availability analysis into
the report. All of the options discussed above can be found as parameters
directly in the element — although in a slightly different graphic form:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_reporting_options.png" alt="avail reporting options"></div></div>
<div class="paragraph"><p>The final option is a special one:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_reporting_elements.png" alt="avail reporting elements"></div></div>
<div class="paragraph"><p>Here you can specify which display should be added to the report:</p></div>
<div class="ulist"><ul>
<li><p>The availability table</p></li>
<li><p>The graphic display of the timeline</p></li>
<li><p>The timeline in detail with the individual time periods</p></li>
</ul></div>
<div class="paragraph"><p>Unlike the normal interactive views, here you can <em>simultaneously</em> embed
tables and timelines into reports.</p></div>
<div class="paragraph"><p>A second feature is the specification of the evaluation time period.
This option is missing here, because it is predetermined automatically by the report.</p></div>
<div class="paragraph"><p>The object selection, as with every report element, is either adopted from the
report or predefined directly in the element.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_technical">
<span class="hidden-anchor sr-only" id="technical"></span>6. Technical background</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__how_the_calculations_function">
<span class="hidden-anchor sr-only" id="_how_the_calculations_function"></span>6.1. How the calculations function</h3>
<div class="paragraph"><p>For calculating the availability, Checkmk accesses the archived monitoring history
logs, and to do so orients itself to the <em>state changes</em>.
If, for example, at 5:14 p.m. on 10/20/2021 a service changes its state to <span class="state2">CRIT</span>,
and then at at 5:24 p.m. changes back to <span class="state0">OK</span>, then you know that during this 10 minute
time period the service was in a <span class="state2">CRIT</span> state.</p></div>
<div class="paragraph"><p>These state changes are recorded in the Monitoring log, have the alert type
<code>HOST ALERT</code> or <code>SERVICE ALERT</code>, and look like this for example:</p></div>
<div class="listingblock">
<div class="title">var/check_mk/core/history</div>
<div class="content"><pre class="pygments highlight"><code><span></span>[1634742874] SERVICE ALERT: mail.mydomain.com;Filesystem /var/spool;CRITICAL;HARD;1;CRIT - 95.9% used (206.96 of 215.81 GB), (warn/crit at 90.00/95.00%), trend: 0.00 B / 24 hours</code></pre></div>
</div>
<div class="paragraph"><p>There is always a current log file which includes entries for the most recent
activity up to the present point in time, as well as a directory with an
archive of the preceding periods.
The location of these files varies, depending on the monitoring core in use:</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Core</th>
<th class="tableblock halign-left valign-top">Current file</th>
<th class="tableblock halign-left valign-top">Older files</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image-inline"><img src="../images/icons/CRE.png" alt="CRE"></span> Nagios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/log/nagios.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/nagios/archive/</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image-inline"><img src="../images/icons/CEE.png" alt="CEE"></span> <a href="cmc.html">CMC</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/check_mk/core/history</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/check_mk/core/archive</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>The <a href="user_interface.html">user interface</a> does not access these files directly,
rather it queries them using a <a href="livestatus.html">Livestatus</a>-query issued from the
monitoring core.
Among other factors, this is important since in a
<a href="distributed_monitoring.html">distributed monitoring</a> the history files are not stored
on the same system as the GUI.</p></div>
<div class="paragraph"><p>The Livestatus query makes use of the <code>statehist</code> table. In contrast to
the <code>log</code> table – which provides a ‘naked’ access to the history — here the <code>statehist</code> table is used because it has already performed the
initial time-consuming calculation steps. Among other things it assumes the task
of checking back in the history to determine the initial state, and the
calculation of time periods with the same state, with their starts,
durations and ends.</p></div>
<div class="paragraph"><p>The condensing of the states procedure is performed in the user overview
by the Availability Module, as described at the beginning of this article.</p></div>
</div>
<div class="sect2">
<h3 id="heading__the_availability_cache_in_cmc">
<span class="hidden-anchor sr-only" id="_the_availability_cache_in_cmc"></span>6.2. The availability cache in CMC</h3>
<div class="sect3">
<h4 id="heading__how_the_cache_works">
<span class="hidden-anchor sr-only" id="_how_the_cache_works"></span>How the cache works</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
For queries that reach far back into the past, many log
files must be processed accordingly. That obviously has a negative effect on
the duration of the calculation. For this reason, in the Checkmk
Micro Core there is a very efficient cache of the monitoring history,
in which from the start all important information on objects' changes of state
has already been determined from the log files held in RAM, and which is
continuously updated in the active monitoring.
The consequence of this is that <strong>all</strong> availability queries can be
answered directly and very efficiently from the RAM, and thus no further
access is required.</p></div>
<div class="paragraph"><p>Parsing the log files is very rapid, and with suitably fast hard drives can
achieve a processing speed of up to 80 MB/sec! So that creating the cache does
not delay the start of the monitoring, this is performed asynchronously — from the present back to the past in fact. A short delay will be noticeable
if <em>directly following the start</em> of the Checkmk site an
availability query covering a long time range is initiated immediately.
In such a situation it is possible that the cache does not yet reach far enough
back into the past, and that the GUI needs a few moments to think about it.</p></div>
<div class="paragraph"><p>With an <span class="guihint">Activate changes</span> the cache is retained! Only with an actual
(re)start of Checkmk will it need to be newly generated — for example,
following a server reboot or an update of Checkmk.</p></div>
</div>
<div class="sect3">
<h4 id="heading__cache_statistics">
<span class="hidden-anchor sr-only" id="_cache_statistics"></span>Cache statistics</h4>
<div class="paragraph"><p>If you are curious about how long the generation of a cache could take,
a statistic can be found in the <code>var/log/cmc.log</code> log file. Here is an
example from a smaller monitoring system:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_statehist_cache.png" alt="avail statehist cache"></div></div>
</div>
<div class="sect3">
<h4 id="heading__tuning_the_cache">
<span class="hidden-anchor sr-only" id="_tuning_the_cache"></span>Tuning the cache</h4>
<div class="paragraph"><p>In order to keep the cache’s storage requirement under control, it is limited to
a horizon of up to 730 days into the past. This limit is fixed — thus queries
reaching further back into the past are not merely slower, they are impossible.
This can be easily customized using the <span class="guihint">Global Settings &gt; Monitoring Core &gt; In-memory cache for availability data</span> global setting:</p></div>
<div class="imageblock"><div class="content"><img src="../images/avail_histcache.png" alt="avail histcache"></div></div>
<div class="paragraph"><p>Alongside the horizon for the calculation, additionally there is a second
interesting setting: <span class="guihint">Ignore core restarts shorter than…​</span>. A new start of
the core (e.g., for the purpose of an update or server restart) actually
produces time periods counting as <span class="guihint">unmonitored</span>. Outages of up to 30 seconds
will thereby simply be ignored. This time can be increased and longer times
can also be simply suppressed. The availability calculation will then assume
that all hosts and services have maintained their respective last
communicated states for the whole time.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_files">
<span class="hidden-anchor sr-only" id="files"></span>7. Files and directories</h2>
<div class="sectionbody"><table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">File path</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/check_mk/core/history</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current log file for the monitoring history in the CMC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/check_mk/core/archive/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory with the history’s older log files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/log/cmc.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CMC’s log file, in which the availability cache’s statistics can be viewed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/nagios/nagios.log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current log file for Nagios’ monitoring history</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/nagios/archive/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory with the older log files in Nagios</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var/check_mk/availability_annotations.mk</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Here the <a href="#annotations">annotations</a> and retrospectively-amended scheduled downtimes for outages are stored. The file is in the Python-format and can be manually edited.</p></td>
</tr>
</tbody>
</table></div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li>
<a href="#_the_basic_principle">1. The basic principle</a><ul class="sectlevel1">
<li><a href="#_a_look_back_into_the_past">1.1. A look back into the past</a></li>
<li><a href="#states">1.2. Possible states</a></li>
</ul>
</li>
<li>
<a href="#_availability_retrieval">2. Availability retrieval</a><ul class="sectlevel1">
<li><a href="#_from_the_view_to_the_analysis">2.1. From the view to the analysis</a></li>
<li><a href="#timeline">2.2. Timeline display</a></li>
<li><a href="#annotations">2.3. Annotations and subsequent downtimes</a></li>
<li><a href="#_displaying_monitoring_history">2.4. Displaying monitoring history</a></li>
</ul>
</li>
<li>
<a href="#options">3. Calculation options</a><ul class="sectlevel1">
<li><a href="#option_timerange">3.1. Choosing the time range</a></li>
<li>
<a href="#_options_affecting_displays">3.2. Options affecting displays</a><ul class="sectlevel2">
<li><a href="#_hide_lines_with_100_availability">Hide lines with 100 % availability</a></li>
<li><a href="#_labelling_options">Labelling options</a></li>
<li><a href="#thresholds">Using colors when displaying SLAs with thresholds</a></li>
<li><a href="#_displaying_the_number_and_duration_of_the_individual_outages">Displaying the number and duration of the individual outages</a></li>
<li><a href="#format_time_range">Time specification display</a></li>
<li><a href="#_customizing_the_summary_line">Customizing the summary line</a></li>
<li><a href="#_showing_the_small_timeline">Showing the small timeline</a></li>
<li><a href="#_grouping_by_host_host_group_or_service_group">Grouping by host, host group or service group</a></li>
<li><a href="#_only_display_availability">Only display availability</a></li>
</ul>
</li>
<li>
<a href="#_grouping_of_states">3.3. Grouping of states</a><ul class="sectlevel2">
<li><a href="#_handling_the_warn_unknown_and_host_down_states">Handling the WARN, UNKNOWN and Host Down states</a></li>
<li><a href="#_handling_of_unmonitored_time_periods_and_flapping">Handling of unmonitored time periods and flapping</a></li>
<li><a href="#_handling_of_scheduled_downtimes">Handling of scheduled downtimes</a></li>
<li><a href="#_merging_equal_phases">Merging equal phases</a></li>
</ul>
</li>
<li><a href="#softstates">3.4. Ignoring short interruptions</a></li>
<li>
<a href="#serviceperiod">3.5. Effect of time periods</a><ul class="sectlevel2"><li><a href="#_the_notification_period">The notification period</a></li></ul>
</li>
<li><a href="#_limiting_the_calculation_time">3.6. Limiting the calculation time</a></li>
</ul>
</li>
<li>
<a href="#bi">4. Availability in Business Intelligence</a><ul class="sectlevel1">
<li><a href="#_the_basic_principle_2">4.1. The basic principle</a></li>
<li><a href="#_availability_retrieval_2">4.2. Availability retrieval</a></li>
<li><a href="#_time_travel">4.3. Time travel</a></li>
</ul>
</li>
<li><a href="#_availability_in_reports">5. Availability in reports</a></li>
<li>
<a href="#technical">6. Technical background</a><ul class="sectlevel1">
<li><a href="#_how_the_calculations_function">6.1. How the calculations function</a></li>
<li>
<a href="#_the_availability_cache_in_cmc">6.2. The availability cache in CMC</a><ul class="sectlevel2">
<li><a href="#_how_the_cache_works">How the cache works</a></li>
<li><a href="#_cache_statistics">Cache statistics</a></li>
<li><a href="#_tuning_the_cache">Tuning the cache</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#files">7. Files and directories</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
