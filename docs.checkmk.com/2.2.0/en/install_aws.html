<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Checkmk provides an (almost) turnkey image in the AWS Marketplace. In this article, you will learn how to complete the setup.">
<meta name="og:locale" content="en">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Installation from AWS Marketplace">
<meta name="og:description" content="Checkmk provides an (almost) turnkey image in the AWS Marketplace. In this article, you will learn how to complete the setup.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Installation from AWS Marketplace</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Search docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.2.0/en"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.2.0/en"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">en</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.2.0/de/install_aws.html">Deutsch</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.2.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/en/install_aws.html">2.1.0</a><a class="dropdown-item" href="../../latest/en/install_aws.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_welcome_to_checkmk">
<a class="anchor" href="#_welcome_to_checkmk"></a>1. Welcome to Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Welcome to the Checkmk User Guide</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossary</a></p>
</li>
<li>
<p><a href="search.html">Searching docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_beginners_guide">
<a class="anchor" href="#_beginners_guide"></a>2. Beginnerâ€™s Guide</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Setting up Checkmk</a></p>
</li>
<li>
<p><a href="intro_gui.html">The Checkmk user interface</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Setting up monitoring</a></p>
</li>
<li>
<p><a href="intro_tools.html">The monitoring tools</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk in monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Fine-tuning the monitoring</a></p>
</li>
<li>
<p><a href="intro_users.html">Working with multiple users</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Switching on notifications</a></p>
</li>
<li>
<p><a href="intro_extend.html">Extending the monitoring system further</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best practices, tips &amp; tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Basic information on the installation of Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_and_vms">
<a class="anchor" href="#_server_and_vms"></a>3.1. Server and VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation on Debian and Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation on Red Hat and derivatives</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation on SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, container, cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation of Checkmk in the appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation as a Docker container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation from Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation from AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates and Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update to version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update matrix for version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux upgrade on the Checkmk server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk versions</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_of_checkmk">
<a class="anchor" href="#_administration_of_checkmk"></a>4. Administration of Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Authentication with SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single sign-on with Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk server in a Docker container</a></p>
</li>
<li>
<p><a href="security.html">Security</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Securing the web interface with HTTPS</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sites">
<a class="anchor" href="#_sites"></a>4.2. Sites</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Site administration with omd</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk on the command line</a></p>
</li>
<li>
<p><a href="license.html">Managing licenses</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Distributed monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Password store</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Analyzing the Checkmk site configuration</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk extension packages (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs for GUI extensions</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Simulation mode</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">
<a class="anchor" href="#_configuration"></a>5. Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Configuring Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Host administration</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Host structuring</a></p>
</li>
<li>
<p><a href="host_tags.html">Host tags</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamic host configuration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automated host creation</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Understanding and configuring services</a></p>
</li>
<li>
<p><a href="clustered_services.html">Monitoring cluster services</a></p>
</li>
<li>
<p><a href="piggyback.html">The piggyback mechanism</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rules">
<a class="anchor" href="#_rules"></a>5.3. Rules</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Rules</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporting_configurations">
<a class="anchor" href="#_supporting_configurations"></a>5.4. Supporting configurations</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Time periods</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Regular expressions in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_users_and_permissions">
<a class="anchor" href="#_users_and_permissions"></a>5.5. Users and permissions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Users, roles and permissions</a></p>
</li>
<li>
<p><a href="ldap.html">User management with LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_notifications">
<a class="anchor" href="#_notifications"></a>5.6. Notifications</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Notifications</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Notifications via Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Notifications via ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Notifications via Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Notifications via Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Notifications via Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Notifications via PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Notifications via Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Notifications via Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Notifications via ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Notifications via Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Notifications via Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">The Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert handlers</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitoring_systems">
<a class="anchor" href="#_monitoring_systems"></a>6. Monitoring systems</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring agents</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agents_and_snmp">
<a class="anchor" href="#_checkmk_agents_and_snmp"></a>6.1. Checkmk agents and SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatic agent updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Monitoring Linux</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Monitoring Linux in legacy mode</a></p>
</li>
<li>
<p><a href="agent_windows.html">Monitoring Windows</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">Monitoring FreeBSD</a></p>
</li>
<li>
<p><a href="snmp.html">Monitoring via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agent_extensions">
<a class="anchor" href="#_agent_extensions"></a>6.2. Agent extensions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">The HW/SW inventory</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Monitoring files</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Monitoring log files</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Monitoring Oracle databases</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">Monitoring MySQL</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">Monitoring MSSQL</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Monitoring time-based processes (Cronjobs)</a></p>
</li>
<li>
<p><a href="spool_directory.html">The spool directory</a></p>
</li>
<li>
<p><a href="localchecks.html">Local checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, cloud, container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datasource programs</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">Monitoring VMware ESXi</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Monitoring Amazon Web Services (AWS)</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Monitoring Microsoft Azure</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Monitoring Google Cloud Platform (GCP)</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Monitoring Kubernetes</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">Monitoring OpenShift</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Monitoring Docker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpoints">
<a class="anchor" href="#_endpoints"></a>6.4. Endpoints</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Monitoring network services (Active checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metrics">
<a class="anchor" href="#_dashboards_views_metrics"></a>7. Dashboards, views, metrics</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">The user interface</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general">
<a class="anchor" href="#_general"></a>7.1. General</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Host and service views</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Measured values and graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Custom notes</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_commands_in_views">
<a class="anchor" href="#_commands_in_views"></a>7.2. Commands in views</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Commands</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Acknowledging problems</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Scheduled downtimes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_and_prognosis">
<a class="anchor" href="#_analysis_and_prognosis"></a>8. Analysis and prognosis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_analysis">
<a class="anchor" href="#_analysis"></a>8.1. Analysis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Availability</a></p>
</li>
<li>
<p><a href="sla.html">Extended availability (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Reports</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosis">
<a class="anchor" href="#_prognosis"></a>8.2. Prognosis</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Predictive monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Forecast graphs</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connection_of_other_applications">
<a class="anchor" href="#_connection_of_other_applications"></a>9. Connection of other applications</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Integrating Prometheus</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Integrating Datadog</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: status data on maps and diagrams</a></p>
</li>
<li>
<p><a href="ntop.html">Integrating ntopng in Checkmk</a></p>
</li>
<li>
<p><a href="grafana.html">Integrating Checkmk in Grafana</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Sending metrics to InfluxDB and Graphite</a></p>
</li>
<li>
<p><a href="nagstamon.html">Integrating Checkmk in Nagstamon</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifics_to_the_editions">
<a class="anchor" href="#_specifics_to_the_editions"></a>10. Specifics to the editions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">The Standard Edition</a></p>
</li>
<li>
<p><a href="cce.html">The Cloud Edition</a></p>
</li>
<li>
<p><a href="managed.html">The Managed Services Edition</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support diagnostics</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automation_and_development">
<a class="anchor" href="#_automation_and_development"></a>11. Automation and development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_for_automation">
<a class="anchor" href="#_apis_for_automation"></a>11.1. APIs for automation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">The Checkmk REST API</a></p>
</li>
<li>
<p><a href="livestatus.html">Retrieving status data via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus command reference</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_for_development">
<a class="anchor" href="#_apis_for_development"></a>11.2. APIs for development</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">The Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_check_plug_ins">
<a class="anchor" href="#_development_of_check_plug_ins"></a>11.3. Development of check plug-ins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Developing extensions for Checkmk</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Writing agent-based check plug-ins</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">Writing SNMP-based check plug-ins</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts">
<a class="anchor" href="#_concepts"></a>12. Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Basic principles of monitoring with Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_the_checkmk_micro_core_cmc">
<a class="anchor" href="#_the_checkmk_micro_core_cmc"></a>12.1. The Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">The Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Special characteristics of the CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration to the CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">CMC files and directories</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_checkmk_appliance">
<a class="anchor" href="#_the_checkmk_appliance"></a>13. The Checkmk appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Quick start guide for Checkmk racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Quick start guide for Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Installation of the virtual appliance</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Configuring and using the appliance</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in the appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance in cluster operation</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Special features of the hardware appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Installation from AWS Marketplace</h1>
<div class="details">
<span id="revdate">Last modified on 18-Jul-2023</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.2.0/src/onprem/en/install_aws.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">This page was exported for offline usage on 2025-01-07 22:12:14 +0000. It may not reflect the current state of the Checkmk documentation. To view a daily updated version, visit <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a>.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="intro_setup.html">Setting up Checkmk</a>
<a href="install_packages.html">Basic information on the installation of Checkmk</a>
<a href="update.html">Updates and Upgrades</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_welcome">
<span class="hidden-anchor sr-only" id="welcome"></span>1. Welcome to Checkmk as AMI</h2>
<div class="sectionbody">
<div class="paragraph"><p>Whether you are a long-time user of Checkmk or have only recently found us with the availability of ready-made images in the Amazon Web Services (AWS) Marketplace, in this article you will find all of the resources required to configure the prepared <em>Amazon Machine Image (AMI)</em> into a monitoring suitable for your needs.</p></div>
<div class="paragraph"><p>If you are new to Checkmk, we recommend reading our <a href="intro_setup.html">Beginnerâ€™s Guide</a> in preparation.
Preconfigured VM images may shortcut many tasks during an installation, but some knowledge of fundamental concepts, such as <a href="glossar.html#site">sites</a>, will help during the setup process.</p></div>
<div class="sect2">
<h3 id="heading_basics">
<span class="hidden-anchor sr-only" id="basics"></span>1.1. The basics</h3>
<div class="paragraph"><p>If you are an AWS user, you have always had the option of adding Checkmk to an <a href="https://aws.amazon.com/marketplace/pp/prodview-o5bowpuwmx3ng?sr=0-10&amp;ref_=beagle&amp;applicationId=AWSMPContessa" target="_blank">existing Ubuntu image</a> available in the Marketplace, in order to set up a 'monitoring in the cloud'.
Checkmk <span class="new">2.2.0</span> takes this a step further and provides <a href="https://aws.amazon.com/marketplace/pp/prodview-gddkal2hfn7yo" target="_blank">a pre-installed image</a> based on Ubuntu 22.04 <em>(Jammy Jellyfish)</em> with all of the required dependencies already included.
Only the <a href="cce.html">Cloud Edition</a> is used here.
This will be in a 30-day 'Trial' license state with no restrictions when the first site is set up.
After the trial period expires, Checkmk can continue to be used as a single site with up to 750 monitored services without requiring a subscription.
If more services need to be monitored, or more sites are required, you will need a <a href="license.html#license_cce">license key</a>.</p></div>
<div class="paragraph"><p>In general, the setup is a bit more involved than, for example, <a href="introduction_docker.html">Docker image</a>, after all, the image provided must cover various deployment scenarios:</p></div>
<div class="ulist"><ul>
<li><p>A <em>single site setup</em> on a server at various scales</p></li>
<li><p>Central site in a distributed monitoring</p></li>
<li><p>Remote site in a distributed monitoring</p></li>
<li><p>Mixed operations consisting of a production site and site(s) for running tests on a host</p></li>
</ul></div>
<div class="paragraph"><p>For this reason, the AM image does not include a ready-to-run site, an email or a firewall configuration.</p></div>
<div class="paragraph"><p>In this article we will guide you through the complete setup.
Where additional background information would be useful, we link to detailed articles in our User Guide.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_preparation">
<span class="hidden-anchor sr-only" id="preparation"></span>2. Preparation</h2>
<div class="sectionbody">
<div class="paragraph"><p>As well as the dimensioning of RAM, processor and virtual hard drives, you should also think about the location for the storage of backups.
Checkmk natively supports Amazonâ€™s object stores, but backups can also be stored in file system paths, which allows backups to SMB or WebDAV mounts or regular transfers via <code>rsync</code>.</p></div>
<div class="sect2">
<h3 id="heading_ssh_keys">
<span class="hidden-anchor sr-only" id="ssh_keys"></span>2.1. Creating SSH keys</h3>
<div class="paragraph"><p>AWS currently supports keys in the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/create-key-pairs.html" target="_blank">ED25519 and RSA formats</a>.
You can create an ED25519 key pair for the first login to the virtual machine, whose <em>public key</em> you upload when you create the VM.
Alternatively, you can let AWS create the key pair.
In this case, do not forget to save the private key immediately after creation, because it will next be automatically deleted for security reasons.</p></div>
</div>
<div class="sect2">
<h3 id="heading_ports">
<span class="hidden-anchor sr-only" id="ports"></span>2.2. Determining the required ports</h3>
<div class="paragraph"><p>In a Checkmk configuration with a single site setup, in which hosts also send data to the Checkmk site in the push mode, the following Checkmk server ports must be accessible:</p></div>
<div class="ulist"><ul>
<li><p>From the hosts in monitoring: Port 80/443 (HTTP/HTTPS, during agent registration) and Port 8000 (the Agent Receiver, permanently).</p></li>
<li><p>For management via the browser and the REST API: Port 80/443 (HTTP/HTTPS)</p></li>
</ul></div>
<div class="paragraph"><p>The sharing of these ports is predefined in our <span class="guihint">Standard Security Groups</span>.
For best possible security, you should further restrict access to the IP address ranges you actually need.</p></div>
<div class="paragraph"><p>Consult our <a href="ports.html">overview of all ports used</a> if you want to set up a distributed monitoring or, for example, make status queries via the <a href="glossar.html#livestatus">Livestatus</a> interface.</p></div>
</div>
<div class="sect2">
<h3 id="heading_book_vm">
<span class="hidden-anchor sr-only" id="book_vm"></span>2.3. Booking an image in the Marketplace</h3>
<div class="paragraph"><p>The following VM instances represent a recommendation for the dimensioning of the number of services to be monitored.</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 22%;">
<col style="width: 22%;">
<col style="width: 22%;">
<col style="width: 34%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">CPU cores</th>
<th class="tableblock halign-left valign-top">RAM (GB)</th>
<th class="tableblock halign-left valign-top">Checkmk services</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c6a.xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c6a.2xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c6a.4xlarge</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60 000</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>The basis for such calculations of dimensioning is approximately 15Â % of services by <a href="glossar.html#special_agent">special agents</a> and <a href="glossar.html#active_check">active checks</a>, as well as 25 or more services per regular host delivered via an agent in <a href="glossar.html#push_mode">push mode</a>.
Under certain circumstances, significantly more services are possible in a purely synthetic monitoring (in which data is primarily delivered by special agents).
When using agents in <a href="glossar.html#pull_mode">pull mode</a>, the specified number of services may only be achievable through consistent optimization.</p></div>
<div class="paragraph"><p>The dimensioning of the hard disk space is based on experience of typical Windows and Linux server environments.
If there are many services producing a large volume of metrics, a larger amount of storage space may be required.</p></div>
</div>
<div class="sect2">
<h3 id="heading_book_backup">
<span class="hidden-anchor sr-only" id="book_backup"></span>2.4. Booking backup storage</h3>
<div class="paragraph"><p>Because of the favorable traffic costs, we advise the use of an <em>AWS S3 Bucket</em>.
For the calculation of the required storage space, read the <a href="graphing.html#rrds">notes on the RRD data format</a>.
As a rule of thumb for calculating a full backup, <em>Round Robin Databases</em> will have reached just over a third of their maximum capacity after 10 days.
This means that after this time it makes sense to again review the size of the backup storage that has been booked.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_setup">
<span class="hidden-anchor sr-only" id="setup"></span>3. Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_login">
<span class="hidden-anchor sr-only" id="login"></span>3.1. Login to the virtual machine</h3>
<div class="paragraph"><p>The root login is disabled on the AWS/Azure images.
Instead, the user <code>ubuntu</code> is employed, which has permission to run <code>sudo</code> with arbitrary commands without a password prompt.
If you have created a separate key pair for login to the virtual machine, you must specify the path to its private component with the <code>-i</code> parameter.
Of course, the IP address must be customized to the one under which the VM can be accessed from a remote location:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">user@host:~$ </span>ssh<span class="tok-w"> </span>-i<span class="tok-w"> </span>/path/to/id_file.priv<span class="tok-w"> </span>ubuntu@192.0.2.123</code></pre></div></div>
<div class="paragraph"><p>You will now find yourself at the <code>ubuntu</code> user prompt.
The actual prompt can contain the host name specified when the VM was created or an IP address as the host name.
We will use the host name <code>cloud</code> throughout the rest of this article:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_create_site">
<span class="hidden-anchor sr-only" id="create_site"></span>3.2. Setting up a site</h3>
<div class="paragraph"><p>A Checkmk site must have a unique name and should also be easily identifiable.
Here, as in most other places in this manual, we use <code>mysite</code> as the site name.</p></div>
<div class="paragraph"><p>Creating a site is performed with the Checkmk administration tool <a href="omd_basics.html"><code>omd</code></a>.
The latest version of Checkmk is always pre-installed:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>create<span class="tok-w"> </span>mysite
<span class="tok-go">Adding /opt/omd/sites/mysite/tmp to /etc/fstab.</span>
<span class="tok-go">Creating temporary filesystem /omd/sites/mysite/tmp...<span class="green">OK</span></span>
<span class="tok-go">Updating core configuration...</span>
<span class="tok-go">Generating configuration for core (type cmc)...</span>

<span class="tok-go">Starting full compilation for all hosts Creating global helper config...<span class="green">OK</span></span>
<span class="tok-go"> Creating cmc protobuf configuration...<span class="green">OK</span></span>
<span class="tok-go">Executing post-create script "01_create-sample-config.py"...<span class="green">OK</span></span>
<span class="tok-go">Restarting Apache...<span class="green">OK</span></span>
<span class="tok-go">Created new site mysite with version 2.2.0p1.cce.</span>

<span class="tok-go">  The site can be started with omd start mysite.</span>
<span class="tok-go">  The default web UI is available at http://cloud/mysite/</span>

<span class="tok-go">  The admin user for the web applications is cmkadmin with password: UbWeec9QuazIf</span>
<span class="tok-go">  For command line administration of the site, log in with 'omd su mysite'.</span>
<span class="tok-go">  After logging in, you can change the password for cmkadmin with 'cmk-passwd cmkadmin'.</span></code></pre></div></div>
<div class="paragraph"><p>Now start the newly created site with</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>start<span class="tok-w"> </span>mysite</code></pre></div></div>
<div class="paragraph"><p>The URL in the command output shown above (<code>http://cloud/mysite</code>) contains the host name used internally by your AWS or Azure VM.
Since it is usually not resolved externally, this URL is of limited use.
Typically, you will initially access it using the IP address or a host name stored in your own DNS server.</p></div>
</div>
<div class="sect2">
<h3 id="heading_ssl_certs">
<span class="hidden-anchor sr-only" id="ssl_certs"></span>3.3. Storing certificates</h3>
<div class="paragraph"><p>For the system Apache to be able to actually listen on HTTPS port 443, it will require valid certificates.
The self-signed <a href="https://packages.ubuntu.com/en/jammy/all/ssl-cert/filelist" target="_blank"><em>Snakeoil Inc.</em> certificates</a> are generated for this purpose when the virtual machine is first started.
We strongly advise replacing these as soon as possible with your <a href="omd_https.html">own certificates</a> that allow the complete certificate chain to be easily verified.</p></div>
<div class="paragraph"><p>In doing so, the Apache configuration closely follows the Ubuntu standards, and modified certificate paths must be entered in the <code>/etc/apache2/sites-enabled/000-default.conf</code> file.</p></div>
</div>
<div class="sect2">
<h3 id="heading_mta">
<span class="hidden-anchor sr-only" id="mta"></span>3.4. Setting up an email system</h3>
<div class="paragraph"><p>Since the paths for <a href="intro_notifications.html">notifications</a> in Checkmk are many and can vary, a default email system is not predefined.</p></div>
<div class="sect3">
<h4 id="heading_no_mta">
<span class="hidden-anchor sr-only" id="no_mta"></span>Checkmk without an email system</h4>
<div class="paragraph"><p>It is also possible to completely dispense with a local email system if you only want to enable <a href="notifications.html#syncsmtp">trackable delivery of HTML emails via SMTP</a> or rely on notification plug-ins for platforms such as <a href="notifications_teams.html">Microsoft Teams</a> or <a href="notifications_slack.html">Slack</a>.</p></div>
<div class="paragraph"><p>Note, however, that <a href="notifications.html#bulk">bulk notifications</a> is not possible in this configuration.</p></div>
</div>
<div class="sect3">
<h4 id="heading_simple_mta">
<span class="hidden-anchor sr-only" id="simple_mta"></span>Relay-only or full Mail Transport Agent (MTA)</h4>
<div class="paragraph"><p>As a rule, you will want to set up an email system because of its greater flexibility.
For smaller environments, the <em>relay-only MTA</em> <a href="https://manpages.ubuntu.com/manpages/jammy/man7/nullmailer.7.html" target="_blank">Nullmailer</a> has been proven to work well.</p></div>
<div class="paragraph"><p>For larger installations, where unforeseen events can result in several hundred emails, we recommend installing a full-featured MTA such as Postfix.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_add_hosts">
<span class="hidden-anchor sr-only" id="add_hosts"></span>3.5. Adding hosts to a monitoring</h3>
<div class="sect3">
<h4 id="heading_pull">
<span class="hidden-anchor sr-only" id="pull"></span>Localhost in pull mode</h4>
<div class="paragraph"><p>In the vast majority of cases, the Checkmk server itself should be the first host you <a href="intro_setup_monitor.html#linux">add to the monitoring</a>.
To do this, you must first install the Linux agent on the Checkmk server.
This agent communicates with the server in the <a href="glossar.html#pull_mode">pull mode</a>.
If you find downloading the agent package via the web interface followed by a transfer via <code>scp</code> too cumbersome, you can install the agent in its default configuration ('Vanilla') directly from the file system:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>apt<span class="tok-w"> </span>install<span class="tok-w"> </span><span class="tok-k">$(</span>sudo<span class="tok-w"> </span>find<span class="tok-w"> </span>/opt/omd/versions/<span class="tok-w"> </span>-name<span class="tok-w"> </span><span class="tok-s1">'check-mk-agent_*.deb'</span><span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>tail<span class="tok-w"> </span>-n1<span class="tok-k">)</span></code></pre></div></div>
<div class="paragraph"><p>Immediately following an installation, the Checkmk agent listens in the unencrypted legacy pull mode on port 6556.
Therefore, promptly perform a  <a href="intro_setup_monitor.html#register">registration</a> to prevent unauthorized third parties from accessing the agent output:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>cmk-agent-ctl<span class="tok-w"> </span>register<span class="tok-w"> </span>--hostname<span class="tok-w"> </span>localhost<span class="tok-w"> </span>--server<span class="tok-w"> </span>localhost<span class="tok-w"> </span>--site<span class="tok-w"> </span>mysite<span class="tok-w"> </span>--user<span class="tok-w"> </span>cmkadmin</code></pre></div></div>
</div>
<div class="sect3">
<h4 id="heading_push">
<span class="hidden-anchor sr-only" id="push"></span>Hosts in push mode</h4>
<div class="paragraph"><p>If hosts to be monitored are behind a firewall and thus cannot be accessed directly by the Checkmk server, the <a href="glossar.html#push_mode">push mode</a> is often the preferred communication path.
You can select the push mode with the <span class="guihint">Checkmk agent connection mode</span> option in the hostâ€™s properties in the <a href="hosts_setup.html#monitoring_agents">Monitoring agents</a> section.
Alternatively, you can combine the push mode with pre-configured agent packages for the <a href="hosts_autoregister.html">auto-registration</a> to further increase convenience.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_update">
<span class="hidden-anchor sr-only" id="update"></span>3.6. Updating Checkmk</h3>
<div class="paragraph"><p>Check the <a href="https://checkmk.com/download?method=cmk&amp;edition=cce&amp;version=2.2.0&amp;platform=ubuntu&amp;os=jammy&amp;type=cmk" target="_blank">download page</a> regularly for updates and download the updated package with the <code>wget</code> command shown there.</p></div>
<div class="paragraph"><p>The <a href="update.html">installation of an update</a> is done in two steps, which is due to the fact that <code>omd</code> can run multiple sites, each with different versions of Checkmk, on the same server.</p></div>
<div class="sect3">
<h4 id="heading_install_new">
<span class="hidden-anchor sr-only" id="install_new"></span>Installing a new Checkmk version and updating the site</h4>
<div class="paragraph"><p>The first step is to install the package, in the following example the <span class="new">2.2.0</span>p2 version:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>apt<span class="tok-w"> </span>install<span class="tok-w"> </span>./check-mk-cloud-2.2.0p2_0.jammy_amd64.deb</code></pre></div></div>
<div class="paragraph"><p>The next step is to update your site(s):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>stop<span class="tok-w"> </span>mysite
<span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>update<span class="tok-w"> </span>mysite
<span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>start<span class="tok-w"> </span>mysite</code></pre></div></div>
</div>
<div class="sect3">
<h4 id="heading_remove_old">
<span class="hidden-anchor sr-only" id="remove_old"></span>Removing packages that are no longer required</h4>
<div class="paragraph"><p>If you run multiple sites on the server (for example, one for production use and one for the testing of extensions), make sure that all of these are updated:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>omd<span class="tok-w"> </span>sites
<span class="tok-go">SITE         VERSION       COMMENTS</span>
<span class="tok-go">mysite       2.2.0p2.cce   default version</span>
<span class="tok-go">mytestsite   2.2.0p2.cce   default version</span></code></pre></div></div>
<div class="paragraph"><p>Via the Ubuntu package management you can then uninstall Checkmk versions that are no longer being used:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>apt<span class="tok-w"> </span>purge<span class="tok-w"> </span>check-mk-cloud-2.2.0p1</code></pre></div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_aftermath">
<span class="hidden-anchor sr-only" id="aftermath"></span>4. Post-processing</h2>
<div class="sectionbody"><div class="sect2">
<h3 id="heading_backup">
<span class="hidden-anchor sr-only" id="backup"></span>4.1. Configuring the backups</h3>
<div class="paragraph"><p>Checkmk provides a convenient <a href="backup.html">backup function</a>, which is configured under <span class="guihint">Setup &gt; Maintenance &gt; Backups &gt; Backup targets</span>.
With <span class="guihint">Add backup target</span> you add a storage location.
Here it is advisable to select a <span class="guihint">AWS S3 bucket</span> as the <span class="guihint">Destination</span> because of its fast and cheap data transfer.</p></div>
<div class="paragraph"><p>In addition to the credentials, you must also specify a folder path where the archive is temporarily stored before it is copied to the object store.
This can be under <code>/tmp</code>.
If your AWS instance provides a volatile <em>(ephemeral)</em> drive, you can mount this and use it as a cache.</p></div>
<div class="sect3">
<h4 id="heading_restore">
<span class="hidden-anchor sr-only" id="restore"></span>Procedure for a restore</h4>
<div class="paragraph"><p>The <a href="backup.html#backup_restore">restore of a backup</a> must always be done on exactly the same version of Checkmk as was used to create it.
If a backup is to be used to move to another type of virtual machine, to another cloud provider or from an <em>on premise installation</em> to the cloud (or vice versa), always first upgrade to the highest available patch level of Checkmk <em>before</em> the final backup and migration.</p></div>
<div class="paragraph"><p>The following points apply to the restore of a backup:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>On the target system, install exactly the version of Checkmk that was used to create the backup.</p></li>
<li><p>Create a monitoring site with <code>omd create</code> that uses the same site name as the source system.</p></li>
<li><p>Specify the backup destination and upload the backup key.</p></li>
<li><p>Perform the actual restore.</p></li>
</ol></div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_monitoring_azure">
<span class="hidden-anchor sr-only" id="monitoring_azure"></span>5. Monitoring AWS</h2>
<div class="sectionbody"><div class="paragraph"><p>Checkmk not only provides availability as an AMI, but also a comprehensive <a href="monitoring_aws.html">monitoring of your AWS infrastructure</a>.
Even if Checkmk should be your first or only AWS project, it is already worth monitoring the performance of the site, the state of the backup buckets and the level of costs incurred.</p></div></div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li>
<a href="#welcome">1. Welcome to Checkmk as AMI</a><ul class="sectlevel1"><li><a href="#basics">1.1. The basics</a></li></ul>
</li>
<li>
<a href="#preparation">2. Preparation</a><ul class="sectlevel1">
<li><a href="#ssh_keys">2.1. Creating SSH keys</a></li>
<li><a href="#ports">2.2. Determining the required ports</a></li>
<li><a href="#book_vm">2.3. Booking an image in the Marketplace</a></li>
<li><a href="#book_backup">2.4. Booking backup storage</a></li>
</ul>
</li>
<li>
<a href="#setup">3. Setup</a><ul class="sectlevel1">
<li><a href="#login">3.1. Login to the virtual machine</a></li>
<li><a href="#create_site">3.2. Setting up a site</a></li>
<li><a href="#ssl_certs">3.3. Storing certificates</a></li>
<li>
<a href="#mta">3.4. Setting up an email system</a><ul class="sectlevel2">
<li><a href="#no_mta">Checkmk without an email system</a></li>
<li><a href="#simple_mta">Relay-only or full Mail Transport Agent (MTA)</a></li>
</ul>
</li>
<li>
<a href="#add_hosts">3.5. Adding hosts to a monitoring</a><ul class="sectlevel2">
<li><a href="#pull">Localhost in pull mode</a></li>
<li><a href="#push">Hosts in push mode</a></li>
</ul>
</li>
<li>
<a href="#update">3.6. Updating Checkmk</a><ul class="sectlevel2">
<li><a href="#install_new">Installing a new Checkmk version and updating the site</a></li>
<li><a href="#remove_old">Removing packages that are no longer required</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#aftermath">4. Post-processing</a><ul class="sectlevel1"><li>
<a href="#backup">4.1. Configuring the backups</a><ul class="sectlevel2"><li><a href="#restore">Procedure for a restore</a></li></ul>
</li></ul>
</li>
<li><a href="#monitoring_azure">5. Monitoring AWS</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../lunr.index.en.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
