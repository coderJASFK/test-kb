<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Was es beim Update von Checkmk Version 2.1.0 auf 2.2.0 zu beachten gibt, erfahren Sie in diesem Artikel.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Update auf Version 2.2.0">
<meta name="og:description" content="Was es beim Update von Checkmk Version 2.1.0 auf 2.2.0 zu beachten gibt, erfahren Sie in diesem Artikel.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Update auf Version 2.2.0</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.2.0/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.2.0/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.2.0/en/update_major.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.2.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/update_major.html">2.1.0</a><a class="dropdown-item" href="../../latest/de/update_major.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Die Standard Edition</a></p>
</li>
<li>
<p><a href="cce.html">Die Cloud Edition</a></p>
</li>
<li>
<p><a href="managed.html">Die Managed Services Edition</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Update auf Version 2.2.0</h1>
<div class="details">
<span id="revdate">Last modified on 15-Nov-2023</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.2.0/src/onprem/de/update_major.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="update.html">Updates und Upgrades</a>
<a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_intro">
<span class="hidden-anchor sr-only" id="intro"></span>1. Einleitung</h2>
<div class="sectionbody">
<div class="paragraph"><p>In diesem Artikel finden Sie die wichtigsten Themen, die für das Update Ihrer Checkmk-Version <span class="new">2.1.0</span> auf <span class="new">2.2.0</span> relevant sind.</p></div>
<div class="paragraph"><p>Wir empfehlen Ihnen, vor dem Update den kompletten Artikel durchzulesen, damit Sie genau wissen, was auf Sie zukommt: vor, während und nach dem Update.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_prep">
<span class="hidden-anchor sr-only" id="prep"></span>2. Vorbereitungen</h2>
<div class="sectionbody">
<div class="paragraph"><p>In diesem Kapitel erhalten Sie die Übersicht der Themen, um die Sie sich kümmern sollten, bevor Sie das Update durchführen.
Wahrscheinlich wird nicht jedes der Themen für Sie relevant sein:
Bei einem solchen können Sie intern einen Haken setzen und sich gleich das nächste Thema vornehmen.</p></div>
<div class="sect2">
<h3 id="heading_backup">
<span class="hidden-anchor sr-only" id="backup"></span>2.1. Backup</h3>
<div class="paragraph"><p>Wie vor jedem Update einer produktiven Software sollten Sie auch vor dem von Checkmk die Aktualität Ihrer Backups prüfen.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Ja.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Wenn Sie Ihre Backups automatisiert über <span class="guihint">Setup &gt; Maintenance &gt; Backups</span> erstellen, prüfen Sie dort, ob die letzten Backup-Aufträge fehlerfrei durchgelaufen sind.</p></div>
<div class="paragraph"><p>Weitere Informationen finden Sie in den Artikeln zu <a href="backup.html">Backups</a> und zum Thema <a href="omd_basics.html#omd_backup_restore">Instanzen sichern und wiederherstellen.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading_editions">
<span class="hidden-anchor sr-only" id="editions"></span>2.2. Auswahl der Checkmk-Edition</h3>
<div class="paragraph"><p>Die Checkmk-Editionsfamilie hat Zuwachs bekommen mit der brandneuen <span class="image-inline"><img src="../images/icons/CSE.png" alt="CSE" width="20" title="Checkmk Cloud Edition"></span> <strong>Checkmk Cloud Edition</strong>.
Was diese zu bieten hat, können Sie im Artikel zur <a href="cce.html">Cloud Edition</a> nachlesen.
Dafür heißt es Abschied nehmen von der <span class="image-inline"><img src="../images/icons/CFE.png" alt="CFE" width="20" title="Checkmk Enterprise Free Edition"></span> <strong>Checkmk Enterprise Free Edition</strong>, die es in der <span class="new">2.2.0</span> nicht mehr gibt.</p></div>
<div class="paragraph"><p>Die Möglichkeiten der Free Edition leben aber weiter in der Cloud Edition: das zeitlich begrenzte Ausprobieren und das dauerhafte Nutzen einer der kommerziellen Editionen in kleinem Rahmen.
Eine Änderung gibt es allerdings bei der Limitierung zur dauerhaften Nutzung:
Während Sie in der Free Edition Edition bis zu 25 Hosts in einer <a href="glossar.html#site">Instanz</a> überwachen können, sind es in der Cloud Edition 750 Services in einer Instanz.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Falls Sie in der Version <span class="new">2.1.0</span> die Free Edition nutzen, müssen Sie sich in der <span class="new">2.2.0</span> eine neue Edition suchen.
Eine Kurzvorstellung der Checkmk-Editionen finden Sie <a href="intro_setup.html#editions">hier.</a></p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Sollte in Ihrem Fall die Limitierung auf 25 Hosts der Free Edition ausreichend gewesen sein, die 750 kostenlosen Services der Cloud Edition aber nicht,
so können Sie entweder eine Subskription erwerben und das Upgrade auf eine der kommerziellen Editionen durchführen — oder Sie entscheiden sich für das Downgrade auf die kostenlose Raw Edition.
Führen Sie das Upgrade oder das Downgrade der Edition <em>vor</em> dem Update auf die Version <span class="new">2.2.0</span> durch.
Beachten Sie die dabei auch die Hinweise im Artikel zu <a href="update.html">Updates und Upgrades</a>, insbesondere beim <a href="update.html#down2cee">Downgrade auf die Raw Edition.</a></p></div>
<div class="paragraph"><p>Sollten Sie mit der neuen Grenze von 750 Services keine Probleme haben, dann bietet sich der Upgrade der Free Edition auf die neue Cloud Edition an,
so wie er <a href="#cfe2cce">weiter unten</a> beschrieben ist.</p></div>
</div>
<div class="sect2">
<h3 id="heading_linux_versions">
<span class="hidden-anchor sr-only" id="linux_versions"></span>2.3. Linux-Distributionsversionen</h3>
<div class="paragraph"><p>In der Checkmk Version <span class="new">2.2.0</span> werden einige veraltete Distributionen nicht mehr unterstützt werden.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Das betrifft Sie, wenn auf Ihrem Checkmk-Server eine der folgenden – in der <span class="new">2.1.0</span> noch unterstützten – Linux-Distributionen installiert ist:</p></div>
<div class="ulist"><ul>
<li><p>Debian 9 <em>Stretch</em></p></li>
<li><p>Ubuntu in Long Term Support (LTS) Versionen 16.04 <em>Xenial</em> und 18.04 <em>Bionic</em></p></li>
<li><p>Ubuntu in Short Term Support (STS) Version 21.10 <em>Impish</em></p></li>
<li><p>SLES 12 SP3 und SP4</p></li>
<li><p>SLES 15 ohne Service Pack</p></li>
</ul></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Führen Sie vor dem Update von Checkmk zuerst ein <a href="release_upgrade.html">Versions-Upgrade der Linux-Distribution</a> durch.
Achten Sie darauf, dass die Zielversion der Linux-Distribution von Checkmk <span class="new">2.1.0</span> <strong>und</strong> <span class="new">2.2.0</span> unterstützt wird.
Welche Linux-Distributionsversionen Checkmk unterstützt, erfahren Sie in der <a href="update_matrix.html">Update-Matrix für <span class="new">2.2.0</span></a> und auf der <a href="https://checkmk.com/de/download" target="_blank">Download-Seite</a> nachdem Sie die Checkmk-Version und Ihre Linux-Distribution ausgewählt haben.</p></div>
<div class="paragraph"><p>Neuere Ubuntu STS-Versionen erhalten nicht mehr über den gesamten Produkt-Lifecycle von Checkmk <span class="new">2.2.0</span> Unterstützung.
Nutzern dieser Versionen geben wir jedoch die Möglichkeit, nahtlos auf die nächste LTS 24.04 zu aktualisieren.
Details können Sie in der <a href="update_matrix.html#ossupport">Richtlinie zur Betriebssystemunterstützung (<em>OS Support Policy</em>)</a> nachlesen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_browser">
<span class="hidden-anchor sr-only" id="browser"></span>2.4. Browser-Unterstützung</h3>
<div class="paragraph"><p>Checkmk <span class="new">2.2.0</span> nutzt neue JavaScript-Funktionen, die in älteren Browsern nicht zur Verfügung stehen.
Welche Browser in welchen Versionen unterstützt werden, steht in den <a href="release_notes.html#browser">Release notes.</a></p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
In der Regel werden Sie auf Desktop-Systemen automatische Updates auf die neueste Version aktiviert haben.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Prüfen Sie die verwendete Browser-Version und installieren Sie gegebenenfalls einen aktuelleren Browser.
Wenn Sie für die Anzeige von Dashboards <em>Single Board Computer</em>, <em>Smart TVs</em> oder <em>Digital Signage</em> Lösungen verwenden, auf deren Systembrowser Sie keinen Einfluss haben, testen Sie vor dem Update, ob benötigte Dashboards korrekt angezeigt werden.
Kontaktieren Sie gegebenenfalls den Hardware-Hersteller für Updates.</p></div>
</div>
<div class="sect2">
<h3 id="heading_agentlinux">
<span class="hidden-anchor sr-only" id="agentlinux"></span>2.5. Der Agent für Linux</h3>
<div class="paragraph"><p>In Checkmk <span class="new">2.2.0</span> unterstützt der <a href="agent_linux.html">Linux-Agent</a> nicht länger Python 2.6 für Plugins.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Nur, wenn bei Ihnen sehr alte Linux-Systeme im Einsatz sind (Python 2.6 ist von Oktober 2008 und wurde ab Juli 2010 von Python 2.7 abgelöst) <em>und</em> Sie auf diesen in Python geschriebene <a href="glossar.html#agent_plugin">Agentenplugins</a> nutzen.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Identifizieren Sie die betroffenen Systeme und aktualisieren Sie die installierten Agenten auf die letzte verfügbare Patch-Version der <span class="new">2.1.0</span>.
Falls automatische Agenten-Updates konfiguriert sind, <a href="#automatic_agent_updates">deaktivieren Sie diese</a> vor dem Update der Checkmk-Instanz.
Sie können dann die einzelnen Komponenten Agentenskript, Plugins und lokale Checks – nach Kompatibilitätstests – manuell aktualisieren.</p></div>
</div>
<div class="sect2">
<h3 id="heading_agentwindows">
<span class="hidden-anchor sr-only" id="agentwindows"></span>2.6. Der Agent für Windows</h3>
<div class="paragraph"><p>In Checkmk <span class="new">2.2.0</span> unterstützt der <a href="agent_windows.html">Windows-Agent</a> nicht länger Windows 6.0 (Vista und Server 2008 R1).
Auf betroffenen Systemen kann der Agent von <span class="new">2.1.0</span> aber weiter genutzt werden.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Nur, wenn bei Ihnen diese antiquierten Windows-Systeme (Support-Ende 11. April 2017 respektive 14. Januar 2020) noch im Einsatz sind.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Identifizieren Sie die betroffenen Systeme und aktualisieren Sie die installierten Agenten auf die letzte verfügbare Patch-Version der <span class="new">2.1.0</span>.
Falls automatische Agenten-Updates konfiguriert sind, <a href="#automatic_agent_updates">deaktivieren Sie diese</a> vor dem Update der Checkmk-Instanz.</p></div>
</div>
<div class="sect2">
<h3 id="heading_bakery_plugins">
<span class="hidden-anchor sr-only" id="bakery_plugins"></span>2.7. Alte Bakery Plugins</h3>
<div class="paragraph"><p>Bakery Plugins binden Funktionen in die Agentenpakete der <a href="glossar.html#agent_bakery">Agentenbäckerei</a> (<em>Agent Bakery</em>) ein.
Mit <a href="https://checkmk.com/de/werk/14648" target="_blank">Werk #14648</a> wird in der Version <span class="new">2.2.0</span> die Unterstützung für alte Bakery Plugins eingestellt.
Dabei handelt es sich um benutzerdefinierte Plugins, die in der Version <span class="new">1.6.0</span> und früher verwendet wurden, und noch nicht auf die in der <span class="new">2.0.0</span> eingeführte Bakery-API migriert wurden.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Die Agentenbäckerei und damit auch die Bakery-API sind nur für Benutzer der kommerziellen Editionen relevant.<br></p></div>
<div class="paragraph"><p>Vor der Einführung der Bakery-API wurden die Bakery Plugins im Instanzverzeichnis unter <code>~/local/share/check_mk/agents/bakery/</code> abgelegt.
Um festzustellen, ob bei Ihnen alte Plugins vorhanden sind, können Sie hier nach der Zeichenkette <code>bakery_info[</code> suchen.</p></div>
<div class="paragraph"><p>Seit der <span class="new">2.0.0</span> zeigt Checkmk außerdem beim Backen von Agentenpaketen mit alten Bakery Plugins eine Warnung an.
Diese können Sie sich auch nachträglich anzeigen lassen unter <span class="guihint">Setup &gt; Maintenance &gt; Background jobs</span> im Abschnitt <span class="guihint">Agent baking.</span>
Beim <a href="cmk_commandline.html#bake_agents">Backen per Kommandozeile</a> mit <code>cmk -A</code> erfolgt die Warnung als Befehlsausgabe.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Migrieren Sie alte Bakery Plugins auf die Bakery-API.
Sie finden eine Einführung in die Nutzung der API im Artikel zur <a href="bakery_api.html">Bakery-API.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading_python">
<span class="hidden-anchor sr-only" id="python"></span>2.8. Python 3.11</h3>
<div class="paragraph"><p>Checkmk <span class="new">2.2.0</span> aktualisiert Python von 3.10 auf 3.11.
Dies führt zu <a href="https://github.com/python/cpython/issues/66683" target="_blank">einer strengeren Interpretation</a> <a href="regexes.html">regulärer Ausdrücke.</a>
<a href="https://www.regular-expressions.info/modifiers.html" target="_blank">Modifiers</a> als „Inline Flags“ sind seit Python 3.6 als <em>deprecated</em> markiert und führten bislang beim Test im Python-Prompt zu einer Warnung.
In Python 3.11 sind sie nur am Anfang eines regulären Ausdrucks zulässig.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Es betrifft Sie mit hoher Wahrscheinlichkeit, wenn Sie den Modifier <code>(?i)</code> benutzen, um anzugeben, dass der nachfolgende reguläre Ausdruck ohne Berücksichtigung von Groß- und Kleinschreibung ausgewertet werden soll.
Da Checkmk aus Performance-Gründen an einigen Stellen mehrere reguläre Ausdrücke zu einem einzigen kombiniert, kann diese Änderung auch alleine betrachtet valide reguläre Ausdrücke (Modifier am Anfang) betreffen.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Identifizieren Sie <em>alle</em> regulären Ausdrücke, welche Inline Flags nutzen.
Hierfür genügt es in der Regel, auf die Zeichenkette <code>(?</code> zu untersuchen, beispielsweise mit diesem Befehl:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>find<span class="tok-w"> </span>etc/<span class="tok-w"> </span>-type<span class="tok-w"> </span>f<span class="tok-w"> </span>-exec<span class="tok-w"> </span>grep<span class="tok-w"> </span>-Hn<span class="tok-w"> </span><span class="tok-s1">'(?.)'</span><span class="tok-w"> </span><span class="tok-o">{}</span><span class="tok-w">  </span><span class="tok-se">\;</span></code></pre></div></div>
<div class="paragraph"><p>Passen Sie die betroffenen regulären Ausdrücke an.
Da Modifier weiterhin gültig sind, wenn ihr Anwendungsbereich angegeben wird, können Sie einen vorhandenen regulären Ausdruck</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>(?i)somestring</code></pre></div></div>
<div class="paragraph"><p>äquivalent <a href="https://github.com/Checkmk/checkmk-docs/blob/master/examples/update_major/fix_inline_arguments.py" target="_blank">umschreiben</a> auf:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>(?i:somestring)</code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_pip3">
<span class="hidden-anchor sr-only" id="pip3"></span>2.9. Python-Module deinstallieren</h3>
<div class="paragraph"><p>Die Aktualisierung von Python von 3.10 auf 3.11 betrifft auch in einer Instanz nachinstallierte Module.
In vielen Fällen sind nachinstallierte Module mit Python 3.11 inkompatibel.
Schlimmstenfalls überschreiben veraltete Module Funktionalität der von Checkmk mitgelieferten Module.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Dies betrifft Sie nur, wenn Sie für selbst geschriebene oder aus der Exchange bezogene Spezialagenten oder agentenbasierte Check-Plugins explizit Python-Module nachinstalliert haben.
Wenn Sie unsicher sind, führen Sie die im folgenden Schritt beschriebene Prüfung durch.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Finden Sie zunächst heraus, ob und – wenn ja –, welche Python-Module in der Instanz installiert sind.
Suchen Sie hierfür die Verzeichnisse <code>dist-info</code> und <code>egg-info</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>find<span class="tok-w"> </span>~/local/lib/python3/<span class="tok-w"> </span>-type<span class="tok-w"> </span>d<span class="tok-w"> </span>-name<span class="tok-w"> </span><span class="tok-s1">'*.*-info'</span>
<span class="tok-go">local/lib/python3/cryptography-41.0.5.dist-info</span>
<span class="tok-go">local/lib/python3/ecdsa-0.18.0.dist-info</span></code></pre></div></div>
<div class="paragraph"><p>Notieren Sie die installierten Module und deinstallieren Sie diese anschließend:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>pip3<span class="tok-w"> </span>uninstall<span class="tok-w"> </span>cryptography<span class="tok-w"> </span>ecdsa</code></pre></div></div>
<div class="paragraph"><p>Wie Sie mit deinstallierten Python-Modulen nach dem Update umgehen, erfahren Sie weiter <a href="#pip3post">unten.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading_user_id">
<span class="hidden-anchor sr-only" id="user_id"></span>2.10. Ungültige Benutzernamen</h3>
<div class="paragraph"><p>Ab Version <span class="new">2.2.0</span> ist die Verwendung bestimmter Sonderzeichen in Benutzernamen nicht mehr zulässig.
Mit ungültigen Benutzernamen ist ein Update auf die <span class="new">2.2.0</span> nicht möglich, da <code>omd update</code> mit einem Fehler abbricht.</p></div>
<div class="paragraph"><p>Benutzernamen in Checkmk dürfen nur Buchstaben (im Sinne der <a href="https://www.unicode.org/reports/tr44/" target="_blank">Unicode-Datenbank</a>), Ziffern und die folgenden Sonderzeichen enthalten: Bindestrich (<code>-</code>), Unterstrich (<code>_</code>), Punkt (<code>.</code>), At-Zeichen (<code>@</code>) und Dollarzeichen (<code>$</code>).
Als erstes Zeichen erlaubt ist nur ein Buchstabe, eine Ziffer, ein Unterstrich oder ein Dollarzeichen.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Beim Erstellen lokaler Benutzer über <span class="guihint">Setup &gt; Users</span> hat Checkmk schon seit längerem, d.h. bereits vor der Version <span class="new">1.6.0</span>, ungültige Benutzernamen abgelehnt.
Es sind also, wenn überhaupt, nur Benutzernamen aus externen Verbindungen wie LDAP betroffen.
Mit dem <a href="https://checkmk.com/de/werk/14393" target="_blank">Werk #14393</a> warnt Sie Checkmk seit Version <span class="new">2.1.0</span>p20 bei ungültigen Benutzernamen — zum einen bei der Ausführung von <code>omd update</code> und zum anderen in der Benutzerverwaltung, die Sie über <span class="guihint">Setup &gt; Users</span> aufrufen können.
Die Benutzernamen werden in der Spalte <span class="guihint">ID</span> angezeigt und bei ungültigen Benutzernamen steht dort eine Warnung.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Ändern Sie alle gefundenen ungültigen Benutzernamen an der Quelle.</p></div>
</div>
<div class="sect2">
<h3 id="heading_pwd_hash">
<span class="hidden-anchor sr-only" id="pwd_hash"></span>2.11. Unsichere Hashfunktionen für Passwörter</h3>
<div class="paragraph"><p>Ab Version <span class="new">2.2.0</span> ist die Verwendung von unsicheren und veralteten Hashfunktionen für Passwörter nicht mehr erlaubt.
Dies betrifft die Hashfunktionen <em>DES-Crypt, MD5-Crypt, Apr MD5-Crypt</em> und <em>SHA-256 Crypt.</em>
Obwohl letztere für Passwörter immer noch als sicher gilt, sollen die Passwort-Hashes aller Benutzer auf die modernere <em>bcrypt</em> Hashfunktion umgestellt werden.</p></div>
<div class="paragraph"><p>Ein lokaler Benutzer, dessen Passwort mit einer der genannten, veralteten Hashfunktionen umgewandelt wurde, kann sich in der Version <span class="new">2.2.0</span> nicht mehr anmelden.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Checkmk warnt Sie seit Version <span class="new">2.1.0</span>p16 (siehe <a href="https://checkmk.com/de/werk/14391" target="_blank">Werk #14391</a>), wenn unsichere Passwort-Hashes in der Datei <code>~/etc/htpasswd</code> des Instanzverzeichnisses gefunden wurden.
Bei der Ausführung von <code>omd update</code> wird eine Warnmeldung mit allen betroffenen (lokalen) Benutzernamen angezeigt.
Benutzer aus externen Verbindungen wie LDAP sind nicht betroffen.</p></div>
<div class="paragraph"><p>In der <span class="new">2.1.0</span> wurde dann jeder betroffene Benutzer entweder nach der Anmeldung aufgefordert, ein neues Passwort zu wählen,
oder der Hash wurde automatisch bei der Anmeldung im Hintergrund aktualisiert.
Wenn sich ein Benutzer seitdem jedoch überhaupt nicht mehr angemeldet hat, ist es möglich, dass immer noch der veraltete Passwort-Hash verwendet wird.
Dieser Benutzer wird sich nach dem Update auf die Version <span class="new">2.2.0</span> nicht mehr anmelden können.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Um den Zugang für einen betroffenen Benutzer wiederherzustellen, müssen Sie dessen Passwort manuell zurücksetzen.
Ein neues Passwort vergeben Sie entweder in der Benutzerverwaltung über <span class="guihint">Setup &gt; Users</span> oder auf der <a href="wato_user.html#change_passwd">Kommandozeile</a> mit dem Befehl <code>cmk-passwd &lt;username&gt;</code>.
Verwenden Sie für Passwortänderungen nur den Befehl <code>cmk-passwd</code> und nicht länger <code>htpasswd</code>, der aus der Apache-Installation kommt und ohne zusätzliche Optionen veraltete Passwort-Hashes erzeugen würde.</p></div>
</div>
<div class="sect2">
<h3 id="heading_zombie14">
<span class="hidden-anchor sr-only" id="zombie14"></span>2.12. Versehentlich deaktivierte Benachrichtigungen</h3>
<div class="paragraph"><p>Bei Systemen, die vor langer Zeit einmal von Checkmk <span class="new">1.4.0</span> auf <span class="new">1.5.0</span> aktualisiert wurden, kann es vorkommen, dass nach dem Update von <span class="new">2.1.0</span> auf <span class="new">2.2.0</span> Benachrichtigungen nicht mehr funktionieren.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Das Problem tritt nur auf Installationen auf, die von Checkmk <span class="new">1.4.0</span> auf <span class="new">1.5.0</span> vor p8 aktualisiert wurden. Und dort nur bei Benutzern, die zwischenzeitlich nicht mehr bearbeitet und gespeichert wurden. Bei Checkmk-Installationen, die von Checkmk <span class="new">1.4.0</span> auf <span class="new">1.5.0</span>p8 oder später aktualisiert wurden, oder erst mit Checkmk <span class="new">1.5.0</span> oder später installiert wurden, tritt es überhaupt nicht auf.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Öffnen Sie die Nutzereinstellungen von Nutzern, die Nachrichten erhalten sollen und speichern Sie diese einmal – auch wenn vermeintlich korrekte Einstellungen angezeigt werden.
Da dies bei einer großen Anzahl von Nutzern wenig praktikabel ist, können Sie die nötigen Änderungen/Überprüfungen auch in der Konfigurationsdatei <code>~/etc/check_mk/conf.d/wato/contacts.mk</code> vornehmen.
Details erklärt das <a href="https://checkmk.com/de/werk/6417" target="_blank">Werk #6417</a>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_omd_update-apache-config">
<span class="hidden-anchor sr-only" id="omd_update-apache-config"></span>2.13. Instanzbenutzer und System-Apache</h3>
<div class="paragraph"><p>Jede Checkmk-Instanz stellt ihre HTTP-Dienste (GUI, APIs) über einen eigenen instanzspezifischen Apache-Prozess bereit.
Den globalen Zugriff auf diesen instanzspezifischen Apache stellt der System-Apache bereit, der je nach Systemkonfiguration die Ports 80 und 443 für externe Anfragen öffnet.</p></div>
<div class="paragraph"><p>Um etwas über den instanzspezifischen Apache zu erfahren, liest der System-Apache eine vom Instanzbenutzer bereitgestellte Reverse-Proxy-Konfiguration.
Ein böswilliger Instanzbenutzer könnte nun den System-Apache dazu bringen, Code als Root-Benutzer auszuführen, da der System-Apache normalerweise zunächst mit Root-Rechten gestartet wird.</p></div>
<div class="paragraph"><p>Um diese Sicherheitslücke zu schließen, müssen wir die System-Apache-Konfiguration vom Zugriff des Instanzbenutzers trennen.
Um die Erweiterung der Rechte zu beseitigen, muss für jede Instanz <em>einmal</em> der Befehl <code>omd update-apache-config &lt;sitename&gt;</code> ausgeführt werden.</p></div>
<div class="paragraph"><p>Im <a href="https://checkmk.com/de/werk/14281" target="_blank">Werk #14281</a> erhalten Sie weitere, ausführliche Informationen zu diesem Thema und zusätzliche Hinweise, die auch die Ausführung des Befehls <code>omd update</code> betreffen, wenn mit diesem bestimmte Optionen geändert werden.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Seit der Version <span class="new">2.1.0</span>p7 werden Sie bei der Ausführung von <code>omd update</code> dazu aufgefordert, zusätzlich <code>omd update-apache-config &lt;sitename&gt;</code> auszuführen.
Falls Sie dies bereits bei einem Update der <span class="new">2.1.0</span> getan haben, ist beim Update auf die <span class="new">2.2.0</span> nichts weiter zu tun.
Aus der bisherigen dringenden Empfehlung wird nun eine Voraussetzung beim Update auf die <span class="new">2.2.0</span>.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Führen Sie als Root-Benutzer den Befehl <code>omd update-apache-config &lt;sitename&gt;</code> aus, wenn Sie bei der Ausführung von <code>omd update</code> dazu aufgefordert werden.</p></div>
</div>
<div class="sect2">
<h3 id="heading_rest-api">
<span class="hidden-anchor sr-only" id="rest-api"></span>2.14. REST-API ersetzt Web-API</h3>
<div class="paragraph"><p>Wie bereits in der <span class="new">2.1.0</span> angekündigt, ist die Web-API (auch HTTP-API genannt) in der Checkmk-Version <span class="new">2.2.0</span> entfernt worden.
Die Web-API wird durch die <a href="rest_api.html">REST-API</a> ersetzt.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong> Das betrifft Sie, falls Sie eigene Skripte geschrieben haben, die noch die Web-API nutzen.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong> Migrieren Sie alle bestehenden Skripte, die die Web-API verwenden, auf die REST-API, bevor Sie auf die Checkmk-Version <span class="new">2.2.0</span> umsteigen.
Im <a href="rest_api.html#rest-web-api">Artikel zur REST-API</a> finden Sie eine Übersicht, welche REST-API-Endpunkte die Web-API-Befehle ersetzen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_kubernetes">
<span class="hidden-anchor sr-only" id="kubernetes"></span>2.15. Kubernetes-Monitoring</h3>
<div class="paragraph"><p>Den Checkmk <span class="new">2.0.0</span> Spezialagenten und die zugehörigen Check-Plugins für das Kubernetes-Monitoring gibt es nicht mehr in der <span class="new">2.2.0</span>.
Nutzen Sie stattdessen das in der Version <span class="new">2.1.0</span> von Grund auf neu geschriebene und stark verbesserte <a href="monitoring_kubernetes.html">Kubernetes-Monitoring.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading_nsca">
<span class="hidden-anchor sr-only" id="nsca"></span>2.16. NSCA</h3>
<div class="paragraph"><p>Wie bereits in der Version <span class="new">2.1.0</span> angekündigt, unterstützt Checkmk <span class="new">2.2.0</span> nicht mehr den Nagios Service Check Acceptor (NSCA).
NSCA ist ein Nagios Add-on, um Ergebnisse passiver <a href="monitoring_basics.html#checks">Checks</a> von fernen Hosts in einer verteilten Nagios-Konfiguration zu erhalten.
Dieses veraltete Verfahren zum Aufbau eines <a href="distributed_monitoring.html">verteilten Monitorings</a> bietet gegenüber den Checkmk-eigenen Verfahren keine Vorteile.
Details und Hinweise zum Ersatz finden Sie im <a href="https://checkmk.com/de/werk/13644" target="_blank">Werk #13644.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading_local_files">
<span class="hidden-anchor sr-only" id="local_files"></span>2.17. Nicht paketierte lokale Dateien</h3>
<div class="paragraph"><p>Mit lokalen Dateien können Sie die von Checkmk bereitgestellte Funktionalität anpassen und erweitern.
Diese Dateien befinden sich im lokalen Teil der Instanzverzeichnisstruktur, d.h. in <code>~/local</code>.
Lokale Dateien können bei einem Update Probleme bereiten, wenn sie nicht mehr zur neuen Checkmk-Version passen.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Da es für Checkmk bei einem Update nicht möglich ist, die Kompatibilität von lokalen Anpassungen vollständig sicherzustellen, sollten Sie Ihre Checkmk-Instanz vor einem Update daraufhin überprüfen, ob lokale Dateien bei Ihnen verwendet werden und gegebenenfalls welche.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Verschaffen Sie sich einen Überblick über nicht paketierte lokale Dateien Ihrer Checkmk-Instanz, indem Sie als Instanzbenutzer das folgende Kommando ausführen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>find</code></pre></div></div>
<div class="paragraph"><p>Werden hier Dateien aufgeführt, sollten Sie zusammen gehörende in <a href="mkps.html">Erweiterungspaketen (MKPs)</a> zusammenfassen.
Dies erleichtert später die Deaktivierung <em>en bloc</em>, sollten nach dem Update <a href="#incompatible_mkps">Inkompatibilitäten</a> festgestellt werden.</p></div>
</div>
<div class="sect2">
<h3 id="heading_apis">
<span class="hidden-anchor sr-only" id="apis"></span>2.18. Programmierschnittstellen</h3>
<div class="paragraph"><p>In Checkmk <span class="new">2.2.0</span> wurden einige intern genutzte Programmierschnittstellen (APIs) umgebaut.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Das Thema APIs <em>kann</em> Sie betreffen, wenn Sie die mit Checkmk ausgelieferten um Ihre eigenen, selbst geschriebenen Checks erweitert haben und/oder wenn Sie Plugins aus anderen Quellen nutzen.
Da die neu strukturierten APIs als <em>intern</em> gelten und auch für Plugins aus der <a href="https://exchange.checkmk.com" target="_blank">Checkmk Exchange</a> nicht verfügbar sind,
sollte die Zahl betroffener Erweiterungen gering sein.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Überprüfen Sie Erweiterungen von Drittanbietern auf ihre Funktionsfähigkeit und nehmen Sie gegebenenfalls die notwendigen Anpassungen der Import-Pfade vor.</p></div>
<div class="paragraph"><p>Betroffen sind:</p></div>
<div class="ulist"><ul>
<li><p>Aufsplittung von GUI-Imports bezüglich Datasource Programs und aktiven Checks in mehrere Dateien (<a href="https://checkmk.com/de/werk/14716" target="_blank">Werk #14716</a>).</p></li>
<li><p>Aufsplittung von GUI-Imports bezüglich der Verwendung des Passwortspeichers (<em>password store</em>) in mehrere Dateien (<a href="https://checkmk.com/de/werk/14719" target="_blank">Werk #14719</a>).</p></li>
<li><p>Umstrukturierung des GUI-Codes (<a href="https://checkmk.com/de/werk/15493" target="_blank">Werk #15493</a>).</p></li>
<li><p>Umstrukturierung der <code>ValueSpec</code>-Klasse (<a href="https://checkmk.com/de/werk/13094" target="_blank">Werk #13094</a>).</p></li>
<li><p>Änderung des Geltungsbereichs der <code>Transform</code>-Klasse (<a href="https://checkmk.com/de/werk/14821" target="_blank">Werk #14821</a>).</p></li>
<li><p>Feinere Granulierung des Zugriffs auf Rechte eingebauter Benutzer (<a href="https://checkmk.com/de/werk/14824" target="_blank">Werk #14824</a>).</p></li>
<li><p>Ende der Unterstützung des Dashlet-Konfigurationsformats von Checkmk vor Version <span class="new">1.6.0</span> (<a href="https://checkmk.com/de/werk/14297" target="_blank">Werk #14297</a>).</p></li>
<li><p>Ende der Unterstützung der alten Plugin-API für die HW/SW-Inventur (<a href="https://checkmk.com/de/werk/14084" target="_blank">Werk #14084</a>).</p></li>
</ul></div>
</div>
<div class="sect2">
<h3 id="heading_incompatible_mkps">
<span class="hidden-anchor sr-only" id="incompatible_mkps"></span>2.19. Inkompatible und obsolete MKPs</h3>
<div class="paragraph"><p>Über die <a href="glossar.html#mkp">Checkmk-Erweiterungspakete (MKPs)</a> lässt sich Ihr Monitoring-System recht einfach und bequem erweitern.
Auf der einen Seite kommt es dabei vor, dass solche MKPs nicht weiter gepflegt werden und dann ggf. mit neuen Versionen von Checkmk nicht mehr kompatibel sind.
Auf der anderen Seite nehmen wir immer wieder neue Plugins und Funktionserweiterungen in Checkmk auf, weshalb MKPs mitunter obsolet werden.
Ihre Funktionalität wird schlicht von Checkmk selbst sichergestellt.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Falls Sie MKPs installiert haben, ist aus diesem Grund eine Prüfung dieser MKPs dringend geboten — besonders vor einem umfangreichen Update.
So verhindern Sie, dass inkompatible Pakete das Update behindern oder im Anschluss an das Update doppelte oder zumindest sehr ähnliche Services entstehen.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Prüfen Sie hierzu Ihre installierten MKPs gegen unseren <a href="https://checkmk.com/de/integrations" target="_blank">Katalog der Check-Plugins</a> und entfernen Sie Pakete, welche inzwischen nativ von Checkmk bereitgestellt werden.
Bei dieser Gelegenheit können Sie auch MKPs entfernen, die eventuell nur mal für einen Probelauf installiert worden sind.
Eine Auflistung finden Sie in den kommerziellen Editionen über <span class="guihint">Setup &gt; Maintenance &gt; Extension packages.</span></p></div>
<div class="paragraph"><p>Auf der Kommandozeile können Sie sich installierte Erweiterungen mit dem folgenden Befehl anzeigen lassen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list
<span class="tok-go">Name        Version Title         Req. Version Until Version Files State</span>
<span class="tok-go">----------- ------- ------------- ------------ ------------- ----- -------------------------------</span>
<span class="tok-go">my_cool_mkp 1.0.2   Best MKP ever 2.0.0        2.3.9p99      6     Enabled (active on this site)</span>
<span class="tok-go">hello_world 0.2.1   Hello world!  2.1.0        2.1.99        6     Enabled (active on this site)</span></code></pre></div></div>
<div class="paragraph"><p>Zu jedem gelistetem MKP können Sie dann in der Folge auch die Dateien anzeigen lassen, die zu dem Paket gehören:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list<span class="tok-w"> </span>my_cool_mkp
<span class="tok-go">/omd/sites/mysite/local/lib/check_mk/base/plugins/agent_based/check_mk.py</span>
<span class="tok-go">/omd/sites/mysite/local/share/check_mk/web/plugins/metrics/custom_metrics.py</span></code></pre></div></div>
<div class="paragraph"><p>Sollten Sie über die Prüfung der installierten MKPs und dem Abgleich mit unserem Katalog nicht alle Pakete zuordnen können, empfiehlt sich der hiernach beschriebene <a href="#dry_run">Probelauf des Updates,</a> um dabei Inkompatibilitäten zu identifizieren und dann in Ihrem produktiven Monitoring vor dem Update zu entfernen.</p></div>
<div class="sect3">
<h4 id="heading_mkp_backport">
<span class="hidden-anchor sr-only" id="mkp_backport"></span>MKP-Verwaltung für verschiedene Checkmk-Versionen</h4>
<div class="paragraph"><p>Für die Erleichterung von Updates wurde mit Checkmk <span class="new">2.1.0</span>p22 die Möglichkeit eingeführt, MKPs in verschiedenen Versionen vorzuhalten.
Beim Update wird dann das Paket für Checkmk <span class="new">2.1.0</span> automatisch deaktiviert und das für Checkmk <span class="new">2.2.0</span> automatisch aktiviert.
Bei Nutzung eines verteilten Monitorings mit <a href="glossar.html#distributed_setup">zentraler Konfiguration</a> können Sie mit diesem Feature von der Zentralinstanz aus Pakete in verschiedenen Versionen an die Remote-Instanzen <a href="#dist_setup">verteilen.</a>
Das klappt sogar, wenn die Remote-Instanzen eine höhere Version haben, wie es beim Update im verteilten Monitoring für eine Übergangszeit der Fall ist.</p></div>
<div class="paragraph"><p>Beachten Sie, dass Sie dieses Feature nur nutzen können, wenn Sie als Ausgangsversion mindestens <span class="new">2.1.0</span>p22 verwenden!
Sind diese Voraussetzungen erfüllt, können Sie auf der Zentralinstanz zusätzlich Pakete für <span class="new">2.2.0</span> hinzufügen.</p></div>
<div class="paragraph"><p>Bei der Installation eines für Checkmk <span class="new">2.2.0</span> geschriebenen MKPs erhalten Sie unter Checkmk <span class="new">2.1.0</span>p22 und höher eine Warnmeldung:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>install<span class="tok-w"> </span>/tmp/hello_world-0.2.2.mkp
<span class="tok-go">The package requires Check_MK version 2.2.0, but you have 2.1.0p22 installed.</span></code></pre></div></div>
<div class="paragraph"><p>Dieses Paket wird in der Liste der Pakete als <span class="guihint">Enabled (inactive on this site)</span> aufgeführt:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list
<span class="tok-go">Name        Version Title        Req. Version Until Version Files State</span>
<span class="tok-go">----------- ------- ------------ ------------ ------------- ----- -------------------------------</span>
<span class="tok-go">hello_world 0.2.2   Hello world! 2.2.0        2.2.99        6     Enabled (inactive on this site)</span>
<span class="tok-go">hello_world 0.2.1   Hello world! 2.1.0        2.1.99        6     Enabled (active on this site)</span></code></pre></div></div>
<div class="paragraph"><p>Details der überarbeiteten Paketverwaltung zeigt der <a href="mkps.html">Artikel zur Verwaltung von Erweiterungspaketen (MKPs)</a>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_incompatible">
<span class="hidden-anchor sr-only" id="incompatible"></span>2.20. Inkompatible Änderungen</h3>
<div class="paragraph"><p>Wie in jeder Checkmk Version, so gibt es auch in der aktuellen Version <span class="new">2.2.0</span> Änderungen der Software, die Rückwirkungen auf ihre Checkmk-Installation haben <em>können</em>.
Eine sogenannte <em>inkompatible Änderung</em> erfordert, dass Sie manuelle Anpassungen durchführen, um bestehende Funktionen weiterhin wie gewohnt ablaufen zu lassen und/oder neue Funktionen nutzen zu können.</p></div>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
In aller Regel wird es inkompatible Änderungen geben, die auch Ihre Checkmk-Installation betreffen.
Eine generelle Aussage ist aber leider unmöglich.
In diesem Artikel haben wir diejenigen Themen zusammengetragen, die für alle oder die meisten Checkmk-Installationen zutreffen.
Es kann aber sein, dass es darüber hinaus weitere, für Sie relevante Änderungen gibt, zum Beispiel bei Checks, die Sie in Ihrer Installation verwenden.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Nachdem Sie das <a href="#update">Update</a> durchgeführt haben, werden Ihnen in der Checkmk-Oberfläche Anzahl und Inhalt der inkompatiblen Änderungen angezeigt, und Sie werden aufgefordert, diese zu prüfen und zur Kenntnis zu nehmen.
Also werden Sie auf jeden Fall mit diesem Thema konfrontiert werden — allerdings erst, nachdem Sie das Update durchgeführt haben.</p></div>
<div class="paragraph"><p>Es ist daher eine gute Idee, sich bereits <strong>vor</strong> dem Update einen Überblick über die inkompatiblen Änderungen zu verschaffen:
Öffnen Sie die Liste der <a href="https://checkmk.com/de/werks?search=&amp;cmk_version[]=2.2&amp;compatible=0" target="_blank">Werks.</a>
(Die Software-Entwicklung von Checkmk ist in sogenannten Werks organisiert.)
In der Beschreibung eines Werks finden Sie Hinweise, was gegebenenfalls zu tun ist, um die Änderung kompatibel zu machen.</p></div>
<div class="paragraph"><p>Die frustrierende Nachricht:
Die Werkliste einer Version ist sehr, sehr lang — selbst wenn sie nur die inkompatiblen Änderungen enthält.
Die tröstliche Nachricht:
An der Anzahl der Änderungen können Sie sehen, wie groß unsere Anstrengungen sind, Checkmk für Sie zu verbessern.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_update">
<span class="hidden-anchor sr-only" id="update"></span>3. Update</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_dry_run">
<span class="hidden-anchor sr-only" id="dry_run"></span>3.1. Best Practices beim Update</h3>
<div class="paragraph"><p>Im Folgenden beschreiben wir bewährte Vorgehensweisen (<em>best practices</em>), welche wir selbst bei Updates von großen Checkmk-Umgebungen befolgen.
Diese sind sicherlich nicht in jeder Umgebung Pflicht, Sie können Ihnen den Prozess des Updates jedoch erleichtern.</p></div>
<div class="sect3">
<h4 id="heading_update_patch">
<span class="hidden-anchor sr-only" id="update_patch"></span>Checkmk-Version aktualisieren</h4>
<div class="paragraph"><p>Vor dem Update auf die Version <span class="new">2.2.0</span> muss auf der Checkmk-Instanz die Version <span class="new">2.1.0</span> installiert sein.</p></div>
<div class="paragraph"><p>Wir haben bereits früher von einem Update mit Auslassung einer Hauptversion abgeraten, da es dazwischen einfach zu viele Änderungen gibt, die ein reibungsloses Update behindern und mit großer Wahrscheinlichkeit zu Problemen führen.
Mit der Version <span class="new">2.1.0</span> wurde aus dieser Empfehlung eine Voraussetzung — und eine Sperre eingeführt, die zum Beispiel ein direktes Update von Version <span class="new">2.0.0</span> auf <span class="new">2.2.0</span> verhindert.</p></div>
<div class="paragraph"><p>Das Update auf <span class="new">2.2.0</span> setzt zurzeit mindestens <span class="new">2.1.0</span>p23 voraus.
Es kann aber sein, dass in der Zukunft eine bestimmte <span class="new">2.2.0</span> Patch-Version eine höhere <span class="new">2.1.0</span> Patch-Version für das Update voraussetzt.
Generell empfehlen wir, zuerst Checkmk auf die neueste <span class="new">2.1.0</span> Patch-Version zu aktualisieren und erst dann das Update auf die <span class="new">2.2.0</span> durchzuführen.</p></div>
</div>
<div class="sect3">
<h4 id="heading__probelauf_des_updates_durchführen">
<span class="hidden-anchor sr-only" id="_probelauf_des_updates_durchführen"></span>Probelauf des Updates durchführen</h4>
<div class="paragraph"><p>In großen Umgebungen, in denen auch das Zurückspielen eines selbstverständlich vorhandenen Backups Ihrer Checkmk-Umgebung mit einem gewissen zeitlichen Aufwand verbunden wäre, empfiehlt es sich, vor dem Update der produktiven Umgebung, einen Test mit einer geklonten Instanz durchzuführen.
Zu diesem Zweck können Sie beispielsweise das letzte reguläre Backup Ihrer Instanz unter einem anderen Namen wiederherstellen.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>restore<span class="tok-w"> </span>newsite<span class="tok-w"> </span>/path/to/backup</code></pre></div></div>
<div class="paragraph"><p><strong>Alternativ</strong> können Sie Ihre Instanz auch per <code>omd cp</code> kopieren.
Dafür muss die Instanz allerdings kurzzeitig gestoppt werden:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>stop<span class="tok-w"> </span>mysite
<span class="tok-gp">root@linux# </span>omd<span class="tok-w"> </span>cp<span class="tok-w"> </span>mysite<span class="tok-w"> </span>newsite</code></pre></div></div>
<div class="paragraph"><p>Führen Sie das Update im Anschluss erst einmal auf dieser neuen geklonten Instanz durch, um hier beispielsweise die oben angesprochenen lokalen Änderungen in der neuen Umgebung zu prüfen.</p></div>
</div>
<div class="sect3">
<h4 id="heading_automatic_agent_updates">
<span class="hidden-anchor sr-only" id="automatic_agent_updates"></span>Agenten-Update vorübergehend abschalten</h4>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span>
Wenn Sie in den kommerziellen Editionen die automatischen Agenten-Updates verwenden, sollten Sie überlegen, diese vor dem Update von Checkmk vorübergehend zu deaktivieren, um den Wechsel auf die neuen Agenten bei den Hosts später kontrolliert vollziehen zu können.
Dazu wählen Sie zuerst <span class="guihint">Setup &gt; Agents &gt; Windows, Linux, Solaris, AIX</span> und auf der folgenden Seite den Menüeintrag <span class="guihint">Agents &gt; Automatic updates.</span>
Durch Klick auf den Knopf <span class="image-inline"><img src="../images/icons/icon_edit.png" alt="Symbol zum Bearbeiten eines Listeneintrags."></span> vor dem <span class="guihint">Master switch</span> können Sie das Agenten-Update komplett abschalten:</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_major_automatic_agent_updates.png" alt="Abschaltung des Agenten-Updates per Hauptschalter."></div></div>
<div class="paragraph"><p>Nach dem erfolgreichen Update von Checkmk können Sie das Agenten-Update auf gleichem Weg wieder anschalten.</p></div>
<div class="paragraph"><p>Wir empfehlen an dieser Stelle das automatische Agenten-Update erstmal nur für einzelne Hosts oder Host-Gruppen wieder zu aktivieren.
Auf diese Weise wird der neue Agent nicht gleich auf all Ihre Server ausgerollt und Sie können sich auf einigen wenigen Systemen mit den neu angelieferten Daten vertraut machen.
Auch aufgrund der deutlich gestiegenen Zahl an mitgelieferten Check-Plugins könnten Sie eine ganze Reihe neuer Services finden, welche Sie dann auf den von Ihnen gewählten Testsystemen richtig einstellen können.
Eventuell sind für neue Services auch neue Schwellwerte vonnöten.
Wenn Sie dies erst einmal im Kleinen angehen, ersparen Sie sich so einige Fehlalarme.</p></div>
<div class="paragraph"><p>Auf der oben angegebenen Seite können Sie dafür einfach ein paar Hosts oder Host-Gruppen in die entsprechenden Felder eintragen und dann den <span class="guihint">Master switch</span> wieder aktivieren.</p></div>
<div class="imageblock"><div class="content"><img src="../images/update_major_activate_update_on_selected_hosts.png" alt="Optionen beim Agenten-Update zur Aktivierung auf bestimmten Hosts."></div></div>
<div class="paragraph"><p><strong>Wichtig:</strong> Denken Sie daran, diese Einschränkungen auf explizite Hosts und Host-Gruppen wieder zu entfernen, sobald Sie mit den Ergebnissen zufrieden sind.</p></div>
</div>
<div class="sect3">
<h4 id="heading_notifications">
<span class="hidden-anchor sr-only" id="notifications"></span>Benachrichtigungen vorübergehend abschalten</h4>
<div class="paragraph"><p>Sie sollten auch überlegen, <a href="glossar.html#notification">Benachrichtigungen</a> in der Instanz vor dem Update abzuschalten — aus ähnlichen Gründen, die wir im vorherigen Abschnitt zu den automatischen Agenten-Updates erklärt haben.
So vermeiden Sie, dass Ihre Kollegen aus dem Monitoring-Team <em>unnötige</em> Benachrichtigungen erhalten.</p></div>
<div class="paragraph"><p>Die Benachrichtigungen können Sie zentral im Snapin <a href="user_interface.html#master_control">Master control</a> mit dem Schalter <span class="guihint">Notifications</span> abschalten.</p></div>
<div class="paragraph"><p>Es kann durchaus vorkommen, dass nach dem Update der eine oder andere Service <span class="state2">CRIT</span> ist, der dies vorher nicht gewesen ist.
Kümmern Sie sich nach dem Update zuerst um neu auftretende Probleme.
Die unbehandelten Probleme (<em>unhandled problems</em>) können Sie sich z.B. im Snapin <a href="user_interface.html#overview">Overview</a> anzeigen lassen.</p></div>
<div class="paragraph"><p><strong>Wichtig:</strong> Vergessen Sie nicht, die Benachrichtigungen wieder einzuschalten, z.B. dann, wenn sich die Zahl der unbehandelten Probleme nach dem Update auf das Niveau vor dem Update eingepegelt hat.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_update_distributed_monitoring">
<span class="hidden-anchor sr-only" id="update_distributed_monitoring"></span>3.2. Update im verteilten Monitoring</h3>
<div class="paragraph"><p>Es gibt zwei unterschiedliche Vorgehensweisen, um das Update aller in einem <a href="distributed_monitoring.html">verteilten Monitoring</a> beteiligten Instanzen durchzuführen:</p></div>
<div class="ulist"><ul>
<li><p>Alle Instanzen stoppen, das Update <em>en bloc</em> durchführen und dann alle Instanzen wieder starten.</p></li>
<li><p>Unter strengen Auflagen ist ein <em>Mischbetrieb</em> für einen gewissen Zeitraum möglich, in dem zunächst die Remote-Instanzen aktualisiert werden und zum Schluss mit dem Update der Zentralinstanz wieder Versionsgleichstand hergestellt wird.</p></li>
</ul></div>
<div class="paragraph"><p>Insbesondere, wenn Sie die Aktualisierung im laufenden Betrieb anstreben, sollten Sie die Hinweise im allgemeinen Artikel zu <a href="update.html#updatedistributed">Updates und Upgrades</a> lesen.</p></div>
<div class="sect3">
<h4 id="heading_dist_setup">
<span class="hidden-anchor sr-only" id="dist_setup"></span>MKPs im verteilten Setup</h4>
<div class="paragraph"><p>Falls Sie verteiltes Monitoring mit einer <a href="glossar.html#distributed_setup">zentralen Konfiguration</a> betreiben, aus der auch <a href="glossar.html#mkp">Checkmk-Erweiterungspakete (MKPs)</a> an die Remote-Instanzen verteilt werden, haben Sie die Möglichkeit, in der Checkmk <span class="new">2.1.0</span> Zentralinstanz Pakete für die Remote-Instanzen in Versionen für <span class="new">2.1.0</span> und <span class="new">2.2.0</span> vorzuhalten.
Es werden dann automatisch die zur Remote-Instanz passenden MKPs verteilt.</p></div>
<div class="paragraph"><p>Um dieses Feature nutzen zu können, muss zunächst die Zentralinstanz auf Patch-Version <span class="new">2.1.0</span>p22 gebracht werden.
Ist dies geschehen, können Sie beginnen, auf der Zentralinstanz zusätzlich <a href="#mkp_backport">Pakete für <span class="new">2.2.0</span> hinzuzufügen.</a>
Wenn Sie nun Remote-Instanzen auf <span class="new">2.2.0</span> aktualisieren, erhalten und aktivieren diese dann automatisch das zur neuen Version passende Paket.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading__das_update_durchführen">
<span class="hidden-anchor sr-only" id="_das_update_durchführen"></span>3.3. Das Update durchführen</h3>
<div class="paragraph"><p>Am eigentlichen Update der Software hat sich in der Checkmk <span class="new">2.2.0</span> nichts Grundlegendes geändert,
d.h. Sie installieren die neue Version, führen das Update der Checkmk-Instanz durch, kümmern sich um Konflikte (falls es denn welche geben sollte) und überprüfen und bestätigen die inkompatiblen Änderungen.</p></div>
<div class="paragraph"><p>Führen Sie die Update-Prozedur so aus, wie sie im Artikel zu <a href="update.html#detailed">Updates und Upgrades</a> beschrieben ist.</p></div>
</div>
<div class="sect2">
<h3 id="heading_cfe2cce">
<span class="hidden-anchor sr-only" id="cfe2cce"></span>3.4. Upgrade auf die Cloud Edition</h3>
<div class="paragraph"><p>Falls Sie in der Version <span class="new">2.1.0</span> die Free Edition installiert haben, liegt es nahe, mit dem Update auf die <span class="new">2.2.0</span> auch das Upgrade auf die Cloud Edition durchzuführen,
da Sie diese <a href="#editions">Checkmk-Edition</a> in der <span class="new">2.2.0</span> zeitlich begrenzt ausprobieren und in in kleinem Rahmen dauerhaft nutzen können.</p></div>
<div class="paragraph"><p><strong>Hinweis:</strong> Das hier beschriebene <em>direkte Crossgrade</em> wird nur für den Wechsel von <span class="new">2.1.0</span> Free Edition nach <span class="new">2.2.0</span> Cloud Edition unterstützt.
In allen anderen Fällen führen Sie zuerst das Update von Checkmk und dann das Upgrade der Edition durch.
Bei verteilten Umgebungen ist hier wieder auf die <a href="update.html#editiondistributed">Reihenfolge zu achten.</a></p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Laden Sie die Cloud Edition auf der <a href="https://checkmk.com/de/download" target="_blank">Download-Seite</a> herunter.
Für den Download benötigen Sie keine Zugangsdaten.</p></li>
<li>
<p>Führen Sie das Update auf die Version <span class="new">2.2.0</span> so durch, wie es im Artikel zu <a href="update.html#detailed">Updates und Upgrades</a> beschrieben ist.<br>
Dabei führen Sie gleichzeitig mit dem <em>Update</em> auf die Version <span class="new">2.2.0</span> ein <em>Upgrade</em> auf eine andere Edition durch,
da es im konkreten Fall keine gemeinsame Version der <span class="new">2.1.0</span> Free Edition und der <span class="new">2.2.0</span> Cloud Edition gibt.
Daher müssen Sie bei der Ausführung von <code>omd update</code> eine zusätzliche Abfrage bestätigen:</p>
<div class="imageblock"><div class="content"><img src="../images/update_major_omd_update_upgrade_confirmation.png" alt="Nachfrage beim Upgrade auf die Cloud Edition." width="40%"></div></div>
<div class="paragraph"><p>Die letzten Zeilen der Ausgabe von <code>omd update</code> weisen Sie darauf hin, dass die Cloud Edition ihr Leben im Lizenzstatus „Trial“ beginnt,
in dem Sie die Cloud Edition 30 Tage ohne Einschränkung unverbindlich testen können:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">You are now starting your trial of Checkmk Cloud Edition.</span>
<span class="tok-go">If you are intending to use Checkmk to monitor more than 750 services after 30 days, you must purchase a license.</span>
<span class="tok-go">In case you already have a license, please enter your license credentials on the product's licensing page (Setup &gt; Maintenance &gt; Licensing &gt; Edit settings).</span>
<span class="tok-go">Finished update.</span></code></pre></div></div>
</li>
<li>
<p>Starten Sie nach dem Upgrade auf die Cloud Edition Ihre Instanz neu.
Der Anmeldedialog zeigt den Countdown für die verbleibende Zeit des Lizenzstatus „Trial“:</p>
<div class="imageblock"><div class="content"><img src="../images/update_major_login_cce_trial.png" alt="Checkmk-Anmeldedialog für die Cloud Edition im Lizenzstatus ’Trial’." width="60%"></div></div>
</li>
</ol></div>
<div class="paragraph"><p>Die Eingabe eines Lizenzschlüssels nach spätestens 30 Tagen ist nur notwendig, falls Sie die Cloud Edition ohne Beschränkungen einsetzen möchten.
Sofern Sie unterhalb der Grenze von 750 Services in einer Instanz bleiben, wechselt die Cloud Edition nach 30 Tagen in den Lizenzstatus „Free“.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_follow-up">
<span class="hidden-anchor sr-only" id="follow-up"></span>4. Nachbereitungen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_gui">
<span class="hidden-anchor sr-only" id="gui"></span>4.1. Änderungen der Benutzeroberfläche</h3>
<div class="paragraph"><p>Die Benutzeroberfläche (GUI) von Checkmk, die mit Version <span class="new">2.0.0</span> komplett neu gestaltet wurde, hat sich auch in der <span class="new">2.2.0</span> nicht grundlegend verändert.
Die generellen Abläufe, die Sie aus der Version <span class="new">2.0.0</span> und <span class="new">2.1.0</span> kennen, können Sie auch in der <span class="new">2.2.0</span> unverändert anwenden.
Allerdings haben sich Menüs, Menüeinträge, Symbole und andere Details geändert, um neue Funktionen verfügbar zu machen — und bestehende zu verbessern.</p></div>
<div class="paragraph"><p>In den Artikeln dieses Handbuchs stellen wir Ihnen diese Änderungen vor - und im <a href="intro_setup.html">Leitfaden für Einsteiger</a> finden Sie eine ausführliche Einführung,
unter anderem in die wichtigsten Elemente der <a href="intro_gui.html">Benutzeroberfläche.</a></p></div>
<div class="sect3">
<h4 id="heading_favorites">
<span class="hidden-anchor sr-only" id="favorites"></span>Die Favoriten wurden entfernt</h4>
<div class="paragraph"><p>Die kaum bekannte, wenig genutzte und im Handbuch auch nicht beschriebene Möglichkeit, Hosts und Services als <em>Favoriten</em> zu kennzeichnen wurde mit <a href="https://checkmk.com/de/werk/14727" target="_blank">Werk #14727</a> entfernt.
Favoriten konnten bis zur <span class="new">2.1.0</span> über den Menüeintrag <span class="guihint">Commands &gt; Favorites</span> gesetzt werden, d.h. im gleichen Menü, indem auch die Kommandos zur Quittierung von Problemen oder der Erstellung von Wartungszeiten zu finden sind.</p></div>
<div class="paragraph"><p>Als Ersatz für den schnellen Zugriff auf wichtige Hosts und Services bieten sich die <a href="user_interface.html#bookmarks">Bookmarks</a> an, die Sie z.B. in Ansichten setzen können, nachdem Sie sich die gezeigten Hosts oder Services zurechtgefiltert haben.
Eine Beschreibung dazu finden Sie im <a href="intro_tools.html#views">Leitfaden für Einsteiger.</a></p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_service_discovery">
<span class="hidden-anchor sr-only" id="service_discovery"></span>4.2. Services aktualisieren</h3>
<div class="paragraph"><p>Wie jede Hauptversion, so bringt auch Checkmk <span class="new">2.2.0</span> eine ganze Reihe neuer Check-Plugins mit sich.
Sollten Sie den <a href="wato_services.html#discovery_check">"Discovery Check"</a> nicht einsetzen, d.h. das automatische Update der Service-Konfiguration über die periodische Service-Erkennung, werden Sie auf einer ganzen Reihe von Hosts die Suche nach Services durchführen müssen.</p></div>
<div class="paragraph"><p>Wenn Ihre Hosts entsprechend organisiert sind (z.B. in Ordnern), können Sie hierfür zumeist mit der Funktion <span class="guihint">Bulk discovery</span> arbeiten.
Diese finden Sie unter <span class="guihint">Setup &gt; Hosts &gt; Hosts</span> und dann im Menü <span class="guihint">Hosts &gt; Run bulk service discovery.</span></p></div>
<div class="sect3">
<h4 id="heading_service_descriptions">
<span class="hidden-anchor sr-only" id="service_descriptions"></span>Service-Beschreibungen</h4>
<div class="paragraph"><p>Jedes Update von Checkmk bedeutet, dass Service-Beschreibungen geändert werden, um die Konsistenz der Benennung innerhalb des Monitorings und der Dokumentation von Checkmk zu verbessern.
Da die Änderung von Service-Beschreibungen bedeutet, dass mitunter Regeln angepasst werden müssen und historische Monitoring-Daten verloren gehen, belässt Checkmk bei Updates zunächst die alten Beschreibungen.
Sie sollten bei Services, bei denen Verlust alter Monitoring-Daten zu verschmerzen und der Aufwand für die Anpassung von Regeln überschaubar ist, zeitnah auf neue Service-Beschreibungen umstellen.</p></div>
<div class="paragraph"><p>Gehen Sie hierfür in <span class="guihint">Setup &gt; General &gt; Global settings &gt; Execution of checks</span> die Liste <span class="guihint">Use new service descriptions</span> durch und identifizieren Sie die Services, bei denen die Checkboxen noch nicht aktiv sind und aktivieren Sie diese.
Nach Anwenden der Änderungen sind die neuen Service-Beschreibungen aktiv und es werden wenige Minuten vergehen, bis Sie wieder definierte Zustände der betroffenen Services im Monitoring sehen.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_new_ports">
<span class="hidden-anchor sr-only" id="new_ports"></span>4.3. Ports</h3>
<div class="paragraph"><p>Seit Checkmk <span class="new">2.1.0</span> benötigen Hosts zur Durchführung der <a href="wato_monitoringagents.html#agents">TLS-Registrierung</a> Zugriff auf folgende Ports des Checkmk-Servers: Port 443 (respektive 80) für REST-API-Anfragen und Port 8000 für den Agent Receiver.
Sprechen Sicherheitsrichtlinien dagegen, diese Ports verfügbar zu machen, können Sie bei Nutzung des <a href="glossar.html#pull_mode">Pull-Modus</a> eine <a href="agent_linux.html#proxyregister">Registrierung im Auftrag</a> direkt auf dem Checkmk-Server durchführen.</p></div>
<div class="paragraph"><p>Um den in der Checkmk <span class="new">2.2.0</span> eingeführten <a href="glossar.html#push_mode">Push-Modus</a> der Cloud Edition nutzen zu können, muss Port 8000 des Checkmk-Servers vom überwachten Host aus erreichbar sein.</p></div>
</div>
<div class="sect2">
<h3 id="heading_certificate_lifetime">
<span class="hidden-anchor sr-only" id="certificate_lifetime"></span>4.4. Agent Controller Zertifikatslaufzeit</h3>
<div class="paragraph"><p>Checkmk <span class="new">2.1.0</span> nutzte für den Aufbau der TLS-Verbindung Zertifikate mit de facto unbegrenzter Gültigkeit.
In Checkmk <span class="new">2.2.0</span> ist die Laufzeit der Zertifikate einstellbar und auf einen Standardwert von fünf Jahren gesetzt (siehe <a href="https://checkmk.com/de/werk/14964" target="_blank">Werk #14964</a>).
Zudem kann eine eigene <em>Certificate Authority</em> verwendet werden.
Vor dem Update auf <span class="new">2.2.0</span> erstellte Zertifikate werden automatisch nach Ablauf der maximalen Laufzeit durch neu generierte Zertifikate ausgetauscht.</p></div>
<div class="paragraph"><p>Aktualisieren Sie daher Checkmk <span class="new">2.1.0</span> Agenten, welche den Agent Controller mit Verschlüsselung verwenden, zeitnah auf den <span class="new">2.2.0</span> Agenten.</p></div>
<div class="paragraph"><p>In den wenigen Fällen, wo ein Update des Agenten nicht möglich ist – zum Beispiel, weil die Betriebssystemversion vom <span class="new">2.2.0</span> Agenten nicht mehr unterstützt wird –, müssen Sie betroffene Hosts nach Ablauf der Zertifikatslaufzeit manuell <a href="agent_windows.html#registration">neu registrieren</a>.
Dasselbe gilt, wenn Hosts mit dem <span class="new">2.2.0</span> Agenten längere Zeit inaktiv sind.</p></div>
</div>
<div class="sect2">
<h3 id="heading_remove_old_mkps">
<span class="hidden-anchor sr-only" id="remove_old_mkps"></span>4.5. Obsolete MKPs entfernen</h3>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Dies betrifft Sie, wenn Sie von der Funktion Gebrauch gemacht haben, <a href="#mkp_backport">MKPs in verschiedenen Versionen</a> vorzuhalten.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Während des Updates werden inkompatible Pakete automatisch auf den Zustand <span class="guihint">Disabled</span> gesetzt, aber nicht vollständig gelöscht.
Zur neuen Checkmk-Version kompatible Pakete werden automatisch aktiviert, Sie erhalten den Zustand <span class="guihint">Enabled (active on this site)</span>.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list
<span class="tok-go">Name        Version Title        Req. Version Until Version Files State</span>
<span class="tok-go">----------- ------- ------------ ------------ ------------- ----- -----------------------------</span>
<span class="tok-go">hello_world 0.2.1   Hello world! 2.1.0        2.1.99        6     Enabled (active on this site)</span>
<span class="tok-go">hello_world 0.2.0   Hello world! 2.0.0        2.0.99        6     Disabled</span></code></pre></div></div>
<div class="paragraph"><p>Wenn die Funktionalität der neuen Pakete sichergestellt ist und die alten nicht mehr als Referenz benötigt werden, können Sie nach veralteten Paketen suchen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>list<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>grep<span class="tok-w"> </span>Disabled</code></pre></div></div>
<div class="paragraph"><p>Deinstallieren Sie diese dann mit <code>mkp remove</code>.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkp<span class="tok-w"> </span>remove<span class="tok-w"> </span>hello_world<span class="tok-w"> </span><span class="tok-m">0</span>.2.0</code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_pip3post">
<span class="hidden-anchor sr-only" id="pip3post"></span>4.6. Python-Module installieren</h3>
<div class="paragraph"><p><strong>Betrifft Sie das?</strong>
Dies betrifft Sie nur, wenn Sie für selbst geschriebene oder aus der Exchange bezogene Spezialagenten oder agentenbasierte Check-Plugins explizit Python-Module nachinstalliert hatten, und diese im Zuge der Vorbereitung des Updates <a href="#pip3">entfernt</a> haben.</p></div>
<div class="paragraph"><p><strong>Was müssen Sie tun?</strong>
Finden Sie zunächst heraus, ob die zuvor deinstallierten Module bereits mit der neuen Checkmk-Version ausgeliefert werden, zum Beispiel:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>pip3<span class="tok-w"> </span>list<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>grep<span class="tok-w"> </span><span class="tok-s1">'^cryptography'</span></code></pre></div></div>
<div class="paragraph"><p>Wird das Modul bereits gefunden, kennzeichnen Sie es in Ihren Notizen als nicht benötigt.
Installieren Sie nicht mitgelieferte Module in Ihrer aktuellsten Version nach:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>pip3<span class="tok-w"> </span>install<span class="tok-w"> </span>ecdsa</code></pre></div></div>
<div class="paragraph"><p>Testen Sie anschließend die Check-Plugins oder Spezialagenten, die auf in der Instanz installierte Python-Module angewiesen sind.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_outlook">
<span class="hidden-anchor sr-only" id="outlook"></span>5. Ausblick</h2>
<div class="sectionbody">
<div class="paragraph"><p>In diesem Kapitel geht es um Themen, die nicht die aktuelle Checkmk Version <span class="new">2.2.0</span>, sondern eine der darauf folgenden Versionen betreffen.</p></div>
<div class="sect2">
<h3 id="heading_mod_auth_mellon">
<span class="hidden-anchor sr-only" id="mod_auth_mellon"></span>5.1. Checkmk ohne Apache-Modul mod_auth_mellon</h3>
<div class="paragraph"><p><a href="https://github.com/Uninett/mod_auth_mellon" target="_blank">mod_auth_mellon</a> ist ein Software-Modul für Apache, das Dienste zur Authentifizierung (<em>authentication</em>) über Secure Assertion Markup Language (SAML) bereitstellt.
Bis zur Checkmk Version <span class="new">2.1.0</span> war die Anmeldung bei Checkmk über SAML nur mit der Hilfe von mod_auth_mellon möglich.
Ab der Version <span class="new">2.2.0</span> ist die SAML-Authentifizierung in den kommerziellen Editionen von Checkmk eingebaut und die Konfiguration erfolgt über die Checkmk-Benutzeroberfläche, wie es im Artikel zu <a href="saml.html#saml_cee">SAML</a> beschrieben ist.
Auch die SAML-Authentifizierung per mod_auth_mellon wird in der Version <span class="new">2.2.0</span> noch unterstützt.</p></div>
<div class="paragraph"><p>Das ändert sich jedoch ab der Version <span class="new">2.3.0</span>:
mod_auth_mellon wird dann nicht mehr mit der Checkmk-Software ausgeliefert werden.
Wenn Sie diesen Weg zur SAML-Authentifizierung ab der <span class="new">2.3.0</span> weiterhin nutzen wollen, müssen Sie mod_auth_mellon manuell installieren.
Allerdings gibt es von uns ab der Version <span class="new">2.3.0</span> keinen Support mehr für dieses Verfahren.</p></div>
</div>
<div class="sect2">
<h3 id="heading_mk_file_config">
<span class="hidden-anchor sr-only" id="mk_file_config"></span>5.2. Keine Konfiguration von Check-Plugin-Standardwerten mit mk-Dateien</h3>
<div class="paragraph"><p>In der Version <span class="new">2.3.0</span> wird es nicht mehr möglich sein, Standardwerte von Check-Plugins oder andere globale Variablen mithilfe von mk-Dateien zu überschreiben.</p></div>
<div class="paragraph"><p>Dieser veraltete Weg, Plugins zu konfigurieren, ist seit langem nicht mehr dokumentiert — und funktioniert sowieso nicht mehr bei all jenen Plugins, die auf die in der <span class="new">2.0.0</span> eingeführte <a href="https://docs.checkmk.com/2.1.0/de/update_major.html#check-api">Check-API</a> umgestellt worden sind.
Daher wird die Konfiguration von Check-Plugin-Standardwerten mit mk-Dateien beginnend mit der Version <span class="new">2.3.0</span> nicht mehr unterstützt.</p></div>
<div class="paragraph"><p>Details und Hinweise zur Umstellung finden Sie im <a href="https://checkmk.com/de/werk/15250" target="_blank">Werk #15250.</a></p></div>
</div>
<div class="sect2">
<h3 id="heading_prometheus">
<span class="hidden-anchor sr-only" id="prometheus"></span>5.3. Prometheus-Checks Datenquelle und Einstellungen</h3>
<div class="paragraph"><p>Der <a href="monitoring_prometheus.html">Prometheus-Spezialagent</a> bietet <code>kube-state-metrics</code> als Datenquelle, dessen Checks nicht mehr aktiv unterstützt werden.
Diese wurden mittlerweile durch verbesserte Gegenstücke im Kubernetes-Agenten ersetzt (siehe <a href="https://checkmk.com/de/werk/14572" target="_blank">Werk #14572</a>).
Zudem wird in den Regeln <span class="guihint">Prometheus</span> und <span class="guihint">Alertmanager</span> die Angabe von IP-Adresse/Host-Name, Port und Pfadpräfix durch ein einziges Eingabefeld <span class="guihint">Custom URL</span> abgelöst (siehe <a href="https://checkmk.com/de/werk/14573" target="_blank">Werk #14573</a>).</p></div>
<div class="paragraph"><p>In beiden Fällen funktioniert das alte Verfahren weiterhin in <span class="new">2.2.0</span>.
Zur Verwendung in <span class="new">2.3.0</span> müssen Sie jedoch Ihre Konfiguration auf das neue Verfahren umgestellt haben.</p></div>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#intro">1. Einleitung</a></li>
<li>
<a href="#prep">2. Vorbereitungen</a><ul class="sectlevel1">
<li><a href="#backup">2.1. Backup</a></li>
<li><a href="#editions">2.2. Auswahl der Checkmk-Edition</a></li>
<li><a href="#linux_versions">2.3. Linux-Distributionsversionen</a></li>
<li><a href="#browser">2.4. Browser-Unterstützung</a></li>
<li><a href="#agentlinux">2.5. Der Agent für Linux</a></li>
<li><a href="#agentwindows">2.6. Der Agent für Windows</a></li>
<li><a href="#bakery_plugins">2.7. Alte Bakery Plugins</a></li>
<li><a href="#python">2.8. Python 3.11</a></li>
<li><a href="#pip3">2.9. Python-Module deinstallieren</a></li>
<li><a href="#user_id">2.10. Ungültige Benutzernamen</a></li>
<li><a href="#pwd_hash">2.11. Unsichere Hashfunktionen für Passwörter</a></li>
<li><a href="#zombie14">2.12. Versehentlich deaktivierte Benachrichtigungen</a></li>
<li><a href="#omd_update-apache-config">2.13. Instanzbenutzer und System-Apache</a></li>
<li><a href="#rest-api">2.14. REST-API ersetzt Web-API</a></li>
<li><a href="#kubernetes">2.15. Kubernetes-Monitoring</a></li>
<li><a href="#nsca">2.16. NSCA</a></li>
<li><a href="#local_files">2.17. Nicht paketierte lokale Dateien</a></li>
<li><a href="#apis">2.18. Programmierschnittstellen</a></li>
<li>
<a href="#incompatible_mkps">2.19. Inkompatible und obsolete MKPs</a><ul class="sectlevel2"><li><a href="#mkp_backport">MKP-Verwaltung für verschiedene Checkmk-Versionen</a></li></ul>
</li>
<li><a href="#incompatible">2.20. Inkompatible Änderungen</a></li>
</ul>
</li>
<li>
<a href="#update">3. Update</a><ul class="sectlevel1">
<li>
<a href="#dry_run">3.1. Best Practices beim Update</a><ul class="sectlevel2">
<li><a href="#update_patch">Checkmk-Version aktualisieren</a></li>
<li><a href="#_probelauf_des_updates_durchf%C3%BChren">Probelauf des Updates durchführen</a></li>
<li><a href="#automatic_agent_updates">Agenten-Update vorübergehend abschalten</a></li>
<li><a href="#notifications">Benachrichtigungen vorübergehend abschalten</a></li>
</ul>
</li>
<li>
<a href="#update_distributed_monitoring">3.2. Update im verteilten Monitoring</a><ul class="sectlevel2"><li><a href="#dist_setup">MKPs im verteilten Setup</a></li></ul>
</li>
<li><a href="#_das_update_durchf%C3%BChren">3.3. Das Update durchführen</a></li>
<li><a href="#cfe2cce">3.4. Upgrade auf die Cloud Edition</a></li>
</ul>
</li>
<li>
<a href="#follow-up">4. Nachbereitungen</a><ul class="sectlevel1">
<li>
<a href="#gui">4.1. Änderungen der Benutzeroberfläche</a><ul class="sectlevel2"><li><a href="#favorites">Die Favoriten wurden entfernt</a></li></ul>
</li>
<li>
<a href="#service_discovery">4.2. Services aktualisieren</a><ul class="sectlevel2"><li><a href="#service_descriptions">Service-Beschreibungen</a></li></ul>
</li>
<li><a href="#new_ports">4.3. Ports</a></li>
<li><a href="#certificate_lifetime">4.4. Agent Controller Zertifikatslaufzeit</a></li>
<li><a href="#remove_old_mkps">4.5. Obsolete MKPs entfernen</a></li>
<li><a href="#pip3post">4.6. Python-Module installieren</a></li>
</ul>
</li>
<li>
<a href="#outlook">5. Ausblick</a><ul class="sectlevel1">
<li><a href="#mod_auth_mellon">5.1. Checkmk ohne Apache-Modul mod_auth_mellon</a></li>
<li><a href="#mk_file_config">5.2. Keine Konfiguration von Check-Plugin-Standardwerten mit mk-Dateien</a></li>
<li><a href="#prometheus">5.3. Prometheus-Checks Datenquelle und Einstellungen</a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
