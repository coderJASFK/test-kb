<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Der Artikel beschreibt, wie Sie ein vollständiges Monitoring für Docker-Nodes und deren Container in Checkmk betreiben und was Sie dabei beachten müssen.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Docker überwachen">
<meta name="og:description" content="Der Artikel beschreibt, wie Sie ein vollständiges Monitoring für Docker-Nodes und deren Container in Checkmk betreiben und was Sie dabei beachten müssen.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Docker überwachen</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.2.0/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.2.0/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.2.0/en/monitoring_docker.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.2.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/monitoring_docker.html">2.1.0</a><a class="dropdown-item" href="../../latest/de/monitoring_docker.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Die Standard Edition</a></p>
</li>
<li>
<p><a href="cce.html">Die Cloud Edition</a></p>
</li>
<li>
<p><a href="managed.html">Die Managed Services Edition</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Docker überwachen</h1>
<div class="details">
<span id="revdate">Last modified on 17-Feb-2022</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.2.0/src/common/de/monitoring_docker.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="wato_monitoringagents.html">Monitoring-Agenten</a>
<a href="agent_linux.html">Linux überwachen</a>
<a href="intro_setup_monitor.html">Das Monitoring einrichten</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading__einleitung">
<span class="hidden-anchor sr-only" id="_einleitung"></span>1. Einleitung</h2>
<div class="sectionbody">
<div class="imageblock inline-image"><div class="content"><img src="../images/docker_logo_breit.png" alt="Company-Logo der Firma Docker, Inc." width="335"></div></div>
<div class="paragraph"><p>Docker hat sich weltweit zu einem der am häufigsten verwendeten Softwareprodukte zur Container-Virtualisierung entwickelt.
So notwendig eine durchgängige und transparente Überwachung der Container ist, so komplex ist sie aber auch aufgrund von deren dynamischer und vielschichtiger Architektur.</p></div>
<div class="paragraph"><p>Checkmk kann Docker-Container direkt über den <a href="agent_linux.html">Linux-Agenten</a> überwachen.
Dabei werden nicht nur Rahmendaten, wie der Status des Daemons oder des Containers, sondern auch die Container selbst überwacht.
Eine vollständige Liste der aktuell überwachbaren Dinge finden Sie wie immer im <a href="https://checkmk.com/de/integrations" target="_blank">Katalog der Check-Plugins</a>.</p></div>
<div class="paragraph"><p>Neben den Status- und Inventurinformationen, die Checkmk über den Node (Docker-Bezeichnung für: Host, auf dem die Container laufen) ermitteln kann, kann Checkmk auch detaillierte Statusinformationen der Container selbst ermitteln.
Hierzu wird in Checkmk jeder Container als eigenständiger Host angelegt, wenn er überwacht werden soll.
Seine Daten werden im <a href="piggyback.html">Piggyback-Verfahren</a> an diesen Host geliefert.</p></div>
<div class="paragraph"><p>In den kommerziellen Editionen können Sie mithilfe der <a href="dcd.html">dynamischen Konfiguration</a> die Container-Hosts auch automatisch anlegen und entfernen lassen.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__einrichtung">
<span class="hidden-anchor sr-only" id="_einrichtung"></span>2. Einrichtung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_install_agent_plugin">
<span class="hidden-anchor sr-only" id="install_agent_plugin"></span>2.1. Agent und Plugin installieren</h3>
<div class="paragraph"><p>Damit Sie einen Docker-Node mit Checkmk überwachen können, muss diese zunächst mit dem normalen <a href="agent_linux.html">Linux-Agenten</a> überwacht werden.
Dadurch erhalten Sie ein Grund-Monitoring des Wirtssystems, jedoch noch keine Information über den Docker-Daemon oder gar über die Container.</p></div>
<div class="paragraph"><p>Dazu benötigen Sie noch das <a href="glossar.html#agent_plugin">Agentenplugin</a> <code>mk_docker.py</code>, das Sie hier finden: <span class="guihint">Setup &gt; Agents &gt; Other operating systems &gt; Plugins</span></p></div>
<div class="paragraph"><p>Installieren Sie das Plugin in das Plugin-Verzeichnis des Agenten (im Regelfall <code>/usr/lib/check_mk_agent/plugins</code>).
Detaillierte Informationen zur Installation eines Agentenplugins finden Sie im <a href="agent_linux.html#plugins">Artikel zum Linux-Agenten.</a></p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>install<span class="tok-w"> </span>-m<span class="tok-w"> </span><span class="tok-m">0755</span><span class="tok-w"> </span>mk_docker.py<span class="tok-w"> </span>/usr/lib/check_mk_agent/plugins</code></pre></div></div>
<div class="paragraph"><p>In den kommerziellen Editionen können Sie alternativ auch mit der <a href="wato_monitoringagents.html#bakery">Agentenbäckerei</a> arbeiten, welche für Docker den entsprechenden Regelsatz bereitstellt: <span class="guihint">Docker node and containers</span></p></div>
<div class="paragraph"><p>Beachten Sie, das die Python-Bibliothek <code>docker</code> benötigt wird (<strong>nicht</strong> <code>docker-py</code>).
Es ist mindestens Version 2.6.1 notwendig.
Mit <code>python</code> auf der Kommandozeile können Sie dies leicht überprüfen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>python3
<span class="tok-go">Python 3.8.10 (default, Nov 26 2021, 20:14:08)</span>
<span class="tok-go">[GCC 9.3.0] on linux</span>
<span class="tok-go">Type "help", "copyright", "credits" or "license" for more information.</span>
<span class="tok-go">&gt;&gt;&gt; <strong>import docker</strong></span>
<span class="tok-go">&gt;&gt;&gt; <strong>docker.version</strong></span>
<span class="tok-go">'5.0.3'</span></code></pre></div></div>
<div class="paragraph"><p>Falls notwendig, können Sie die Bibliothek mit <code>pip3</code> installieren:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>pip3<span class="tok-w"> </span>install<span class="tok-w"> </span>docker</code></pre></div></div>
<div class="paragraph"><p><strong>Achtung:</strong> Die Pakete <code>docker-py</code> beziehungsweise <code>python-docker-py</code> dürfen nicht installiert sein.
Diese stellen eine veraltete und nicht kompatible Version der Docker-Bibliothek unter dem selben Namensraum zur Verfügung!
Wenn Sie <code>docker-py</code> (oder beide Varianten) installiert haben, reicht eine alleinige Deinstallation nicht aus, da <code>pip3</code> den Namensraum nicht reparieren kann.
Um sicher zu stellen, dass die korrekte Version installiert ist, führen Sie in diesem Fall bitte folgende Befehle aus:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>pip3<span class="tok-w"> </span>uninstall<span class="tok-w"> </span>docker-py<span class="tok-w"> </span>docker
<span class="tok-gp">root@linux# </span>pip3<span class="tok-w"> </span>install<span class="tok-w"> </span>docker</code></pre></div></div>
<div class="paragraph"><p>Wenn Sie jetzt in Checkmk die <a href="wato_services.html">Service-Erkennung</a> durchführen und die Änderungen aktivieren, sollten Sie zunächst einige neue Services finden, welche den Docker-Node selbst betreffen:</p></div>
<div class="imageblock"><div class="content"><img src="../images/docker_basic_services.png" alt="Ansicht der aktuell in Checkmk gefundenen Docker-Services."></div></div>
</div>
<div class="sect2">
<h3 id="heading_finetuning">
<span class="hidden-anchor sr-only" id="finetuning"></span>2.2. Plugin feinjustieren</h3>
<div class="paragraph"><p>Sie können verschiedene Parameter des Plugins konfigurieren.
So können Sie zum Beispiel Ressourcen schonen, in dem Sie nicht benötigte Sektionen deaktivieren, oder — falls nötig — den Docker API-Engine-Endpunkt anpassen (der Standard ist das Unix-Socket <code>unix://var/run/docker.sock</code>).</p></div>
<div class="paragraph"><p>Erstellen Sie dazu auf dem Docker-Host eine Konfigurationsdatei unter <code>/etc/check_mk/docker.cfg</code>.
Eine Vorlage mit ausführlichen Erläuterungen hierzu finden Sie im Checkmk Verzeichnis unter <code>~/share/check_mk/agents/cfg_examples/docker.cfg</code>.</p></div>
<div class="paragraph"><p>In den kommerziellen Editionen können Sie alle Parameter bequem mit der <a href="wato_monitoringagents.html#bakery">Agentenbäckerei</a> einstellen.</p></div>
</div>
<div class="sect2">
<h3 id="heading__container_überwachen">
<span class="hidden-anchor sr-only" id="_container_überwachen"></span>2.3. Container überwachen</h3>
<div class="sect3">
<h4 id="heading__container_hosts_anlegen">
<span class="hidden-anchor sr-only" id="_container_hosts_anlegen"></span>Container-Hosts anlegen</h4>
<div class="paragraph"><p>Das eigentlich Interessante ist natürlich das Überwachen der Docker-Container.
Dies geschieht durch Installation der Plugins automatisch.
Allerdings werden die Services nicht dem Docker-Node zugeordnet, sondern Checkmk geht von einem eigenen Host pro Docker-Container aus.</p></div>
<div class="paragraph"><p>Der Mechanismus, der hier zum Einsatz kommt, heißt <a href="piggyback.html">Piggyback</a> (Huckepack).
Dabei transportiert ein Plugin oder Spezialagent Daten zu anderen Hosts quasi „huckepack“ in seiner Ausgabe mit.
Checkmk legt diese Daten im Verzeichnis <code>tmp/check_mk/piggyback</code> ab.
Sie brauchen dann nur noch im Setup Hosts mit den richtigen Namen anzulegen und die Services werden diesen automatisch zugeordnet.</p></div>
<div class="paragraph"><p>In den kommerziellen Editionen können Sie diese Hosts automatisch anlegen lassen.
Verwenden Sie dazu in der <a href="dcd.html">dynamischen Konfiguration</a> den Konnektor <span class="guihint">Piggyback</span>.
Sie können die Hosts auch von Hand anlegen.
Beachten Sie dabei Folgendes:</p></div>
<div class="ulist"><ul>
<li><p>Der Host-Name muss exakt dem Verzeichnis entsprechen, welches in <code>tmp/check_mk/piggyback</code> angelegt wird. Per Default ist das die zwölfstellige Short-ID des Containers (z.B. <code>2ed23056480f</code>).</p></li>
<li><p>Falls die Container keine eigene IP-Adresse haben (was meist der Fall ist), stellen Sie im Abschnitt <span class="guihint">Network address</span> das Attribut bei <span class="guihint">IP address family</span> auf <span class="guihint">No IP</span> ein.</p></li>
<li><p>Bei <span class="guihint">Monitoring agents</span> stellen Sie <span class="guihint">Checkmk agent / API integrations</span> unbedingt auf <span class="guihint">No API integrations, no Checkmk agent</span> ein.</p></li>
<li><p>Das Feld <span class="guihint">Parents</span> im Abschnitt <span class="guihint">Basic settings</span> können Sie auf den Host-Namen des Docker-Nodes setzen.</p></li>
<li><p>Wichtig ist ferner, dass der Docker-Node und deren Container von der selben Checkmk Instanz aus überwacht werden.</p></li>
</ul></div>
<div class="paragraph"><p>Nachdem Sie die Container-Hosts angelegt und die Service-Erkennung durchgeführt haben, tauchen in dieser weitere Services auf.</p></div>
<div class="paragraph"><p>Falls Sie in dem Container einen <a href="agent_linux.html#install">Linux-Agenten</a> installiert haben, wird er automatisch ausgeführt.
Da allerdings viele Services, welche der Agent innerhalb des Containers überwacht, eigentlich die Informationen des Node zeigen (z.B. CPU load, Temperatur und viele weitere Betriebssystemparameter), wurden diese entfernt.</p></div>
</div>
<div class="sect3">
<h4 id="heading__alternative_benennung_der_container_hosts">
<span class="hidden-anchor sr-only" id="_alternative_benennung_der_container_hosts"></span>Alternative Benennung der Container-Hosts</h4>
<div class="paragraph"><p>Als Standardeinstellung wird, wie oben erwähnt, die zwölfstellige Short-ID des Containers als Name des Container-Hosts verwendet.
Dies können Sie optional anders konfigurieren.
Setzen Sie hierzu in der Konfigurationsdatei <code>docker.cfg</code> (siehe <a href="#finetuning">Plugin feinjustieren</a>) die Option <code>container_id</code> auf <code>long</code>, um die vollständige Container-ID als Name zu verwenden, oder auf <code>name</code>, um den Container-Namen zu verwenden.</p></div>
<div class="paragraph"><p>Nutzer der kommerziellen Editionen können dies in der <a href="wato_monitoringagents.html#bakery">Agentenbäckerei</a> mit Hilfe der Regel <span class="guihint">Docker node and containers</span>, Option <span class="guihint">Host name used for containers</span> einstellen.</p></div>
<div class="imageblock"><div class="content"><img src="../images/docker_host_name_used.png" alt="Regel zur Auswahl der Host-Namen der Container." width="70%"></div></div>
<div class="paragraph"><p>Übrigens: Mit dem Regelsatz <span class="guihint">Access to Agents &gt; General Settings &gt; Hostname translation for piggybacked hosts</span> können Sie recht flexibel Regeln zur Umbenennung von Host-Namen, die in Piggyback-Daten enthalten sind, festlegen.
Damit können Sie z.B. auch eine Lösung erstellen, für den Fall, dass Sie auf zwei verschiedenen Docker-Nodes Container mit dem gleichen Namen haben.</p></div>
<div class="imageblock"><div class="content"><img src="../images/docker_hostname_translation.png" alt="Regel zur Umbenennung der in den Piggyback-Daten enthaltenen Host-Namen."></div></div>
<div class="paragraph"><p>Im Artikel <a href="piggyback.html#renamehosts">Der Piggyback-Mechanismus</a> finden Sie weitere Möglichkeiten und eine genauere Beschreibung hierzu.</p></div>
</div>
<div class="sect3">
<h4 id="heading__host_status_überwachen">
<span class="hidden-anchor sr-only" id="_host_status_überwachen"></span>Host-Status überwachen</h4>
<div class="paragraph"><p>Da der <a href="monitoring_basics.html#hosts">Host-Status</a> eines Containers nicht unbedingt über <a href="cmc_differences.html#smartping">TCP-Pakete oder ICMP</a> geprüft werden kann, muss dieser anders ermittelt werden.
Hier bietet sich der zum jeweiligen Container gehörige Service <span class="guihint">Docker container status</span> an.
Dieser prüft ohnehin, ob der Container läuft und kann daher als sicheres Mittel verwendet werden, um den Host-Status zu ermitteln.
Legen Sie dazu eine Regel in dem Regelsatz <span class="guihint">Host Check Command</span> an und setzen Sie die Option <span class="guihint">Use the status of the service…​</span> auf den erwähnten Service.
Vergessen Sie nicht die Bedingungen so zu setzen, dass sie nur Container betreffen.
In unserem Beispiel liegen alle Container in einem gleichnamigen Ordner:</p></div>
<div class="imageblock"><div class="content"><img src="../images/docker_container_hoststatus.png" alt="Regel für das Kommando zur Überprüfung des Host-Status der Container."></div></div>
</div>
<div class="sect3">
<h4 id="heading__den_agenten_direkt_im_container_betreiben">
<span class="hidden-anchor sr-only" id="_den_agenten_direkt_im_container_betreiben"></span>Den Agenten direkt im Container betreiben</h4>
<div class="paragraph"><p>Um Details im Container selbst zu überwachen (z.B. laufende Prozesse, Datenbanken, Log-Dateien, etc.), ist es notwendig, dass der Checkmk Agent im Container selbst installiert ist und dort ausgeführt wird.
Das gilt insbesondere für das Ausrollen von Agentenplugins.
Die drei Plugins <code>mem</code>, <code>cpu</code> und <code>diskstat</code> (Disk-I/O) funktionieren allerdings auch ohne Agent im Container und werden vom Checkmk Agenten auf dem Node selbst berechnet.</p></div>
<div class="paragraph"><p>Gerade für selbst erstellte Docker-Images möchten Sie vielleicht den Agenten selbst in den Container ausrollen.
In diesem Fall werden die Daten nicht mehr, wie oben beschrieben, von dem Agenten des Docker-Nodes berechnet.
Stattdessen läuft ein separater Agent in jedem Container.
Der Aufruf erfolgt aber nach wie vor gebündelt über den Docker-Node im Piggyback-Verfahren.</p></div>
<div class="paragraph"><p>Der im Container installierte Agent funktioniert allerdings nur dann, wenn in dem Container auch alle benötigten Befehle vorhanden sind.
Speziell bei minimal gebauten Containern auf Basis von Alpine-Linux kann es gut sein, dass elementare Dinge wie die Bash nicht vorhanden sind.
In diesem Fall sollten Sie den Container aus dem Docker-Node heraus überwachen.</p></div>
<div class="paragraph"><p>Die Verwendung des Regelsets <span class="guihint">Host Check Command</span> wird in diesem Fall nur benötigt, wenn der Container nicht pingbar ist, funktioniert aber ansonsten exakt so wie oben beschrieben.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__diagnosemöglichkeiten">
<span class="hidden-anchor sr-only" id="_diagnosemöglichkeiten"></span>3. Diagnosemöglichkeiten</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__diagnose_für_einen_docker_node">
<span class="hidden-anchor sr-only" id="_diagnose_für_einen_docker_node"></span>3.1. Diagnose für einen Docker-Node</h3>
<div class="paragraph"><p>Sollte die Einrichtung nicht klappen, gibt es verschiedene Möglichkeiten der Analyse des Problems.
Prüfen Sie gegebenenfalls, ob auf dem Host ein Checkmk Agent der Version <span class="new">1.5.0</span> oder höher installiert ist.</p></div>
<div class="paragraph"><p>Falls die Version des Agenten auf dem Host passt, prüfen Sie als nächstes, ob die Daten in der Ausgabe des Agenten enthalten sind.
Sie können die Ausgabe als Textdatei herunterladen: in einer Host-Ansicht im Monitoring über den Eintrag <span class="guihint">Download agent output</span> des Aktionsmenüs:</p></div>
<div class="imageblock"><div class="content"><img src="../images/docker_node_dropdown.png" alt="Aktionsmenü des Hosts im Monitoring mit dem Eintrag zum Download der Agentenausgabe." width="65%"></div></div>
<div class="paragraph"><p>Oder Sie durchsuchen direkt den Agent-Cache.
Die Ausgabe in dem folgenden Beispiel ist für die Anschaulichkeit auf die Ausgaben zum Node gekürzt:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>strings<span class="tok-w"> </span>tmp/check_mk/cache/mydockerhost<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>grep<span class="tok-w"> </span><span class="tok-s2">"&amp;lt&amp;lt&amp;ltdocker"</span>
<span class="tok-go">&lt;&lt;&lt;docker_node_info&gt;&gt;&gt;</span>
<span class="tok-go">&lt;&lt;&lt;docker_node_disk_usage:sep(44)&gt;&gt;&gt;</span>
<span class="tok-go">&lt;&lt;&lt;docker_node_images&gt;&gt;&gt;</span>
<span class="tok-go">&lt;&lt;&lt;docker_node_network:sep(0)&gt;&gt;&gt;</span></code></pre></div></div>
<div class="paragraph"><p>Werden die Sektionen hier nicht geführt, wird die Docker-Installation nicht erkannt.
Für den Service <span class="guihint">Docker node info</span> wird der folgende Befehl benutzt.
Dieser muss auf dem Host in exakt dieser Form ausführbar sein.
Prüfen Sie dann gegebenenfalls Ihre Docker-Installation:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">root@linux# </span>docker<span class="tok-w"> </span>info<span class="tok-w"> </span><span class="tok-m">2</span>&gt;<span class="tok-p">&amp;</span><span class="tok-m">1</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading__diagnose_für_einen_container_host">
<span class="hidden-anchor sr-only" id="_diagnose_für_einen_container_host"></span>3.2. Diagnose für einen Container-Host</h3>
<div class="paragraph"><p>Falls der Container-Host keine Daten erhält bzw. keine Services erkannt werden, prüfen Sie zuerst, ob die Piggyback-Daten zu diesem Host vorhanden sind.
Der Name des Hosts muss identisch mit der ID des Containers sein.
Alternativ können Sie auch über den Regelsatz <span class="guihint">Hostname translation for piggybacked hosts</span> eine manuelle Zuordnung vornehmen.
Hier bietet sich allerdings nur die Option <span class="guihint">Explicit hostname mapping</span> an:</p></div>
<div class="imageblock"><div class="content"><img src="../images/docker_container_namemapping.png" alt="Regel zur Übersetzung der Host-Namen von Hosts mit Piggyback-Daten."></div></div>
<div class="paragraph"><p>Um zu prüfen, ob zu einer ID Piggyback-Daten angelegt werden, können Sie das folgende Verzeichnis prüfen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>ls<span class="tok-w"> </span>-l<span class="tok-w"> </span>tmp/check_mk/piggyback/
<span class="tok-go">76adfc5a7794  f0bced2c8c96  bf9b3b853834</span></code></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading__host_labels">
<span class="hidden-anchor sr-only" id="_host_labels"></span>4. Host-Labels</h2>
<div class="sectionbody">
<div class="paragraph"><p>In Checkmk gibt es sogenannte <a href="labels.html">Host-Labels</a>.
Das Docker-Monitoring setzt unter anderem diese automatischen Labels:</p></div>
<div class="ulist"><ul>
<li><p>für den Docker-Node das Label <code>cmk/docker_object:node</code>,</p></li>
<li><p>für jeden Container die Labels <code>cmk/docker_image</code>, <code>cmk/docker_image_name</code>, <code>cmk/docker_image_version</code> und <code>cmk/docker_object</code>.</p></li>
</ul></div>
<div class="paragraph"><p>Diese Labels können Sie z.B. in Bedingungen für Ihre <a href="wato_rules.html">Regeln</a> verwenden, um Ihre Monitoring-Konfiguration abhängig von dem Image zu machen, das in einem Container verwendet wird.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading__dateien_und_verzeichnisse">
<span class="hidden-anchor sr-only" id="_dateien_und_verzeichnisse"></span>5. Dateien und Verzeichnisse</h2>
<div class="sectionbody"><table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tmp/check_mk/piggyback/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hier legt Checkmk die Piggyback-Daten ab. Für jeden Host wird ein Unterordner mit seinem Namen erzeugt. Darin befindet sich eine Textdatei mit den Daten des Hosts. Dateiname ist der Host, welcher die Daten angeliefert hat.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tmp/check_mk/cache/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hier wird die jeweils jüngste Agentenausgabe aller Hosts temporär gespeichert. Der Inhalt einer Datei zu einem Host ist identisch zu dem Befehl <code>cmk -d myserver123</code>.</p></td>
</tr>
</tbody>
</table></div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#_einleitung">1. Einleitung</a></li>
<li>
<a href="#_einrichtung">2. Einrichtung</a><ul class="sectlevel1">
<li><a href="#install_agent_plugin">2.1. Agent und Plugin installieren</a></li>
<li><a href="#finetuning">2.2. Plugin feinjustieren</a></li>
<li>
<a href="#_container_%C3%BCberwachen">2.3. Container überwachen</a><ul class="sectlevel2">
<li><a href="#_container_hosts_anlegen">Container-Hosts anlegen</a></li>
<li><a href="#_alternative_benennung_der_container_hosts">Alternative Benennung der Container-Hosts</a></li>
<li><a href="#_host_status_%C3%BCberwachen">Host-Status überwachen</a></li>
<li><a href="#_den_agenten_direkt_im_container_betreiben">Den Agenten direkt im Container betreiben</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#_diagnosem%C3%B6glichkeiten">3. Diagnosemöglichkeiten</a><ul class="sectlevel1">
<li><a href="#_diagnose_f%C3%BCr_einen_docker_node">3.1. Diagnose für einen Docker-Node</a></li>
<li><a href="#_diagnose_f%C3%BCr_einen_container_host">3.2. Diagnose für einen Container-Host</a></li>
</ul>
</li>
<li><a href="#_host_labels">4. Host-Labels</a></li>
<li><a href="#_dateien_und_verzeichnisse">5. Dateien und Verzeichnisse</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
