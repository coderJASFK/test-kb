<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="robots" content="noindex">
<meta name="description" content="Checkmk bietet ein (fast) schlüsselfertiges Image im Azure Marketplace. In diesem Artikel erfahren Sie, wie Sie die Einrichtung abschließen.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Installation aus dem Azure Marketplace">
<meta name="og:description" content="Checkmk bietet ein (fast) schlüsselfertiges Image im Azure Marketplace. In diesem Artikel erfahren Sie, wie Sie die Einrichtung abschließen.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Installation aus dem Azure Marketplace</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/2.2.0/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/2.2.0/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../2.2.0/en/install_azure.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">2.2.0</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/install_azure.html">2.1.0</a><a class="dropdown-item" href="../../latest/de/install_azure.html">latest (2.3.0)</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat und Derivaten</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.2.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Die Standard Edition</a></p>
</li>
<li>
<p><a href="cce.html">Die Cloud Edition</a></p>
</li>
<li>
<p><a href="managed.html">Die Managed Services Edition</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Installation aus dem Azure Marketplace</h1>
<div class="details">
<span id="revdate">Last modified on 26-Jun-2023</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.2.0/src/onprem/de/install_azure.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-01-07 22:12:14 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="intro_setup.html">Checkmk aufsetzen</a>
<a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a>
<a href="update.html">Updates und Upgrades</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_welcome">
<span class="hidden-anchor sr-only" id="welcome"></span>1. Willkommen bei Checkmk für Azure</h2>
<div class="sectionbody">
<div class="paragraph"><p>Egal, ob Sie bereits langjähriger Nutzer von Checkmk sind, oder erst mit der Verfügbarkeit fertiger Images im Marketplace von Microsoft Azure zu uns gefunden haben, Sie finden in diesem Handbuchartikel alle Ressourcen, um das vorbereitete VM Image zum für Ihre Bedürfnisse passenden Monitoring zu vervollständigen.</p></div>
<div class="paragraph"><p>Wenn Sie neu bei Checkmk sind, empfehlen wir die vorbereitende Lektüre unseres <a href="intro_setup.html">Leitfadens für Einsteiger</a>.
Vorkonfigurierte VM Images kürzen zwar viele Punkte bei der Installation ab, doch Kenntnis fundamentaler Konzepte, wie das der <a href="glossar.html#site">Instanzen</a>, hilft bei der Einrichtung.</p></div>
<div class="sect2">
<h3 id="heading_basics">
<span class="hidden-anchor sr-only" id="basics"></span>1.1. Grundsätzliches</h3>
<div class="paragraph"><p>Falls Sie Azure-Nutzer sind, hatten Sie schon immer die Möglichkeit, ein im Marketplace <a href="https://learn.microsoft.com/de-de/azure/virtual-machines/linux/quick-create-portal?tabs=ubuntu" target="_blank">vorhandenes Ubuntu-Image</a> mit Checkmk zu versehen und so "Monitoring in der Cloud" einzurichten.
Checkmk <span class="new">2.2.0</span> geht den nächsten Schritt und bietet <a href="https://azuremarketplace.microsoft.com/de-de/marketplace/apps/tribe29gmbh1665582614827.checkmk003?tab=Overview" target="_blank">ein vorinstalliertes Image</a> auf Basis von Ubuntu 22.04 <em>(Jammy Jellyfish)</em>, bei denen alle Abhängigkeiten bereits erfüllt sind.
Hierbei kommt ausschließlich die <a href="cce.html">Cloud Edition</a> zum Einsatz.
Diese befindet sich mit dem Einrichten der ersten Instanz im 30 Tage währenden Lizenzstatus "Trial", in dem keine Einschränkungen gelten.
Nach Ablauf des Testzeitraums kann Checkmk mit bis zu 750 überwachten Services auf einer einzigen Instanz ohne Subskription weiter genutzt werden.
Sollen mehr Services überwacht werden, benötigen Sie einen <a href="license.html#license_cce">Lizenzschlüssel.</a></p></div>
<div class="paragraph"><p>Generell ist die Einrichtung ein wenig aufwendiger als beispielsweise beim <a href="introduction_docker.html">Docker-Image</a>, schließlich muss das bereitgestellte Image verschiedene Einsatzszenarien abdecken:</p></div>
<div class="ulist"><ul>
<li><p>Setup mit einer einzigen Instanz <em>(single site setup)</em> auf einem Server in verschiedenster Skalierung</p></li>
<li><p>Zentralinstanz im verteilten Monitoring</p></li>
<li><p>Remote-Instanz im verteilten Monitoring</p></li>
<li><p>Mischbetrieb von produktiver Instanz und Instanz(en) zum Testen auf einem Host</p></li>
</ul></div>
<div class="paragraph"><p>Aus diesem Grund enthält das Azure-Image weder eine vorbereitete Instanz, noch E-Mail- oder Firewall-Konfiguration.</p></div>
<div class="paragraph"><p>In diesem Artikel führen wir Sie durch das komplette Setup.
Wo Hintergrundinformationen sinnvoll sind, verlinken wir in detaillierte Artikel des Handbuchs.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_preparation">
<span class="hidden-anchor sr-only" id="preparation"></span>2. Vorbereitung</h2>
<div class="sectionbody">
<div class="paragraph"><p>Neben der Dimensionierung von RAM, Prozessor und virtueller Festplatte sollten Sie sich Gedanken um den Speicherort von Backups machen.
Checkmk unterstützt von Haus aus die Objektspeicher von Azure, daneben können Backups in Dateisystempfaden abgelegt werden, was Sicherungen auf SMB- oder WebDAV-Mounts ermöglicht oder den regelmäßigen Transfer per <code>rsync</code> erlaubt.</p></div>
<div class="sect2">
<h3 id="heading_ssh_keys">
<span class="hidden-anchor sr-only" id="ssh_keys"></span>2.1. SSH-Schlüssel erstellen</h3>
<div class="paragraph"><p>Da Azure derzeit <a href="https://learn.microsoft.com/de-de/azure/virtual-machines/linux/mac-create-ssh-keys" target="_blank">keine ED25519 oder ECDSA Schlüssel unterstützt</a>, werden Sie für das erste Login auf der virtuellen Maschine ein RSA-Schlüsselpärchen erstellen, dessen öffentlichen Schlüssel (<em>public key</em>) Sie beim Anlegen der VM hochladen.
Alternativ können Sie Azure das Schlüsselpaar erstellen lassen.
Vergessen Sie in diesem Fall nicht, den privaten Schlüssel im Laufe des Bestellverfahrens herunterzuladen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_ports">
<span class="hidden-anchor sr-only" id="ports"></span>2.2. Benötigte Ports ermitteln</h3>
<div class="paragraph"><p>In einer Checkmk-Konfiguration mit einer einzigen Instanz <em>(single site setup)</em>, in der Hosts auch im Push-Modus Daten zur Checkmk-Instanz schicken, müssen die folgenden Ports des Checkmk-Servers erreichbar sein:</p></div>
<div class="ulist"><ul>
<li><p>Von den Hosts im Monitoring aus: Port 80/443 (HTTP/HTTPS, während der Agentenregistrierung) und Port 8000 (Agent Receiver, dauerhaft)</p></li>
<li><p>Für die Verwaltung per Browser und REST-API: Port 80/443 (HTTP/HTTPS)</p></li>
</ul></div>
<div class="paragraph"><p>Die Freigaben dieser Ports sind in unseren <span class="guihint">Inbound port rules</span> bereits vorbereitet.
Für bestmögliche Sicherheit sollten Sie den Zugriff im Reiter <span class="guihint">Networking</span> weiter einschränken.</p></div>
<div class="paragraph"><p>Konsultieren Sie unsere Übersicht <a href="ports.html">aller verwendeten Ports</a>, falls Sie ein verteiltes Monitoring aufsetzen oder beispielsweise Statusabfragen über die <a href="glossar.html#livestatus">Livestatus</a>-Schnittstelle vornehmen wollen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_book_vm">
<span class="hidden-anchor sr-only" id="book_vm"></span>2.3. Image im Marketplace buchen</h3>
<div class="paragraph"><p>Die folgenden VM-Instanzen stellen eine Empfehlung zur Dimensionierung dar für die Zahl der zu überwachenden Services.
Beachten Sie beim Ordern der Instanz, die Option <span class="guihint">burstable</span> zu deaktivieren.</p></div>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 17%;">
<col style="width: 17%;">
<col style="width: 17%;">
<col style="width: 17%;">
<col style="width: 32%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Typ</th>
<th class="tableblock halign-left valign-top">CPU Cores</th>
<th class="tableblock halign-left valign-top">RAM (GB)</th>
<th class="tableblock halign-left valign-top">SSD (GB)</th>
<th class="tableblock halign-left valign-top">Checkmk-Services</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>B4MS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>B8MS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>B12MS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">96</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60 000</p></td>
</tr>
</tbody>
</table>
<div class="paragraph"><p>Kalkulationsgrundlage für die Dimensionierung sind ca. 15 % der Services durch <a href="glossar.html#special_agent">Spezialagenten</a> und <a href="glossar.html#active_check">aktive Checks,</a> sowie 25 oder mehr Services pro regulärem Host, der Daten per Agent im <a href="glossar.html#push_mode">Push-Modus</a> liefert.
Unter Umständen sind deutlich mehr Services in einem rein synthetischen Monitoring (primär Spezialagenten liefern Daten) möglich.
Bei Verwendung von Agenten im <a href="glossar.html#pull_mode">Pull-Modus</a> ist die angegebene Zahl an Services möglicherweise nur durch konsequente Optimierung zu erreichen.</p></div>
<div class="paragraph"><p>Die Dimensionierung des Festplattenplatzes basiert auf Erfahrungen typischer Windows- und Linux-Serverumgebungen.
Bringen viele Dienste eine große Zahl an Metriken mit, kann ein größerer Speicherplatzbedarf entstehen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_book_backup">
<span class="hidden-anchor sr-only" id="book_backup"></span>2.4. Backup-Speicher buchen</h3>
<div class="paragraph"><p>Wegen der günstigen Traffic-Kosten raten wir zur Nutzung des <em>Azure Blob Storage</em>.
Für die Kalkulation des benötigten Speicherplatzes lesen Sie die <a href="graphing.html#rrds">Hinweise zum RRD Datenformat.</a>
Als Faustregel für die Kalkulation eines vollständigen Backups gilt, dass die <em>Round Robin Databases</em> nach 10 Tagen etwas mehr als ein Drittel ihrer maximalen Größe erreicht haben.
Das bedeutet, nach dieser Zeit ist es sinnvoll, die Größe des gebuchten Backup-Speichers noch einmal zu überprüfen.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_setup">
<span class="hidden-anchor sr-only" id="setup"></span>3. Einrichtung</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading_login">
<span class="hidden-anchor sr-only" id="login"></span>3.1. Login auf der virtuellen Maschine</h3>
<div class="paragraph"><p>Das Root-Login ist auf den AWS-/Azure-Images deaktiviert.
Stattdessen kommt der Nutzer <code>ubuntu</code> zum Einsatz, der über die Berechtigung verfügt, <code>sudo</code> mit beliebigen Kommandos ohne Passwortabfrage auszuführen.
Wenn Sie ein separates Schlüsselpaar für das Login auf der virtuellen Maschine erstellt haben, müssen Sie mit dem Parameter <code>-i</code> den Pfad zu dessen privaten Teil angeben.
Die IP-Adresse ist natürlich auf die anzupassen, unter der die VM von außen erreichbar ist:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">user@host:~$ </span>ssh<span class="tok-w"> </span>-i<span class="tok-w"> </span>/path/to/id_file.priv<span class="tok-w"> </span>ubuntu@192.0.2.123</code></pre></div></div>
<div class="paragraph"><p>Sie finden sich nun am Prompt des Nutzers <code>ubuntu</code> wieder.
Der exakte Prompt kann als Host-Name den beim Anlegen der VM angegebenen Host-Namen oder eine IP-Adresse enthalten.
Wir verwenden im Laufe des weiteren Artikels den Host-Namen <code>cloud</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_create_site">
<span class="hidden-anchor sr-only" id="create_site"></span>3.2. Instanz aufsetzen</h3>
<div class="paragraph"><p>Eine Checkmk-Instanz muss eindeutig benannt sein und sollte darüber hinaus eine leichte Identifikation ermöglichen.
Hier, wie in den meisten anderen Stellen dieses Handbuches, verwenden wir als Instanznamen <code>mysite</code>.</p></div>
<div class="paragraph"><p>Das Erstellen einer Instanz geschieht mit dem Verwaltungswerkzeug von Checkmk, <a href="omd_basics.html"><code>omd</code></a>.
Vorinstalliert ist immer die neueste Version von Checkmk:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>create<span class="tok-w"> </span>mysite
<span class="tok-go">Adding /opt/omd/sites/mysite/tmp to /etc/fstab.</span>
<span class="tok-go">Creating temporary filesystem /omd/sites/mysite/tmp...<span class="green">OK</span></span>
<span class="tok-go">Updating core configuration...</span>
<span class="tok-go">Generating configuration for core (type cmc)...</span>

<span class="tok-go">Starting full compilation for all hosts Creating global helper config...<span class="green">OK</span></span>
<span class="tok-go"> Creating cmc protobuf configuration...<span class="green">OK</span></span>
<span class="tok-go">Executing post-create script "01_create-sample-config.py"...<span class="green">OK</span></span>
<span class="tok-go">Restarting Apache...<span class="green">OK</span></span>
<span class="tok-go">Created new site mysite with version 2.2.0p1.cce.</span>

<span class="tok-go">  The site can be started with omd start mysite.</span>
<span class="tok-go">  The default web UI is available at http://cloud/mysite/</span>

<span class="tok-go">  The admin user for the web applications is cmkadmin with password: UbWeec9QuazIf</span>
<span class="tok-go">  For command line administration of the site, log in with 'omd su mysite'.</span>
<span class="tok-go">  After logging in, you can change the password for cmkadmin with 'cmk-passwd cmkadmin'.</span></code></pre></div></div>
<div class="paragraph"><p>Starten Sie jetzt die neu angelegte Instanz mit</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>start<span class="tok-w"> </span>mysite</code></pre></div></div>
<div class="paragraph"><p>Die in der obigen Kommandoausgabe gezeigte URL (<code>http://cloud/mysite</code>) verwendet den intern genutzten Host-Namen Ihrer AWS- oder Azure-VM.
Da dieser in der Regel nicht extern aufgelöst wird, ist die URL von eingeschränktem Nutzen.
In der Regel werden Sie zunächst über die IP-Adresse oder einen im eigenen DNS-Server hinterlegten Host-Namen zugreifen.</p></div>
</div>
<div class="sect2">
<h3 id="heading_ssl_certs">
<span class="hidden-anchor sr-only" id="ssl_certs"></span>3.3. Zertifikate hinterlegen</h3>
<div class="paragraph"><p>Damit der System-Apache überhaupt am HTTPS-Port 443 lauschen kann, benötigt er gültige Zertifikate.
Beim ersten Start der virtuellen Maschine werden hierfür die selbst signierten <a href="https://packages.ubuntu.com/de/jammy/all/ssl-cert/filelist" target="_blank"><em>Snakeoil Inc.</em> Zertifikate</a> generiert.
Wir raten dringend zum baldigen Austausch gegen <a href="omd_https.html">eigene Zertifikate</a>, bei denen die komplette Zertifikatskette leicht verifiziert werden kann.</p></div>
<div class="paragraph"><p>Die Apache-Konfiguration hält sich dabei eng an die Ubuntu-Standards, geänderte Zertifikatspfade müssen in der Datei <code>/etc/apache2/sites-enabled/000-default.conf</code> eingetragen werden.</p></div>
</div>
<div class="sect2">
<h3 id="heading_mta">
<span class="hidden-anchor sr-only" id="mta"></span>3.4. E-Mail-System einrichten</h3>
<div class="paragraph"><p>Da die Wege der <a href="intro_notifications.html">Benachrichtigungen</a> in Checkmk vielfältig sind und variieren können, ist kein E-Mail-System vorbereitet.</p></div>
<div class="sect3">
<h4 id="heading_no_mta">
<span class="hidden-anchor sr-only" id="no_mta"></span>Checkmk ohne E-Mail-System</h4>
<div class="paragraph"><p>Auch der vollständige Verzicht auf ein lokales E-Mail-System ist möglich, falls Sie ausschließlich die <a href="notifications.html#syncsmtp">nachvollziehbare Zustellung von HTML-E-Mails per SMTP</a> aktivieren wollen oder auf Benachrichtigungs-Plugins für Plattformen wie <a href="notifications_teams.html">Microsoft Teams</a> oder <a href="notifications_slack.html">Slack</a> setzen.</p></div>
<div class="paragraph"><p>Beachten Sie aber, dass in dieser Konfiguration keine <a href="notifications.html#bulk">Sammelbenachrichtigungen</a> möglich ist.</p></div>
</div>
<div class="sect3">
<h4 id="heading_simple_mta">
<span class="hidden-anchor sr-only" id="simple_mta"></span>Relay-only oder vollwertiger Mail Transport Agent (MTA)</h4>
<div class="paragraph"><p>Im Regelfall werden Sie wegen der höheren Flexibilität ein E-Mail-System einrichten wollen.
Für kleinere Umgebungen hat sich der <em>relay-only MTA</em> <a href="https://manpages.ubuntu.com/manpages/jammy/man7/nullmailer.7.html" target="_blank">Nullmailer</a> bewährt.</p></div>
<div class="paragraph"><p>Für größere Installationen, bei denen unvorhergesehene Ereignisse auch einige Hundert E-Mails zur Folge haben können, empfehlen wir die Installation eines vollwertigen MTAs wie Postfix.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_add_hosts">
<span class="hidden-anchor sr-only" id="add_hosts"></span>3.5. Hosts ins Monitoring aufnehmen</h3>
<div class="sect3">
<h4 id="heading_pull">
<span class="hidden-anchor sr-only" id="pull"></span>Localhost im Pull-Modus</h4>
<div class="paragraph"><p>In den allermeisten Fällen dürfte der Checkmk-Server selbst der erste Host sein, den Sie <a href="intro_setup_monitor.html#linux">ins Monitoring aufnehmen.</a>
Dazu müssen Sie den Linux-Agenten auf dem Checkmk-Server installieren.
Der Agent kommuniziert mit dem Server im <a href="glossar.html#pull_mode">Pull-Modus</a>.
Wenn Ihnen der Download des Agentenpaketes über die Weboberfläche mit anschließendem Transfer per <code>scp</code> zu umständlich erscheint, können Sie den Agenten in seiner Standardkonfiguration ("Vanilla") direkt aus dem Dateisystem installieren:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>apt<span class="tok-w"> </span>install<span class="tok-w"> </span><span class="tok-k">$(</span>sudo<span class="tok-w"> </span>find<span class="tok-w"> </span>/opt/omd/versions/<span class="tok-w"> </span>-name<span class="tok-w"> </span><span class="tok-s1">'check-mk-agent_*.deb'</span><span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>tail<span class="tok-w"> </span>-n1<span class="tok-k">)</span></code></pre></div></div>
<div class="paragraph"><p>Unmittelbar nach der Installation lauscht der Checkmk-Agent im unverschlüsselten Legacy-Pull-Modus auf Port 6556.
Führen Sie daher zeitnah <a href="intro_setup_monitor.html#register">die Registrierung</a> durch, damit keine unbefugten Dritten auf die Agentenausgabe zugreifen können:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>cmk-agent-ctl<span class="tok-w"> </span>register<span class="tok-w"> </span>--hostname<span class="tok-w"> </span>localhost<span class="tok-w"> </span>--server<span class="tok-w"> </span>localhost<span class="tok-w"> </span>--site<span class="tok-w"> </span>mysite<span class="tok-w"> </span>--user<span class="tok-w"> </span>cmkadmin</code></pre></div></div>
</div>
<div class="sect3">
<h4 id="heading_push">
<span class="hidden-anchor sr-only" id="push"></span>Hosts im Push-Modus</h4>
<div class="paragraph"><p>Sollen Hosts überwacht werden, die hinter einer Firewall nicht direkt vom Checkmk-Server erreicht werden können, ist oft der <a href="glossar.html#push_mode">Push-Modus</a> der bevorzugte Kommunikationsweg.
Sie können den Push-Modus in den Eigenschaften des Hosts im Abschnitt <a href="hosts_setup.html#monitoring_agents">Monitoring agents</a> mit der Option <span class="guihint">Checkmk agent connection mode</span> auswählen.
Alternativ können Sie den Push-Modus auch mit vorkonfigurierten Agentenpaketen für die <a href="hosts_autoregister.html">Autoregistrierung</a> kombinieren und so den Komfort weiter erhöhen.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_update">
<span class="hidden-anchor sr-only" id="update"></span>3.6. Checkmk aktualisieren</h3>
<div class="paragraph"><p>Prüfen Sie die <a href="https://checkmk.com/de/download?method=cmk&amp;edition=cce&amp;version=2.2.0&amp;platform=ubuntu&amp;os=jammy&amp;type=cmk" target="_blank">Download-Seite</a> regelmäßig auf Updates und laden sie das aktualisierte Paket mit dem dort angezeigten <code>wget</code> Kommando herunter.</p></div>
<div class="paragraph"><p>Die <a href="update.html">Installation eines Updates</a> erfolgt in zwei Schritten, was darin begründet liegt, dass mit <code>omd</code> verschiedene Instanzen mit verschiedenen Versionen von Checkmk auf einem Server laufen können.</p></div>
<div class="sect3">
<h4 id="heading_install_new">
<span class="hidden-anchor sr-only" id="install_new"></span>Neue Checkmk-Version installieren und Instanz aktualisieren</h4>
<div class="paragraph"><p>Der erste Schritt ist die Installation des Paketes, im folgenden Beispiel die Version <span class="new">2.2.0</span>p2:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>apt<span class="tok-w"> </span>install<span class="tok-w"> </span>./check-mk-cloud-2.2.0p2_0.jammy_amd64.deb</code></pre></div></div>
<div class="paragraph"><p>Der nächste Schritt ist das Update Ihrer Instanz(en):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>stop<span class="tok-w"> </span>mysite
<span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>update<span class="tok-w"> </span>mysite
<span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>omd<span class="tok-w"> </span>start<span class="tok-w"> </span>mysite</code></pre></div></div>
</div>
<div class="sect3">
<h4 id="heading_remove_old">
<span class="hidden-anchor sr-only" id="remove_old"></span>Nicht mehr benötigte Pakete entfernen</h4>
<div class="paragraph"><p>Falls Sie mehrere Instanzen auf dem Server nutzen (beispielsweise eine produktiv genutzte und eine für den Test von Erweiterungen), stellen Sie sicher, dass alle aktualisiert sind:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>omd<span class="tok-w"> </span>sites
<span class="tok-go">SITE         VERSION       COMMENTS</span>
<span class="tok-go">mysite       2.2.0p2.cce   default version</span>
<span class="tok-go">mytestsite   2.2.0p2.cce   default version</span></code></pre></div></div>
<div class="paragraph"><p>Nicht mehr genutzte Checkmk-Versionen können Sie dann über das Ubuntu-Paketmanagement deinstallieren:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>apt<span class="tok-w"> </span>purge<span class="tok-w"> </span>check-mk-cloud-2.2.0p1</code></pre></div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_aftermath">
<span class="hidden-anchor sr-only" id="aftermath"></span>4. Nachbereitung</h2>
<div class="sectionbody"><div class="sect2">
<h3 id="heading_backup">
<span class="hidden-anchor sr-only" id="backup"></span>4.1. Backup einrichten</h3>
<div class="paragraph"><p>Checkmk bietet eine komfortable <a href="backup.html">Backup-Funktion</a>, die Sie unter <span class="guihint">Setup &gt; Maintenance &gt; Backups  &gt; Backup targets</span> konfigurieren.
Mit <span class="guihint">Add backup target</span> fügen Sie einen Speicherort hinzu.
Hier bietet es sich an, wegen des schnellen und günstigen Transfers als <span class="guihint">Destination</span> den <span class="guihint">Azure Blob Storage</span> zu wählen.</p></div>
<div class="paragraph"><p>Neben den müssen Sie einen Ordnerpfad angeben, in dem die Zwischenspeicherung des Archivs vorgenommen wird, bevor dieses in den Objektspeicher kopiert wird.
Dies kann unter <code>/tmp</code> sein.
Falls Ihre Azure VM unter <code>/mnt</code> ein flüchtiges <em>(ephemeral)</em> Laufwerk bereitstellt, können Sie auch hier ein Verzeichnis als Zwischenspeicher erstellen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>mkdir<span class="tok-w"> </span>-p<span class="tok-w"> </span>/mnt/backup/mysite</code></pre></div></div>
<div class="paragraph"><p>Damit der Instanzbenutzer in dieses Verzeichnis schreiben kann, müssen sie es ihm übereignen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">ubuntu@cloud:~$ </span>sudo<span class="tok-w"> </span>chown<span class="tok-w"> </span>mysite:mysite<span class="tok-w"> </span>/mnt/backup/mysite</code></pre></div></div>
<div class="sect3">
<h4 id="heading_restore">
<span class="hidden-anchor sr-only" id="restore"></span>Vorgehen beim Restore</h4>
<div class="paragraph"><p>Das <a href="backup.html#backup_restore">Restore eines Backups</a> muss immer auf exakt derselben Version von Checkmk erfolgen wie dessen Erstellung.
Soll ein Backup dazu dienen, auf einen anderen Typ der virtuellen Maschine, zu einem anderen Cloud-Anbieter oder von einer <em>On Premise Installation</em> in die Cloud (oder andersherum) umzuziehen, aktualisieren Sie <em>vor</em> dem finalen Backup und dem Umzug auf das höchste verfügbare Patchlevel von Checkmk.</p></div>
<div class="paragraph"><p>Für das Restore eines Backups gilt damit:</p></div>
<div class="olist arabic"><ol class="arabic">
<li><p>Installieren Sie auf dem Zielsystem exakt die Version von Checkmk, mit der das Backup erstellt wurde.</p></li>
<li><p>Erstellen Sie mit <code>omd create</code> eine Monitoring-Instanz, die denselben Instanznamen wie das Ursprungssystem nutzt.</p></li>
<li><p>Geben Sie das Backup-Ziel an und laden Sie den Backup-Schlüssel hoch.</p></li>
<li><p>Führen Sie das eigentliche Restore durch.</p></li>
</ol></div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_monitoring_azure">
<span class="hidden-anchor sr-only" id="monitoring_azure"></span>5. Azure überwachen</h2>
<div class="sectionbody"><div class="paragraph"><p>Checkmk bietet nicht nur die Verfügbarkeit als Azure-Image, sondern auch umfangreiche Möglichkeiten der <a href="monitoring_azure.html">Überwachung Ihrer Azure-Infrastruktur.</a>
Selbst wenn Checkmk Ihr erstes oder einziges Azure-Projekt sein sollte, lohnt bereits die Überwachung der Leistung der virtuellen Maschine, des Zustand der Backup-Vaults und der Höhe der anfallenden Kosten.</p></div></div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li>
<a href="#welcome">1. Willkommen bei Checkmk für Azure</a><ul class="sectlevel1"><li><a href="#basics">1.1. Grundsätzliches</a></li></ul>
</li>
<li>
<a href="#preparation">2. Vorbereitung</a><ul class="sectlevel1">
<li><a href="#ssh_keys">2.1. SSH-Schlüssel erstellen</a></li>
<li><a href="#ports">2.2. Benötigte Ports ermitteln</a></li>
<li><a href="#book_vm">2.3. Image im Marketplace buchen</a></li>
<li><a href="#book_backup">2.4. Backup-Speicher buchen</a></li>
</ul>
</li>
<li>
<a href="#setup">3. Einrichtung</a><ul class="sectlevel1">
<li><a href="#login">3.1. Login auf der virtuellen Maschine</a></li>
<li><a href="#create_site">3.2. Instanz aufsetzen</a></li>
<li><a href="#ssl_certs">3.3. Zertifikate hinterlegen</a></li>
<li>
<a href="#mta">3.4. E-Mail-System einrichten</a><ul class="sectlevel2">
<li><a href="#no_mta">Checkmk ohne E-Mail-System</a></li>
<li><a href="#simple_mta">Relay-only oder vollwertiger Mail Transport Agent (MTA)</a></li>
</ul>
</li>
<li>
<a href="#add_hosts">3.5. Hosts ins Monitoring aufnehmen</a><ul class="sectlevel2">
<li><a href="#pull">Localhost im Pull-Modus</a></li>
<li><a href="#push">Hosts im Push-Modus</a></li>
</ul>
</li>
<li>
<a href="#update">3.6. Checkmk aktualisieren</a><ul class="sectlevel2">
<li><a href="#install_new">Neue Checkmk-Version installieren und Instanz aktualisieren</a></li>
<li><a href="#remove_old">Nicht mehr benötigte Pakete entfernen</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#aftermath">4. Nachbereitung</a><ul class="sectlevel1"><li>
<a href="#backup">4.1. Backup einrichten</a><ul class="sectlevel2"><li><a href="#restore">Vorgehen beim Restore</a></li></ul>
</li></ul>
</li>
<li><a href="#monitoring_azure">5. Azure überwachen</a></li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>
